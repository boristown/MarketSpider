// File: earnings_chart.js
var EarningChart=function(a,b,c,d,e){var f=2,g={},h="",i="eChartToolTip";e&&(i=e);var j=function(a){var b={B:1e9,M:1e6,K:1e3},c=0,d=a<0;a=Math.abs(a);for(var e in b)if(a>=b[e])return c=new Number(a/b[e]),"$"+(d?"-":"")+c.toFixed(2)+e;return c=new Number(a),"$"+(d?"-":"")+c.toFixed(2)},k=function(a,b,c){return'<div class="chartsTooltipGroupRow">\n\t\t\t\t\t<span class="chartsTooltipCell"><span class="inlineblock middle" style="background-color:'+c+'; width: 8px; height: 8px; margin: -2px 0px 0px 5px;">&nbsp;</span></span>\n\t\t\t\t\t<span class="chartsTooltipCell bold text_align_lang_base_1">'+b+'</span>\n\t\t\t\t\t<span class="chartsTooltipCell bold '+(d?"dirRtl":"dirLtr")+' text_align_lang_base_2 value">'+a+"</span>\n\t\t\t\t</div>"},l=function(a,b,c){var d=c.plotY-b+30;return d<0&&(d+=b),{x:c.plotX+a/4,y:d}},m=function(){var a=h,b="";a.find(".x_value").html(this.x);for(var c=0;c<this.points.length;c++){var d=this.points[c],e=0;e=d.point.low&&d.point.high?d.point.high:d.y,e=void 0===e?"--":j(e),b+=k(e,d.series.name,d.series.color)}return a.find(".chartsTooltipGroupBody").each(function(){this.innerHTML=b}),a.html()};this.getChart=function(){return g};var n=function(a,b,c,d){return{name:a,type:"coline",borderWidth:0,height:f,yAxis:c,data:b,color:d}},o=function(a,b,c,d){return{name:a,type:"column",yAxis:c,data:b,color:d}};!function(){h=$("#"+i),g={chart:{marginTop:23},title:{text:""},tooltip:{formatter:m,positioner:l,shared:!0,useHTML:!0,borderColor:"#ababab",backgroundColor:"rgba(0,0,0,0)",borderRadius:0,borderWidth:0,shadow:!1},xAxis:[{categories:a.categories,crosshair:!0,lineColor:c.xAxis,lineWidth:1,tickColor:c.xAxis,tickLength:6,labels:{y:10,x:d?-10:15,rotation:-45,style:{color:c.categories,fontSize:"12px",fontFamily:"calibri,arial",direction:d?"ltr":""}}}],yAxis:[{title:{text:b.Revenue,style:{color:c.Revenue,fontFamily:"arial"}},offset:0,lineWidth:1,lineColor:c.yAxis,gridLineColor:c.gridLines,labels:{formatter:function(){return j(this.value)},style:{color:c.labels,fontFamily:"arial"},align:"right"}},{title:{text:b.EPS,style:{color:c.EPS,fontFamily:"arial"}},offset:0,lineWidth:1,lineColor:c.yAxis,gridLineColor:c.gridLines,labels:{formatter:function(){return j(this.value)},style:{color:c.labels,fontFamily:"arial"},align:"left"},opposite:!0}],legend:{enabled:!1},exporting:{enabled:!1},credits:{enabled:!1},series:[o(b.Revenue,a.Revenue,0,c.Revenue),n(b.RevenueForecast,a.RevenueForecast,0,c.RevenueForecast),o(b.EPS,a.EPS,1,c.EPS),n(b.EPSForecast,a.EPSForecast,1,c.EPSForecast)]}}()};
// File: fpcharts.js
if(!FPCharts||"object"!=typeof FPCharts)var FPCharts={};FPCharts.charts&&"object"==typeof FPCharts.charts||(FPCharts.charts={}),FPCharts.Utils&&"object"==typeof FPCharts.Utils||(FPCharts.Utils={}),FPCharts.tmp&&"object"==typeof FPCharts.tmp||(FPCharts.tmp={}),FPCharts.tmp.intervals&&"object"==typeof FPCharts.tmp.intervals||(FPCharts.tmp.intervals={}),FPCharts.tmp.translations&&"object"==typeof FPCharts.tmp.translations||(FPCharts.tmp.translations={}),FPCharts.Utils.formatBigNumber=function(a,b,c){return isNaN(a)?a:(b=b||0,a<9999?a:a<1e6?(a/1e3).toFixed(b)+(c?"K":""):a<1e9?(a/1e6).toFixed(b)+(c?"M":""):a<1e12?(a/1e9).toFixed(b)+(c?"B":""):"1T+")},FPCharts.Utils.roundBigNumber=function(a){var b=a.toString().split(".")[0],c=5*Math.pow(10,(b+"").length-2);return Math.ceil(a/c)*c},FPCharts.Utils.register_chart=function(a,b){b=b||"js_instrument_chart";var c=FPCharts.charts,d=a.data.attr.pair_id,e=a.data.attr.interval;return"object"!=typeof c[b]&&(c[b]={}),"object"!=typeof c[b][d]&&(c[b][d]={}),c[b][d][e]instanceof Array||(c[b][d][e]=[]),c[b][d][e].push(a),$(window).trigger("FPChartsRegister",{chart:a,group:b,pair_id:d,interval:e}),a},FPCharts.Utils.destroy_chart=function(a,b){if(void 0===b)var b="js_instrument_chart";a.instance.destroy();var c=FPCharts.charts,d=a.data.attr,e=d.pair_id,f=d.interval;if("object"==typeof c[b]&&"object"==typeof c[b][e]&&c[b][e][f]instanceof Array&&c[b][e][f].length>0)for(var g in c[b][e][f])c[b][e][f].hasOwnProperty(g)&&c[b][e][f][g]===a&&c[b][e][f].splice(g,1);if(void 0!==c[b]&&void 0!==c[b][e]&&void 0!==c[b][e][f]&&0===c[b][e][f].length){delete c[b][e][f];var h=0;for(var i in c[b][e])c[b][e].hasOwnProperty(i)&&h++;0===h&&delete c[b][e]}},FPCharts.Utils.update_charts=function(a,b){var c=FPCharts.charts[b];if("object"!=typeof c)return!1;for(pair_id in a)if(a.hasOwnProperty(pair_id)){if("object"!=typeof c[pair_id]||"object"!=typeof a[pair_id])continue;for(interval in a[pair_id])if(a[pair_id].hasOwnProperty(interval)){if(!(c[pair_id][interval]instanceof Array)||"object"!=typeof a[pair_id][interval])continue;for(chart_id in c[pair_id][interval])if(c[pair_id][interval].hasOwnProperty(chart_id)){var d=c[pair_id][interval][chart_id];if("function"==typeof d.update)try{d.update(a[pair_id][interval])}catch(e){}}}}},FPCharts.Utils.enrich_refresher_params=function(a){var b=[],c=a.hasOwnProperty("group")?a.group:"js_instrument_chart",d=this._get_types(c),e=FPCharts.charts;for(var f in d){var g=d[f].pair_id,h=d[f].interval;if("object"==typeof e[c]&&"object"==typeof e[c][g]&&e[c][g][h]instanceof Array&&0!==e[c][g][h].length){var i=e[c][g][h][0],j=i.data.attr.exchange_id,k=i.data.attr.symbol,l=[g,h,j,k,f];b.push(encodeURIComponent(JSON.stringify(l)))}}return Highcharts.merge(a,{fpcharts:b})},FPCharts.Utils.get_translation=function(a){var b=FPCharts.tmp.translations[a];return"string"==typeof b?b:a},FPCharts.Utils.set_translation=function(a,b){return FPCharts.tmp.translations[a]=b},FPCharts.Utils._get_types=function(a){var b=FPCharts.charts[a],c=[];for(pair_id in b)if(b.hasOwnProperty(pair_id)&&"object"==typeof b[pair_id])for(interval in b[pair_id])b[pair_id].hasOwnProperty(interval)&&"object"==typeof b[pair_id][interval]&&c.push({pair_id:pair_id,interval:interval});return c};
// File: highcharts.fputils.js
"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),Highcharts.FPUtils={getDateFormat:function(a){return a=Number(a),a<86400?"%d/%m/%Y %H:%M":"%d/%m/%Y"},new_chart:function(){return{toggleFlags:function(a){var b=this;$.each(b.series,function(){"flags"==this.type&&(!0===this.visible?this.hide():this.show())}),a.config.show_flags="yes"===a.config.show_flags?"no":"yes"},totalFlags:function(){var a,b,c,d=this,e=0;for(b in d.series)if(a=d.series[b],"flags"===a.options.type)for(c in a.data)e++;return e}}},new_stock_chart:function(){var a=Object.create(this.new_chart());return a.init=function(){return Highcharts.setOptions({lang:{decimalPoint:this.config.decimal_point||".",thousandsSep:this.config.thousands_sep||","}}),this.instance=new Highcharts.StockChart(this.options),this},a},new_instrument_chart:function(){var a=Object.create(this.new_stock_chart());return a.draw_yaxis_line=function(a,b,c,d){if(!a.series)return!1;if(!c)return!1;var e=this,f=(a.renderer,a.plotWidth,{color:"#d95151",style:"Solid"});return!!e.data.renderTooltips&&(d=Highcharts.merge(f,d),a.yAxis[0].removePlotLine(c),a.yAxis[0].addPlotLine({color:d.color,dashStyle:d.style,width:1,value:b,id:c,zIndex:d.zIndex||4}),e)},a.draw_last_volume_value_label=function(a){return!1},a.draw_last_close_value_line=function(a){var b=this.data.attr.last_close_value,c=this.getYaxisExtremes.call(a);return b>c.real_max||b<c.real_min?this:(this.draw_yaxis_line(a,b,"last_close_value_line",{zIndex:3}),this)},a.draw_yaxis_label_line=function(a,b){if(!a.series)return!1;var c=this,d=a.renderer,e=a.plotWidth+1,f=a.yAxis[0].height-a.yAxis[0].translate(b)-7,g=a.plotWidth+3,h=3,i=c.options.chart.width-1-a.plotWidth,j=c.data.attr.decimals,k=window.sideblockChartColorOverride||"#333";a.margin&&a.margin[0]&&(f+=a.margin[0]),c.last_yaxis_current_value_rectangle&&c.last_yaxis_current_value_rectangle.added&&c.last_yaxis_current_value_rectangle.destroy(),c.last_yaxis_current_value_rectangle=d.rect(0,0,i,20,0).attr({fill:k,stroke:k,"stroke-width":1,x:e,y:f,height:15,zIndex:2}).add(),a.yAxis[0].removePlotLine("current_value");var l=Highcharts.numberFormat(c.data.attr.last_value,j);return a.yAxis[0].addPlotLine({color:k,dashStyle:"Solid",width:1,value:b,id:"current_value",zIndex:4,label:{text:l,style:{fontSize:c.config.fontsize,fontFamily:"Arial, sans-serif",color:"#fff"},x:g,y:h,rotation:0}}),c},a.has_volumes=function(){return this.data.attr.total_volumes>0},a.focus=function(a,b,c){var d=a.instance,e=d.renderer,f=this.points?this.points[0].series.name:"",g=d.xAxis[0].translate(b),h=parseInt(a.config.fontsize,10),i=2*h,j=g<50?1:d.plotLeft+g-50,k=d.plotTop+d.yAxis[0].height,l=g<50?50-g:0,m=1.5*h,n=2*h,o=d.plotWidth+1,p=d.yAxis[0].height-d.yAxis[0].translate(c)-h,q=d.options.chart.width-1-d.plotWidth,r=d.plotWidth+(d.options.chart.width-d.plotWidth)/2-1,s=4;if(d.margin&&d.margin[0]&&(p+=d.margin[0]),a.has_volumes()){for(var t,u,v=0;v<a.data.volumes.length;v+=1)if(a.data.volumes[v].x===b){t=a.data.volumes[v].y;break}u=d.yAxis[1].top+d.yAxis[1].height-d.yAxis[1].translate(t)-h}if(1===a.data.candles.length)return!1;if(a.last_xaxis_rectangle&&a.last_xaxis_rectangle.added&&a.last_xaxis_rectangle.destroy(),d.xAxis[0].removePlotLine("xline"),a.last_yaxis_rectangle&&a.last_yaxis_rectangle.added&&a.last_yaxis_rectangle.destroy(),d.yAxis[0].removePlotLine("yline"),a.has_volumes()&&(d.xAxis[1].removePlotLine("xline-volume"),a.last_volume_yaxis_rectangle&&a.last_volume_yaxis_rectangle.added&&a.last_volume_yaxis_rectangle.destroy(),d.yAxis[1].removePlotLine("yline-volume")),"dummy"==f||"dummy-volume"==f)return!1;if(a.data.renderTooltips){a.last_xaxis_rectangle=e.rect(0,0,100,i,0).attr({fill:"#fff",stroke:"#77a2d5","stroke-width":1,x:j,y:k,zIndex:3}).add();var w=Highcharts.dateFormat(Highcharts.FPUtils.getDateFormat(a.data.attr.interval),this.x);d.xAxis[0].addPlotLine({color:"#77a2d5",width:1,value:this.x,id:"xline",label:{text:w,verticalAlign:"bottom",textAlign:"center",style:{fontSize:a.config.fontsize,fontFamily:"Arial, sans-serif",color:"#000000"},y:m,x:l,rotation:0},zIndex:3})}a.has_volumes()&&(a.last_volume_yaxis_rectangle=e.rect(0,0,q,n,0).attr({fill:"#fff",stroke:"#77a2d5","stroke-width":1,x:o,y:u,zIndex:3}).add(),d.yAxis[1].addPlotLine({color:"#77a2d5",width:1,value:t,id:"yline-volume",label:{text:FPCharts.Utils.formatBigNumber(t,1,!0),verticalAlign:"bottom",textAlign:"center",style:{fontSize:a.config.fontsize,fontFamily:"Arial, sans-serif",color:"#000000"},y:s,x:r,rotation:0},zIndex:3})),this.points&&a.data.renderTooltips&&(a.last_yaxis_rectangle=e.rect(0,0,q,n,0).attr({fill:"#fff",stroke:"#77a2d5","stroke-width":1,x:o,y:p,zIndex:15}).add(),d.yAxis[0].addPlotLine({color:"#77a2d5",width:1,value:c,id:"yline",label:{text:Highcharts.numberFormat(c,a.data.attr.decimals),verticalAlign:"bottom",textAlign:"center",style:{fontSize:a.config.fontsize,fontFamily:"Arial, sans-serif",color:"#000000"},y:s,x:r,rotation:0},zIndex:15}))},a.update=function(a){if(!this.instance.series)return!1;var b=this,c=b.instance,d=b.data.attr.local_time_offset,e=parseFloat(a.chart_data.last_value),f=parseFloat(a.chart_data.last_close_value),g=a.chart_data.candles.last_candle,h=a.chart_data.candles.previous_candle,i=(parseFloat(h.volume),parseFloat(g.start_timestamp),parseFloat(h.start_timestamp),parseFloat(g.start_timestamp),parseFloat(g.volume)),j=parseFloat(g.vol_open),k=typeof a.chart_data.last_value;return isNaN(a.chart_data.last_value)?(console.warn('Please note, for some reason I got last_value ("'+a.chart_data.last_value+'") which is not a number, but '+k),!1):(b.data.attr.last_value=e,b.data.attr.last_close_value=f,"function"==typeof b.process_update_object&&b.process_update_object(a),c.series[0].setData(b.data.candles,!0),b.data.candles[b.data.candles.length-1].volume=i,b.data.candles[b.data.candles.length-1].vol_open=j,b.has_volumes()&&(c.series[3].setData(b.data.volumes,!0),"function"==typeof b.draw_last_volume_value_label&&b.draw_last_volume_value_label(c)),"function"==typeof b.draw_last_value_line&&1===b.config.last_value_line&&b.draw_last_value_line(c),"function"==typeof b.draw_last_close_value_line&&1===b.config.last_close_value_line&&b.draw_last_close_value_line(c),"function"==typeof b.onUpdate&&b.onUpdate(a),b)},a.getVolumeYaxisExtremes=function(){var a,b=null,c=null,d=this.data.volumes;for(var e in d)d.hasOwnProperty(e)&&(a=d[e].y,(a>c||!c)&&(c=a),(a<b||!b)&&(b=a));return{min:b,max:c}},a.polish_options=function(a){var b,c=this,d=a.yAxis.length;for(b=0;b<d;b+=1)a.yAxis[b]=Highcharts.merge({labels:{formatter:function(){return Highcharts.numberFormat(this.value,c.data.attr.decimals)},style:{color:"#000",fontSize:c.config.fontsize,fontFamily:"Arial, sans-serif"}},gridLineColor:"#fafafa",gridLineWidth:1},a.yAxis[b]);return a},a.return_instrument_chart_default_options=function(){var a=this;return{chart:{renderTo:"chart-container",events:{load:function(){var b=this,c=$("#"+a.options.chart.renderTo);c.unbind("mouseleave"),c.bind("mouseleave",function(){a.last_xaxis_rectangle&&a.last_xaxis_rectangle.added&&a.last_xaxis_rectangle.destroy(),b.xAxis[0].removePlotLine("xline"),a.last_yaxis_rectangle&&a.last_yaxis_rectangle.added&&a.last_yaxis_rectangle.destroy(),b.yAxis[0].removePlotLine("yline"),a.has_volumes()&&(a.last_volume_yaxis_rectangle&&a.last_volume_yaxis_rectangle.added&&a.last_volume_yaxis_rectangle.destroy(),b.yAxis[1].removePlotLine("yline-volume"),b.xAxis[1].removePlotLine("xline-volume"))}),1===a.config.last_value_line&&a.draw_last_value_line(b),1===a.config.last_close_value_line&&a.draw_last_close_value_line(b),a.has_volumes()&&a.draw_last_volume_value_label(b),"function"==typeof a.onLoad&&a.onLoad.call(b,a)}},style:{fontFamily:"Arial, sans-serif"},width:630,height:330,plotBorderWidth:1,plotBorderColor:"#e7eaef",spacingBottom:10,spacingTop:0,spacingLeft:1,spacingRight:0},credits:{enabled:!1},navigator:{enabled:!1},scrollbar:{enabled:!1},rangeSelector:{enabled:!1},exporting:{enabled:!1},plotOptions:{candlestick:{color:"#fe3232",upColor:"#32ea32",pointPadding:.25,dataGrouping:{enabled:!1}},area:{lineWidth:1,lineColor:"rgb(132, 178, 218)",color:"rgb(0, 96, 152)",fillOpacity:1,states:{hover:{lineWidth:1}},fillColor:"rgba(0, 96, 152, 0.1)"},column:{animation:!1},series:{enableMouseTracking:!0,stickyTracking:!0},xAxis:{}},series:[],tooltip:{useHTML:!0,formatter:function(){return!1},positioner:function(a,b,c){var d=20;return c.plotX>this.chart.plotWidth-a-d&&(d=-a-d),c.plotX+=d,c.plotY<5&&(c.plotY=5),{x:c.plotX,y:c.plotY}},style:{fontSize:"11px",fontFamily:"Arial, sans-serif",padding:0},borderWidth:0,borderRadius:0,crosshairs:[!1,!1]}}},a},new_candlestick_chart:function(a,b,c,d,e){if("object"!=typeof a)return!1;var f=Object.create(this.new_instrument_chart()),g=Object.create(f);return g.data=a,g.config=Highcharts.merge({last_close_value_line:1,fontsize:"10px",show_flags:"yes"},e),g.onLoad=function(a){var b=this,d=a.getYaxisExtremes.call(b);b.yAxis[0].setExtremes(d.min,d.max,!0,!1),d=a.getYaxisExtremes.call(b),b.yAxis[0].setExtremes(d.min,d.max,!0,!1),d=a.getYaxisExtremes.call(b),b.yAxis[0].setExtremes(d.min,d.max,!0,!1),d=a.getYaxisExtremes.call(b),b.yAxis[0].setExtremes(d.min,d.max,!0,!1),1===a.config.last_value_line&&a.draw_last_value_line(b),1===a.config.last_close_value_line&&a.draw_last_close_value_line(b),"yes"!==a.config.show_flags&&a.toggleFlags.call(b,a),c.call(b,a)},g.onUpdate=d,g.options=g.polish_options(Highcharts.merge(g.return_instrument_chart_default_options(),{tooltip:{formatter:function(){var b,c;if(this.points&&this.points.length)c=this.points[0].series,b=this.points[0].point,b.close=b.close||b.y;else{if(!this.point)return!1;c=this.series,b=this.point,b.close=b.close||b.y}var d=this.x,e=b.close||0,f="";if(1===g.data.candles.length)return!1;if(g.focus.apply(this,[g,d,e]),"dummy"==c.name||"dummy-volume"==c.name)return"";if(this.points){var h;if(g.has_volumes())for(var i in a.volumes)a.volumes[i].x==this.x&&0!=a.volumes[i].y&&(h=FPCharts.Utils.formatBigNumber(g.data.volumes[i].y,1,!0));var j=Highcharts.numberFormat(b.open,a.attr.decimals),k=Highcharts.numberFormat(b.high,a.attr.decimals),l=Highcharts.numberFormat(b.low,a.attr.decimals),m=Highcharts.numberFormat(b.close,a.attr.decimals),n=typeof FPCharts.Utils.get_translation,o="function"===n?FPCharts.Utils.get_translation("Open"):"Open",p="function"===n?FPCharts.Utils.get_translation("High"):"High",q="function"===n?FPCharts.Utils.get_translation("Low"):"Low",r="function"===n?FPCharts.Utils.get_translation("Close"):"Close",s="function"===n?FPCharts.Utils.get_translation("Volume"):"Volume",t=Highcharts.dateFormat(Highcharts.FPUtils.getDateFormat(g.data.attr.interval),d);f+='<table class="candle-tooltip-container">',f+='<tr><td class="candle-heading" colspan="2">'+t+"</td></tr>",f+="<tr>",f+='<td class="candle-title">'+o+":</td>",f+='<td class="candle-value">&nbsp;'+j+"</td>",f+="</tr>",f+="<tr>",f+='<td class="candle-title">'+p+":</td>",f+='<td class="candle-value">&nbsp;'+k+"</td>",f+="</tr>",f+="<tr>",f+='<td class="candle-title">'+q+":</td>",f+='<td class="candle-value">&nbsp;'+l+"</td>",f+="</tr>",f+="<tr>",f+='<td class="candle-title">'+r+":</td>",f+='<td class="candle-value">&nbsp;'+m+"</td>",f+="</tr>",void 0!==h&&null!==h&&(f+="<tr>",f+='<td class="candle-title">'+s+":</td>",f+='<td class="candle-value">&nbsp;'+h+"</td>",f+="</tr>"),f+="</table>"}else f+=b.text;return f}}},b)),f.draw_last_value_line=function(a){var b=this.data.candles.length,c=this.data.candles[b-1][4]||this.data.candles[b-1].close;return this.draw_yaxis_label_line(a,c),this},f.process_update_object=function(a){var b=this,c=b.instance,d=b.data.attr.local_time_offset,e=(parseFloat(b.data.attr.interval),parseFloat(a.chart_data.last_value),parseFloat(a.chart_data.last_close_value),a.chart_data.candles.last_candle),f=1e3*parseFloat(e.start_timestamp)+d,g=parseFloat(e.open),h=parseFloat(e.max),i=parseFloat(e.min),j=parseFloat(e.close),k=a.chart_data.candles.previous_candle,l=1e3*parseFloat(k.start_timestamp)+d,m=parseFloat(k.open),n=parseFloat(k.max),o=parseFloat(k.min),p=parseFloat(k.close),q=b.data.candles[b.data.candles.length-1],r=q[0]||q.x,s=q[2]||q.high,t=q[3]||q.low,u=q[4]||q.close,v=r===f?3:2,w=b.data.candles[b.data.candles.length-v],x=w[4]||w.close,y=[l,m,n,o,p],z=[f,g,h,i,j];if(b.has_volumes())var A=parseFloat(e.volume),B=parseFloat(k.volume),C=q[5]||q.volume,D={borderColor:p>x?"#4ea268":"#a55f55",color:p>x?"#a5d6b6":"#e06c6c",x:l,y:B},E={borderColor:j>p?"#4ea268":"#a55f55",color:j>p?"#a5d6b6":"#e06c6c",x:f,y:A};if(f==r)i==t&&h==s&&j==u||(b.data.candles[b.data.candles.length-1]=z),b.has_volumes()&&A!=C&&(b.data.volumes[b.data.volumes.length-1]=E);else{var F=b.data.candles[0][0]||b.data.candles[0].x;b.data.events;b.data.candles[b.data.candles.length-1]=y,b.data.candles.push(z),b.has_volumes()&&(b.data.volumes[b.data.volumes.length-1]=D,b.data.volumes.push(E));var G,H,I;for(H in c.series)if(G=c.series[H],"flags"===G.options.type)for(I in G.data)G.data[I].x==F&&G.data[I].remove();setTimeout(function(){b.data.candles.shift()},1),b.has_volumes()&&b.data.volumes.shift()}var J=b.getYaxisExtremes.call(c);c.yAxis[0].setExtremes(J.min,J.max,!0,!1),J=b.getYaxisExtremes.call(c),c.yAxis[0].setExtremes(J.min,J.max,!0,!1),J=b.getYaxisExtremes.call(c),c.yAxis[0].setExtremes(J.min,J.max,!0,!1),J=b.getYaxisExtremes.call(c),c.yAxis[0].setExtremes(J.min,J.max,!0,!1);var K=c.options.plotOptions.candlestick.color,L=c.options.plotOptions.candlestick.upColor,M=b.instance.series[0].points.length-1,N=b.instance.series[0].points[M];if(j>g&&(N.pointAttr[""].fill=L,N.pointAttr.hover.fill=L,N.setState("",!0)),j<g&&(N.pointAttr[""].fill=K,N.pointAttr.hover.fill=K,N.setState("",!0)),b.has_volumes()){var O=b.getVolumeYaxisExtremes(),P=1.1*O.max;c.yAxis[1].setExtremes(0,P,!1,!1)}return this},g.getYaxisExtremes=function(){var a,b,c=this.yAxis[0],d=null,e=null,f=g.data.candles,h=(g.data.attr.last_close_value,g.data.attr.last_value);for(var i in f)f.hasOwnProperty(i)&&(a=f[i][2]||f[i].high,b=f[i][3]||f[i].low,(a>e||!e)&&(e=a),(b<d||!d)&&(d=b));return h<d?d=h:h>e&&(e=h),{min:c.translate(c.translate(d)-10,!0),max:c.translate(c.translate(e)+10,!0),real_min:d,real_max:e}},g},new_area_chart:function(a,b,c,d,e){if("object"!=typeof a)return!1;var f=Object.create(this.new_instrument_chart()),g=Object.create(f);return g.data=a,g.config=Highcharts.merge({last_close_value_line:1,fontsize:"10px",show_flags:"yes"},e),g.onLoad=function(a){console.log("onLoad");var b=this,d=a.getYaxisExtremes.call(b);b.yAxis[0].setExtremes(d.min,d.max,!0,!1),d=a.getYaxisExtremes.call(b),b.yAxis[0].setExtremes(d.min,d.max,!0,!1),d=a.getYaxisExtremes.call(b),b.yAxis[0].setExtremes(d.min,d.max,!0,!1),d=a.getYaxisExtremes.call(b),b.yAxis[0].setExtremes(d.min,d.max,!0,!1),d=a.getYaxisExtremes.call(b),b.yAxis[0].setExtremes(d.min,d.max,!0,!1),1===a.config.last_value_line&&a.draw_last_value_line(b),1===a.config.last_close_value_line&&a.draw_last_close_value_line(b),"yes"!==a.config.show_flags&&a.toggleFlags.call(b,a),c.call(b,a)},g.onUpdate=d,g.options=g.polish_options(Highcharts.merge(g.return_instrument_chart_default_options(),{tooltip:{formatter:function(){var a,b;if(this.points&&this.points.length)a=this.points[0].point,b=this.points[0].series;else{if(!this.point)return"";a=this.point,b=a.series}return g.focus.apply(this,[g,a.x,a.y]),"dummy"==b.name||"dummy-volume"==b.name?"":a.text||""}}},b)),f.draw_last_value_line=function(a){var b=this.data.candles.length,c=this.data.candles[b-1][1]||this.data.candles[b-1].y;return this.draw_yaxis_label_line(a,c),this},f.process_update_object=function(a){var b=this,c=b.instance,d=b.data.attr.local_time_offset,e=(parseFloat(b.data.attr.interval),parseFloat(a.chart_data.last_value)),f=(parseFloat(a.chart_data.last_close_value),a.chart_data.candles.last_candle),g=1e3*parseFloat(f.start_timestamp)+d,h=e,i=a.chart_data.candles.previous_candle,j=1e3*parseFloat(i.start_timestamp)+d,k=parseFloat(i.close),l=b.data.candles[b.data.candles.length-1],m=l[0]||l.x,n=l[1]||l.y,o=m===g?3:2,p=b.data.candles[b.data.candles.length-o],q=p[1]||p.y,r=[j,k],s=[g,h];if(b.has_volumes()){var t=parseFloat(f.volume),u=parseFloat(f.vol_open),v=parseFloat(i.volume),w=parseFloat(i.vol_open),x=l[2]||l.volume,y={borderColor:k>q?"#4ea268":"#a55f55",color:k>q?"#a5d6b6":"#e06c6c",x:j,y:v},z={borderColor:h>k?"#4ea268":"#a55f55",color:h>k?"#a5d6b6":"#e06c6c",x:g,y:t};r.push(v,w),s.push(t,u)}if(g==m)h!=n&&(b.data.candles[b.data.candles.length-1]=s),b.has_volumes()&&t!=x&&(b.data.volumes[b.data.volumes.length-1]=z);else{var A=b.data.candles[0][0]||b.data.candles[0].x;b.data.events;b.data.candles[b.data.candles.length-1]=r,b.data.candles.push(s),b.has_volumes()&&(b.data.volumes[b.data.volumes.length-1]=y,b.data.volumes.push(z));var B,C,D;for(C in c.series)if(B=c.series[C],"flags"===B.options.type)for(D in B.data)B.data[D].x==A&&B.data[D].remove();b.data.candles.shift(),b.has_volumes()&&b.data.volumes.shift()}var E=b.getYaxisExtremes.call(c);if(c.yAxis[0].setExtremes(E.min,E.max,!0,!1),E=b.getYaxisExtremes.call(c),c.yAxis[0].setExtremes(E.min,E.max,!0,!1),E=b.getYaxisExtremes.call(c),c.yAxis[0].setExtremes(E.min,E.max,!0,!1),E=b.getYaxisExtremes.call(c),c.yAxis[0].setExtremes(E.min,E.max,!0,!1),b.has_volumes()){var F=b.getVolumeYaxisExtremes(),G=1.1*F.max;c.yAxis[1].setExtremes(0,G,!1,!1)}return this},g.getYaxisExtremes=function(){var a,b=this.yAxis[0],c=null,d=null,e=g.data.candles,f=(g.data.attr.last_close_value,g.data.attr.last_value);for(var h in e)e.hasOwnProperty(h)&&(a=e[h][1]||e[h].y,(a>d||!d)&&(d=a),(a<c||!c)&&(c=a));return f<c&&(c=f),f>d&&(d=f),{min:b.translate(b.translate(c)-10,!0),max:b.translate(b.translate(d)+10,!0),real_min:c,real_max:d}},g}};
// File: highstock.patches.js
!function(a){var b=a.seriesTypes;b.candlestick.prototype.getAttribs=function(){b.column.prototype.getAttribs.apply(this,arguments);var c,d,e=this,f=e.options,g=f.states,h=f.upColor||e.color,i=a.merge(e.pointAttr),j=e.upColorProp,k=e.points||[],l=k.length;for(i[""][j]=h,i.hover[j]=g.hover.upColor||h,i.select[j]=g.select.upColor||h,d=0;d<l;d++)c=k[d],c.close>c.open&&(c.pointAttr=i)}}(Highcharts);
// File: js_instrument_chart.js
if("function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),!FP)var FP={};FP.Modules||(FP.Modules={}),FP.Modules.js_instrument_chart=function(a){a||(a="/common/modules/js_instrument_chart/api/data.php");var b,c,d,e,f,g,h,i,j,k=!1,l=!1,m={};return{set_wrapper:function(a){c=a,d=$("#"+a)},set_chart_container:function(a){e=a,f=$("#"+a)},set_info_container:function(a){},set_date_container:function(a){g=a,h=$("#"+a)},set_loading_container:function(a){i=a,j=$("#"+a)},use_UTC:function(a){k=a},use_Edition_Time:function(a){l=a},_read_current_options:function(){return m=d.data()},_save_current_options:function(){return d.data(m),m},_set_options:function(a){return m=Highcharts.merge(m,a)},_return_ajax_request_object:function(){var a={};for(var b in m)m.hasOwnProperty(b)&&-1===b.indexOf("config_")&&(a[b]=m[b]);return k&&(a.use_gmt=1),a},_return_config_object:function(){var a={};for(var b in m)m.hasOwnProperty(b)&&-1!==b.indexOf("config_")&&(a[b.replace("config_","")]=m[b]);return a},_return_candlestick_options:function(){var a={},b=this._return_config_object();return"candlestick_color"in b&&("plotOptions"in a||(a.plotOptions={}),"candlestick"in a.plotOptions||(a.plotOptions.candlestick={}),a.plotOptions.candlestick.color=b.candlestick_color),"candlestick_up_color"in b&&("plotOptions"in a||(a.plotOptions={}),"candlestick"in a.plotOptions||(a.plotOptions.candlestick={}),a.plotOptions.candlestick.upColor=b.candlestick_up_color),a},_return_area_options:function(){return{plotOptions:{area:{animation:!1}}}},_adjust_volumes_axis_size:function(a,b){var c=this,d=b.getVolumeYaxisExtremes(),e=1.1*d.max;c.yAxis[1].setExtremes(0,e,!0,!1)},render:function(c){if(!this._read_current_options())return console.warn("Unable to read options"),!1;"object"==typeof c&&this._set_options(c)&&this._save_current_options();var d=this,f="new_"+m.chart_type+"_chart",g="_return_"+m.chart_type+"_options",i={},n=this._return_config_object(),o=this._return_ajax_request_object();if("function"==typeof this[g]&&(i=this[g]()),void 0===i.yAxis?i.yAxis=[]:"object"==typeof i.yAxis&&(i.yAxis=[i.yAxis]),void 0===i.xAxis?i.xAxis=[]:"object"==typeof i.xAxis&&(i.xAxis=[i.xAxis]),void 0===i.series?i.series=[]:"object"==typeof i.series&&(i.series=[i.series]),"function"!=typeof Highcharts.FPUtils[f])return console.warn("Unable to instantiate this type of chart"),!1;delete o.symbol,$.ajax({url:a,data:o,dataType:"json"}).done(function(a){var c=a.candles.length,g=0;if(("[object Array]"!==Object.prototype.toString.call(a.candles)||a.candles.length<=0)&&(a.candles=[[(new Date).valueOf(),a.attr.last_value]]),k||"86400"==a.attr.interval||"week"==a.attr.interval||"month"==a.attr.interval)var p=0;else if(l)var p=1e3*a.edition_timezone_offset;else var p=60*(new Date).getTimezoneOffset()*-1e3;a.attr.local_time_offset=p;for(var q in a.candles)a.candles[q][0]+=p;var r;for(var s in a.events)for(var t in a.events[s])r=a.events[s][t],r.x+=p,r.time+=p,r.text=r.text.replace("VAR_TIMESTAMP",Highcharts.dateFormat(Highcharts.FPUtils.getDateFormat(a.attr.interval),r.time));if("yes"===o.volume_series){a.volumes=[];var u,v,w,x,y,z="area"==o.chart_type?2:5,A="area"==o.chart_type?1:4,B=0;for(s=0;s<c;s+=1)u=a.candles[s][0],w=a.candles[s][z],v=B,B=a.candles[s][A],0!=w&&g++,(void 0===x||w<x)&&(x=w),(void 0===y||w>y)&&(y=w),a.volumes.push({x:u,y:w,color:B>v?"#a5d6b6":"#e06c6c",borderColor:B>v?"#4ea268":"#a55f55"})}a.attr.total_volumes=g,i.yAxis.push({opposite:!0,startOnTick:!0,endOnTick:!1,labels:{align:"left",x:5,y:3,zIndex:1},type:"linear",tickPixelInterval:40,height:g>0?231:229});var C=n.timeformat?{second:n.timeformat,minute:n.timeformat,hour:n.timeformat,day:n.timeformat,week:n.timeformat,month:n.timeformat,year:n.timeformat}:{second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%b %e",week:"%b %e, %Y",month:"%b %e %Y",year:"%b, %Y"};if(i.xAxis.push({gridLineColor:"#fafafa",gridLineWidth:1,tickWidth:0,lineWidth:0,height:g>0?231:229,labels:{style:{color:"#000",fontSize:"11px",fontFamily:"Arial, sans-serif"},enabled:function(){return a.candles.length>1}(),zIndex:1},type:"datetime",dateTimeLabelFormats:C}),i.series.push({type:m.chart_type,name:"candles",data:a.candles,dataGrouping:{enabled:!1},marker:{states:{hover:{enabled:!1}}}},{type:"flags",onSeries:"candles",shape:"squarepin",data:a.events.news,zIndex:10},{type:"flags",onSeries:"candles",shape:"squarepin",data:a.events.ec,zIndex:11}),g>0){var D=FPCharts.Utils.roundBigNumber(1.1*y);i.yAxis.push({id:"volumes",labels:{formatter:function(){return FPCharts.Utils.formatBigNumber(this.value,1,!0)},align:"left",x:5,y:3,zIndex:1},type:"column",min:0,max:D,opposite:!0,startOnTick:!0,endOnTick:!0,showFirstLabel:!0,showLastLabel:!0,top:286,height:57,offset:0,lineWidth:1,gridLineWidth:1}),i.xAxis.push({gridLineWidth:0,tickWidth:0,lineWidth:0,labels:{enabled:!1},top:267,height:56}),i.series.push({type:"column",name:"Volume",data:a.volumes,yAxis:i.yAxis.length-1,dataGrouping:{enabled:!1},pointWidth:a.candles.length>90?1:4,borderWidth:.5,marker:{states:{hover:{enabled:!1}}},enableMouseTracking:!1})}a.renderTooltips=!0,b=Highcharts.FPUtils[f](a,Highcharts.merge({title:{style:{paddingTop:"2px"},align:"left",useHTML:!0},chart:{width:615,height:26+(g>0?320:254)+10,marginBottom:g>0?0:36,marginTop:26,renderTo:e,alignTicks:!1,events:{click:function(a){if(void 0!==a.originalTarget)var b=a.originalTarget.tagName;else var b=a.srcElement.tagName;if(("path"==b||"rect"==b)&&$("div.chartBarWrap div.advancedChart a").length>0){var c=$("div.chartBarWrap div.advancedChart a").attr("href");window.location=c}}}},plotOptions:{flags:{width:10,height:15,color:"#478ecc",fillColor:"#e6e6e6",lineWidth:0,lineColor:"red",shadow:!0,style:{color:"#3b88ca",zIndex:10,fontFamily:"Arial, sans-serif"},states:{hover:{fillColor:"#1a65a5"}}}}},i),function(b){function c(){return window.siteData&&6==+window.siteData.domainID?{width:84,height:30,imageURL:"https://i-cncdn.investing.com/charts/images/investing_cn_watermark.png"}:window.siteData&&window.siteData.edition.is("ja")?{width:161,height:35,imageURL:"https://ca33f332e2199349c49c-dc74b5af55c9b2a1bd8891aa9e8701fc.ssl.cf1.rackcdn.com/charts/images/investing_jp_watermark.png"}:{width:161,height:30,imageURL:"https://ca33f332e2199349c49c-dc74b5af55c9b2a1bd8891aa9e8701fc.ssl.cf1.rackcdn.com/charts/images/inv_watermark_v1.png"}}FPCharts.Utils.register_chart(b,"js_instrument_chart"),this.setTitle({text:a.html.chart_info}),this.seriesGroup.attr({zIndex:10}),$("span",h).html(a.attr.last_update_datetime),h.show(),g>0&&d._adjust_volumes_axis_size.call(this,!0,b);var e=195+(this.margin&&this.margin[0]?this.margin[0]:0),f=c();this.renderer.image(f.imageURL,15,e,f.width,f.height).add(),j.hide()},function(a){this.instance.setTitle({text:a.chart_info}),$("span",h).html(a.chart_last_update)},n).init()})},nav:function(){function a(a){e._read_current_options(),e._set_options(a),e._save_current_options()}function c(){j.show(),b&&(FPCharts.Utils.destroy_chart(b),b=null),h.hide(),e.render()}var e=this,f={},g=$(".fchart-switches-timeframes li",d),i=$(".fchart-switches-types li",d),k=$(".js-periods-options li",d);g.each(function(){function b(){return d.hasClass("selected")||(i.period="",$(".fchart-switches-period .selected").removeClass("selected"),k.removeClass("selected"),a(i),g.removeClass("selected"),d.addClass("selected"),c()),!1}var d=$(this),e=d.find("a"),h=e,i=h.data();delete i.period,f[i.pair_interval]={$li:d,$anchor:e,data:i,setSelected:b},e.click(b)}),i.each(function(){var b=$(this),d=b.find("a"),e=d.data();d.click(function(){return b.hasClass("selected")||(a(e),i.removeClass("selected"),b.addClass("selected"),c()),!1})}),$(".fchart-switches-period li a").on("click",function(b){var d=$(this),e={};return e.pair_interval="area"===m.chart_type?d.data("tfar"):d.data("tfcn"),e.period=d.data("period"),$(".fchart-switches-timeframes li.selected").removeClass("selected"),$('.fchart-switches-timeframes a[data-pair_interval="'+e.pair_interval+'"]').parent().addClass("selected"),a(e),!d.parent().hasClass("selected")&&(d.parent().parent().find("li.selected").removeClass("selected"),d.parent().addClass("selected"),c(),!1)}),k.click(function(){var b=$(this);if(!b.hasClass("selected")){k.removeClass("selected").filter(this).addClass("selected");var d={pair_interval:"area"===m.chart_type?b.attr("data-area-interval"):b.attr("data-candlestick-interval"),period:b.attr("data-period")};g.removeClass("selected"),f[d.pair_interval].$li.addClass("selected"),a(d),c()}}),$(".fchart-actions li",d).each(function(){var a=$(this);a.find("a").click(function(){return"toggleFlags"===$(this).data().action&&(b.toggleFlags.call(b.instance,b),a.toggleClass("selected"),d.data("config_show_flags",a.hasClass("selected")?"yes":"no")),!1})})}}};
// File: js_markets_chart.js
if("function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),!FP)var FP={};FP.Modules||(FP.Modules={}),FP.Modules.js_marketsChart=function(){this.ver="1.8";var a,b,c,d,e,f,g={};return{set_wrapper:function(a){"string"==typeof a&&(a=$("#"+a)),b=a},set_chart_container:function(a){"string"==typeof a&&(a=$("#"+a)),c=a.attr("id"),d=a},set_loading_container:function(a){"string"==typeof a&&(a=$("#"+a)),e=a},set_initial_pair:function(a){f=a},_read_current_options:function(){return g=b.data()},_save_current_options:function(){return b.data(g),g},_set_options:function(a){return g=Highcharts.merge(g,a)},_return_ajax_request_object:function(){var a={};for(var b in g)g.hasOwnProperty(b)&&-1===b.indexOf("config_")&&(a[b]=g[b]);return a},_return_config_object:function(){var a={};for(var b in g)g.hasOwnProperty(b)&&-1!==b.indexOf("config_")&&(a[b.replace("config_","")]=g[b]);return a},_return_candlestick_options:function(){return{}},_return_area_options:function(){return{plotOptions:{area:{animation:!1}}}},render:function(b,d){if(!this._read_current_options())return console.warn("Unable to read options"),!1;if("object"==typeof d&&this._set_options(d)&&this._save_current_options(),g.pair_id!=f)return!1;var h,i="new_"+g.chart_type+"_chart",j="_return_"+g.chart_type+"_options",k=this._return_config_object(),l=this._return_ajax_request_object();if("function"==typeof this[j]&&(h=this[j]()),void 0===h.yAxis?h.yAxis=[]:"object"==typeof h.yAxis&&(h.yAxis=[h.yAxis]),void 0===h.series?h.series=[]:"object"==typeof h.series&&(h.series=[h.series]),h=Highcharts.merge(h,b),"function"!=typeof Highcharts.FPUtils[i])return console.warn("Unable to instantiate this type of chart"),!1;var m="/charts_xml/jschart_markets_"+l.pair_id+".json";void 0!==g.external&&g.external&&(m="//"+g.external+"/charts_xml/jschart_markets_"+l.pair_id+".json"),$.ajax({url:m,dataType:"json"}).done(function(b){b.candles.length;if(g.pair_id!=f)return!1;("[object Array]"!==Object.prototype.toString.call(b.candles)||b.candles.length<=0)&&(b.candles=[[(new Date).valueOf(),b.attr.last_value]]);var d=60*(new Date).getTimezoneOffset()*-1e3;b.attr.local_time_offset=d;for(var j in b.candles)b.candles[j][0]+=d;h.yAxis.push({opposite:!0,startOnTick:!1,endOnTick:!1,labels:{enabled:!1},type:"area",tickPixelInterval:40,lineWidth:0,gridLineWidth:0,height:65}),h.series.push({type:g.chart_type,name:"candles",data:b.candles,dataGrouping:{enabled:!1},marker:{states:{hover:{enabled:!1}}}}),a=Highcharts.FPUtils[i](b,Highcharts.merge({chart:{width:95,height:65,borderWidth:0,plotBorderWidth:0,renderTo:c,events:{},style:{}},tooltip:{enabled:!1},plotOptions:{area:{lineColor:"rgb(132, 178, 218)",lineWidth:1,allowPointSelect:!1,states:{hover:{enabled:!1}},fillColor:"rgba(0, 96, 152, 0.1)"}},xAxis:{ordinal:!0,tickPixelInterval:40,gridLineColor:"#e7eaef",gridLineWidth:0,tickWidth:0,lineWidth:0,labels:{enabled:!1}}},h),function(a){e.hide()},function(a){},k).init()}).error(function(){e.hide()})}}};var miniChartsInitCode=function(){$(".smallChartsWrapper").each(function(){$(this).find(".miniChartChild").each(function(){var a=$(this),b=a.find(".miniChartWrapper"),c=a.find(".miniChartLoader"),d=a.find(".miniChartDisplay"),e=a.attr("data-pairid"),f=Object.create(FP.Modules.js_marketsChart());if(b.length<1||c.length<1||d.length<1)return!1;f.set_wrapper(b),f.set_chart_container(d),f.set_loading_container(c),f.set_initial_pair(e),f.render()})})};$(function(){miniChartsInitCode()});
// File: js_sideblock_chart.js
if("function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),!FP)var FP={};FP.Modules||(FP.Modules={}),$(function(){if($("#TSB_tabsMenu").length){var a=Object.create(FP.Modules.js_sideblock_chart());a.set_wrapper("TSB_tabsMenu"),a.set_loading_container("TSB__loader"),a.nav("techSum")}}),FP.Modules.js_sideblock_chart=function(a){function b(){$(".js-sideblock-tab-selection").each(function(){$(this).sortable({axis:"y",containment:this,tolerance:"pointer",start:function(a,b){},update:function(a,b){}}).disableSelection()})}function c(a){function c(){var a=[];return o.find("label").each(function(){$(this).find("input[type=checkbox]").is(":checked")&&a.push($(this).data("tabId"))}),a.join(",")}function d(){var b="/services/service/"+w,d={};d[w]=c(),s=!1,m._hide(),$.ajax({url:b,type:"POST",data:d}).done(function(b){if(b.length>20){x.html(b),g=$("#"+f),s=!0;var c=Object.create(FP.Modules.js_sideblock_chart());c.set_wrapper(f),h&&c.set_chart_container(h),c.set_loading_container(j),c.nav(a),h&&$("#"+h).trigger("chartTabChanged"),a&&a.is("techSum")&&window.initializeTechSumBox($("#TechSummary"),components.Translate)}})}function e(){i=0,o.find(".js-ts-label").each(function(){var a=$(this),b=a.find("input[type=checkbox]");(r[a.attr("id")]=b.is(":checked"))&&i++}),4===i?(s=!0,n.removeClass("disabled"),o.find("input[type=checkbox]:not(:checked)").each(function(){var a=$(this);a.attr("disabled",!0),a.parent().addClass("disabled")})):(s=!1,n.addClass("disabled"),o.find(".js-ts-label").removeClass("disabled"),o.find("input[type=checkbox]").attr("disabled",!1)),p.text(i+"/4")}var i,k=g.parent(),l=k.find(".js-three-dots"),m=k.find(".js-popup-wrapper"),n=k.find(".js-tab-selection-apply"),o=k.find(".js-sideblock-tab-selection"),p=k.find(".js-tab-selection-counter"),q=o.find(".checkers"),r={},s=!1,t=function(a){a.preventDefault()},u={default:{service:"sideBlockOrder",injectionSelector:".js-quotes"},techSum:{service:"sideBlockSumOrder",injectionSelector:".js-techsum-main-wrapper"}},v={sideBlockOrder:{type:"customSettings",key:"sideBlockSettings"},sideBlockSumOrder:{type:"customSettingsTechnicalSummary",key:"sideBlockTechSummarySettings"}},w=u[a||"default"].service,x=$(u[a||"default"].injectionSelector);e(),b(),q.click(t),o.find("input[type=checkbox]").click(e),l.click(function(a){m._toggleShow(),a.stopPropagation()}),o.find(".js-ts-label").on("mousedown",function(a){!$(a.target).is(".checkers")&&a.stopPropagation()}),n.click(function(a){var b,f;$(a.target).is(".disabled")||(e(),siteData.userLoggedIn?s?d():m._hide():(b=v[w].type,f=v[w].key,overlay.authCompleteAction={type:b,actionData:{key:f,value:c()}},overlay.overlayLogin()))}),m.click(function(a){a.stopPropagation()})}function d(b,c){var d,f="new_"+n.chart_type+"_chart",g="_return_"+n.chart_type+"_options",j=o._return_config_object(),m=o._return_ajax_request_object();if("function"==typeof o[g]&&(d=o[g]()),void 0===d.yAxis?d.yAxis=[]:"object"==typeof d.yAxis&&(d.yAxis=[d.yAxis]),void 0===d.series?d.series=[]:"object"==typeof d.series&&(d.series=[d.series]),void 0===n.chart_width&&(n.chart_width=298),void 0===n.chart_height&&(n.chart_height=140),d=Highcharts.merge(d,c),"function"!=typeof Highcharts.FPUtils[f])return console.warn("Unable to instantiate this type of chart"),!1;if(!b)return!1;if(n.pair_id!=l)return!1;("[object Array]"!==Object.prototype.toString.call(b.candles)||b.candles.length<=0)&&(b.candles=[[(new Date).valueOf(),b.attr.last_value]]);var p=60*(new Date).getTimezoneOffset()*-1e3;b.attr.local_time_offset=p;for(var q in b.candles)b.candles[q][0]+=p;var r;for(var s in b.events)for(var t in b.events[s])r=b.events[s][t],r.x+=p,r.time+=p,r.text=r.text.replace("VAR_TIMESTAMP",Highcharts.dateFormat(Highcharts.FPUtils.getDateFormat(b.attr.interval),r.time));d.yAxis.push({opposite:!0,endOnTick:!1,gridLineColor:"#ececec",gridLineWidth:1,labels:{align:"right",x:-3,y:0,zIndex:7,style:{color:"#A0A0A0",fontSize:"11px",fontFamily:"Arial, sans-serif"}},type:"linear",tickPixelInterval:50}),d.series.push({type:n.chart_type,name:"candles",data:b.candles,dataGrouping:{enabled:!1},marker:{states:{hover:{enabled:!1}}}},{type:"flags",onSeries:"candles",shape:"squarepin",data:b.events.news},{type:"flags",onSeries:"candles",shape:"squarepin",data:b.events.ec}),b.renderTooltips=!1,window.sideblockChartColorOverride="#C0C0C0",e=Highcharts.FPUtils[f](b,Highcharts.merge({chart:{width:n.chart_width,height:n.chart_height,renderTo:h,events:{click:function(){"converterChart"!=h&&m.pair_url&&(window.location=m.pair_url)}},plotBorderWidth:0,plotBorderColor:"#fff",backgroundColor:"transparent",spacingBottom:-10},plotOptions:{area:{lineColor:"rgb(132, 178, 218)",fillOpacity:1,lineWidth:1,states:{hover:{marker:!0}}},series:{fillColor:"rgba(0, 96, 152, 0.1)",marker:{enabled:!1,states:{hover:{enabled:!0,radiusPlus:5}}}}},xAxis:{gridLineColor:"#e7eaef",gridLineWidth:0,tickWidth:0,lineWidth:0,labels:{align:"left",x:0,y:-15,style:{color:"#A0A0A0",fontSize:"11px",fontFamily:"Arial, sans-serif"},enabled:function(){return b.candles.length>1}(),zIndex:7},zIndex:1,gridZIndex:0,type:"datetime",dateTimeLabelFormats:{second:"%H:%M",minute:"%H:%M",hour:"%H:%M",day:"%d/%m",week:"%m/%y",month:"%m  '%y",year:"%Y"}},tooltip:{followPointer:!0,shape:"callout",useHTML:!1,enabled:!0,formatter:function(){return"<b>"+this.y+"</b><br>"+Highcharts.dateFormat("%d/%m/%Y %H:%M",new Date(this.x))},shared:!0,style:{color:"#333333",cursor:"default",fontSize:"10px",pointerEvents:"none",whiteSpace:"nowrap",padding:"5px"},borderWidth:1,borderRadius:1,crosshairs:[!0,!0]}},d),function(b){function c(){return window.siteData&&6==+window.siteData.domainID?{width:84,height:30,imageURL:"https://i-cncdn.investing.com/charts/images/investing_cn_watermark.png"}:window.siteData&&window.siteData.edition.is("ja")?{width:161,height:35,imageURL:"https://ca33f332e2199349c49c-dc74b5af55c9b2a1bd8891aa9e8701fc.ssl.cf1.rackcdn.com/charts/images/investing_jp_watermark.png"}:{width:161,height:30,imageURL:"https://ca33f332e2199349c49c-dc74b5af55c9b2a1bd8891aa9e8701fc.ssl.cf1.rackcdn.com/charts/images/inv_watermark_v1.png"}}FPCharts.Utils.register_chart(b,"js_sideblock_chart");var d=b.data.attr.local_time_offset/1e3/60/60,e="GMT";if(d>0?e+=" +"+d:d<0&&(e+=" "+d),domain_name="investing.com",domain_name=domain_name.charAt(0).toUpperCase()+domain_name.slice(1),a){var f=c(),g=285+(this.margin&&this.margin[0]?this.margin[0]:0);this.renderer.image(f.imageURL,15,g,f.width,f.height).add()}b.totalFlags.call(this)>20&&b.toggleFlags.call(this),k.hide()},function(a){},j),i.exists()&&e.init(),delete window.sideblockChartColorOverride}var e,f,g,h,i,j,k,l,m,n={},o={set_wrapper:function(a){f=a,g=$("#"+a)},set_chart_container:function(a){h=a,i=$("#"+a)},set_loading_container:function(a){j=a,k=$("#"+a)},set_initial_pair:function(a){l=a},_read_current_options:function(){return n=g.data()},_save_current_options:function(){return g.data(n),n},_set_options:function(a){return n=Highcharts.merge(n,a)},_return_ajax_request_object:function(){var a={};for(var b in n)n.hasOwnProperty(b)&&-1===b.indexOf("config_")&&(a[b]=n[b]);return a},_return_config_object:function(){var a={};for(var b in n)n.hasOwnProperty(b)&&-1!==b.indexOf("config_")&&(a[b.replace("config_","")]=n[b]);return a},_return_candlestick_options:function(){return{}},_return_area_options:function(){return{plotOptions:{area:{animation:!1}}}},render:function(a,b,c,e){var f,g;return this._read_current_options()?("object"==typeof b&&this._set_options(b)&&this._save_current_options(),n.pair_id==l&&void(c?d(c,a):(e||(f=o._return_config_object(),g=o._return_ajax_request_object(),m="/common/candlestick/get_sideblock_chart.php?p="+g.pair_id+"&t="+g.chart_type,f.timeframe&&(m=m+"&tf="+f.timeframe),void 0!==n.external&&n.external&&(m="//"+n.external+"/charts_xml/jschart_sideblock_"+g.pair_id+"_"+g.chart_type+".json"),n.chartHash&&n.timeframe&&(m="//sbcharts.investing.com/charts_xml/"+n.chartHash+"_"+n.timeframe+".json")),$.ajax({url:e||m,dataType:"json"}).done(function(b){d(b,a)}).error(function(){k.hide()})))):(console.warn("Unable to read options"),!1)},nav:function(a){function b(){return i.attr("data-time-frame")}function d(a){a.timeframe=b(),l=a.pair_id,j._read_current_options(),j._set_options(a),j._save_current_options(),k.show(),e&&(FPCharts.Utils.destroy_chart(e),e=null),setTimeout(function(){j.render()},300)}function f(a){}var i,j=this,m=g.find("#quotesBoxChartTimeFrames span"),n=$(".LeftLiContainer",g).filter(".Selected").eq(0),o="converterChart"===h?$("#converter_chart_data"):null;i=getCookie("sideBlockTimeframe")?m.filter("[data-time-frame="+getCookie("sideBlockTimeframe")+"]"):m.eq(0),i.addClass("selected");var p=0;g.bind("chartTabChanged",function(){n=g.find(".LeftLiContainer").filter(".Selected:visible"),p++;var a=p;return setTimeout(function(){a===p&&(o?d({pair_id:o.attr("data-pair_id"),external:o.attr("data-external"),pair_url:o.attr("data-pair_url")}):n.trigger("updateChart"))},500),!1}),m.click(function(){m.removeClass("selected"),i=$(this).addClass("selected");var a=b();setCookie("sideBlockTimeframe",a),f(a),n.trigger("updateChart")});var q=$(".js-chart-link");$(".LeftLiContainer",g).each(function(){function a(){c.addClass("Selected").siblings().each(function(){$(this).removeClass("Selected")}),q.attr("href",c.data("pair_url")),n=c,d(c.data())}var b,c=$(this);c.on("updateChart",a),c.hover(function(){b=setTimeout(function(){return!c.hasClass("Selected")&&(a(),!1)},500)},function(){clearTimeout(b)})}),c(a)},initCryptoInstrumentTimeFrames:function(a){function b(){return e.data("time-frame")}function c(a){var c={timeframe:b()};o._read_current_options(),o._set_options(c),o._save_current_options(),setTimeout(function(){o.render(null,null,null,a)},300)}var d=a.find(".js-timeframe-button"),e=d.eq(0);e.addClass("selected"),d.click(function(){d.removeClass("selected"),e=$(this).addClass("selected"),c(e.data("url"))})}};return o};