"use strict";function windowLoaded(n){n&&window.removeEventListener("load",windowLoaded);BannerFlow.sendMessage("loaded")}var console,BannerFlowAPIConnection,BannerFlow;(typeof console=="undefined"||typeof console.log=="undefined")&&(console={log:function(){}});console.warn=console.warn||console.log;console.error=console.error||console.log;try{document.domain.match(/(pro\.|sandbox\.|sandbox\-app\.|app\.|localhost)/)||(document.domain=document.domain.substring(document.domain.indexOf(".")+1))}catch(e){}String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};BannerFlowAPIConnection=function(n){var t=this;n=n||{};n._listeners=[];n.prefix=["webkit","moz","MS","o",""];t.lastText="";t.TEXT_CHANGED=t.TEXT_UPDATED="text_changed";t.FEED_CHANGED=t.FEED_UPDATED="feed_changed";t.LOOP="loop";t.STYLE_CHANGED="style_changed";t.SETTINGS_CHANGED="settings_changed";t.RESIZE="resize";t.START_ANIMATION="start_animation";t.STOP_ANIMATION="stop_animation";t.TEXTS_RECEIVED="texts_received";t.MOUSE_MOVE="mousemove";t.MOUSE_DOWN="mousedown";t.MOUSE_UP="mouseup";t.CLICK="click";t.INIT="init";t.PLAY="play";t.PAUSE="pause";t.STOP="stop";t.texts={};t.text="";t.parameters={};t.settings={};t.editorMode=!1;t.imageGeneratorMode=!1;t.imageGeneratorPosition=0;t.x=0;t.y=0;t.defaultTargetUrl="";t.initTime=Date.now();t.setText=function(n){t.text!==n&&(t.text=n||"",typeof t.text!="string"&&(t.text=""),t.lastText=t.text,t.dispatchEvent(t.TEXT_CHANGED,{text:t.text}))};t.loopChanged=function(i){n.loop=parseInt(i)||0;t.dispatchEvent(t.LOOP,{loop:i});t.duration!=null&&t.startingPosition!=null&&(n.startAnimation&&clearTimeout(n.startAnimation),n.stopAnimation&&clearTimeout(n.stopAnimation),t.startingPosition>.05&&!t.imageGeneratorMode?n.startAnimation=setTimeout(function(){t.dispatchEvent(t.START_ANIMATION)},t.startingPosition*1e3):t.dispatchEvent(t.START_ANIMATION),n.stopAnimation=setTimeout(function(){t.dispatchEvent(t.STOP_ANIMATION)},(t.startingPosition+t.duration)*1e3))};t.setStyle=function(n){n&&(t.style=n,t.duration=parseFloat(t.getStyle("duration")),t.startingPosition=parseFloat(t.getStyle("starting-position")),t.x=parseFloat(t.getStyle("left")||0),t.y=parseFloat(t.getStyle("top")||0),t.dispatchEvent(t.STYLE_CHANGED))};t.setSettings=function(n){n&&(t.settings=n,t.dispatchEvent(t.SETTINGS_CHANGED))};t.getText=function(){return t.text||""};t.getFeed=function(){return t.feed};t.getWidth=function(){try{return parseInt(t.style.parentStyle.width.replace("px",""))}catch(i){}return window.innerWidth};t.getHeight=function(){try{return parseInt(t.style.parentStyle.height.replace("px",""))}catch(i){}return window.innerHeight};t.getStyle=function(i,r){var u,f;if(i=i.replace(/-/g,"").toLowerCase(),t.style){for(f=0;f<n.prefix.length;f++)if(u=n.prefix[f]!==""?t.style[n.prefix[f]+i.capitalize()]:t.style[i],u&&u!="")return u;if(t.style.parentStyle)for(f=0;f<n.prefix.length;f++)if(u=n.prefix[f]!==""?t.style.parentStyle[n.prefix[f]+i.capitalize()]:t.style.parentStyle[i],u&&u!="")return u;if(t.style.attributes&&(u=t.style.attributes[i]||t.style.attributes["data"+i],u&&u!=""))return u}return r||undefined};t.getTextByKey=function(n){return t.texts[n].value};t.setTextByKey=function(n,t){BannerFlow.sendMessage("setText",{key:n,text:t})};t.setTargetUrlByKey=function(n,t){BannerFlow.sendMessage("setTargetUrlByKey",{key:n,url:t})};t.setFeed=function(n){BannerFlow.sendMessage("setFeed",n)};t.setFeedInterval=function(n){BannerFlow.sendMessage("setFeedInterval",n)};t.pause=function(){BannerFlow.sendMessage("pause")};t.stop=function(){BannerFlow.sendMessage("stop")};t.play=function(){BannerFlow.sendMessage("play")};t.prevLoop=function(n){BannerFlow.sendMessage("prevLoop",n)};t.nextLoop=function(n){BannerFlow.sendMessage("nextLoop",n)};t.open=function(n,i){if(n=n||t.defaultTargetUrl,n)try{if(window.parent.BF.bannerClick)window.parent.BF.bannerClick(i,n);else window.parent.onBannerClick(i,n)}catch(r){console.warn("Could not track click due to XSS issues");window.open(n,"_blank")}else console.warn("Target url not specified")};t.click=t.open;t.raiseEvent=function(n,i){t.sendMessage("event",{event:n,object:i})};t.addEventListener=function(t,i){n._listeners&&t&&i&&(typeof n._listeners[t]=="undefined"&&(n._listeners[t]=[]),n._listeners[t].push(i))};t.removeEventListener=function(t,i){var u,r,f;if(n._listeners[t]instanceof Array)for(u=n._listeners[t],r=0,f=u.length;r<f;r++)if(u[r]===i){u.splice(r,1);break}};t.dispatchEvent=function(t,i){var r,f,u,e;if(!t)throw new Error("Event object missing type property.");try{r=new Event(t)}catch(o){r=document.createEvent("Event");r.initEvent(t,!0,!1)}if(r.data=i,n._listeners[r.type]instanceof Array)for(f=n._listeners[r.type],u=0,e=f.length;u<e;u++)f[u].call(n,r,i)};t.sendMessage=function(n,t){parent.postMessage({type:n,url:window.location.href,data:t},"*")};window.addEventListener("resize",function(){t.dispatchEvent("resize")});window.addEventListener("message",function(n){var i=n.data.value!=null?n.data.value:{},r=n.data.type;switch(r){case"set_text":n.data.key&&(t.key=n.data.key);n.data.feedIndex&&(t.feedIndex=n.data.feedIndex);t.setText(i);break;case"set_feed":t.feed=JSON.parse(JSON.stringify(i));t.dispatchEvent(t.FEED_CHANGED,{feed:t.feed});break;case"init":t.parameters=i.parameters?i.parameters:{};t.texts=i.texts;i.size&&(t.bannerWidth=i.size.width,t.bannerHeight=i.size.height);i.key&&(t.key=i.key);i.feedIndex&&(t.feedIndex=i.feedIndex);i.target&&(t.defaultTargetUrl=i.target);i.parameters&&(t.parameters=i.parameters);i.isFallback&&(t.imageGeneratorMode=!0);i.fallbackPosition&&(t.imageGeneratorPosition=parseFloat(i.fallbackPosition));i.isEditor&&(t.editorMode=!0);i.languageCulture&&(t.languageCulture=i.languageCulture);t.setStyle(i.style);t.setSettings(i.settings);t.setText(i.text);i.feed&&(t.feed=JSON.parse(JSON.stringify(i.feed)),t.dispatchEvent(t.FEED_CHANGED,{feed:t.feed}));t.dispatchEvent(t.TEXTS_RECEIVED);t.dispatchEvent(t.INIT);break;case"is_loaded":windowLoaded();break;case"new_loop":t.loopChanged(i);break;case"set_style":t.setStyle(i);break;case"set_settings":t.setSettings(i);break;case"event":t.dispatchEvent(i.event,i.object);break;case t.MOUSE_MOVE:case t.MOUSE_DOWN:case t.MOUSE_UP:case t.CLICK:BannerFlow.mouseX=i.x;BannerFlow.mouseY=i.y;t.dispatchEvent(r,i);break;case t.PLAY:case t.PAUSE:case t.STOP:t.dispatchEvent(r,i)}})};BannerFlow=new BannerFlowAPIConnection({});window.addEventListener("load",windowLoaded);