
// <script type="text/javascript">

		(function () {

			var wArray = [];
			try
			{
				//create array of frameElements windows
				var w = window;
				while (w && w.frameElement && (w.frameElement.id.indexOf('google_ads_iframe_') != -1 || w.frameElement.id.indexOf('pbSekindo') != -1 ))
				{
					wArray.push(w);
					w = w.parent || null;
				}
				wArray.reverse();
			}
			catch (ex){}

			var isDesktop = true;

// <script type="text/javascript">
	try {
		if (typeof window.Sekindo == 'undefined')
			window.Sekindo = {};
		if (typeof window.Sekindo.companyLiveDomain == 'undefined')
			window.Sekindo.companyLiveDomain = 'live.sekindo.com';
		if (typeof window.Sekindo.companyHbDomain == 'undefined')
			window.Sekindo.companyHbDomain = 'hb.sekindo.com';
		if (typeof window.Sekindo.companyVideoDomain == 'undefined')
			window.Sekindo.companyVideoDomain = 'video.sekindo.com';
	} catch (e) {}
/* prebid.js v1.28.0
Updated : 2019-04-07 */
!(function(u){var s=window.SKpbjsChunk;window.SKpbjsChunk=function(e,t,n){for(var r,i,o,a=0,d=[];a<e.length;a++)i=e[a],c[i]&&d.push(c[i][0]),c[i]=0;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(u[r]=t[r]);for(s&&s(e,t,n);d.length;)d.shift()();if(n)for(a=0;a<n.length;a++)o=f(f.s=n[a]);return o};var n={},c={181:0};function f(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return u[e].call(t.exports,t,t.exports,f),t.l=!0,t.exports}f.m=u,f.c=n,f.d=function(e,t,n){f.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},f.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(t,"a",t),t},f.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},f.p="",f.oe=function(e){throw console.error(e),e},f(f.s=601)})({0:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.getLatestHighestCpmBid=a.getOldestHighestCpmBid=a.getHighestCpm=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a.getAdUnitSizes=function(e){if(!e)return;var t=[];if(e.mediaTypes&&e.mediaTypes.banner&&Array.isArray(e.mediaTypes.banner.sizes)){var n=e.mediaTypes.banner.sizes;Array.isArray(n[0])?t=n:t.push(n)}else Array.isArray(e.sizes)&&(Array.isArray(e.sizes[0])?t=e.sizes:t.push(e.sizes));return t},a.parseSizesInput=function(e){var t=[];if("string"==typeof e){var n=e.split(","),r=/^(\d)+x(\d)+$/i;if(n)for(var i in n)w(n,i)&&n[i].match(r)&&t.push(n[i])}else if("object"===(void 0===e?"undefined":d(e))){var o=e.length;if(0<o)if(2===o&&"number"==typeof e[0]&&"number"==typeof e[1])t.push(A(e));else for(var a=0;a<o;a++)t.push(A(e[a]))}return t},a.parseGPTSingleSizeArray=A,a.uniques=C,a.flatten=O,a.getBidRequest=function(n,e){var r=void 0;return e.some((function(e){var t=(0,o.default)(e.bids,(function(t){return["bidId","adId","bid_id"].some((function(e){return t[e]===n}))}));return t&&(r=t),t})),r},a.getKeys=R,a.getValue=B,a.getBidderCodes=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:SKpbjs.adUnits).map((function(e){return e.bids.map((function(e){return e.bidder})).reduce(O,[])})).reduce(O).filter(C)},a.isGptPubadsDefined=function(){if(window.googletag&&a.isFn(window.googletag.pubads)&&a.isFn(window.googletag.pubads().getSlots))return!0},a.shuffle=function(e){var t=e.length;for(;0<t;){var n=Math.floor(Math.random()*t),r=e[--t];e[t]=e[n],e[n]=r}return e},a.adUnitsFilter=function(e,t){return(0,u.default)(e,t&&t.adUnitCode)},a.isSrcdocSupported=function(e){return e.defaultView&&e.defaultView.frameElement&&"srcdoc"in e.defaultView.frameElement&&!/firefox/i.test(navigator.userAgent)},a.deepClone=function(e){return(0,i.default)(e)},a.inIframe=function(){try{return a.getWindowSelf()!==a.getWindowTop()}catch(e){return!0}},a.isSafariBrowser=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},a.replaceAuctionPrice=function(e,t){if(!e)return;return e.replace(/\$\{AUCTION_PRICE\}/g,t)},a.timestamp=function(){return(new Date).getTime()},a.checkCookieSupport=function(){if(window.navigator.cookieEnabled||document.cookie.length)return!0},a.cookiesAreEnabled=function(){if(a.checkCookieSupport())return!0;return window.document.cookie="prebid.cookieTest",-1!=window.document.cookie.indexOf("prebid.cookieTest")},a.delayExecution=function(e,t){if(t<1)throw new Error("numRequiredCalls must be a positive number. Got "+t);var n=0;return function(){++n===t&&e.apply(null,arguments)}},a.groupBy=function(e,n){return e.reduce((function(e,t){return(e[t[n]]=e[t[n]]||[]).push(t),e}),{})},a.deepAccess=function(e,t){if(!e)return;t=String(t).split(".");for(var n=0;n<t.length;n++)if(void 0===(e=e[t[n]]))return;return e},a.createContentToExecuteExtScriptInFriendlyFrame=function(e){if(!e)return"";return'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><base target="_top" /><script>inDapIF=true;<\/script></head><body>\x3c!--PRE_SCRIPT_TAG_MACRO--\x3e<script src="'+e+'"><\/script>\x3c!--POST_SCRIPT_TAG_MACRO--\x3e</body></html>'},a.getDefinedParams=function(n,e){return e.filter((function(e){return n[e]})).reduce((function(e,t){return r(e,(function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e})({},t,n[t]))}),{})},a.isValidMediaTypes=function(e){var t=["banner","native","video"];if(!Object.keys(e).every((function(e){return(0,u.default)(t,e)})))return!1;if(e.video&&e.video.context)return(0,u.default)(["instream","outstream"],e.video.context);return!0},a.getBidderRequest=function(e,t,n){return(0,o.default)(e,(function(e){return 0<e.bids.filter((function(e){return e.bidder===t&&e.adUnitCode===n})).length}))||{start:null,auctionId:null}},a.getUserConfiguredParams=function(e,t,n){return e.filter((function(e){return e.code===t})).map((function(e){return e.bids})).reduce(O,[]).filter((function(e){return e.bidder===n})).map((function(e){return e.params||{}}))},a.getOrigin=function(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},a.getDNT=function(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack},a.isAdUnitCodeMatchingSlot=function(t){return function(e){return U(t,e)}},a.isSlotMatchingAdUnitCode=function(t){return function(e){return U(e,t)}},a.unsupportedBidderMessage=function(e,t){var n=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return"\n    "+e.code+" is a "+n+" ad unit\n    containing bidders that don't support "+n+": "+t+".\n    This bidder won't fetch demand.\n  "},a.deletePropertyFromObject=function(e,t){var n=r({},e);return delete n[t],n},a.removeRequestId=function(e){return a.deletePropertyFromObject(e,"requestId")},a.isInteger=function(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},a.convertCamelToUnderscore=function(e){return e.replace(/(?:^|\.?)([A-Z])/g,(function(e,t){return"_"+t.toLowerCase()})).replace(/^_/,"")},a.transformBidderParamKeywords=function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"keywords",i=[];return a._each(e,(function(e,t){if(a.isArray(e)){var n=[];a._each(e,(function(e){(e=a.getValueString(r+"."+t,e))&&n.push(e)})),e=n}else{if(e=a.getValueString(r+"."+t,e),!a.isStr(e))return;e=[e]}i.push({key:t,value:e})})),i},a.convertTypes=function(r,i){return Object.keys(r).forEach((function(e){var t,n;i[e]&&(a.isFn(r[e])?i[e]=r[e](i[e]):i[e]=(t=r[e],n=i[e],"string"===t?n&&n.toString():"number"===t?Number(n):n),isNaN(i[e])&&delete i.key)})),i};var n=t(3),i=c(t(66)),o=c(t(10)),u=c(t(7)),s=t(12);function c(e){return e&&e.__esModule?e:{default:e}}var f=t(4),l=!1,g=Object.prototype.toString,p=Boolean(window.console),v=Boolean(p&&window.console.log),y=Boolean(p&&window.console.info),m=Boolean(p&&window.console.warn),b=Boolean(p&&window.console.error);a.replaceTokenInString=function(i,e,o){return a._each(e,(function(e,t){e=void 0===e?"":e;var n=o+t.toUpperCase()+o,r=new RegExp(n,"g");i=i.replace(r,e)})),i};var h,S=(h=0,function(){return++h});function E(){return S()+Math.random().toString(16).substr(2)}function A(e){if(a.isArray(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1]))return e[0]+"x"+e[1]}function T(e,t){return e=[].slice.call(e),t&&e.unshift(t),e.unshift("display: inline-block; color: #fff; background: #3b88c3; padding: 1px 4px; border-radius: 3px;"),e.unshift("%cPrebid"),e}a.getUniqueIdentifierStr=E,a.generateUUID=function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)},a.getBidIdParameter=function(e,t){return t&&t[e]?t[e]:""},a.tryAppendQueryString=function(e,t,n){return n?e+(t+"=")+encodeURIComponent(n)+"&":e},a.parseQueryStringParameters=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+encodeURIComponent(e[n])+"&");return t},a.transformAdServerTargetingObj=function(t){return t&&0<Object.getOwnPropertyNames(t).length?R(t).map((function(e){return e+"="+encodeURIComponent(B(t,e))})).join("&"):""},a.getTopWindowLocation=function(){if(a.inIframe()){var e=void 0;try{e=a.getAncestorOrigins()||a.getTopFrameReferrer()}catch(e){logInfo("could not obtain top window location",e)}if(e)return(0,s.parse)(e,{decodeSearchAsString:!0})}return a.getWindowLocation()},a.getTopFrameReferrer=function(){try{window.top.location.toString();for(var e="",t=void 0;(t=t?t.parent:window).document&&t.document.referrer&&(e=t.document.referrer),t!==window.top;);return e}catch(e){return window.document.referrer}},a.getAncestorOrigins=function(){if(window.document.location&&window.document.location.ancestorOrigins&&1<=window.document.location.ancestorOrigins.length)return window.document.location.ancestorOrigins[window.document.location.ancestorOrigins.length-1]},a.getWindowTop=function(){return window.top},a.getWindowSelf=function(){return window.self},a.getWindowLocation=function(){return window.location},a.getTopWindowUrl=function(){var t=void 0;try{t=a.getTopWindowLocation().href}catch(e){t=""}return t},a.getTopWindowReferrer=function(){try{return window.top.document.referrer}catch(e){return document.referrer}},a.logMessage=function(){I()&&v&&console.log.apply(console,T(arguments,"MESSAGE:"))},a.logInfo=function(){I()&&y&&console.info.apply(console,T(arguments,"INFO:"))},a.logWarn=function(){I()&&m&&console.warn.apply(console,T(arguments,"WARNING:"))},a.logError=function(){I()&&b&&console.error.apply(console,T(arguments,"ERROR:"))},a.hasConsoleLogger=function(){return v};var I=function(){if(!1===n.config.getConfig("debug")&&!1===l){var e="TRUE"===_(f.DEBUG_MODE).toUpperCase();n.config.setConfig({debug:e}),l=!0}return!!n.config.getConfig("debug")};a.debugTurnedOn=I,a.createInvisibleIframe=function(){var e=document.createElement("iframe");return e.id=E(),e.height=0,e.width=0,e.border="0px",e.hspace="0",e.vspace="0",e.marginWidth="0",e.marginHeight="0",e.style.border="0",e.scrolling="no",e.frameBorder="0",e.src="about:blank",e.style.display="none",e};var _=function(e){var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))};a.getParameterByName=_,a.hasValidBidRequest=function(e,n,t){var r=!1;function i(e,t){t===n[o]&&(r=!0)}for(var o=0;o<n.length;o++)if(r=!1,a._each(e,i),!r)return a.logError("Params are missing for bid request. One of these required paramaters are missing: "+n,t),!1;return!0},a.addEventHandler=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!0):e.attachEvent&&e.attachEvent("on"+t,n)},a.isA=function(e,t){return g.call(e)==="[object "+t+"]"},a.isFn=function(e){return a.isA(e,"Function")},a.isStr=function(e){return a.isA(e,"String")},a.isArray=function(e){return a.isA(e,"Array")},a.isNumber=function(e){return a.isA(e,"Number")},a.isPlainObject=function(e){return a.isA(e,"Object")},a.isBoolean=function(e){return a.isA(e,"Boolean")},a.isEmpty=function(e){if(!e)return!0;if(a.isArray(e)||a.isStr(e))return!(0<e.length);for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0},a.isEmptyStr=function(e){return a.isStr(e)&&(!e||0===e.length)},a._each=function(e,t){if(!a.isEmpty(e)){if(a.isFn(e.forEach))return e.forEach(t,this);var n=0,r=e.length;if(0<r)for(;n<r;n++)t(e[n],n,e);else for(n in e)hasOwnProperty.call(e,n)&&t.call(this,e[n],n)}},a.contains=function(e,t){if(a.isEmpty(e))return!1;if(a.isFn(e.indexOf))return-1!==e.indexOf(t);for(var n=e.length;n--;)if(e[n]===t)return!0;return!1},a.indexOf=(function(){if(Array.prototype.indexOf)return Array.prototype.indexOf})(),a._map=function(n,r){if(a.isEmpty(n))return[];if(a.isFn(n.map))return n.map(r);var i=[];return a._each(n,(function(e,t){i.push(r(e,t,n))})),i};var w=function(e,t){return e.hasOwnProperty?e.hasOwnProperty(t):void 0!==e[t]&&e.constructor.prototype[t]!==e[t]};function C(e,t,n){return n.indexOf(e)===t}function O(e,t){return e.concat(t)}function R(e){return Object.keys(e)}function B(e,t){return e[t]}a.insertElement=function(e,t,n){t=t||document;var r=void 0;r=n?t.getElementsByTagName(n):t.getElementsByTagName("head");try{(r=r.length?r:t.getElementsByTagName("body")).length&&(r=r[0]).insertBefore(e,r.firstChild)}catch(e){}},a.triggerPixel=function(e){(new Image).src=e},a.callBurl=function(e){var t=e.source,n=e.burl;t===f.S2S.SRC&&n&&a.triggerPixel(n)},a.insertHtmlIntoIframe=function(e){if(e){var t=document.createElement("iframe");t.id=a.getUniqueIdentifierStr(),t.width=0,t.height=0,t.hspace="0",t.vspace="0",t.marginWidth="0",t.marginHeight="0",t.style.display="none",t.style.height="0px",t.style.width="0px",t.scrolling="no",t.frameBorder="0",t.allowtransparency="true",a.insertElement(t,document,"body"),t.contentWindow.document.open(),t.contentWindow.document.write(e),t.contentWindow.document.close()}},a.insertUserSyncIframe=function(e){var t=a.createTrackPixelIframeHtml(e,!1,"allow-scripts allow-same-origin"),n=document.createElement("div");n.innerHTML=t;var r=n.firstChild;a.insertElement(r)},a.createTrackPixelHtml=function(e){if(!e)return"";var t='<div style="position:absolute;left:0px;top:0px;visibility:hidden;">';return t+='<img src="'+encodeURI(e)+'"></div>'},a.createTrackPixelIframeHtml=function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";return e?(t&&(e=encodeURI(e)),n&&(n='sandbox="'+n+'"'),"<iframe "+n+' id="'+a.getUniqueIdentifierStr()+'"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="'+e+'">\n    </iframe>'):""},a.getIframeDocument=function(e){if(e){var t=void 0;try{t=e.contentWindow?e.contentWindow.document:e.contentDocument.document?e.contentDocument.document:e.contentDocument}catch(e){a.logError("Cannot get iframe document",e)}return t}},a.getValueString=function(e,t,n){return null==t?n:a.isStr(t)?t:a.isNumber(t)?t.toString():void a.logWarn("Unsuported type for param: "+e+" required type: String")};a.getHighestCpm=N("timeToRespond",(function(e,t){return t<e})),a.getOldestHighestCpmBid=N("responseTimestamp",(function(e,t){return t<e})),a.getLatestHighestCpmBid=N("responseTimestamp",(function(e,t){return e<t}));function N(n,r){return function(e,t){return e.cpm===t.cpm?r(e[n],t[n])?t:e:e.cpm<t.cpm?t:e}}var U=function(e,t){return e.getAdUnitPath()===t||e.getSlotElementId()===t}},1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return (function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,d=e[Symbol.iterator]();!(r=(a=d.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw o}}return n})(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.registerBidder=function(t){var n=Array.isArray(t.supportedMediaTypes)?{supportedMediaTypes:t.supportedMediaTypes}:void 0;function r(e){var t=g(e);i.default.registerBidAdapter(t,e.code,n)}r(t),Array.isArray(t.aliases)&&t.aliases.forEach((function(e){i.default.aliasRegistry[e]=t.code,r(v({},t,{code:e}))}))},t.newBidder=g,t.isValid=S;var r=f(n(27)),i=f(n(8)),o=n(3),y=f(n(16)),a=n(18),d=n(17),u=n(40),m=f(n(4)),b=f(n(9)),s=f(n(7)),h=n(0);function f(e){return e&&e.__esModule?e:{default:e}}var l=["requestId","cpm","ttl","creativeId","netRevenue","currency"];function g(f){return v(new r.default(f.code),{getSpec:function(){return Object.freeze(f)},registerSyncs:l,callBids:function(o,a,t,n){if(Array.isArray(o.bids)){var d={},u=[],e=o.bids.filter(g);if(0!==e.length){var s={};e.forEach((function(e){(s[e.bidId]=e).adUnitCode||(e.adUnitCode=e.placementCode)}));var r=f.buildRequests(e,o);if(r&&0!==r.length){Array.isArray(r)||(r=[r]);var c=(0,h.delayExecution)(i,r.length);r.forEach((function(i){switch(i.method){case"GET":n(""+i.url+(function(e){if(e)return"?"+("object"===(void 0===e?"undefined":p(e))?(0,h.parseQueryStringParameters)(e):e);return""})(i.data),{success:e,error:t},void 0,v({method:"GET",withCredentials:!0},i.options));break;case"POST":n(i.url,{success:e,error:t},"string"==typeof i.data?i.data:JSON.stringify(i.data),v({method:"POST",contentType:"text/plain",withCredentials:!0},i.options));break;default:(0,h.logWarn)("Skipping invalid request from "+f.code+". Request type "+i.type+" must be GET or POST"),c()}function e(e,t){try{e=JSON.parse(e)}catch(e){}e={body:e,headers:{get:t.getResponseHeader.bind(t)}},u.push(e);var n=void 0;try{n=f.interpretResponse(e,i)}catch(e){return(0,h.logError)("Bidder "+f.code+" failed to interpret the server's response. Continuing without bids",null,e),void c()}function r(e){var t,n,r=s[e.requestId];if(r){var i=v(y.default.createBid(m.default.STATUS.GOOD,r),e);t=r.adUnitCode,n=i,d[t]=!0,S(t,n,[o])&&a(t,n)}else(0,h.logWarn)("Bidder "+f.code+" made bid for unknown request ID: "+e.requestId+". Ignoring.")}n&&(n.forEach?n.forEach(r):r(n)),c(n)}function t(e){(0,h.logError)("Server call for "+f.code+" failed: "+e+". Continuing without bids."),c()}}))}else i()}else i()}function i(e){t(),b.default.emit(m.default.EVENTS.BIDDER_DONE,o),l(u,o.gdprConsent)}}});function l(e,t){if(f.getUserSyncs){var n=o.config.getConfig("userSync.filterSettings"),r=f.getUserSyncs({iframeEnabled:!!(o.config.getConfig("userSync.iframeEnabled")||n&&(n.iframe||n.all)),pixelEnabled:!!(o.config.getConfig("userSync.pixelEnabled")||n&&(n.image||n.all))},e,t);r&&(Array.isArray(r)||(r=[r]),r.forEach((function(e){a.userSync.registerSync(e.type,f.code,e.url)})))}}function g(e){return!!f.isBidRequestValid(e)||((0,h.logWarn)("Invalid bid sent to bidder "+f.code+": "+JSON.stringify(e)),!1)}}function S(e,t,n){function r(e){return"Invalid bid from "+t.bidderCode+". Ignoring bid: "+e}return e?t?(i=Object.keys(t),l.every((function(e){return(0,s.default)(i,e)&&!(0,s.default)([void 0,null],t[e])}))?"native"!==t.mediaType||(0,d.nativeBidIsValid)(t,n)?"video"!==t.mediaType||(0,u.isValidVideoBid)(t,n)?!("banner"===t.mediaType&&!(function(e,t,n){if((t.width||0===t.width)&&(t.height||0===t.height))return!0;var r=(0,h.getBidderRequest)(n,t.bidderCode,e),i=r&&r.bids&&r.bids[0]&&r.bids[0].sizes,o=(0,h.parseSizesInput)(i);if(1===o.length){var a=o[0].split("x"),d=c(a,2),u=d[0],s=d[1];return t.width=u,t.height=s,!0}return!1})(e,t,n))||((0,h.logError)(r("Banner bids require a width and height")),!1):((0,h.logError)(r("Video bid does not have required vastUrl or renderer property")),!1):((0,h.logError)(r("Native bid missing some required properties.")),!1):((0,h.logError)(r("Bidder "+t.bidderCode+" is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params.")),!1)):((0,h.logWarn)("Some adapter tried to add an undefined bid for "+e+"."),!1):((0,h.logWarn)("No adUnitCode was supplied to addBidResponse."),!1);var i}},10:function(e,t,n){n(46),e.exports=n(13).Array.find},11:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=r,t.isRendererRequired=function(e){return!(!e||!e.url)},t.executeRenderer=function(e,t){e.render(t)};var d=n(28),u=(function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}})(n(0));function r(e){var t=this,n=e.url,r=e.config,i=e.id,o=e.callback,a=e.loaded;this.url=n,this.config=r,this.handlers={},this.id=i,this.loaded=a,this.cmd=[],this.push=function(e){"function"==typeof e?t.loaded?e.call():t.cmd.push(e):u.logError("Commands given to Renderer.push must be wrapped in a function")},this.callback=o||function(){t.loaded=!0,t.process()},(0,d.loadScript)(n,this.callback,!0)}r.install=function(e){return new r({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded})},r.prototype.getConfig=function(){return this.config},r.prototype.setRender=function(e){this.render=e},r.prototype.setEventHandlers=function(e){this.handlers=e},r.prototype.handleVideoEvent=function(e){var t=e.id,n=e.eventName;"function"==typeof this.handlers[n]&&this.handlers[n](),u.logMessage("Prebid Renderer event for id "+t+" type "+n)},r.prototype.process=function(){for(;0<this.cmd.length;)try{this.cmd.shift().call()}catch(e){u.logError("Error processing Renderer command: ",e)}}},111:function(e,t,n){"use strict";var r=n(14),i=n(34)(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),n(26)(o)},12:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return (function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,d=e[Symbol.iterator]();!(r=(a=d.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw o}}return n})(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function i(e){return e?e.replace(/^\?/,"").split("&").reduce((function(e,t){var n=t.split("="),r=a(n,2),i=r[0],o=r[1];return/\[\]$/.test(i)?(e[i=i.replace("[]","")]=e[i]||[],e[i].push(o)):e[i]=o||"",e}),{}):{}}function r(e){return Object.keys(e).map((function(t){return Array.isArray(e[t])?e[t].map((function(e){return t+"[]="+e})).join("&"):t+"="+e[t]})).join("&")}t.parseQS=i,t.formatQS=r,t.parse=function(e,t){var n=document.createElement("a");t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?n.href=e:n.href=decodeURIComponent(e);var r=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString;return{href:n.href,protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:r?n.search:i(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}},t.format=function(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":"+e.port:""))+(e.pathname||"")+(e.search?"?"+r(e.search||""):"")+(e.hash?"#"+e.hash:"")}},13:function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},14:function(e,t,n){var v=n(19),y=n(13),m=n(32),b=n(48),h=n(55),S="prototype",E=function(e,t,n){var r,i,o,a=e&E.F,d=e&E.G,u=e&E.S,s=e&E.P,c=e&E.B,f=e&E.W,l=d?y:y[t]||(y[t]={}),g=l[S],p=d?v:u?v[t]:(v[t]||{})[S];for(r in d&&(n=t),n)(i=!a&&p&&void 0!==p[r])&&h(l,r)||(o=i?p[r]:n[r],l[r]=d&&"function"!=typeof p[r]?n[r]:c&&i?m(o,v):f&&p[r]==o?(function(r){var e=function(e,t,n){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(e);case 2:return new r(e,t)}return new r(e,t,n)}return r.apply(this,arguments)};return e[S]=r[S],e})(o):s&&"function"==typeof o?m(Function.call,o):o,s&&((l.virtual||(l.virtual={}))[r]=o,e&E.R&&g&&!g[r]&&b(g,r,o)))};E.F=1,E.G=2,E.S=4,E.P=8,E.B=16,E.W=32,E.U=64,E.R=128,e.exports=E},15:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},16:function(e,t,n){"use strict";var o=n(0);function r(e,t){var n=t&&t.bidId||o.getUniqueIdentifierStr(),r=t&&t.src||"client",i=e||0;this.bidderCode=t&&t.bidder||"",this.width=0,this.height=0,this.statusMessage=(function(){switch(i){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}})(),this.adId=n,this.mediaType="banner",this.source=r,this.getStatusCode=function(){return i},this.getSize=function(){return this.width+"x"+this.height}}t.createBid=function(e,t){return new r(e,t)}},17:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasNonNativeBidder=t.nativeBidder=t.nativeAdUnit=t.NATIVE_TARGETING_KEYS=t.nativeAdapters=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.processNativeAdUnitParams=function(e){if(e&&e.type&&(function(e){if(!e||!(0,d.default)(Object.keys(c),e))return(0,a.logError)(e+" nativeParam is not supported"),!1;return!0})(e.type))return c[e.type];return e},t.nativeBidIsValid=function(t,e){var n=(0,a.getBidRequest)(t.adId,e);if(!n)return!1;if(!(0,a.deepAccess)(t,"native.clickUrl"))return!1;if((0,a.deepAccess)(t,"native.image")&&(!(0,a.deepAccess)(t,"native.image.height")||!(0,a.deepAccess)(t,"native.image.width")))return!1;if((0,a.deepAccess)(t,"native.icon")&&(!(0,a.deepAccess)(t,"native.icon.height")||!(0,a.deepAccess)(t,"native.icon.width")))return!1;var r=n.nativeParams;if(!r)return!0;var i=Object.keys(r).filter((function(e){return r[e].required})),o=Object.keys(t.native).filter((function(e){return t.native[e]}));return i.every((function(e){return(0,d.default)(o,e)}))},t.fireNativeTrackers=function(e,t){var n=void 0;"click"===e.action?n=t.native&&t.native.clickTrackers:(n=t.native&&t.native.impressionTrackers,t.native&&t.native.javascriptTrackers&&(0,a.insertHtmlIntoIframe)(t.native.javascriptTrackers));(n||[]).forEach(a.triggerPixel)},t.getNativeTargeting=function(r){var i={};return Object.keys(r.native).forEach((function(e){var t=u.NATIVE_KEYS[e],n=r.native[e];"object"===(void 0===n?"undefined":o(n))&&n.url&&(n=n.url),t&&(i[t]=n)})),i};var r,a=n(0),i=n(7),d=(r=i)&&r.__esModule?r:{default:r};var u=n(4),s=t.nativeAdapters=[],c=(t.NATIVE_TARGETING_KEYS=Object.keys(u.NATIVE_KEYS).map((function(e){return u.NATIVE_KEYS[e]})),{image:{image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1}}});t.nativeAdUnit=function(e){var t="native"===e.mediaType,n=(0,a.deepAccess)(e,"mediaTypes.native");return t||n};var f=t.nativeBidder=function(e){return(0,d.default)(s,e.bidder)};t.hasNonNativeBidder=function(e){return e.bids.filter((function(e){return!f(e)})).length}},18:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userSync=void 0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return (function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,d=e[Symbol.iterator]();!(r=(a=d.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw o}}return n})(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.newUserSync=a;var r,c=(function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}})(n(0)),f=n(3),o=n(7),l=(r=o)&&r.__esModule?r:{default:r};function a(e){var t={},o={image:[],iframe:[]},n=!1,a={},d={image:!1,iframe:!1},u=e.config;function r(){if(u.syncEnabled&&e.browserSupportsCookies&&!n){try{!(function(){if(!u.pixelEnabled&&!d.image)return;c.shuffle(o.image).forEach((function(e){var t=i(e,2),n=t[0],r=t[1];c.logMessage("Invoking image pixel user sync for bidder: "+n),c.triggerPixel(r)}))})(),(function(){if(!u.iframeEnabled&&!d.iframe)return;c.shuffle(o.iframe).forEach((function(e){var t=i(e,2),n=t[0],r=t[1];c.logMessage("Invoking iframe user sync for bidder: "+n),c.insertUserSyncIframe(r)}))})()}catch(e){return c.logError("Error firing user syncs",e)}o={image:[],iframe:[]},n=!0}}return f.config.getConfig("userSync",(function(e){u=s(u,e.userSync)})),t.registerSync=function(e,t,n){if(!u.syncEnabled||!c.isArray(o[e]))return c.logWarn('User sync type "'+e+'" not supported');if(!t)return c.logWarn("Bidder is required for registering sync");if(Number(a[t])>=u.syncsPerBidder)return c.logWarn('Number of user syncs exceeded for "'+t+'"');if(u.filterSettings){if(function(e,t){var n=u.filterSettings;if(function(e,t){if(e.all&&e[t])return c.logWarn('Detected presence of the "filterSettings.all" and "filterSettings.'+t+'" in userSync config.  You cannot mix "all" with "iframe/image" configs; they are mutually exclusive.'),!1;var n=e.all?e.all:e[t],r=e.all?"all":t;if(!n)return!1;var i=n.filter,o=n.bidders;if(i&&"include"!==i&&"exclude"!==i)return c.logWarn('UserSync "filterSettings.'+r+".filter\" setting '"+i+"' is not a valid option; use either 'include' or 'exclude'."),!1;if("*"!==o&&!(Array.isArray(o)&&0<o.length&&o.every((function(e){return c.isStr(e)&&"*"!==e}))))return c.logWarn('Detected an invalid setup in userSync "filterSettings.'+r+".bidders\"; use either '*' (to represent all bidders) or an array of bidders."),!1;return!0}(n,e)){d[e]=!0;var r=n.all?n.all:n[e],i="*"===r.bidders?[t]:r.bidders,o=r.filter||"include",a={include:function(e,t){return!(0,l.default)(e,t)},exclude:function(e,t){return(0,l.default)(e,t)}};return a[o](i,t)}return!1}(e,t))return c.logWarn("Bidder '"+t+"' is not permitted to register their userSync "+e+" pixels as per filterSettings config.")}else if(u.enabledBidders&&u.enabledBidders.length&&u.enabledBidders.indexOf(t)<0)return c.logWarn('Bidder "'+t+'" not permitted to register their userSync pixels.');var r,i;o[e].push([t,n]),(r=a)[i=t]?r[i]+=1:r[i]=1,a=r},t.syncUsers=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;if(e)return setTimeout(r,Number(e));r()},t.triggerUserSyncs=function(){u.enableOverride&&t.syncUsers()},t}f.config.setDefaults({userSync:{syncEnabled:!0,pixelEnabled:!0,syncsPerBidder:5,syncDelay:3e3}});var d=!c.isSafariBrowser()&&c.cookiesAreEnabled();t.userSync=a({config:f.config.getConfig("userSync"),browserSupportsCookies:d})},19:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NATIVE="native",t.VIDEO="video",t.BANNER="banner"},20:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.createHook=function(r,i,e){var d=[{fn:i,priority:0}],o={sync:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];d.forEach((function(e){e.fn.apply(t,n)}))},asyncSeries:function(){for(var o=this,e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=0;return d[a].fn.apply(this,t.concat((function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=d[++a];if("object"===(void 0===i?"undefined":u(i))&&"function"==typeof i.fn)return i.fn.apply(o,n.concat(e))})))}};if(!o[r])throw"invalid hook type";var t={addHook:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;"function"==typeof e&&(d.push({fn:e,priority:t}),d.sort((function(e,t){return t.priority-e.priority})))},removeHook:function(t){d=d.filter((function(e){return e.fn===i||e.fn!==t}))},hasHook:function(t){return d.some((function(e){return e.fn===t}))}};"string"==typeof e&&(s[e]=t);return a((function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===d.length&&d[0].fn===i)return i.apply(this,t);return o[r].apply(this,t)}),t)};var s=t.hooks={}},21:function(e,t,n){n(111),e.exports=n(13).Array.findIndex},219:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.store=function(e,t){var n={puts:e.map(a)};(0,i.ajax)(o.config.getConfig("cache.url"),(r=t,{success:function(e){var t=void 0;try{t=JSON.parse(e).responses}catch(e){return void r(e,[])}t?r(null,t):r(new Error("The cache server didn't respond with a responses property."),[])},error:function(e,t){r(new Error("Error storing video ad in the cache: "+e+": "+JSON.stringify(t)),[])}}),JSON.stringify(n),{contentType:"text/plain",withCredentials:!0});var r},t.getCacheUrl=function(e){return o.config.getConfig("cache.url")+"?uuid="+e};var i=n(6),o=n(3);function a(e){var t,n;return{type:"xml",value:e.vastXml?e.vastXml:(t=e.vastUrl,n=e.vastImpUrl,'<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA['+t+"]]></VASTAdTagURI>\n        <Impression>"+(n?"<![CDATA["+n+"]]>":"")+"</Impression>\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>"),ttlseconds:Number(e.ttl)}}},22:function(e,t,n){e.exports=!n(33)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},23:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},24:function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},25:function(e,t,n){var r=n(59)("wks"),i=n(61),o=n(19).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},26:function(e,t){e.exports=function(){}},27:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e;return{callBids:function(){},setBidderCode:function(e){t=e},getBidderCode:function(){return t}}}},28:function(e,t,n){"use strict";var r,i=n(7),o=(r=i)&&r.__esModule?r:{default:r},a=(function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}})(n(0));var d={},u=["criteo"];function s(e,t){var n=document.createElement("script");n.type="text/javascript",n.async=!0,t&&"function"==typeof t&&(n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){t()}),n.src=e;var r=document.getElementsByTagName("head");(r=r.length?r:document.getElementsByTagName("body")).length&&(r=r[0]).insertBefore(n,r.firstChild)}t.loadExternalScript=function(e,t){if(t&&e)if((0,o.default)(u,t)){if(!d[e]){a.logWarn("module "+t+" is loading external JavaScript");var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,a.insertElement(n),d[e]=!0}}else a.logError(t+" not whitelisted for loading external JavaScript");else a.logError("cannot load external script without url and moduleCode")},t.loadScript=function(t,e,n){t?n?d[t]?e&&"function"==typeof e&&(d[t].loaded?e():d[t].callbacks.push(e)):(d[t]={loaded:!1,callbacks:[]},e&&"function"==typeof e&&d[t].callbacks.push(e),s(t,(function(){d[t].loaded=!0;try{for(var e=0;e<d[t].callbacks.length;e++)d[t].callbacks[e]()}catch(e){a.logError("Error executing callback","adloader.js:loadScript",e)}}))):s(t,e):a.logError("Error attempting to request empty URL","adloader.js:loadScript")}},29:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.auctionManager=void 0,t.newAuctionManager=u;var r,i=n(0),s=n(43),o=n(10),a=(r=o)&&r.__esModule?r:{default:r};var d=n(4);function u(){var u=[],r={};return r.addWinningBid=function(t){var e=(0,a.default)(u,(function(e){return e.getAuctionId()===t.auctionId}));e?e.addWinningBid(t):utils.logWarn("Auction not found when adding winning bid")},r.getAllWinningBids=function(){return u.map((function(e){return e.getWinningBids()})).reduce(i.flatten,[])},r.getBidsRequested=function(){return u.map((function(e){return e.getBidRequests()})).reduce(i.flatten,[])},r.getBidsReceived=function(){return u.map((function(e){if(e.getAuctionStatus()===s.AUCTION_COMPLETED)return e.getBidsReceived()})).reduce(i.flatten,[]).filter((function(e){return e}))},r.getAdUnits=function(){return u.map((function(e){return e.getAdUnits()})).reduce(i.flatten,[])},r.getAdUnitCodes=function(){return u.map((function(e){return e.getAdUnitCodes()})).reduce(i.flatten,[]).filter(i.uniques)},r.createAuction=function(e){var t,n=e.adUnits,r=e.adUnitCodes,i=e.callback,o=e.cbTimeout,a=e.labels,d=(0,s.newAuction)({adUnits:n,adUnitCodes:r,callback:i,cbTimeout:o,labels:a});return t=d,u.push(t),d},r.findBidByAdId=function(t){return(0,a.default)(u.map((function(e){return e.getBidsReceived()})).reduce(i.flatten,[]),(function(e){return e.adId===t}))},r.getStandardBidderAdServerTargeting=function(){return(0,s.getStandardBidderSettings)()[d.JSON_MAPPING.ADSERVER_TARGETING]},r.setStatusForBids=function(e,t){var n=r.findBidByAdId(e);n&&(n.status=t)},r}t.auctionManager=u()},3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.RANDOM=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.newConfig=d;var r=n(31),c=o(n(10)),f=o(n(7)),i=n(20);function o(e){return e&&e.__esModule?e:{default:e}}var l=n(0),g=!1,p=3e3,v=window.location.origin,y=!0,m=!1,b=200,a=t.RANDOM="random",h={};h[a]=!0,h.fixed=!0;var S=a,E={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},A="*";function d(){var o=[],a=void 0,d=void 0;function e(){function i(t){return(0,c.default)(Object.keys(E),(function(e){return t===E[e]}))}function o(e){if(!e)return l.logError("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)i(e)||l.logWarn("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if("object"===(void 0===e?"undefined":s(e))&&!(0,r.isValidPriceConfig)(e))return l.logError("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}a={},d={_debug:g,get debug(){return this._debug},set debug(e){this._debug=e},_bidderTimeout:p,get bidderTimeout(){return this._bidderTimeout},set bidderTimeout(e){this._bidderTimeout=e},_publisherDomain:v,get publisherDomain(){return this._publisherDomain},set publisherDomain(e){this._publisherDomain=e},_priceGranularity:E.MEDIUM,set priceGranularity(e){o(e)&&("string"==typeof e?this._priceGranularity=i(e)?e:E.MEDIUM:"object"===(void 0===e?"undefined":s(e))&&(this._customPriceBucket=e,this._priceGranularity=E.CUSTOM,l.logMessage("Using custom price granularity")))},get priceGranularity(){return this._priceGranularity},_customPriceBucket:{},get customPriceBucket(){return this._customPriceBucket},_mediaTypePriceGranularity:{},get mediaTypePriceGranularity(){return this._mediaTypePriceGranularity},set mediaTypePriceGranularity(n){var r=this;this._mediaTypePriceGranularity=Object.keys(n).reduce((function(e,t){return o(n[t])?"string"==typeof n?e[t]=i(n[t])?n[t]:r._priceGranularity:"object"===(void 0===n?"undefined":s(n))&&(e[t]=n[t],l.logMessage("Using custom price granularity for "+t)):l.logWarn("Invalid price granularity for media type: "+t),e}),{})},_sendAllBids:y,get enableSendAllBids(){return this._sendAllBids},set enableSendAllBids(e){this._sendAllBids=e},_bidderSequence:S,get bidderSequence(){return this._bidderSequence},set bidderSequence(e){h[e]?this._bidderSequence=e:l.logWarn("Invalid order: "+e+". Bidder Sequence was not set.")},_timoutBuffer:b,get timeoutBuffer(){return this._timoutBuffer},set timeoutBuffer(e){this._timoutBuffer=e},_disableAjaxTimeout:m,get disableAjaxTimeout(){return this._disableAjaxTimeout},set disableAjaxTimeout(e){this._disableAjaxTimeout=e}}}var t=(0,i.createHook)("asyncSeries",(function(n){if("object"===(void 0===n?"undefined":s(n))){var i,t,e=Object.keys(n),r={};e.forEach((function(e){var t=n[e];"object"===s(a[e])&&"object"===(void 0===t?"undefined":s(t))&&(t=u({},a[e],t)),r[e]=d[e]=t})),i=r,t=Object.keys(i),o.filter((function(e){return(0,f.default)(t,e.topic)})).forEach((function(e){var t,n,r;e.callback((t={},n=e.topic,r=i[e.topic],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t))})),o.filter((function(e){return e.topic===A})).forEach((function(e){return e.callback(i)}))}else l.logError("setConfig options must be an object")}));return e(),{getConfig:function(){if(arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])){var e=arguments.length<=0?void 0:arguments[0];return e?l.deepAccess(d,e):d}return function(e,t){var n=t;if("string"!=typeof e&&(n=e,e=A),"function"==typeof n)return o.push({topic:e,callback:n}),function(){o.splice(o.indexOf(t),1)};l.logError("listener must be a function")}.apply(void 0,arguments)},setConfig:t,setDefaults:function(e){"object"===(void 0===a?"undefined":s(a))?(u(a,e),u(d,e)):l.logError("defaults must be an object")},resetConfig:e}}t.config=d()},30:function(wr,xr){var yr;yr=(function(){return this})();try{yr=yr||Function("return this")()||eval("this")}catch(e){"object"==typeof window&&(yr=window)}wr.exports=yr},31:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidPriceConfig=t.getPriceBucketString=void 0;var r,i=n(10),v=(r=i)&&r.__esModule?r:{default:r};var o=n(0),y=2,a={buckets:[{min:0,max:5,increment:.5}]},d={buckets:[{min:0,max:20,increment:.1}]},u={buckets:[{min:0,max:20,increment:.01}]},s={buckets:[{min:0,max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}]},c={buckets:[{min:0,max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}]};function f(n,e,r){var i="";if(!m(e))return i;var t,o,a,d,u,s,c,f,l,g=e.buckets.reduce((function(e,t){return e.max>t.max?e:t}),{max:0}),p=(0,v.default)(e.buckets,(function(e){if(n>g.max*r){var t=e.precision;void 0===t&&(t=y),i=(e.max*r).toFixed(t)}else if(n<=e.max*r&&n>=e.min*r)return e}));return p&&(t=n,a=r,d=void 0!==(o=p).precision?o.precision:y,u=o.increment*a,s=o.min*a,c=Math.pow(10,d+2),f=(t*c-s*c)/(u*c),l=Math.floor(f)*u+s,i=(l=Number(l.toFixed(10))).toFixed(d)),i}function m(e){if(o.isEmpty(e)||!e.buckets||!Array.isArray(e.buckets))return!1;var t=!0;return e.buckets.forEach((function(e){void 0!==e.min&&e.max&&e.increment||(t=!1)})),t}t.getPriceBucketString=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=parseFloat(e);return isNaN(r)&&(r=""),{low:""===r?"":f(e,a,n),med:""===r?"":f(e,d,n),high:""===r?"":f(e,u,n),auto:""===r?"":f(e,c,n),dense:""===r?"":f(e,s,n),custom:""===r?"":f(e,t,n)}},t.isValidPriceConfig=m},32:function(e,t,n){var o=n(47);e.exports=function(r,i,e){if(o(r),void 0===i)return r;switch(e){case 1:return function(e){return r.call(i,e)};case 2:return function(e,t){return r.call(i,e,t)};case 3:return function(e,t,n){return r.call(i,e,t,n)}}return function(){return r.apply(i,arguments)}}},33:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},34:function(e,t,n){var h=n(32),S=n(35),E=n(56),A=n(36),r=n(57);e.exports=function(f,e){var l=1==f,g=2==f,p=3==f,v=4==f,y=6==f,m=5==f||y,b=e||r;return function(e,t,n){for(var r,i,o=E(e),a=S(o),d=h(t,n,3),u=A(a.length),s=0,c=l?b(e,u):g?b(e,0):void 0;s<u;s++)if((m||s in a)&&(i=d(r=a[s],s,o),f))if(l)c[s]=i;else if(i)switch(f){case 3:return!0;case 5:return r;case 6:return s;case 2:c.push(r)}else if(v)return!1;return y?-1:p||v?v:c}}},35:function(e,t,n){var r=n(23);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},36:function(e,t,n){var r=n(37),i=Math.min;e.exports=function(e){return 0<e?i(r(e),9007199254740991):0}},37:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?r:n)(e)}},38:function(e,t,n){var r=n(23);e.exports=Array.isArray||function(e){return"Array"==r(e)}},39:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adunitCounter=void 0;var r=n(0),i={};var o={incrementCounter:function(e){return i[e]=i[e]||{},i[e].counter=(0,r.deepAccess)(i,e+".counter")+1||1,i[e].counter},getCounter:function(e){return(0,r.deepAccess)(i,e+".counter")||0}};t.adunitCounter=o},4:function(e,t){e.exports={JSON_MAPPING:{PL_CODE:"code",PL_SIZE:"sizes",PL_BIDS:"bids",BD_BIDDER:"bidder",BD_ID:"paramsd",BD_PL_ID:"placementId",ADSERVER_TARGETING:"adserverTargeting",BD_SETTING_STANDARD:"standard"},REPO_AND_VERSION:"prebid_prebid_1.28.0",DEBUG_MODE:"pbjs_debug",STATUS:{GOOD:1,NO_BID:2},CB:{TYPE:{ALL_BIDS_BACK:"allRequestedBidsBack",AD_UNIT_BIDS_BACK:"adUnitBidsBack",BID_WON:"bidWon",REQUEST_BIDS:"requestBids"}},EVENTS:{AUCTION_INIT:"auctionInit",AUCTION_END:"auctionEnd",BID_ADJUSTMENT:"bidAdjustment",BID_TIMEOUT:"bidTimeout",BID_REQUESTED:"bidRequested",BID_RESPONSE:"bidResponse",BID_WON:"bidWon",BIDDER_DONE:"bidderDone",SET_TARGETING:"setTargeting",REQUEST_BIDS:"requestBids",ADD_AD_UNITS:"addAdUnits",AD_RENDER_FAILED:"adRenderFailed"},AD_RENDER_FAILED_REASON:{PREVENT_WRITING_ON_MAIN_DOCUMENT:"preventWritingOnMainDocuemnt",NO_AD:"noAd",EXCEPTION:"exception",CANNOT_FIND_AD:"cannotFindAd",MISSING_DOC_OR_ADID:"missingDocOrAdid"},EVENT_ID_PATHS:{bidWon:"adUnitCode"},GRANULARITY_OPTIONS:{LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},TARGETING_KEYS:{BIDDER:"hb_bidder",AD_ID:"hb_adid",PRICE_BUCKET:"hb_pb",SIZE:"hb_size",DEAL:"hb_deal",SOURCE:"hb_source",FORMAT:"hb_format"},NATIVE_KEYS:{title:"hb_native_title",body:"hb_native_body",sponsoredBy:"hb_native_brand",image:"hb_native_image",icon:"hb_native_icon",clickUrl:"hb_native_linkurl",cta:"hb_native_cta"},S2S:{SRC:"s2s",DEFAULT_ENDPOINT:"https://prebid.adnxs.com/pbs/v1/openrtb2/auction",SYNCED_BIDDERS_KEY:"pbjsSyncs"}}},40:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasNonVideoBidder=t.videoBidder=t.videoAdUnit=t.OUTSTREAM=void 0,t.isValidVideoBid=function(e,t){var n=(0,o.getBidRequest)(e.adId,t),r=n&&(0,o.deepAccess)(n,"mediaTypes.video"),i=r&&(0,o.deepAccess)(r,"context");if(!n||r&&i!==s)return a.config.getConfig("cache.url")||!e.vastXml||e.vastUrl?!(!e.vastUrl&&!e.vastXml):((0,o.logError)('\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling prebid cache with pbjs.setConfig({ cache: {url: "..."} });\n      '),!1);if(i===s)return!(!e.renderer&&!n.renderer);return!0};var r,i=n(8),o=n(0),a=n(3),d=n(7),u=(r=d)&&r.__esModule?r:{default:r};var s=t.OUTSTREAM="outstream",c=(t.videoAdUnit=function(e){var t="video"===e.mediaType,n=(0,o.deepAccess)(e,"mediaTypes.video");return t||n},t.videoBidder=function(e){return(0,u.default)(i.videoAdapters,e.bidder)});t.hasNonVideoBidder=function(e){return e.bids.filter((function(e){return!c(e)})).length}},41:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobal=function(){return window.SKpbjs},window.SKpbjs=window.SKpbjs||{},window.SKpbjs.cmd=window.SKpbjs.cmd||[],window.SKpbjs.que=window.SKpbjs.que||[]},42:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.targeting=t.isBidNotExpired=t.TARGETING_KEYS=t.RENDERED=t.BID_TARGETING_SET=void 0;var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.getHighestCpmBidsFromBidPool=N,t.newTargeting=c;var r,S=n(0),E=n(3),A=n(17),i=n(29),o=n(7),T=(r=o)&&r.__esModule?r:{default:r};function I(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=n(0),C=n(4),O=[],a=t.BID_TARGETING_SET="targetingSet",d=t.RENDERED="rendered",R=20,B=t.TARGETING_KEYS=Object.keys(C.TARGETING_KEYS).map((function(e){return C.TARGETING_KEYS[e]})),u=(t.isBidNotExpired=function(e){return e.responseTimestamp+1e3*e.ttl+1e3>(0,S.timestamp)()},function(e){return e&&(e.status&&!(0,T.default)([a,d],e.status)||!e.status)});function N(e,n){var r=[],i=(0,S.groupBy)(e,"adUnitCode");return Object.keys(i).forEach((function(e){var t=(0,S.groupBy)(i[e],"bidderCode");Object.keys(t).forEach((function(e){return r.push(t[e].reduce(n,s()))}))})),r}function s(e){return{adUnitCode:e,cpm:0,adserverTargeting:{},timeToRespond:0}}function c(n){var g={};function p(e){return"string"==typeof e?[e]:w.isArray(e)?e:n.getAdUnitCodes()||[]}function v(){return N(n.getBidsReceived().filter(u).filter(t.isBidNotExpired),S.getOldestHighestCpmBid)}function y(){return n.getStandardBidderAdServerTargeting().map((function(e){return e.key})).concat(B).filter(S.uniques)}function m(r,i,e,t){return Object.keys(i.adserverTargeting).filter(o()).forEach((function(e){var t,n;r.length&&r.filter((n=e,function(e){return e.adUnitCode===i.adUnitCode&&e.adserverTargeting[n]})).forEach((t=e,function(e){w.isArray(e.adserverTargeting[t])||(e.adserverTargeting[t]=[e.adserverTargeting[t]]),e.adserverTargeting[t]=e.adserverTargeting[t].concat(i.adserverTargeting[t]).filter(S.uniques),delete i.adserverTargeting[t]}))})),r.push(i),r}function o(){var t=y();return function(e){return-1===t.indexOf(e)}}function b(t){return _({},t.adUnitCode,Object.keys(t.adserverTargeting).filter(o()).map((function(e){return _({},e.substring(0,R),[t.adserverTargeting[e]])})))}return g.resetPresetTargeting=function(e){if((0,S.isGptPubadsDefined)()){var t=p(e),r=n.getAdUnits().filter((function(e){return(0,T.default)(t,e.code)}));window.googletag.pubads().getSlots().forEach((function(n){O.forEach((function(t){r.forEach((function(e){e.code!==n.getAdUnitPath()&&e.code!==n.getSlotElementId()||n.setTargeting(t,null)}))}))}))}},g.getAllTargeting=function(e){var r,t,i,n,o,a,d,u,s,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v(),f=p(e),l=(a=f,d=c,u=g.getWinningBids(a,d),s=y(),u=u.map((function(o){return _({},o.adUnitCode,Object.keys(o.adserverTargeting).filter((function(e){return void 0===o.sendStandardTargeting||o.sendStandardTargeting||-1===s.indexOf(e)})).reduce((function(e,t){var n=[o.adserverTargeting[t]],r=_({},t.substring(0,R),n);if(t===C.TARGETING_KEYS.DEAL){var i=_({},(t+"_"+o.bidderCode).substring(0,R),n);return[].concat(I(e),[r,i])}return[].concat(I(e),[r])}),[]))}))).concat((n=f,o=c,o.filter((function(e){return(0,T.default)(n,e.adUnitCode)})).map((function(e){return h({},e)})).reduce(m,[]).map(b).filter((function(e){return e})))).concat(E.config.getConfig("enableSendAllBids")?(r=f,t=c,i=B.concat(A.NATIVE_TARGETING_KEYS),N(t,S.getHighestCpm).map((function(t){if(t.adserverTargeting&&r&&(w.isArray(r)&&(0,T.default)(r,t.adUnitCode)||"string"==typeof r&&t.adUnitCode===r))return _({},t.adUnitCode,(n=t,i.filter((function(e){return void 0!==t.adserverTargeting[e]})).map((function(e){return _({},(e+"_"+n.bidderCode).substring(0,R),[n.adserverTargeting[e]])}))));var n})).filter((function(e){return e}))):[]);return l.map((function(t){Object.keys(t).map((function(e){t[e].map((function(e){-1===O.indexOf(Object.keys(e)[0])&&(O=Object.keys(e).concat(O))}))}))})),l=l.map((function(e){return _({},Object.keys(e)[0],e[Object.keys(e)[0]].map((function(e){return _({},Object.keys(e)[0],e[Object.keys(e)[0]].join(", "))})).reduce((function(e,t){return h(t,e)}),{}))})).reduce((function(e,t){var n=Object.keys(t)[0];return e[n]=h({},e[n],t[n]),e}),{}),f.forEach((function(e){l[e]||(l[e]={})})),l},g.setTargetingForGPT=function(i,e){window.googletag.pubads().getSlots().forEach((function(r){Object.keys(i).filter(e?e(r):(0,S.isAdUnitCodeMatchingSlot)(r)).forEach((function(n){return Object.keys(i[n]).forEach((function(t){var e=i[n][t].split(",");(e=1<e.length?[e]:e).map((function(e){return w.logMessage("Attempting to set key value for slot: "+r.getSlotElementId()+" key: "+t+" value: "+e),e})).forEach((function(e){r.setTargeting(t,e)}))}))}))}))},g.getWinningBids=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v(),t=p(e);return n.filter((function(e){return(0,T.default)(t,e.adUnitCode)})).filter((function(e){return 0<e.cpm})).map((function(e){return e.adUnitCode})).filter(S.uniques).map((function(t){return n.filter((function(e){return e.adUnitCode===t?e:null})).reduce(S.getHighestCpm,s(t))}))},g.setTargetingForAst=function(){var r=g.getAllTargeting();Object.keys(r).forEach((function(n){return Object.keys(r[n]).forEach((function(e){if(w.logMessage("Attempting to set targeting for targetId: "+n+" key: "+e+" value: "+r[n][e]),w.isStr(r[n][e])||w.isArray(r[n][e])){var t={};e.search(/pt[0-9]/)<0?t[e.toUpperCase()]=r[n][e]:t[e]=r[n][e],window.apntag.setKeywords(n,t)}}))}))},g.isApntagDefined=function(){if(window.apntag&&w.isFn(window.apntag.setKeywords))return!0},g}t.targeting=c(i.auctionManager)},43:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addBidResponse=t.AUCTION_COMPLETED=t.AUCTION_IN_PROGRESS=t.AUCTION_STARTED=void 0;var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.newAuction=function(e){var f=e.adUnits,t=e.adUnitCodes,n=e.callback,r=e.cbTimeout,i=e.labels,s=f,c=i,l=t,g=[],p=[],v=void 0,y=void 0,m=R.generateUUID(),b=void 0,h=n,S=void 0,E=r,o=[];function A(){return{auctionId:m,auctionStart:v,auctionEnd:y,auctionStatus:b,adUnits:s,adUnitCodes:l,labels:c,bidderRequests:g,bidsReceived:p,winningBids:o,timeout:E}}function T(e,t){if(t&&clearTimeout(S),null!=h){var n=[];e&&(R.logMessage("Auction "+m+" timedOut"),d=p,u=(a=g).filter((function(e){return!e.doneCbCallCount})).map((function(e){return e.bidderCode})).filter(_.uniques),s=d.map((function(e){return e.bidder})).filter(_.uniques),c=u.filter((function(e){return!(0,C.default)(s,e)})),(n=a.map((function(e){return(e.bids||[]).filter((function(e){return(0,C.default)(c,e.bidder)}))})).reduce(_.flatten,[]).map((function(e){return{bidId:e.bidId,bidder:e.bidder,adUnitCode:e.adUnitCode,auctionId:e.auctionId}}))).length&&N.emit(U.EVENTS.BID_TIMEOUT,n));try{b=P,y=Date.now(),N.emit(U.EVENTS.AUCTION_END,A());var r=l,i=p.filter(_.adUnitsFilter.bind(this,r)).reduce(F,{});h.apply(SKpbjs,[i,e])}catch(e){R.logError("Error executing bidsBackHandler",null,e)}finally{n.length&&B.callTimedOutBidders(f,n,E);var o=w.config.getConfig("userSync")||{};o.enableOverride||O(o.syncDelay)}h=null}var a,d,u,s,c}function I(e){R.logInfo("Bids Received for Auction with id: "+m,p),b=P,T(!1,!0)}return{addBidReceived:function(e){p=p.concat(e)},executeCallback:T,callBids:function(){var i=this;b=D,v=Date.now();var o=B.makeBidRequests(s,v,m,E,c);R.logInfo("Bids Requested for Auction with id: "+m,o),o.forEach((function(e){var t;t=e,g=g.concat(t)}));var a={};if(o.length<1)R.logWarn("No valid bid requests returned for auction");else{var e={bidRequests:o,run:function(){var e,t;e=T.bind(null,!0),t=setTimeout(e,E),S=t,b=j,N.emit(U.EVENTS.AUCTION_INIT,A());var n=W(I,i),r={auctionAddBidResponse:n.addBidResponse};B.callBids(s,o,q.bind(r),n.adapterDone,{request:function(e,t){u(x,t),u(a,e),M[e]||(M[e]={SRA:!0,origin:t}),1<a[e]&&(M[e].SRA=!1)},done:function(e){x[e]--,G[0]&&d(G[0])&&G.shift()}},E)}};d(e)||(R.logWarn("queueing auction due to limited endpoint capacity"),G.push(e))}function d(e){var r=!0,i=w.config.getConfig("maxRequestsPerOrigin")||k;return e.bidRequests.some((function(e){var t=1,n=void 0!==e.src&&e.src===U.S2S.SRC?"s2s":e.bidderCode;return M[n]&&(!1===M[n].SRA&&(t=Math.min(e.bids.length,i)),x[M[n].origin]+t>i&&(r=!1)),!r})),r&&e.run(),r}function u(e,t){void 0===e[t]?e[t]=1:e[t]++}},addWinningBid:function(e){o=o.concat(e),B.callBidWonBidder(e.bidder,e,f)},getWinningBids:function(){return o},getTimeout:function(){return E},getAuctionId:function(){return m},getAuctionStatus:function(){return b},getAdUnits:function(){return s},getAdUnitCodes:function(){return l},getBidRequests:function(){return g},getBidsReceived:function(){return p}}},t.auctionCallbacks=W,t.getStandardBidderSettings=d,t.getKeyValueTargetingPairs=K,t.adjustBids=s;var _=n(0),h=n(31),i=n(17),S=n(219),E=n(11),w=n(3),r=n(18),o=n(20),A=a(n(10)),C=a(n(7)),T=n(40);function a(e){return e&&e.__esModule?e:{default:e}}var O=r.userSync.syncUsers,R=n(0),B=n(8),N=n(9),U=n(4),D=t.AUCTION_STARTED="started",j=t.AUCTION_IN_PROGRESS="inProgress",P=t.AUCTION_COMPLETED="completed";N.on(U.EVENTS.BID_ADJUSTMENT,(function(e){s(e)}));var k=4,x={},M={},G=[];var q=t.addBidResponse=(0,o.createHook)("asyncSeries",(function(e,t){this.auctionAddBidResponse(e,t)}),"addBidResponse");function W(e,p){var v=0,t=!1,n=(0,_.delayExecution)((function(){t=!0}),p.getBidRequests().length);function y(){v--,t&&0===v&&e()}return{addBidResponse:function(e,t){v++;var n=p.getBidRequests(),r=p.getAuctionId(),i=(0,_.getBidderRequest)(n,t.bidderCode,e),o=(function(e){var t=e.adUnitCode,n=e.bid,r=e.bidRequest,i=e.auctionId,o=r.start,a=b({},n,{auctionId:i,responseTimestamp:(0,_.timestamp)(),requestTimestamp:o,cpm:parseFloat(n.cpm)||0,bidder:n.bidderCode,adUnitCode:t});a.timeToRespond=a.responseTimestamp-a.requestTimestamp,N.emit(U.EVENTS.BID_ADJUSTMENT,a);var d=r.bids&&(0,A.default)(r.bids,(function(e){return e.adUnitCode==t})),u=d&&d.renderer;u&&u.url&&(a.renderer=E.Renderer.install({url:u.url}),a.renderer.setRender(u.render));var s,c=w.config.getConfig("mediaTypePriceGranularity."+n.mediaType),f=(0,h.getPriceBucketString)(a.cpm,"object"===(void 0===c?"undefined":m(c))?c:w.config.getConfig("customPriceBucket"),w.config.getConfig("currency.granularityMultiplier"));return a.pbLg=f.low,a.pbMg=f.med,a.pbHg=f.high,a.pbAg=f.auto,a.pbDg=f.dense,a.pbCg=f.custom,a.bidderCode&&(0<a.cpm||a.dealId)&&(s=K(a.bidderCode,a)),a.adserverTargeting=b(a.adserverTargeting||{},s),a})({adUnitCode:e,bid:t,bidRequest:i,auctionId:r});"video"===o.mediaType?(a=p,d=o,u=i,s=y,c=!0,f=(0,_.getBidRequest)(d.adId,[u]),l=f&&(0,_.deepAccess)(f,"mediaTypes.video"),g=l&&(0,_.deepAccess)(l,"context"),w.config.getConfig("cache.url")&&g!==T.OUTSTREAM&&(d.videoCacheKey?d.vastUrl||(R.logError("videoCacheKey specified but not required vastUrl for video bid"),c=!1):(c=!1,(0,S.store)([d],(function(e,t){e?(R.logWarn("Failed to save to the video cache: "+e+". Video bid must be discarded."),I(a,d)):(d.videoCacheKey=t[0].uuid,d.vastUrl||(d.vastUrl=(0,S.getCacheUrl)(d.videoCacheKey)),z(a,d),s())})))),c&&(z(a,d),s())):(z(p,o),y());var a,d,u,s,c,f,l,g},adapterDone:function(){n(),t&&0===v&&e()}}}function I(e,t){t.timeToRespond>e.getTimeout()+w.config.getConfig("timeoutBuffer")&&e.executeCallback(!0)}function z(e,t){N.emit(U.EVENTS.BID_RESPONSE,t),e.addBidReceived(t),I(e,t)}function d(e){var t=w.config.getConfig("mediaTypePriceGranularity."+e),n="string"==typeof e&&t?"string"==typeof t?t:"custom":w.config.getConfig("priceGranularity"),r=SKpbjs.bidderSettings;return r[U.JSON_MAPPING.BD_SETTING_STANDARD]||(r[U.JSON_MAPPING.BD_SETTING_STANDARD]={}),r[U.JSON_MAPPING.BD_SETTING_STANDARD][U.JSON_MAPPING.ADSERVER_TARGETING]||(r[U.JSON_MAPPING.BD_SETTING_STANDARD][U.JSON_MAPPING.ADSERVER_TARGETING]=[{key:U.TARGETING_KEYS.BIDDER,val:function(e){return e.bidderCode}},{key:U.TARGETING_KEYS.AD_ID,val:function(e){return e.adId}},{key:U.TARGETING_KEYS.PRICE_BUCKET,val:function(e){return n===U.GRANULARITY_OPTIONS.AUTO?e.pbAg:n===U.GRANULARITY_OPTIONS.DENSE?e.pbDg:n===U.GRANULARITY_OPTIONS.LOW?e.pbLg:n===U.GRANULARITY_OPTIONS.MEDIUM?e.pbMg:n===U.GRANULARITY_OPTIONS.HIGH?e.pbHg:n===U.GRANULARITY_OPTIONS.CUSTOM?e.pbCg:void 0}},{key:U.TARGETING_KEYS.SIZE,val:function(e){return e.size}},{key:U.TARGETING_KEYS.DEAL,val:function(e){return e.dealId}},{key:U.TARGETING_KEYS.SOURCE,val:function(e){return e.source}},{key:U.TARGETING_KEYS.FORMAT,val:function(e){return e.mediaType}}]),r[U.JSON_MAPPING.BD_SETTING_STANDARD]}function K(e,t){if(!t)return{};var n={},r=SKpbjs.bidderSettings;r&&(u(n,d(t.mediaType),t),e&&r[e]&&r[e][U.JSON_MAPPING.ADSERVER_TARGETING]&&(u(n,r[e],t),t.sendStandardTargeting=r[e].sendStandardTargeting));return t.native&&(n=b({},n,(0,i.getNativeTargeting)(t))),n}function u(r,i,o){var e=i[U.JSON_MAPPING.ADSERVER_TARGETING];return o.size=o.getSize(),R._each(e,(function(e){var t=e.key,n=e.val;if(r[t]&&R.logWarn("The key: "+t+" is getting ovewritten"),R.isFn(n))try{n=n(o)}catch(e){R.logError("bidmanager","ERROR",e)}(void 0===i.suppressEmptyKeys||!0!==i.suppressEmptyKeys)&&t!==U.TARGETING_KEYS.DEAL||!R.isEmptyStr(n)&&null!=n?r[t]=n:R.logInfo("suppressing empty key '"+t+"' from adserver targeting")})),r}function s(e){var t=e.bidderCode,n=e.cpm,r=void 0;if(SKpbjs.bidderSettings&&(t&&SKpbjs.bidderSettings[t]&&"function"==typeof SKpbjs.bidderSettings[t].bidCpmAdjustment?r=SKpbjs.bidderSettings[t].bidCpmAdjustment:SKpbjs.bidderSettings[U.JSON_MAPPING.BD_SETTING_STANDARD]&&"function"==typeof SKpbjs.bidderSettings[U.JSON_MAPPING.BD_SETTING_STANDARD].bidCpmAdjustment&&(r=SKpbjs.bidderSettings[U.JSON_MAPPING.BD_SETTING_STANDARD].bidCpmAdjustment),r))try{n=r(e.cpm,b({},e))}catch(e){R.logError("Error during bid adjustment","bidmanager.js",e)}0<=n&&(e.cpm=n)}function F(e,t){return e[t.adUnitCode]||(e[t.adUnitCode]={bids:[]}),e[t.adUnitCode].bids.push(t),e}},46:function(e,t,n){"use strict";var r=n(14),i=n(34)(5),o="find",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{find:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),n(26)(o)},47:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},48:function(e,t,n){var r=n(49),i=n(54);e.exports=n(22)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},49:function(e,t,n){var r=n(50),i=n(51),o=n(53),a=Object.defineProperty;t.f=n(22)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},50:function(e,t,n){var r=n(15);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},51:function(e,t,n){e.exports=!n(22)&&!n(33)((function(){return 7!=Object.defineProperty(n(52)("div"),"a",{get:function(){return 7}}).a}))},52:function(e,t,n){var r=n(15),i=n(19).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},53:function(e,t,n){var i=n(15);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},54:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},55:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},56:function(e,t,n){var r=n(24);e.exports=function(e){return Object(r(e))}},57:function(e,t,n){var r=n(58);e.exports=function(e,t){return new(r(e))(t)}},58:function(e,t,n){var r=n(15),i=n(38),o=n(25)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},59:function(e,t,n){var r=n(13),i=n(19),o="__core-js_shared__",a=i[o]||(i[o]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(60)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ajax=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.ajaxBuilder=r;var p=n(12),v=n(3),y=n(0),m=4;t.ajax=r();function r(){var s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3e3,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=e.request,f=e.done;return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};try{var i=void 0,o=r.method||(n?"POST":"GET"),a=document.createElement("a");a.href=e;var d="object"===(void 0===t?"undefined":g(t))&&null!==t?t:{success:function(){y.logMessage("xhr success")},error:function(e){y.logError("xhr error",null,e)}};if("function"==typeof t&&(d.success=t),(i=new window.XMLHttpRequest).onreadystatechange=function(){if(i.readyState===m){"function"==typeof f&&f(a.origin);var e=i.status;200<=e&&e<300||304===e?d.success(i.responseText,i):d.error(i.statusText,i)}},v.config.getConfig("disableAjaxTimeout")||(i.ontimeout=function(){y.logError("  xhr timeout after ",i.timeout,"ms")}),"GET"===o&&n){var u=(0,p.parse)(e,r);l(u.search,n),e=(0,p.format)(u)}i.open(o,e,!0),v.config.getConfig("disableAjaxTimeout")||(i.timeout=s),r.withCredentials&&(i.withCredentials=!0),y._each(r.customHeaders,(function(e,t){i.setRequestHeader(t,e)})),r.preflight&&i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-Type",r.contentType||"text/plain"),"function"==typeof c&&c(a.origin),"POST"===o&&n?i.send(n):i.send()}catch(e){y.logError("xhr construction",e)}}}},60:function(e,t){e.exports=!0},601:function(e,t,n){e.exports=n(602)},602:function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(41),d=n(0),u=n(603),s=n(18),c=n(28),f=n(3),l=n(29),g=n(42),p=n(20),v=n(604),y=n(7),m=(r=y)&&r.__esModule?r:{default:r},b=n(39),h=n(11);var S=(0,a.getGlobal)(),E=n(4),A=n(0),T=n(8),I=n(16),_=n(9),w=s.userSync.triggerUserSyncs,C=E.EVENTS,O=C.ADD_AD_UNITS,R=C.BID_WON,B=C.REQUEST_BIDS,N=C.SET_TARGETING,U=C.AD_RENDER_FAILED,D=E.AD_RENDER_FAILED_REASON,j=D.PREVENT_WRITING_ON_MAIN_DOCUMENT,P=D.NO_AD,k=D.EXCEPTION,x=D.CANNOT_FIND_AD,M=D.MISSING_DOC_OR_ADID,G={bidWon:function(e){var t=l.auctionManager.getBidsRequested().map((function(e){return e.bids.map((function(e){return e.adUnitCode}))})).reduce(d.flatten).filter(d.uniques);if(!A.contains(t,e))return void A.logError('The "'+e+'" placement is not defined.');return!0}};function q(e,t,n){e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=t,e.defaultView.frameElement.height=n)}function W(e,t,n){var r={};r.reason=e,r.message=t,n&&(r.bid=n),A.logError(t),_.emit(U,r)}function z(e){e.forEach((function(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(e){A.logError("Error processing command :","prebid.js",e)}}))}(0,v.sessionLoader)(),S.bidderSettings=S.bidderSettings||{},S.libLoaded=!0,S.version="v1.28.0",A.logInfo("Prebid.js v1.28.0 loaded"),S.adUnits=S.adUnits||[],S.triggerUserSyncs=w,S.getAdserverTargetingForAdUnitCodeStr=function(e){if(A.logInfo("Invoking SKpbjs.getAdserverTargetingForAdUnitCodeStr",arguments),e){var t=S.getAdserverTargetingForAdUnitCode(e);return A.transformAdServerTargetingObj(t)}A.logMessage("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},S.getAdserverTargetingForAdUnitCode=function(e){return S.getAdserverTargeting(e)[e]},S.getAdserverTargeting=function(e){return A.logInfo("Invoking SKpbjs.getAdserverTargeting",arguments),g.targeting.getAllTargeting(e)},S.getBidResponses=function(){A.logInfo("Invoking SKpbjs.getBidResponses",arguments);var e=l.auctionManager.getBidsReceived().filter(d.adUnitsFilter.bind(this,l.auctionManager.getAdUnitCodes())),n=e&&e.length&&e[e.length-1].auctionId;return e.map((function(e){return e.adUnitCode})).filter(d.uniques).map((function(t){return e.filter((function(e){return e.auctionId===n&&e.adUnitCode===t}))})).filter((function(e){return e&&e[0]&&e[0].adUnitCode})).map((function(e){return t={},n=e[0].adUnitCode,r={bids:e.map(d.removeRequestId)},n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t;var t,n,r})).reduce((function(e,t){return o(e,t)}),{})},S.getBidResponsesForAdUnitCode=function(t){return{bids:l.auctionManager.getBidsReceived().filter((function(e){return e.adUnitCode===t})).map(d.removeRequestId)}},S.setTargetingForGPTAsync=function(e,t){if(A.logInfo("Invoking SKpbjs.setTargetingForGPTAsync",arguments),(0,d.isGptPubadsDefined)()){var n=g.targeting.getAllTargeting(e);g.targeting.resetPresetTargeting(e),g.targeting.setTargetingForGPT(n,t),Object.keys(n).forEach((function(t){Object.keys(n[t]).forEach((function(e){"hb_adid"===e&&l.auctionManager.setStatusForBids(n[t][e],g.BID_TARGETING_SET)}))})),_.emit(N,n)}else A.logError("window.googletag is not defined on the page")},S.setTargetingForAst=function(){A.logInfo("Invoking SKpbjs.setTargetingForAn",arguments),g.targeting.isApntagDefined()?(g.targeting.setTargetingForAst(),_.emit(N,g.targeting.getAllTargeting())):A.logError("window.apntag is not defined on the page")},S.renderAd=function(e,t){if(A.logInfo("Invoking SKpbjs.renderAd",arguments),A.logMessage("Calling renderAd with adId :"+t),e&&t)try{var n=l.auctionManager.findBidByAdId(t);if(n){n.status=g.RENDERED,n.ad=A.replaceAuctionPrice(n.ad,n.cpm),n.adUrl=A.replaceAuctionPrice(n.adUrl,n.cpm),l.auctionManager.addWinningBid(n),_.emit(R,n);var r=n.height,i=n.width,o=n.ad,a=n.mediaType,d=n.adUrl,u=n.renderer,s=document.createComment("Creative "+n.creativeId+" served by "+n.bidder+" Prebid.js Header Bidding");if(A.insertElement(s,e,"body"),(0,h.isRendererRequired)(u))(0,h.executeRenderer)(u,n);else if(e===document&&!A.inIframe()||"video"===a){W(j,"Error trying to write ad. Ad render call ad id "+t+" was prevented from writing to the main document.",n)}else if(o)e.write(o),e.close(),q(e,i,r),A.callBurl(n);else if(d){var c=A.createInvisibleIframe();c.height=r,c.width=i,c.style.display="inline",c.style.overflow="hidden",c.src=d,A.insertElement(c,e,"body"),q(e,i,r),A.callBurl(n)}else{W(P,"Error trying to write ad. No ad for bid response id: "+t,n)}}else{W(x,"Error trying to write ad. Cannot find ad by given id : "+t)}}catch(e){var f="Error trying to write ad Id :"+t+" to the page:"+e.message;W(k,f)}else W(M,"Error trying to write ad Id :"+t+" to the page. Missing document or adId")},S.removeAdUnit=function(e){if(A.logInfo("Invoking SKpbjs.removeAdUnit",arguments),e)for(var t=0;t<S.adUnits.length;t++)S.adUnits[t].code===e&&S.adUnits.splice(t,1)},S.requestBids=(0,p.createHook)("asyncSeries",(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,n=e.timeout,r=e.adUnits,i=e.adUnitCodes,o=e.labels;_.emit(B);var a=n||f.config.getConfig("bidderTimeout");if(r=r||S.adUnits,A.logInfo("Invoking SKpbjs.requestBids",arguments),i&&i.length?r=r.filter((function(e){return(0,m.default)(i,e.code)})):i=r&&r.map((function(e){return e.code})),r.forEach((function(i){var o=Object.keys(i.mediaTypes||{banner:"banner"}),e=i.bids.map((function(e){return e.bidder})),a=T.bidderRegistry,t=f.config.getConfig("s2sConfig"),n=t&&t.bidders,r=n?e.filter((function(e){return!(0,m.default)(n,e)})):e;i.transactionId||(i.transactionId=A.generateUUID()),r.forEach((function(t){var e=a[t],n=e&&e.getSpec&&e.getSpec(),r=n&&n.supportedMediaTypes||["banner"];o.some((function(e){return(0,m.default)(r,e)}))||(A.logWarn(A.unsupportedBidderMessage(i,t)),i.bids=i.bids.filter((function(e){return e.bidder!==t})))})),b.adunitCounter.incrementCounter(i.code)})),r&&0!==r.length){var d=l.auctionManager.createAuction({adUnits:r,adUnitCodes:i,callback:t,cbTimeout:a,labels:o});return d.callBids(),d}if(A.logMessage("No adUnits configured. No bids requested."),"function"==typeof t)try{t()}catch(e){A.logError("Error executing bidsBackHandler",null,e)}})),S.addAdUnits=function(e){A.logInfo("Invoking SKpbjs.addAdUnits",arguments),A.isArray(e)?S.adUnits.push.apply(S.adUnits,e):"object"===(void 0===e?"undefined":i(e))&&S.adUnits.push(e),_.emit(O)},S.onEvent=function(e,t,n){A.logInfo("Invoking SKpbjs.onEvent",arguments),A.isFn(t)?!n||G[e].call(null,n)?_.on(e,t,n):A.logError('The id provided is not valid for event "'+e+'" and no handler was set.'):A.logError('The event handler provided is not a function and was not set on event "'+e+'".')},S.offEvent=function(e,t,n){A.logInfo("Invoking SKpbjs.offEvent",arguments),n&&!G[e].call(null,n)||_.off(e,t,n)},S.registerBidAdapter=function(e,t){A.logInfo("Invoking SKpbjs.registerBidAdapter",arguments);try{T.registerBidAdapter(e(),t)}catch(e){A.logError("Error registering bidder adapter : "+e.message)}},S.registerAnalyticsAdapter=function(e){A.logInfo("Invoking SKpbjs.registerAnalyticsAdapter",arguments);try{T.registerAnalyticsAdapter(e)}catch(e){A.logError("Error registering analytics adapter : "+e.message)}},S.createBid=function(e){return A.logInfo("Invoking SKpbjs.createBid",arguments),I.createBid(e)},S.loadScript=function(e,t,n){A.logInfo("Invoking SKpbjs.loadScript",arguments),(0,c.loadScript)(e,t,n)},S.enableAnalytics=function(e){e&&!A.isEmpty(e)?(A.logInfo("Invoking SKpbjs.enableAnalytics for: ",e),T.enableAnalytics(e)):A.logError("SKpbjs.enableAnalytics should be called with option {}")},S.aliasBidder=function(e,t){A.logInfo("Invoking SKpbjs.aliasBidder",arguments),e&&t?T.aliasBidAdapter(e,t):A.logError("bidderCode and alias must be passed as arguments","SKpbjs.aliasBidder")},S.getAllWinningBids=function(){return l.auctionManager.getAllWinningBids().map(d.removeRequestId)},S.getAllPrebidWinningBids=function(){return l.auctionManager.getBidsReceived().filter((function(e){return e.status===g.BID_TARGETING_SET})).map(d.removeRequestId)},S.getHighestCpmBids=function(e){var t=(0,g.getHighestCpmBidsFromBidPool)(l.auctionManager.getBidsReceived(),d.getLatestHighestCpmBid);return g.targeting.getWinningBids(e,t).map(d.removeRequestId)},S.markWinningBidAsUsed=function(t){var e=[];t.adUnitCode&&t.adId?e=l.auctionManager.getBidsReceived().filter((function(e){return e.adId===t.adId&&e.adUnitCode===t.adUnitCode})):t.adUnitCode?e=g.targeting.getWinningBids(t.adUnitCode):t.adId?e=l.auctionManager.getBidsReceived().filter((function(e){return e.adId===t.adId})):A.logWarn("Inproper usage of markWinningBidAsUsed. It'll need an adUnitCode and/or adId to function."),0<e.length&&(e[0].status=g.RENDERED)},S.getConfig=f.config.getConfig,S.setConfig=f.config.setConfig,S.que.push((function(){return(0,u.listenMessagesFromCreative)()})),S.cmd.push=function(e){if("function"==typeof e)try{e.call()}catch(e){A.logError("Error processing command :",e.message,e.stack)}else A.logError("Commands written into SKpbjs.cmd.push must be wrapped in a function")},S.que.push=S.cmd.push,S.processQueue=function(){z(S.que),z(S.cmd)}},603:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listenMessagesFromCreative=function(){addEventListener("message",o,!1)};var m=i(n(9)),b=n(17),r=n(4),h=n(0),S=n(29),E=i(n(10)),A=n(11);function i(e){return e&&e.__esModule?e:{default:e}}var T=r.EVENTS.BID_WON;function o(e){var t,n,r,i,o,a,d,u,s,c,f,l,g,p=e.message?"message":"data",v={};try{v=JSON.parse(e[p])}catch(e){return}if(v&&v.adId){var y=(0,E.default)(S.auctionManager.getBidsReceived(),(function(e){return e.adId===v.adId}));"Prebid Request"===v.message&&(t=y,n=v.adServerDomain,r=e.source,i=t.adId,o=t.ad,a=t.adUrl,d=t.width,u=t.height,s=t.renderer,(0,A.isRendererRequired)(s)?(0,A.executeRenderer)(s,t):i&&(f=(c=t).adUnitCode,l=c.width,g=c.height,["div","iframe"].forEach((function(e){var t,n=(t=e,document.getElementById((0,E.default)(window.googletag.pubads().getSlots().filter((0,h.isSlotMatchingAdUnitCode)(f)),(function(e){return e})).getSlotElementId()).querySelector(t)).style;n.width=l+"px",n.height=g+"px"})),r.postMessage(JSON.stringify({message:"Prebid Response",ad:o,adUrl:a,adId:i,width:d,height:u}),n)),S.auctionManager.addWinningBid(y),m.default.emit(T,y)),"Prebid Native"===v.message&&((0,b.fireNativeTrackers)(v,y),S.auctionManager.addWinningBid(y),m.default.emit(T,y))}}},604:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.boundHook=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n.disableOverrides=f,n.addBidResponseHook=l,n.getConfig=g,n.sessionLoader=function(e){var t=void 0;try{e=e||window.sessionStorage,t=JSON.parse(e.getItem(d))}catch(e){}t&&c(t,!0)};var r=t(3),a=t(0),i=t(43),d="SKpbjs:debugging",u=n.boundHook=void 0;function s(e){(0,a.logMessage)("DEBUG: "+e)}function c(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];r.config.setConfig({debug:!0}),s("bidder overrides enabled"+(t?" from session":"")),u&&i.addBidResponse.removeHook(u),n.boundHook=u=l.bind(null,e),i.addBidResponse.addHook(u,5)}function f(){u&&(i.addBidResponse.removeHook(u),s("bidder overrides disabled"))}function l(e,r,i,t){if(Array.isArray(e.bidders)&&-1===e.bidders.indexOf(i.bidderCode))return n="bidder '"+i.bidderCode+"' excluded from auction by bidder overrides",void(0,a.logWarn)("DEBUG: "+n);var n;Array.isArray(e.bids)&&e.bids.forEach((function(n){n.bidder&&n.bidder!==i.bidderCode||n.adUnitCode&&n.adUnitCode!==r||(i=o({},i),Object.keys(n).filter((function(e){return-1===["bidder","adUnitCode"].indexOf(e)})).forEach((function(e){var t=n[e];s("bidder overrides changed '"+r+"/"+i.bidderCode+"' bid."+e+" from '"+i[e]+"' to '"+t+"'"),i[e]=t})))})),t(r,i)}function g(e){if(e.enabled){try{window.sessionStorage.setItem(d,JSON.stringify(e))}catch(e){}c(e)}else{f();try{window.sessionStorage.removeItem(d)}catch(e){}}}r.config.getConfig("debugging",(function(e){return g(e.debugging)}))},61:function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},62:function(e,t,n){"use strict";var r=n(14),i=n(63)(!0);r(r.P,"Array",{includes:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),n(26)("includes")},63:function(e,t,n){var u=n(64),s=n(36),c=n(65);e.exports=function(d){return function(e,t,n){var r,i=u(e),o=s(i.length),a=c(n,o);if(d&&t!=t){for(;a<o;)if((r=i[a++])!=r)return!0}else for(;a<o;a++)if((d||a in i)&&i[a]===t)return d||a||0;return!d&&-1}}},64:function(e,t,n){var r=n(35),i=n(24);e.exports=function(e){return r(i(e))}},65:function(e,t,n){var r=n(37),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},66:function(e,t){e.exports=function e(t){var n=Array.isArray(t)?[]:{};for(var r in t){var i=t[r];n[r]=i&&"object"==typeof i?e(i):i}return n}},67:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.setSizeConfig=a,t.resolveStatus=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.labels,n=void 0===t?[]:t,r=e.labelAll,i=void 0!==r&&r,o=e.activeLabels,a=void 0===o?[]:o,d=arguments[1],u=arguments[2],s=(c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:m,c.reduce((function(n,e){return"object"===(void 0===e?"undefined":p(e))&&"string"==typeof e.mediaQuery?matchMedia(e.mediaQuery).matches&&(Array.isArray(e.sizesSupported)&&(n.shouldFilter=!0),["labels","sizesSupported"].forEach((function(t){return(e[t]||[]).forEach((function(e){return n[t][e]=!0}))}))):(0,v.logWarn)('sizeConfig rule missing required property "mediaQuery"'),n}),{labels:{},sizesSupported:{},shouldFilter:!1}));var c;d=(0,v.isPlainObject)(d)?(0,v.deepClone)(d):{};u&&(d.banner?d.banner.sizes||(d.banner.sizes=u):d.banner={sizes:u});var f=(0,v.deepAccess)(d,"banner.sizes");s.shouldFilter&&f&&(d.banner.sizes=f.filter((function(e){return s.sizesSupported[e]})));var l=Object.keys(d),g={active:1<l.length||1===l.length&&"banner"!==l[0]||"banner"===l[0]&&0<(0,v.deepAccess)(d,"banner.sizes.length")&&(0===n.length||!i&&(n.some((function(e){return s.labels[e]}))||n.some((function(e){return(0,y.default)(a,e)})))||i&&n.reduce((function(e,t){return e?s.labels[t]||(0,y.default)(a,t):e}),!0)),mediaTypes:d};f&&f.length!==d.banner.sizes.length&&(g.filterResults={before:f,after:d.banner.sizes});return g};var r,i=n(3),v=n(0),o=n(7),y=(r=o)&&r.__esModule?r:{default:r};var m=[];function a(e){m=e}i.config.getConfig("sizeConfig",(function(e){return a(e.sizeConfig)}))},68:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRefererInfo=void 0,t.detectReferer=r;var a=n(0);function r(i){function o(){var e=(function(){var t=[],n=void 0;do{try{n=n?n.parent:i;try{t.push({referrer:n.document.referrer||null,location:n.location.href||null,isTop:n==i.top})}catch(e){t.push({referrer:null,location:null,isTop:n==i.top}),(0,a.logWarn)("Trying to access cross domain iframe. Continuing without referrer and location")}}catch(e){return t.push({referrer:null,location:null,isTop:!1}),t}}while(n!=i.top);return t})(),t=(function(){try{if(!i.location.ancestorOrigins)return;return i.location.ancestorOrigins}catch(e){}})();if(t)for(var n=0,r=t.length;n<r;n++)e[n].ancestor=t[n];return e}return function(){try{var e=o(),t=e.length-1,n=null!==e[t].location||0<t&&null!==e[t-1].referrer,r=(function(e){var t=[],n=null,r=null,i=null,o=null,a=null,d=void 0;for(d=e.length-1;0<=d;d--){try{n=e[d].location}catch(e){}if(n)t.push(n),a||(a=n);else if(0!==d){r=e[d-1];try{i=r.referrer,o=r.ancestor}catch(e){}i?(t.push(i),a||(a=i)):o?(t.push(o),a||(a=o)):t.push(null)}else t.push(null)}return{stack:t,detectedRefererUrl:a}})(e);return{referer:r.detectedRefererUrl,reachedTop:n,numIframes:t,stack:r.stack}}catch(e){}}}t.getRefererInfo=r(window)},7:function(e,t,n){n(62),e.exports=n(13).Array.includes},8:function(e,h,t){"use strict";var b=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return (function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,d=e[Symbol.iterator]();!(r=(a=d.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw o}}return n})(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S=t(0),p=t(67),v=t(17),c=t(1),E=t(6),A=t(3),T=n(t(7)),I=n(t(10)),y=t(39),_=t(68);function n(e){return e&&e.__esModule?e:{default:e}}var w=t(0),C=t(4),O=t(9),R=void 0,B={};h.bidderRegistry=B,h.aliasRegistry={};var N={};A.config.getConfig("s2sConfig",(function(e){N=e.s2sConfig}));var r={};function m(e,t){return e.labelAll?{labelAll:!0,labels:e.labelAll,activeLabels:t}:{labelAll:!1,labels:e.labelAny,activeLabels:t}}function U(e){var i=e.bidderCode,s=e.auctionId,c=e.bidderRequestId,t=e.adUnits,f=e.labels,l=e.src;return t.reduce((function(e,d){var t=(0,p.resolveStatus)(m(d,f),d.mediaTypes,d.sizes),n=t.active,u=t.mediaTypes,r=t.filterResults;return n?r&&w.logInfo('Size mapping filtered adUnit "'+d.code+'" banner sizes from ',r.before,"to ",r.after):w.logInfo('Size mapping disabled adUnit "'+d.code+'"'),n&&e.push(d.bids.filter((function(e){return e.bidder===i})).reduce((function(e,t){var n=d.nativeParams||w.deepAccess(d,"mediaTypes.native");n&&(t=g({},t,{nativeParams:(0,v.processNativeAdUnitParams)(n)})),t=g({},t,(0,S.getDefinedParams)(d,["mediaType","renderer"]));var r=(0,p.resolveStatus)(m(t,f),u),i=r.active,o=r.mediaTypes,a=r.filterResults;return i?a&&w.logInfo('Size mapping filtered adUnit "'+d.code+'" bidder "'+t.bidder+'" banner sizes from ',a.before,"to ",a.after):w.logInfo('Size mapping deactivated adUnit "'+d.code+'" bidder "'+t.bidder+'"'),w.isValidMediaTypes(o)?t=g({},t,{mediaTypes:o}):w.logError("mediaTypes is not correctly configured for adunit "+d.code),i&&e.push(g({},t,{adUnitCode:d.code,transactionId:d.transactionId,sizes:w.deepAccess(o,"banner.sizes")||[],bidId:t.bid_id||w.getUniqueIdentifierStr(),bidderRequestId:c,auctionId:s,src:l,bidRequestsCount:y.adunitCounter.getCounter(d.code)})),e}),[])),e}),[]).reduce(S.flatten,[]).filter((function(e){return""!==e}))}function D(){return N&&N.enabled&&N.testing&&R}function i(t,n,e){try{var r=B[t].getSpec();r&&r[n]&&"function"==typeof r[n]&&(w.logInfo("Invoking "+t+"."+n),r[n](e))}catch(e){w.logWarn("Error calling "+n+" of "+t)}}h.gdprDataHandler={consentData:null,setConsentData:function(e){this.consentData=e},getConsentData:function(){return this.consentData}},h.makeBidRequests=function(e,i,o,a,d){var u=[];e=h.checkBidRequestSizes(e);var t=(0,S.getBidderCodes)(e);A.config.getConfig("bidderSequence")===A.RANDOM&&(t=(0,S.shuffle)(t));var n,r,s,c=(0,_.getRefererInfo)(),f=t,l=[];if(N.enabled){D()&&(l=R.getSourceBidderMap(e)[R.CLIENT]);var g=N.bidders;f=t.filter((function(e){return!(0,T.default)(g,e)||(0,T.default)(l,e)}));var p=(n=e,r=N.bidders,(s=w.deepClone(n)).forEach((function(e){e.bids=e.bids.filter((function(e){return(0,T.default)(r,e.bidder)&&(!D()||e.finalSource!==R.CLIENT)})).map((function(e){return e.bid_id=w.getUniqueIdentifierStr(),e}))})),s=s.filter((function(e){return 0!==e.bids.length}))),v=w.generateUUID();g.forEach((function(e){var t=w.getUniqueIdentifierStr(),n={bidderCode:e,auctionId:o,bidderRequestId:t,tid:v,bids:U({bidderCode:e,auctionId:o,bidderRequestId:t,adUnits:w.deepClone(p),labels:d,src:C.S2S.SRC}),auctionStart:i,timeout:N.timeout,src:C.S2S.SRC,refererInfo:c};0!==n.bids.length&&u.push(n)})),p.forEach((function(e){var t=e.bids.filter((function(t){return(0,I.default)(u,(function(e){return(0,I.default)(e.bids,(function(e){return e.bidId===t.bid_id}))}))}));e.bids=t})),u.forEach((function(e){e.adUnitsS2SCopy=p.filter((function(e){return 0<e.bids.length}))}))}var y,m,b=(y=e,(m=w.deepClone(y)).forEach((function(e){e.bids=e.bids.filter((function(e){return!D()||e.finalSource!==R.SERVER}))})),m=m.filter((function(e){return 0!==e.bids.length})));return f.forEach((function(e){var t=w.getUniqueIdentifierStr(),n={bidderCode:e,auctionId:o,bidderRequestId:t,bids:U({bidderCode:e,auctionId:o,bidderRequestId:t,adUnits:w.deepClone(b),labels:d,src:"client"}),auctionStart:i,timeout:a,refererInfo:c},r=B[e];r||w.logError("Trying to make a request for bidder that does not exist: "+e),r&&n.bids&&0!==n.bids.length&&u.push(n)})),h.gdprDataHandler.getConsentData()&&u.forEach((function(e){e.gdprConsent=h.gdprDataHandler.getConsentData()})),u},h.checkBidRequestSizes=function(e){function d(e){return Array.isArray(e)&&2===e.length&&w.isInteger(e[0])&&w.isInteger(e[1])}return e.forEach((function(e){var t=e.mediaTypes,n=w.getAdUnitSizes(e);if(t&&t.banner){var r=t.banner;r.sizes?(r.sizes=n,e.sizes=n):(w.logError("Detected a mediaTypes.banner object did not include sizes.  This is a required field for the mediaTypes.banner object.  Removing invalid mediaTypes.banner object from request."),delete e.mediaTypes.banner)}else e.sizes&&(w.logWarn("Usage of adUnits.sizes will eventually be deprecated.  Please define size dimensions within the corresponding area of the mediaTypes.<object> (eg mediaTypes.banner.sizes)."),e.sizes=n);if(t&&t.video){var i=t.video;if(i.playerSize)if(Array.isArray(i.playerSize)&&1===i.playerSize.length&&i.playerSize.every(d))e.sizes=i.playerSize;else if(d(i.playerSize)){var o=[];o.push(i.playerSize),w.logInfo("Transforming video.playerSize from "+i.playerSize+" to "+o+" so it's in the proper format."),e.sizes=i.playerSize=o}else w.logError("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete e.mediaTypes.video.playerSize}if(t&&t.native){var a=t.native;a.image&&a.image.sizes&&!Array.isArray(a.image.sizes)&&(w.logError("Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request."),delete e.mediaTypes.native.image.sizes),a.image&&a.image.aspect_ratios&&!Array.isArray(a.image.aspect_ratios)&&(w.logError("Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request."),delete e.mediaTypes.native.image.aspect_ratios),a.icon&&a.icon.sizes&&!Array.isArray(a.icon.sizes)&&(w.logError("Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request."),delete e.mediaTypes.native.icon.sizes)}})),e},h.callBids=function(e,t,r,i,o,a){if(t.length){var n=t.reduce((function(e,t){return e[Number(void 0!==t.src&&t.src===C.S2S.SRC)].push(t),e}),[[],[]]),d=b(n,2),u=d[0],s=d[1];if(s.length){var c=(0,E.ajaxBuilder)(a,o?{request:o.request.bind(null,"s2s"),done:o.done}:void 0),f=N.bidders,l=B[N.adapter],g=s[0].tid,p=s[0].adUnitsS2SCopy;if(l){var v={tid:g,ad_units:p};if(v.ad_units.length){var y=s.map((function(e){return e.start=(0,S.timestamp)(),i})),m=v.ad_units.reduce((function(e,t){return e.concat((t.bids||[]).reduce((function(e,t){return e.concat(t.bidder)}),[]))}),[]);w.logMessage("CALLING S2S HEADER BIDDERS ==== "+f.filter((function(e){return(0,T.default)(m,e)})).join(",")),s.forEach((function(e){O.emit(C.EVENTS.BID_REQUESTED,e)})),l.callBids(v,s,r,(function(){return y.forEach((function(e){return e()}))}),c)}}}u.forEach((function(e){e.start=(0,S.timestamp)();var t=B[e.bidderCode];w.logMessage("CALLING BIDDER ======= "+e.bidderCode),O.emit(C.EVENTS.BID_REQUESTED,e);var n=(e.doneCbCallCount=0,E.ajaxBuilder)(a,o?{request:o.request.bind(null,e.bidderCode),done:o.done}:void 0);t.callBids(e,r,i,n)}))}else w.logWarn("callBids executed with no bidRequests.  Were they filtered by labels or sizing?")},h.videoAdapters=[],h.registerBidAdapter=function(e,t){var n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).supportedMediaTypes,r=void 0===n?[]:n;e&&t?"function"==typeof e.callBids?(B[t]=e,(0,T.default)(r,"video")&&h.videoAdapters.push(t),(0,T.default)(r,"native")&&v.nativeAdapters.push(t)):w.logError("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):w.logError("bidAdaptor or bidderCode not specified")},h.aliasBidAdapter=function(t,e){var n,r;if(void 0===B[e]){var i=B[t];if(void 0===i){var o=A.config.getConfig("s2sConfig"),a=o&&o.bidders;a&&(0,T.default)(a,e)?h.aliasRegistry[e]=t:w.logError('bidderCode "'+t+'" is not an existing bidder.',"adaptermanager.aliasBidAdapter")}else try{var d=void 0,u=(n=t,r=[],(0,T.default)(h.videoAdapters,n)&&r.push("video"),(0,T.default)(v.nativeAdapters,n)&&r.push("native"),r);if(i.constructor.prototype!=Object.prototype)(d=new i.constructor).setBidderCode(e);else{var s=i.getSpec();d=(0,c.newBidder)(g({},s,{code:e})),h.aliasRegistry[e]=t}this.registerBidAdapter(d,e,{supportedMediaTypes:u})}catch(e){w.logError(t+" bidder does not currently support aliasing.","adaptermanager.aliasBidAdapter")}}else w.logMessage('alias name "'+e+'" has been already specified.')},h.registerAnalyticsAdapter=function(e){var t=e.adapter,n=e.code;t&&n?"function"==typeof t.enableAnalytics?(t.code=n,r[n]=t):w.logError('Prebid Error: Analytics adaptor error for analytics "'+n+'"\n        analytics adapter must implement an enableAnalytics() function'):w.logError("Prebid Error: analyticsAdapter or analyticsCode not specified")},h.enableAnalytics=function(e){w.isArray(e)||(e=[e]),w._each(e,(function(e){var t=r[e.provider];t?t.enableAnalytics(e):w.logError("Prebid Error: no analytics adapter found in registry for\n        "+e.provider+".")}))},h.getBidAdapter=function(e){return B[e]},h.setS2STestingModule=function(e){R=e},h.callTimedOutBidders=function(t,n,r){n=n.map((function(e){return e.params=w.getUserConfiguredParams(t,e.adUnitCode,e.bidder),e.timeout=r,e})),n=w.groupBy(n,"bidder"),Object.keys(n).forEach((function(e){i(e,"onTimeout",n[e])}))},h.callBidWonBidder=function(e,t,n){t.params=w.getUserConfiguredParams(n,t.adUnitCode,t.bidder),i(e,"onBidWon",t)}},9:function(e,t,n){"use strict";var d,r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(0),o=n(4),a=Array.prototype.slice,s=Array.prototype.push,c=u._map(o.EVENTS,(function(e){return e})),f=o.EVENT_ID_PATHS,l=[];e.exports=(d={},(r={}).on=function(e,t,n){if(i=e,u.contains(c,i)){var r=d[e]||{que:[]};n?(r[n]=r[n]||{que:[]},r[n].que.push(t)):r.que.push(t),d[e]=r}else u.logError("Wrong event name : "+e+" Valid event names :"+c);var i},r.emit=function(e){!(function(e,t){u.logMessage("Emitting event for: "+e);var n=t[0]||{},r=n[f[e]],i=d[e]||{que:[]},o=u._map(i,(function(e,t){return t})),a=[];l.push({eventType:e,args:n,id:r}),r&&u.contains(o,r)&&s.apply(a,i[r].que),s.apply(a,i.que),u._each(a,(function(e){if(e)try{e.apply(null,t)}catch(e){u.logError("Error executing handler:","events.js",e)}}))})(e,a.call(arguments,1))},r.off=function(e,n,r){var i=d[e];u.isEmpty(i)||u.isEmpty(i.que)&&u.isEmpty(i[r])||r&&(u.isEmpty(i[r])||u.isEmpty(i[r].que))||(r?u._each(i[r].que,(function(e){var t=i[r].que;e===n&&t.splice(u.indexOf.call(t,e),1)})):u._each(i.que,(function(e){var t=i.que;e===n&&t.splice(u.indexOf.call(t,e),1)})),d[e]=i)},r.get=function(){return d},r.getEvents=function(){var n=[];return u._each(l,(function(e){var t=i({},e);n.push(t)})),n},r)}});
SKpbjsChunk([162],{85:function(e,n,r){r(86),e.exports=r(87)},86:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.spec=void 0;var t=r(1),g=r(2),v="adform",d=n.spec={code:v,supportedMediaTypes:[g.BANNER,g.VIDEO],isBidRequestValid:function(e){return!!e.params.mid},buildRequests:function(e,n){var r,t,d,s,i,p,o,a,u,c,g=[],l=[["adxDomain","adx.adform.net"],["fd",1],["url",null],["tid",null]],h=JSON.parse(JSON.stringify(e)),f=h[0]&&h[0].bidder||v;for(r=0,t=h.length;r<t;r++){for("net"!==(i=h[r]).params.priceType&&"net"!==i.params.pt||(u="net"),d=0,s=l.length;d<s;d++)(o=i[p=l[d][0]]||i.params[p])&&(i[p]=i.params[p]=null,l[d][1]=o);(a=i.params).transactionId=i.transactionId,g.push(b(a))}for(g.unshift("//"+l[0][1]+"/adx/?rp=4"),u=u||"gross",g.push("pt="+u),g.push("stid="+e[0].auctionId),n&&n.gdprConsent&&n.gdprConsent.gdprApplies&&(c={gdpr:n.gdprConsent.gdprApplies,gdpr_consent:n.gdprConsent.consentString},g.push("gdpr="+c.gdpr),g.push("gdpr_consent="+c.gdpr_consent)),r=1,t=l.length;r<t;r++)p=l[r][0],(o=l[r][1])&&g.push(p+"="+encodeURIComponent(o));return{method:"GET",url:g.join("&"),bids:e,netRevenue:u,bidder:f,gdpr:c};function b(e){var n,r=[];for(n in e)e.hasOwnProperty(n)&&e[n]&&r.push(n,"=",e[n],"&");return encodeURIComponent(btoa(r.join("").slice(0,-1)))}},interpretResponse:function(e,n){for(var r,t,d,s,i={banner:1,vast_content:1,vast_url:1},p=[],o=n.bids,a=e.body,u=0;u<a.length;u++)s="banner"===(t=a[u]).response?g.BANNER:g.VIDEO,d=o[u],i[t.response]&&(c(t,d.sizes)||s===g.VIDEO)&&(r={requestId:d.bidId,cpm:t.win_bid,width:t.width,height:t.height,creativeId:d.bidId,dealId:t.deal_id,currency:t.win_cur,netRevenue:"gross"!==n.netRevenue,ttl:360,ad:t.banner,bidderCode:n.bidder,transactionId:d.transactionId,vastUrl:t.vast_url,vastXml:t.vast_content,mediaType:s},n.gdpr&&(r.gdpr=n.gdpr.gdpr,r.gdpr_consent=n.gdpr.gdpr_consent),p.push(r));return p;function c(e,n){for(var r=0,t=n.length;r<t;r++)if(e.width==n[r][0]&&e.height==n[r][1])return!0;return!1}}};(0,t.registerBidder)(d)},87:function(e,n){}},[85]);
SKpbjsChunk([144],{144:function(e,r,a){a(145),e.exports=a(146)},145:function(e,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.spec=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},p=a(11),u=(function(e){{if(e&&e.__esModule)return e;var r={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r.default=e,r}})(a(0)),t=a(1),m=a(2),l=n(a(10)),f=n(a(7));function n(e){return e&&e.__esModule?e:{default:e}}var c=["id","mimes","minduration","maxduration","startdelay","skippable","playback_method","frameworks"],y=["age","external_uid","segments","gender","dnt","language"],v=["geo","device_id"],b={body:"description",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0},minimumParams:{sizes:[{}]}},icon:{serverName:"icon",requiredParams:{required:!0},minimumParams:{sizes:[{}]}},sponsoredBy:"sponsored_by"},i=r.spec={code:"appnexus",aliases:["appnexusAst","brealtime","emxdigital","pagescience","defymedia","gourmetads","matomy","featureforward","oftmedia","districtm"],supportedMediaTypes:[m.BANNER,m.VIDEO,m.NATIVE],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.member&&e.params.invCode)},buildRequests:function(e,r){var a=e.map(g),t=(0,l.default)(e,h),n=void 0;t&&(n={},Object.keys(t.params.user).filter((function(e){return(0,f.default)(y,e)})).forEach((function(e){return n[e]=t.params.user[e]})));var s=(0,l.default)(e,k),i=void 0;s&&s.params&&s.params.app&&(i={},Object.keys(s.params.app).filter((function(e){return(0,f.default)(v,e)})).forEach((function(e){return i[e]=s.params.app[e]})));var d=(0,l.default)(e,E),o=void 0;d&&d.params&&s.params.app&&s.params.app.id&&(o={appid:d.params.app.id});var p=(0,l.default)(e,I),u=p?parseInt(p.params.member,10):0,m={tags:[].concat(function(e){if(Array.isArray(e)){for(var r=0,a=Array(e.length);r<e.length;r++)a[r]=e[r];return a}return Array.from(e)}(a)),user:n,sdk:{source:"pbjs",version:"1.28.0"}};if(0<u&&(m.member_id=u),s&&(m.device=i),d&&(m.app=o),r&&r.gdprConsent&&(m.gdpr_consent={consent_string:r.gdprConsent.consentString,consent_required:r.gdprConsent.gdprApplies}),r&&r.refererInfo){var c={rd_ref:encodeURIComponent(r.refererInfo.referer),rd_top:r.refererInfo.reachedTop,rd_ifs:r.refererInfo.numIframes,rd_stk:r.refererInfo.stack.map((function(e){return encodeURIComponent(e)})).join(",")};m.referrer_detection=c}return{method:"POST",url:"//ib.adnxs.com/ut/v3/prebid",data:JSON.stringify(m),bidderRequest:r}},interpretResponse:function(e,r){var s=this,i=r.bidderRequest;e=e.body;var d=[];if(!e||e.error){var a="in response for "+i.bidderCode+" adapter";return e&&e.error&&(a+=": "+e.error),u.logError(a),d}return e.tags&&e.tags.forEach((function(e){var r,a,t=(r=e)&&r.ads&&r.ads.length&&(0,l.default)(r.ads,(function(e){return e.rtb}));if(t&&0!==t.cpm&&(0,f.default)(s.supportedMediaTypes,t.ad_type)){var n=(function(e,r,a){var t={requestId:e.uuid,cpm:r.cpm,creativeId:r.creative_id,dealId:r.deal_id,currency:"USD",netRevenue:!0,ttl:300,appnexus:{buyerMemberId:r.buyer_member_id}};if(r.rtb.video){if(o(t,{width:r.rtb.video.player_width,height:r.rtb.video.player_height,vastUrl:r.rtb.video.asset_url,vastImpUrl:r.notify_url,ttl:3600}),r.renderer_url){var n=u.deepAccess(a.bids[0],"renderer.options");o(t,{adResponse:e,renderer:(function(e,r){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=p.Renderer.install({id:r.renderer_id,url:r.renderer_url,config:a,loaded:!1});try{t.setRender(T)}catch(e){u.logWarn("Prebid Error calling setRender on renderer",e)}return t.setEventHandlers({impression:function(){return u.logMessage("AppNexus outstream video impression event")},loaded:function(){return u.logMessage("AppNexus outstream video loaded event")},ended:function(){u.logMessage("AppNexus outstream renderer video event"),document.querySelector("#"+e).style.display="none"}}),t})(t.adUnitCode,r,n)}),t.adResponse.ad=t.adResponse.ads[0],t.adResponse.ad.video=t.adResponse.ad.rtb.video}}else if(r.rtb[m.NATIVE]){var s=r.rtb[m.NATIVE];t[m.NATIVE]={title:s.title,body:s.desc,cta:s.ctatext,sponsoredBy:s.sponsored,clickUrl:s.link.url,clickTrackers:s.link.click_trackers,impressionTrackers:s.impression_trackers,javascriptTrackers:s.javascript_trackers},s.main_img&&(t.native.image={url:s.main_img.url,height:s.main_img.height,width:s.main_img.width}),s.icon&&(t.native.icon={url:s.icon.url,height:s.icon.height,width:s.icon.width})}else{o(t,{width:r.rtb.banner.width,height:r.rtb.banner.height,ad:r.rtb.banner.content});try{var i=r.rtb.trackers[0].impression_urls[0],d=u.createTrackPixelHtml(i);t.ad+=d}catch(e){u.logError("Error appending tracking pixel",e)}}return t})(e,t,i);n.mediaType=(a=t.ad_type)===m.VIDEO?m.VIDEO:a===m.NATIVE?m.NATIVE:m.BANNER,d.push(n)}})),d},getUserSyncs:function(e){if(e.iframeEnabled)return[{type:"iframe",url:"//acdn.adnxs.com/ib/static/usersync/v3/async_usersync.html"}]},transformBidParams:function(a,e){return a=u.convertTypes({member:"string",invCode:"string",placementId:"number",keywords:u.transformBidderParamKeywords},a),e&&(a.use_pmt_rule="boolean"==typeof a.usePaymentRule&&a.usePaymentRule,a.usePaymentRule&&delete a.usePaymentRule,Object.keys(a).forEach((function(e){var r=u.convertCamelToUnderscore(e);r!==e&&(a[r]=a[e],delete a[e])}))),a}};function g(r){var i,d,a={};if(a.sizes=_(r.sizes),a.primary_size=a.sizes[0],a.ad_types=[],a.uuid=r.bidId,r.params.placementId?a.id=parseInt(r.params.placementId,10):a.code=r.params.invCode,a.allow_smaller_sizes=r.params.allowSmallerSizes||!1,a.use_pmt_rule=r.params.usePaymentRule||!1,a.prebid=!0,a.disable_psa=!0,r.params.reserve&&(a.reserve=r.params.reserve),r.params.position&&(a.position={above:1,below:2}[r.params.position]||0),r.params.trafficSourceCode&&(a.traffic_source_code=r.params.trafficSourceCode),r.params.privateSizes&&(a.private_sizes=_(r.params.privateSizes)),r.params.supplyType&&(a.supply_type=r.params.supplyType),r.params.pubClick&&(a.pubclick=r.params.pubClick),r.params.extInvCode&&(a.ext_inv_code=r.params.extInvCode),r.params.externalImpId&&(a.external_imp_id=r.params.externalImpId),u.isEmpty(r.params.keywords)||(a.keywords=u.transformBidderParamKeywords(r.params.keywords)),(r.mediaType===m.NATIVE||u.deepAccess(r,"mediaTypes."+m.NATIVE))&&(a.ad_types.push(m.NATIVE),r.nativeParams)){var e=(i=r.nativeParams,d={},Object.keys(i).forEach((function(e){var r=b[e]&&b[e].serverName||b[e]||e,a=b[e]&&b[e].requiredParams;d[r]=o({},a,i[e]);var t=b[e]&&b[e].minimumParams;if(a&&t){var n=Object.keys(i[e]),s=Object.keys(a);0===n.filter((function(e){return!(0,f.default)(s,e)})).length&&(d[r]=o({},d[r],t))}})),d);a[m.NATIVE]={layouts:[e]}}var t=u.deepAccess(r,"mediaTypes."+m.VIDEO),n=u.deepAccess(r,"mediaTypes.video.context");return(r.mediaType===m.VIDEO||t)&&a.ad_types.push(m.VIDEO),(r.mediaType===m.VIDEO||t&&"outstream"!==n)&&(a.require_asset_url=!0),r.params.video&&(a.video={},Object.keys(r.params.video).filter((function(e){return(0,f.default)(c,e)})).forEach((function(e){return a.video[e]=r.params.video[e]}))),r&&r.mediaTypes&&r.mediaTypes.banner&&delete r.mediaTypes.banner,a}function _(e){var r=[],a={};if(u.isArray(e)&&2===e.length&&!u.isArray(e[0]))a.width=parseInt(e[0],10),a.height=parseInt(e[1],10),r.push(a);else if("object"===(void 0===e?"undefined":s(e)))for(var t=0;t<e.length;t++){var n=e[t];(a={}).width=parseInt(n[0],10),a.height=parseInt(n[1],10),r.push(a)}return r}function h(e){return!!e.params.user}function I(e){return!!parseInt(e.params.member,10)}function k(e){if(e.params)return!!e.params.app}function E(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function T(e){e.renderer.push((function(){window.ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},function(e,r,a){e.renderer.handleVideoEvent({id:r,eventName:a})}.bind(null,e))}))}(0,t.registerBidder)(i)},146:function(e,r){}},[144]);
SKpbjsChunk([140],{156:function(e,r,n){n(157),e.exports=n(158)},157:function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.spec=r.DEFAULT_MIMES=r.VIDEO_TARGETING=r.OUTSTREAM_SRC=r.BANNER_ENDPOINT=r.VIDEO_ENDPOINT=void 0;var l=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},o=function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return (function(e,r){var n=[],t=!0,i=!1,o=void 0;try{for(var d,a=e[Symbol.iterator]();!(t=(d=a.next()).done)&&(n.push(d.value),!r||n.length!==r);t=!0);}catch(e){i=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw o}}return n})(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")},f=(function(e){{if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}})(n(0)),t=n(1),a=n(11),s=n(2),c=i(n(10)),v=i(n(7));function i(e){return e&&e.__esModule?e:{default:e}}var d=r.VIDEO_ENDPOINT="//reachms.bfmio.com/bid.json?exchange_id=",u=r.BANNER_ENDPOINT="//display.bfmio.com/prebid_display",p=r.OUTSTREAM_SRC="//player-cdn.beachfrontmedia.com/playerapi/loader/outstream.js",m=r.VIDEO_TARGETING=["mimes","playbackmethod","maxduration"],g=r.DEFAULT_MIMES=["video/mp4","application/javascript"],h="",b=r.spec={code:"beachfront",supportedMediaTypes:[s.VIDEO,s.BANNER],isBidRequestValid:function(e){return!(!_(e)&&!W(e))},buildRequests:function(e,r){var n=[],t=e.filter((function(e){return _(e)})),i=e.filter((function(e){return W(e)}));return t.forEach((function(e){h=E(e,"appId"),n.push({method:"POST",url:d+h,data:(function(e,r){var n=w(I(e)),t=(s=e,Object.keys(Object(s.params.video)).filter((function(e){return(0,v.default)(m,e)})).reduce((function(e,r){return e[r]=s.params.video[r],e}),{})),i=E(e,"appId"),o=E(e,"bidfloor"),d=f.getTopWindowLocation(),a={isPrebid:!0,appId:i,domain:document.location.hostname,id:f.getUniqueIdentifierStr(),imp:[{video:l({w:n.w,h:n.h,mimes:g},t),bidfloor:o,secure:"https:"===d.protocol?1:0}],site:{page:d.href,domain:d.hostname},device:{ua:navigator.userAgent,language:navigator.language,devicetype:N()?1:/(smart[-]?tv|hbbtv|appletv|googletv|hdmi|netcast\.tv|viera|nettv|roku|\bdtv\b|sonydtv|inettvbrowser|\btv\b)/i.test(navigator.userAgent)?3:2,dnt:A()?1:0,js:1,geo:{}},regs:{},user:{},cur:["USD"]};var s;if(r&&r.gdprConsent){var c=r.gdprConsent,u=c.gdprApplies,p=c.consentString;a.regs.ext={gdpr:u?1:0},a.user.ext={consent:p}}return a})(e,r),bidRequest:e})})),i.length&&(h=S(i[0],"appId"),n.push({method:"POST",url:u,data:(function(e,r){var n=f.getTopWindowLocation(),t=f.getTopWindowReferrer(),i={slots:e.map((function(e){return{slot:e.adUnitCode,id:S(e,"appId"),bidfloor:S(e,"bidfloor"),sizes:(r=e,T(f.deepAccess(r,"mediaTypes.banner.sizes")||r.sizes))};var r})),page:n.href,domain:n.hostname,search:n.search,secure:"https:"===n.protocol?1:0,referrer:t,ua:navigator.userAgent,deviceOs:(o=(0,c.default)([{s:"Android",r:/Android/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"Linux",r:/(Linux|X11)/},{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"UNIX",r:/UNIX/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],(function(e){return e.r.test(navigator.userAgent)})),o?o.s:"unknown"),isMobile:N()?1:0,dnt:A()?1:0,adapterVersion:"1.3",adapterName:"BFIO_PREBID"};var o;if(r&&r.gdprConsent){var d=r.gdprConsent,a=d.gdprApplies,s=d.consentString;i.gdpr=a?1:0,i.gdprConsent=s}return i})(i,r),bidRequest:i})),n},interpretResponse:function(e,r){var n,t,i=r.bidRequest;if(e=e.body,O(i)){if(!e||!e.url||!e.bidPrice)return f.logWarn("No valid video bids from "+b.code+" bidder"),[];var o=w(I(i)),d=f.deepAccess(i,"mediaTypes.video.context");return{requestId:i.bidId,bidderCode:b.code,vastUrl:e.url,cpm:e.bidPrice,width:o.w,height:o.h,creativeId:e.cmpId,renderer:"outstream"===d?(n=i,t=a.Renderer.install({id:n.bidId,url:p,loaded:!1}),t.setRender(y),t):null,mediaType:s.VIDEO,currency:"USD",netRevenue:!0,ttl:300}}return e&&e.length?e.filter((function(e){return e.adm})).map((function(r){return{requestId:(0,c.default)(i,(function(e){return e.adUnitCode===r.slot})).bidId,bidderCode:b.code,ad:r.adm,creativeId:r.crid,cpm:r.price,width:r.w,height:r.h,mediaType:s.BANNER,currency:"USD",netRevenue:!0,ttl:300}})):(f.logWarn("No valid banner bids from "+b.code+" bidder"),[])},getUserSyncs:function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=[],i=n.gdprApplies,o=n.consentString,d=(0,c.default)(r,(function(e){return f.isArray(e.body)}));return d?e.iframeEnabled&&d.body.filter((function(e){return e.sync})).forEach((function(e){t.push({type:"iframe",url:e.sync})})):e.iframeEnabled?t.push({type:"iframe",url:"//sync.bfmio.com/sync_iframe?ifg=1&id="+h+"&gdpr="+(i?1:0)+"&gc="+(o||"")+"&gce=1"}):e.pixelEnabled&&t.push({type:"image",url:"//sync.bfmio.com/syncb?pid=144&id="+h+"&gdpr="+(i?1:0)+"&gc="+(o||"")+"&gce=1"}),t}};function y(e){e.renderer.push((function(){window.Beachfront.Player(e.adUnitCode,{ad_tag_url:e.vastUrl,width:e.width,height:e.height,expand_in_view:!1,collapse_on_complete:!0})}))}function w(e){return e&&e.length?e[0]:{w:void 0,h:void 0}}function T(e){return f.parseSizesInput(e).map((function(e){var r=e.split("x"),n=o(r,2),t=n[0],i=n[1];return{w:parseInt(t,10)||void 0,h:parseInt(i,10)||void 0}}))}function I(e){return T(f.deepAccess(e,"mediaTypes.video.playerSize")||e.sizes)}function N(){return/(ios|ipod|ipad|iphone|android)/i.test(navigator.userAgent)}function A(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNoTrack||"yes"===navigator.doNotTrack}function O(e){return f.deepAccess(e,"mediaTypes.video")}function E(e,r){return f.deepAccess(e,"params.video."+r)||f.deepAccess(e,"params."+r)}function S(e,r){return f.deepAccess(e,"params.banner."+r)||f.deepAccess(e,"params."+r)}function _(e){return O(e)&&E(e,"appId")&&E(e,"bidfloor")}function W(e){return r=e,(f.deepAccess(r,"mediaTypes.banner")||!O(r))&&S(e,"appId")&&S(e,"bidfloor");var r}(0,t.registerBidder)(b)},158:function(e,r){}},[156]);
SKpbjsChunk([176],{311:function(e,r,t){e.exports=t(312)},312:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.spec=void 0;var d=t(1),n=r.spec={code:"ixCustom",supportedMediaTypes:["video"],isBidRequestValid:function(e){return!0},buildRequests:function(e,r){return e.map((function(e){return{method:"GET",url:"https://as-sec.casalemedia.com/cygnus",data:"fn="+e.params.fn+"&v="+e.params.v+"&s="+e.params.s+"&r="+encodeURIComponent(JSON.stringify(e.params.r)),params:e.params,requestId:e.bidId}}))},interpretResponse:function(e,r){var t="",d=0,s="";try{if(s=e.body.slice(r.params.fn.length+1,-2),"undefined"==(s=JSON.parse(s)).seatbid||"undefined"==s.seatbid[0]||"undefined"==s.seatbid[0].bid||"undefined"==s.seatbid[0].bid[0]||"undefined"==s.seatbid[0].bid[0].ext)return[];if("_"!=(t=s.seatbid[0].bid[0].ext).pricelevel.charAt(0))return[];d=t.pricelevel.slice(1),d/=100}catch(e){return[]}var i=[];return 0<=d&&i.push({requestId:r.requestId,bidderCode:n.code,cpm:d,vastUrl:t.vasturl,creativeId:1,currency:"USD",netRevenue:!0,ttl:36e3}),i}};(0,d.registerBidder)(n)}},[311]);
SKpbjsChunk([91],{338:function(r,a,e){e(339),r.exports=e(340)},339:function(r,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.spec=void 0;var u=(function(r){{if(r&&r.__esModule)return r;var a={};if(null!=r)for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(a[e]=r[e]);return a.default=r,a}})(e(0)),t=e(1),o=e(2);var i="lkqd";function n(r){return!!(r&&void 0!==r&&0<parseInt(r))}var s=a.spec={code:i,supportedMediaTypes:[o.VIDEO],isBidRequestValid:function(r){return!(r.bidder!==i||void 0===r.params||!n(r.params.siteId)||!n(r.params.placementId))},buildRequests:function(r){for(var a=[],e=0;e<r.length;e++){var t=r[e];if(t.sizes&&t.sizes.length||(u.logWarn("Warning: Could not find valid width/height parameters on the provided adUnit"),t.sizes=[[640,480]]),2===t.sizes.length&&"number"==typeof t.sizes[0]&&"number"==typeof t.sizes[1]){var n=t.sizes[0],s=t.sizes[1];t.sizes=[[n,s]]}for(var p=0;p<t.sizes.length;p++){var o=t.sizes[p],i=void 0,d=void 0;o&&2==o.length?(i=o[0],d=o[1]):u.logWarn("Warning: Could not determine width/height from the provided adUnit");var l="https://v.lkqd.net/ad".concat(),m={};m.pid=t.params.placementId,m.sid=t.params.siteId,m.prebid=!0,t.params.hasOwnProperty("output")&&null!=t.params.output?m.output=t.params.output:m.output="vast",t.params.hasOwnProperty("execution")&&null!=t.params.execution?m.execution=t.params.execution:m.execution="any",t.params.hasOwnProperty("support")&&null!=t.params.support?m.support=t.params.support:m.support="html5",t.params.hasOwnProperty("playinit")&&null!=t.params.playinit?m.playinit=t.params.playinit:m.playinit="auto",t.params.hasOwnProperty("volume")&&null!=t.params.volume?m.volume=t.params.volume:m.volume="100",i&&(m.width=i),d&&(m.height=d),t.params.hasOwnProperty("vpaidmode")&&null!=t.params.vpaidmode&&(m.vpaidmode=t.params.vpaidmode),t.params.hasOwnProperty("appname")&&null!=t.params.appname&&(m.appname=t.params.appname),t.params.hasOwnProperty("bundleid")&&null!=t.params.bundleid&&(m.bundleid=t.params.bundleid),t.params.hasOwnProperty("aid")&&null!=t.params.aid&&(m.aid=t.params.aid),t.params.hasOwnProperty("idfa")&&null!=t.params.idfa&&(m.idfa=t.params.idfa),t.params.hasOwnProperty("gdpr")&&null!=t.params.gdpr&&(m.gdpr=t.params.gdpr),t.params.hasOwnProperty("gdprcs")&&null!=t.params.gdprcs&&(m.gdprcs=t.params.gdprcs),t.params.hasOwnProperty("flrd")&&null!=t.params.flrd&&(m.flrd=t.params.flrd),t.params.hasOwnProperty("flrmp")&&null!=t.params.flrmp&&(m.flrmp=t.params.flrmp),t.params.hasOwnProperty("placement")&&null!=t.params.placement&&(m.placement=t.params.placement),t.params.hasOwnProperty("timeout")&&null!=t.params.timeout&&(m.timeout=t.params.timeout),t.params.hasOwnProperty("dnt")&&null!=t.params.dnt&&(m.dnt=t.params.dnt),t.params.hasOwnProperty("pageurl")&&null!=t.params.pageurl&&(m.pageurl=t.params.pageurl),t.params.hasOwnProperty("contentId")&&null!=t.params.contentId&&(m.contentid=t.params.contentId),t.params.hasOwnProperty("contentTitle")&&null!=t.params.contentTitle&&(m.contenttitle=t.params.contentTitle),t.params.hasOwnProperty("contentLength")&&null!=t.params.contentLength&&(m.contentlength=t.params.contentLength),t.params.hasOwnProperty("contentUrl")&&null!=t.params.contentUrl&&(m.contenturl=t.params.contentUrl),m.rnd=Math.floor(999999999*Math.random()),m.bidId=t.bidId,m.bidWidth=i,m.bidHeight=d,a.push({method:"GET",url:l,data:m})}}return a},interpretResponse:function(r,a){var e=[];if(r&&r.body){if(r.error)return u.logError("Error: "+r.error),e;try{var t={};if(a&&a.data&&a.data.bidId&&""!==a.data.bidId){var n=r.body,s=(new window.DOMParser).parseFromString(n,"text/xml");if(s&&0==s.getElementsByTagName("parsererror").length){var p=a.url.concat();t.requestId=a.data.bidId,t.bidderCode=i,t.ad="",t.cpm=parseFloat(s.getElementsByTagName("Pricing")[0].textContent),t.width=a.data.bidWidth,t.height=a.data.bidHeight,t.ttl=300,t.creativeId=s.getElementsByTagName("Ad")[0].getAttribute("id"),t.currency=s.getElementsByTagName("Pricing")[0].getAttribute("currency"),t.netRevenue=!0,t.vastUrl=p,t.vastXml=n,t.mediaType=o.VIDEO,e.push(t)}else u.logError("Error: Server response contained invalid XML")}else u.logError("Error: Could not associate bid request to server response")}catch(r){u.logError("Error: Could not interpret server response")}}else u.logError("Error: No server response or server response was empty for the requested URL");return e}};(0,t.registerBidder)(s)},340:function(r,a){}},[338]);
SKpbjsChunk([81],{367:function(e,i,r){r(368),e.exports=r(369)},368:function(e,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.spec=void 0;var v=function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return (function(e,i){var r=[],t=!0,a=!1,o=void 0;try{for(var d,p=e[Symbol.iterator]();!(t=(d=p.next()).done)&&(r.push(d.value),!i||r.length!==i);t=!0);}catch(e){a=!0,o=e}finally{try{!t&&p.return&&p.return()}finally{if(a)throw o}}return r})(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=(function(e){{if(e&&e.__esModule)return e;var i={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i.default=e,i}})(r(0)),t=r(1);var l=i.spec={code:"oneVideo",ENDPOINT:"//ads.adaptv.advertising.com/rtb/openrtb?ext_id=",SYNC_ENDPOINT1:"https://cm.g.doubleclick.net/pixel?google_nid=adaptv_dbm&google_cm&google_sc",SYNC_ENDPOINT2:"https://pr-bh.ybp.yahoo.com/sync/adaptv_ortb/{combo_uid}",SYNC_ENDPOINT3:"https://sync-tm.everesttech.net/upi/pid/m7y5t93k?redir=https%3A%2F%2Fsync.adap.tv%2Fsync%3Ftype%3Dgif%26key%3Dtubemogul%26uid%3D%24%7BUSER_ID%7D",SYNC_ENDPOINT4:"https://match.adsrvr.org/track/cmf/generic?ttd_pid=adaptv&ttd_tpi=1",supportedMediaTypes:["video"],isBidRequestValid:function(e){return"oneVideo"===e.bidder&&void 0!==e.params&&(void 0!==e.params.video&&void 0!==e.params.video.playerWidth&&void 0!==e.params.video.playerHeight&&void 0!==e.params.video.mimes&&void 0!==e.params.pubId)},buildRequests:function(e,i){var r=i?i.gdprConsent:null;return e.map((function(e){return{method:"POST",url:location.protocol+l.ENDPOINT+e.params.pubId,data:(function(e,i){var r=c.getTopWindowLocation(),t=window.top?window.top:window,a=e.params.site&&e.params.site.page?e.params.site.page:r.href,o=e.params.site&&e.params.site.referrer?e.params.site.referrer:c.getTopWindowReferrer(),d={id:c.generateUUID(),at:2,cur:e.cur||"USD",imp:[{id:"1",secure:"https:"===document.location.protocol,bidfloor:e.params.bidfloor,video:{mimes:e.params.video.mimes,w:e.params.video.playerWidth,h:e.params.video.playerHeight,linearity:1,protocols:e.params.video.protocols||[2,5]}}],site:{page:a,ref:o},device:{ua:t.navigator.userAgent},tmax:200};e.params.video.maxbitrate&&(d.imp[0].video.maxbitrate=e.params.video.maxbitrate);e.params.video.maxduration&&(d.imp[0].video.maxduration=e.params.video.maxduration);e.params.video.minduration&&(d.imp[0].video.minduration=e.params.video.minduration);e.params.video.api&&(d.imp[0].video.api=e.params.video.api);e.params.video.delivery&&(d.imp[0].video.delivery=e.params.video.delivery);e.params.video.position&&(d.imp[0].video.pos=e.params.video.position);e.params.site&&e.params.site.id&&(d.site.id=e.params.site.id);p=i,p&&p.gdprApplies&&(d.regs={ext:{gdpr:1}},i.consentString&&(d.user={ext:{consent:i.consentString}}));var p;return d})(e,r),options:{contentType:"application/json"},bidRequest:e}}))},interpretResponse:function(i,e){var r,t,a,o,d,p,n=e.bidRequest,s=void 0,m=void 0,u=void 0;try{s=(i=i.body).seatbid[0].bid[0]}catch(e){i=null}return i&&s&&(s.adm||s.nurl)&&s.price?(r=n.sizes,t=c.parseSizesInput(r),a=t.length?t[0].split("x"):[],o=v(a,2),d=o[0],p=o[1],m={width:parseInt(d,10)||void 0,height:parseInt(p,10)||void 0},u={requestId:n.bidId,bidderCode:l.code,cpm:s.price,creativeId:s.id,width:m.width,height:m.height,mediaType:"video",currency:i.cur,ttl:100,netRevenue:!0},s.nurl?u.vastUrl=s.nurl:s.adm&&(u.vastXml=s.adm),u):(c.logWarn("No valid bids from "+l.code+" bidder"),[])},getUserSyncs:function(e){if(e.pixelEnabled)return[{type:"image",url:l.SYNC_ENDPOINT1},{type:"image",url:l.SYNC_ENDPOINT2},{type:"image",url:l.SYNC_ENDPOINT3},{type:"image",url:l.SYNC_ENDPOINT4}]}};(0,t.registerBidder)(l)},369:function(e,i){}},[367]);
SKpbjsChunk([78],{376:function(e,r,t){t(377),e.exports=t(378)},377:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.spec=void 0;var o=function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return (function(e,r){var t=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(t.push(s.value),!r||t.length!==r);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return t})(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")};r.resetBoPixel=function(){f=!0};var d=t(3),n=t(1),c=(function(e){{if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}})(t(0)),u=t(18),p=t(2),m=t(12);var i=[p.BANNER,p.VIDEO],l="openx",a="hb_pb",s="2.1.5",f=!0;var h=r.spec={code:l,supportedMediaTypes:i,isBidRequestValid:function(e){return c.deepAccess(e,"mediaTypes.banner")&&e.params.delDomain?!!e.params.unit||0<c.deepAccess(e,"mediaTypes.banner.sizes.length"):!(!e.params.unit||!e.params.delDomain)},buildRequests:function(e,a){if(0===e.length)return[];var s=[],r=e.reduce((function(e,r){var t;return t=r,c.deepAccess(t,"mediaTypes.video")||t.mediaType===p.VIDEO?e[0].push(r):e[1].push(r),e}),[[],[]]),t=o(r,2),n=t[0],i=t[1];return 0<i.length&&s.push(function(e,r){var t=[],n=!1,i=b(e,r),a=c._map(e,(function(e){return e.params.unit}));i.aus=c._map(e,(function(e){return c.parseSizesInput(e.sizes).join(",")})).join("|"),i.divIds=c._map(e,(function(e){return encodeURIComponent(e.adUnitCode)})).join(","),a.some((function(e){return e}))&&(i.auid=a.join(","));e.some((function(e){return e.params.doNotTrack}))&&(i.ns=1);e.some((function(e){return e.params.coppa}))&&(i.tfcd=1);e.forEach((function(i){if(i.params.customParams){var e=c._map(Object.keys(i.params.customParams),(function(e){return r=e,t=i.params.customParams,n=t[r],c.isArray(n)&&(n=n.join(",")),(r.toLowerCase()+"="+n.toLowerCase()).replace("+",".").replace("/","_");var r,t,n})),r=window.btoa(e.join("&"));n=!0,t.push(r)}else t.push("")})),n&&(i.tps=t.join(","));var s=[],o=!1;e.forEach((function(e){e.params.customFloor?(s.push(1e3*e.params.customFloor),o=!0):s.push(0)})),o&&(i.aumfs=s.join(","));return{method:"GET",url:"//"+e[0].params.delDomain+"/w/1.0/arj",data:i,payload:{bids:e,startTime:new Date}}}(i,a)),0<n.length&&n.forEach((function(e){var r,t,n,i;s.push((t=a,n="//"+(r=e).params.delDomain+"/v/1.0/avjp",i=(function(e,r){var t=b([e],r),n=c.deepAccess(e,"params.video")||{},i=c.deepAccess(e,"mediaTypes.video.context"),a=c.deepAccess(e,"mediaTypes.video.playerSize"),s=void 0,o=void 0;c.isArray(e.sizes)&&2===e.sizes.length&&!c.isArray(e.sizes[0])?(s=parseInt(e.sizes[0],10),o=parseInt(e.sizes[1],10)):c.isArray(e.sizes)&&c.isArray(e.sizes[0])&&2===e.sizes[0].length?(s=parseInt(e.sizes[0][0],10),o=parseInt(e.sizes[0][1],10)):c.isArray(a)&&2===a.length&&(s=parseInt(a[0],10),o=parseInt(a[1],10));Object.keys(n).forEach((function(e){"openrtb"===e?(n[e].w=s||n[e].w,n[e].v=o||n[e].v,t[e]=JSON.stringify(n[e])):e in t||"url"===e||(t[e]=n[e])})),t.auid=e.params.unit,t.vwd=s||n.vwd,t.vht=o||n.vht,"outstream"===i&&(t.vos="101");n.mimes&&(t.vmimes=n.mimes);return t})(r,t),{method:"GET",url:n,data:i,payload:{bid:r,startTime:new Date}}))})),s},interpretResponse:function(e,r){var t=e.body;return(/avjp$/.test(r.url)?p.VIDEO:p.BANNER)===p.VIDEO?(function(e,r){var t=r.bid,n=r.startTime,i=[];if(void 0!==e&&""!==e.vastUrl&&""!==e.pub_rev){var a=(0,m.parse)(e.vastUrl).search||{},s={};s.requestId=t.bidId,s.bidderCode=l,s.ttl=300,s.netRevenue=!0,s.currency=e.currency,s.cpm=Number(e.pub_rev)/1e3,s.width=e.width,s.height=e.height,s.creativeId=e.adid,s.vastUrl=e.vastUrl,s.mediaType=p.VIDEO,e.ph=a.ph,e.colo=a.colo,e.ts=a.ts,i.push(s),g(p.VIDEO,e,n)}return i})(t,r.payload):(function(e,r){for(var t=r.bids,n=r.startTime,i=e.ads.ad,a=[],s=0;s<i.length;s++){var o=i[s],d=parseInt(o.idx,10),c={};if(c.requestId=t[d].bidId,o.pub_rev){c.cpm=Number(o.pub_rev)/1e3;var u=o.creative[0];u&&(c.width=u.width,c.height=u.height),c.creativeId=u.id,c.ad=o.html,o.deal_id&&(c.dealId=o.deal_id),c.ttl=300,c.netRevenue=!0,c.currency=o.currency,o.tbd&&(c.tbd=o.tbd),c.ts=o.ts,a.push(c),g(p.BANNER,o,n)}}return a})(t,r.payload)},getUserSyncs:function(e,r){if(e.iframeEnabled)return[{type:"iframe",url:c.deepAccess(r,"0.body.ads.pixels")||c.deepAccess(r,"0.body.pixels")||"//u.openx.net/w/1.0/pd"}]},transformBidParams:function(e,r){return c.convertTypes({unit:"string",customFloor:"number"},e)}};function v(r){for(var e in r)r.hasOwnProperty(e)&&(r[e]||delete r[e]);return c._map(Object.keys(r),(function(e){return e+"="+r[e]})).join("&")}function b(e,r){var t=c.inIframe(),n=void 0;if(n={ju:d.config.getConfig("pageUrl")||c.getTopWindowUrl(),jr:c.getTopWindowReferrer(),ch:document.charSet||document.characterSet,res:screen.width+"x"+screen.height+"x"+screen.colorDepth,ifr:t,tz:(new Date).getTimezoneOffset(),tws:(function(e){var r=void 0,t=void 0,n=window,i=document,a=i.documentElement,s=void 0;if(e){try{n=window.top,i=window.top.document}catch(e){return}a=i.documentElement,s=i.body,r=n.innerWidth||a.clientWidth||s.clientWidth,t=n.innerHeight||a.clientHeight||s.clientHeight}else a=i.documentElement,r=n.innerWidth||a.clientWidth,t=n.innerHeight||a.clientHeight;return r+"x"+t})(t),be:1,bc:e[0].params.bc||a+"_"+s,dddid:c._map(e,(function(e){return e.transactionId})).join(","),nocache:(new Date).getTime()},c.deepAccess(r,"gdprConsent")){var i=r.gdprConsent;void 0!==i.consentString&&(n.gdpr_consent=i.consentString),void 0!==i.gdprApplies&&(n.gdpr=i.gdprApplies?1:0),"iab"===d.config.getConfig("consentManagement.cmpApi")&&(n.x_gdpr_f=1)}return e[0].crumbs&&e[0].crumbs.pubcid&&(n.pubcid=e[0].crumbs.pubcid),n}function g(e,r,t){if(f){f=!1;var n=d.config.getConfig("bidderTimeout"),i=void 0;window.PREBID_TIMEOUT&&(n=Math.min(window.PREBID_TIMEOUT,n));var a={bd:+new Date-t,bp:r.pub_rev,br:"0",bs:c.getTopWindowLocation().hostname,bt:n,ts:r.ts};if(a.br=a.bt<a.bd?"t":"p",e===p.VIDEO){var s=(0,m.parse)(r.colo);a.ph=r.ph,i="//"+s.hostname+"/w/1.0/bo?"+v(a)}else{var o=c.deepAccess(r,"creative.0.tracking.impression").match(/([^?]+\/)ri\?/);o&&1<o.length&&(i=o[1]+"bo?"+v(a))}i&&u.userSync.registerSync("image",l,i)}}(0,n.registerBidder)(h)},378:function(e,r){}},[376]);
SKpbjsChunk([65],{419:function(e,r,a){a(420),e.exports=a(421)},420:function(e,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.spec=void 0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=(function(e){{if(e&&e.__esModule)return e;var r={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r.default=e,r}})(a(0)),t=a(1),i=a(2),n=a(3);var v=a(4),b="pubmatic",w="USD",o="nFIn8aLzbd",I=void 0,S={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},s={NUMBER:"number",STRING:"string",BOOLEAN:"boolean",ARRAY:"array"},R={mimes:s.ARRAY,minduration:s.NUMBER,maxduration:s.NUMBER,startdelay:s.NUMBER,playbackmethod:s.ARRAY,api:s.ARRAY,protocols:s.ARRAY,w:s.NUMBER,h:s.NUMBER,battr:s.ARRAY,linearity:s.NUMBER,placement:s.NUMBER,minbitrate:s.NUMBER,maxbitrate:s.NUMBER},d={1:"PMP",5:"PREF",6:"PMPG"},O=0;function A(e,r){if(!y.isStr(r))return r&&y.logWarn("PubMatic: Ignoring param key: "+e+", expects string-value, found "+(void 0===r?"undefined":f(r))),I;switch(e){case"pmzoneid":return r.split(",").slice(0,50).map((function(e){return e.trim()})).join();case"kadfloor":case"lat":case"lon":return parseFloat(r)||I;case"yob":return parseInt(r)||I;default:return r}}function P(e){e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0;var r,a=e.hasOwnProperty("sizes")&&y.isArray(e.sizes)&&1<=e.sizes.length;e.params.adSlot=(r=e.params.adSlot,y.isStr(r)?r.replace(/^\s+/g,"").replace(/\s+$/g,""):"");var t=e.params.adSlot,i=t.split(":");if(t=i[0],2==i.length&&(e.params.adUnitIndex=i[1]),2==(i=t.split("@")).length||a)if(e.params.adUnit=i[0],1<i.length){if(2!=(i=i[1].split("x")).length)return void y.logWarn("AdSlot Error: adSlot not in required format");e.params.width=parseInt(i[0]),e.params.height=parseInt(i[1]),delete e.sizes}else a&&(e.params.width=parseInt(e.sizes[0][0]),e.params.height=parseInt(e.sizes[0][1]));else y.logWarn("AdSlot Error: adSlot not in required format")}function U(e,r,a){var t="PubMatic: Ignoring param key: "+e+", expects "+a+", found "+(void 0===r?"undefined":f(r));switch(a){case s.BOOLEAN:return y.isBoolean(r)?r:(y.logWarn(t),I);case s.NUMBER:return y.isNumber(r)?r:(y.logWarn(t),I);case s.STRING:return y.isStr(r)?r:(y.logWarn(t),I);case s.ARRAY:return y.isArray(r)?r:(y.logWarn(t),I)}}function x(e){var r,a,t,i=(r=o,!(t=(a=window.DigiTrust&&(n.config.getConfig("digiTrustId")||window.DigiTrust.getUser({member:r})))&&a.success&&a.identity||null)||t.privacy&&t.privacy.optout?null:t);null!==i&&e.push({source:"digitru.st",uids:[{id:i.id||"",atype:1,ext:{keyv:parseInt(i.keyv)||0}}]})}var p=r.spec={code:b,supportedMediaTypes:[i.BANNER,i.VIDEO],isBidRequestValid:function(e){return!(!e||!e.params)&&(y.isStr(e.params.publisherId)?y.isStr(e.params.adSlot)?!!(!e.params.hasOwnProperty("video")||e.params.video.hasOwnProperty("mimes")&&y.isArray(e.params.video.mimes)&&0!==e.params.video.mimes.length)||(y.logWarn(b+": For video ads, mimes is mandatory and must specify atlease 1 mime value. Call to OpenBid will not be sent."),!1):(y.logWarn(b+": adSlotId is mandatory and cannot be numeric. Call to OpenBid will not be sent."),!1):(y.logWarn(b+" Error: publisherId is mandatory and cannot be numeric. Call to OpenBid will not be sent."),!1))},buildRequests:function(e,r){var a,t,i,n,o=((a={}).pageURL=y.getTopWindowUrl(),a.refURL=y.getTopWindowReferrer(),a),s=(t=o,{id:""+(new Date).getTime(),at:1,cur:[w],imp:[],site:{page:t.pageURL,ref:t.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{},ext:{}}),d="",p="",l=[];if(e.forEach((function(e){if(P(n=y.deepClone(e)),n.params.hasOwnProperty("video")){if(!(n.params.adSlot&&n.params.adUnit&&n.params.adUnitIndex))return void y.logWarn(b+": Skipping the non-standard adslot: ",n.params.adSlot,n)}else if(!(n.params.adSlot&&n.params.adUnit&&n.params.adUnitIndex&&n.params.width&&n.params.height))return void y.logWarn(b+": Skipping the non-standard adslot: ",n.params.adSlot,n);o.pubId=o.pubId||n.params.publisherId,(o=(function(e,r){var a,t,i;for(a in r.kadpageurl||(r.kadpageurl=r.pageURL),S)S.hasOwnProperty(a)&&(t=e[a])&&("object"===(void 0===(i=S[a])?"undefined":f(i))&&(t=i.f(t,r)),y.isStr(t)?r[a]=t:y.logWarn("PubMatic: Ignoring param : "+a+" with value : "+S[a]+", expects string-value, found "+(void 0===t?"undefined":f(t))));return r})(n.params,o)).transactionId=n.transactionId,""===d?d=n.params.currency||void 0:n.params.hasOwnProperty("currency")&&d!==n.params.currency&&y.logWarn(b+": Currency specifier ignored. Only one currency permitted."),n.params.currency=d,n.params.hasOwnProperty("dctr")&&y.isStr(n.params.dctr)&&l.push(n.params.dctr),s.imp.push(function(e,r){var a={},t={},i={},n=e.hasOwnProperty("sizes")?e.sizes:[];if(a={id:e.bidId,tagid:e.params.adUnit,bidfloor:A("kadfloor",e.params.kadfloor),secure:"https:"===window.location.protocol?1:0,ext:{pmZoneId:A("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?A("currency",e.params.currency):w},e.params.hasOwnProperty("video")){var o=e.params.video;for(var s in R)o.hasOwnProperty(s)&&(i[s]=U(s,o[s],R[s]));y.isArray(e.mediaTypes.video.playerSize[0])?(i.w=e.mediaTypes.video.playerSize[0][0],i.h=e.mediaTypes.video.playerSize[0][1]):y.isNumber(e.mediaTypes.video.playerSize[0])&&(i.w=e.mediaTypes.video.playerSize[0],i.h=e.mediaTypes.video.playerSize[1]),e.params.video.hasOwnProperty("skippable")&&(i.ext={video_skippable:e.params.video.skippable?1:0}),a.video=i}else{if(t={pos:0,w:e.params.width,h:e.params.height,topframe:y.inIframe()?0:1},y.isArray(n)&&1<n.length){n=n.splice(1,n.length-1);var d=[];n.forEach((function(e){d.push({w:e[0],h:e[1]})})),t.format=d}a.banner=t}return a}(n))})),0!=s.imp.length){var u,m,c,g;if(s.site.publisher.id=o.pubId.trim(),O=o.pubId.trim(),s.ext.wrapper={},s.ext.wrapper.profile=parseInt(o.profId)||I,s.ext.wrapper.version=parseInt(o.verId)||I,s.ext.wrapper.wiid=o.wiid||I,s.ext.wrapper.wv=v.REPO_AND_VERSION,s.ext.wrapper.transactionId=o.transactionId,s.ext.wrapper.wp="pbjs",s.user.gender=o.gender?o.gender.trim():I,s.user.geo={},r&&r.gdprConsent&&(s.user.ext={consent:r.gdprConsent.consentString},s.regs={ext:{gdpr:r.gdprConsent.gdprApplies?1:0}}),s.user.geo.lat=A("lat",o.lat),s.user.geo.lon=A("lon",o.lon),s.user.yob=A("yob",o.yob),s.device.geo={},s.device.geo.lat=A("lat",o.lat),s.device.geo.lon=A("lon",o.lon),s.site.page=o.kadpageurl.trim()||s.site.page.trim(),s.site.domain=(u=s.site.page,(m=document.createElement("a")).href=u,m.hostname),e[0].params.hasOwnProperty("dctr")){if(p=e[0].params.dctr,y.isStr(p)&&0<p.length){var h=p.split("|");p="",h.forEach((function(e){p+=0<e.length?e.trim()+"|":""})),i=p.length,"|"===p.substring(i,i-1)&&(p=p.substring(0,i-1)),s.site.ext={key_val:p.trim()}}else y.logWarn(b+": Ignoring param : dctr with value : "+p+", expects string-value, found empty or non-string value");1<l.length&&y.logWarn(b+": dctr value found in more than 1 adunits. Value from 1st adunit will be picked. Ignoring values from subsequent adunits")}else y.logWarn(b+": dctr value not found in 1st adunit, ignoring values from subsequent adunits");return c=s,x(g=[]),0<g.length&&(c.user.eids=g),{method:"POST",url:"//hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(s)}}},interpretResponse:function(e,t){var i=[],n=w;try{e.body&&e.body.seatbid&&y.isArray(e.body.seatbid)&&(n=e.body.cur||n,e.body.seatbid.forEach((function(e){e.bid&&y.isArray(e.bid)&&e.bid.forEach((function(r){var a={requestId:r.impid,cpm:(parseFloat(r.price)||0).toFixed(2),width:r.w,height:r.h,creativeId:r.crid||r.id,dealId:r.dealid,currency:n,netRevenue:!1,ttl:300,referrer:y.getTopWindowUrl(),ad:r.adm},e=JSON.parse(t.data);e.imp&&0<e.imp.length&&e.imp.forEach((function(e){r.impid===e.id&&e.hasOwnProperty("video")&&(a.mediaType="video",a.width=r.hasOwnProperty("w")?r.w:e.video.w,a.height=r.hasOwnProperty("h")?r.h:e.video.h,a.vastXml=r.adm)})),r.ext&&r.ext.deal_channel&&(a.dealChannel=d[r.ext.deal_channel]||null),i.push(a)}))})))}catch(e){y.logError(e)}return i},getUserSyncs:function(e,r,a){var t="//ads.pubmatic.com/AdServer/js/showad.js#PIX&kdntuid=1&p="+O;if(a&&(t+="&gdpr="+(a.gdprApplies?1:0),t+="&gdpr_consent="+encodeURIComponent(a.consentString||"")),e.iframeEnabled)return[{type:"iframe",url:t}];y.logWarn("PubMatic: Please enable iframe based user sync.")},transformBidParams:function(e,r){return y.convertTypes({publisherId:"string",adSlot:"string"},e)}};(0,t.registerBidder)(p)},421:function(e,r){}},[419]);
SKpbjsChunk([56],{447:function(e,t,n){n(448),e.exports=n(449)},448:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spec=void 0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(1),r=n(2);var i=t.spec=new function(){function S(e,t){for(var n=0;n<t.length;n++)if(t[n].params&&t[n].params[e])return t[n].params[e]}this.code="rhythmone",this.supportedMediaTypes=[r.VIDEO,r.BANNER],this.isBidRequestValid=function(e){return!0},this.getUserSyncs=function(e,t,n){var o=[],r=[];for(var i in C)o.push(i),r.push(S("placementId",[C[i]]));var s={doc_version:1,doc_type:"Prebid Audit",placement_id:r.join(",").replace(/[,]+/g,",").replace(/^,|,$/g,"")},a="undefined"!=typeof window?window:{document:{location:{href:""}}},p=a.document.location.ancestorOrigins,d=[];p&&0<p.length&&(s.ancestor_origins=p[p.length-1]),s.popped=null!==a.opener?1:0,s.framed=a.top===a?0:1;try{s.url=a.top.document.location.href.toString()}catch(e){s.url=a.document.location.href.toString()}try{s.prebid_version="1.28.0",s.prebid_timeout=config.getConfig("bidderTimeout")}catch(e){}for(var c in s.response_ms=Date.now()-u,s.placement_codes=o.join(","),s.bidder_version=j,n&&(s.gdpr_consent=n.consentString,s.gdpr="boolean"!=typeof n.gdprApplies||n.gdprApplies),s)d.push(encodeURIComponent(c)+"="+encodeURIComponent("object"===l(s[c])?JSON.stringify(s[c]):s[c]));if(d.sort(),e.pixelEnabled)return[{type:"image",url:"//hbevents.1rx.io/audit?"+d.join("&")}]};var C={},d=this,j="1.0.1.0",u=Date.now();this.buildRequests=function(f,v){var m=S("placementId",f);if(void 0===m||f.length<1)return[];u=Date.now(),C={};var g=[],b="undefined"!=typeof window?window:{};function y(e,t,n){t instanceof Array&&(t=t.join(n||",")),void 0!==t&&g.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}function w(e,t){try{return e()}catch(e){}return t}return y("domain",w((function(){var e=b.document.location.ancestorOrigins;return e&&0<e.length?e[e.length-1]:b.top.document.location.hostname}),"")),y("url",w((function(){var t;try{t=b.top.document.location.href.toString()}catch(e){t=b.document.location.href.toString()}return t}),"")),[{method:"GET",url:(function(){var e=S("endpoint",f)||"//tag.1rx.io/rmp/{placementId}/0/{path}?z={zone}",t=S("zone",f)||"1r",n=S("path",f)||"mvo";e=(e=(e=e.replace(/\{placementId\}/i,m)).replace(/\{zone\}/i,t)).replace(/\{path\}/i,n),y("title",w((function(){return b.top.document.title}),"")),y("dsh",b.screen?b.screen.height:""),y("dsw",b.screen?b.screen.width:""),y("tz",(new Date).getTimezoneOffset()),y("dtype",/(ios|ipod|ipad|iphone|android)/i.test(b.navigator.userAgent)?1:/(smart[-]?tv|hbbtv|appletv|googletv|hdmi|netcast\.tv|viera|nettv|roku|\bdtv\b|sonydtv|inettvbrowser|\btv\b)/i.test(b.navigator.userAgent)?3:2),y("flash",w((function(){var e=b.navigator,t=e.plugins,n=e.mimeTypes,o="application/x-shockwave-flash",r=b.ActiveXObject;if(t&&t["Shockwave Flash"]&&n&&n[o]&&n[o].enabledPlugin)return 1;if(r)try{if(new b.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return 1}catch(e){}return 0}),0));var o=[],r=[],i=[],s=[],a=0,p=[],d=/(^v|(\.0)+$)/gi;for(y("hbv",b.SKpbjs.version.replace(d,"")+","+j.replace(d,""));a<f.length;a++){var c=[],u=[],l=f[a].params||{};C[f[a].adUnitCode||f[a].placementCode]=f[a],0<f[a].sizes.length&&"number"==typeof f[a].sizes[0]&&(f[a].sizes=[f[a].sizes]);for(var h=0;h<f[a].sizes.length;h++)u.push(f[a].sizes[h][0]),c.push(f[a].sizes[h][1]);p.push(f[a].adUnitCode||f[a].placementCode),o.push(c.join("|")),r.push(u.join("|")),s.push(f[a].mediaTypes&&f[a].mediaTypes.video?"v":"d"),i.push(l.floor||0)}return y("imp",p),y("w",r),y("h",o),y("floor",i),y("t",s),v&&v.gdprConsent&&(y("gdpr_consent",v.gdprConsent.consentString),y("gdpr","boolean"!=typeof v.gdprConsent.gdprApplies||v.gdprConsent.gdprApplies)),e+="&"+g.join("&")+"&"})()}]},this.interpretResponse=function(e){var t=e.body||[],n=[],o=0;if(t.seatbid){var r=[];for(o=0;o<t.seatbid.length;o++)for(var i=0;i<t.seatbid[o].bid.length;i++)r.push(t.seatbid[o].bid[i]);t=r}for(o=0;o<t.length;o++){var s=t[o],a=C[s.impid],p={requestId:a.bidId,bidderCode:d.code,cpm:parseFloat(s.price),width:s.w,height:s.h,creativeId:s.crid,currency:"USD",netRevenue:!0,ttl:1e3};a.mediaTypes&&a.mediaTypes.video?(p.vastUrl=s.nurl,p.mediaType="video",p.ttl=1e4):p.ad=s.adm,n.push(p)}return n}};(0,o.registerBidder)(i)},449:function(e,t){}},[447]);
SKpbjsChunk([49],{466:function(e,r,t){t(467),e.exports=t(468)},467:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.spec=r.SYNC_ENDPOINT=r.VIDEO_ENDPOINT=r.FASTLANE_ENDPOINT=void 0;var u=function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return (function(e,r){var t=[],i=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(t.push(a.value),!r||t.length!==r);i=!0);}catch(e){n=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}return t})(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")},p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.hasVideoMediaType=c,r.masSizeOrdering=h,r.resetUserSync=function(){A=!1};var l=(function(e){{if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}})(t(0)),i=t(1),f=t(3),v=t(2);var y="pbjs_lite_v1.28.0";var a=r.FASTLANE_ENDPOINT="//fastlane.rubiconproject.com/a/api/fastlane.json",s=r.VIDEO_ENDPOINT="//fastlane-adv.rubiconproject.com/v1/auction/video",n=r.SYNC_ENDPOINT="https://eus.rubiconproject.com/usync.html",g={1:"468x60",2:"728x90",5:"120x90",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",94:"970x310",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",159:"320x250",195:"600x300",199:"640x200",213:"1030x590",214:"980x360",229:"320x180",232:"580x400",257:"400x600"};l._each(g,(function(e,r){return g[e]=r}));var d=r.spec={code:"rubicon",aliases:["rubiconLite"],supportedMediaTypes:[v.BANNER,v.VIDEO],isBidRequestValid:function(e){return"object"===p(e.params)&&(!!/^\d+$/.test(e.params.accountId)&&!!x(e,!0))},buildRequests:function(e,o){var r=[],t=e.filter((function(e){return"video"===x(e)})).map((function(e){e.startTime=(new Date).getTime();var r=e.params,t=_(e,"video"),i={page_url:b(e,o),resolution:m(),account_id:r.accountId,integration:y,"x_source.tid":e.transactionId,timeout:o.timeout-(Date.now()-o.auctionStart+500),stash_creatives:!0,slots:[]},n={site_id:r.siteId,zone_id:r.zoneId,position:"atf"===r.position||"btf"===r.position?r.position:"unknown",floor:.01<parseFloat(r.floor)?r.floor:.01,element_id:e.adUnitCode,name:e.adUnitCode,width:t[0],height:t[1],size_id:"outstream"===l.deepAccess(e,"mediaTypes."+v.VIDEO+".context")?203:r.video.size_id};return r.video&&(i.ae_pass_through_parameters=r.video.aeParams,n.language=r.video.language),r.inventory&&"object"===p(r.inventory)&&(n.inventory=r.inventory),r.keywords&&Array.isArray(r.keywords)&&(n.keywords=r.keywords),r.visitor&&"object"===p(r.visitor)&&(n.visitor=r.visitor),i.slots.push(n),o.gdprConsent&&("boolean"==typeof o.gdprConsent.gdprApplies&&(i.gdpr=Number(o.gdprConsent.gdprApplies)),i.gdpr_consent=o.gdprConsent.consentString),{method:"POST",url:s,data:i,bidRequest:e}}));if(!0!==f.config.getConfig("rubicon.singleRequest"))r=t.concat(e.filter((function(e){return"banner"===x(e)})).map((function(e){var i=d.createSlotParams(e,o);return{method:"GET",url:a,data:d.getOrderedParams(i).reduce((function(e,r){var t=i[r];return l.isStr(t)&&""!==t||l.isNumber(t)?""+e+r+"="+encodeURIComponent(t)+"&":e}),"")+"slots=1&rand="+Math.random(),bidRequest:e}})));else{var n=e.filter((function(e){return"banner"===x(e)})).reduce((function(e,r){return(e[r.params.siteId]=e[r.params.siteId]||[]).push(r),e}),{});r=t.concat(Object.keys(n).map((function(e){var r=n[e];10<r.length&&(l.logWarn("Rubicon bid adapter Warning: single request mode has a limit of 10 bids: "+(r.length-10)+" bids were not sent"),r=r.slice(0,10));var i=d.combineSlotUrlParams(r.map((function(e){return d.createSlotParams(e,o)})));return{method:"GET",url:a,data:d.getOrderedParams(i).reduce((function(e,r){var t=i[r];return l.isStr(t)&&""!==t||l.isNumber(t)?""+e+r+"="+encodeURIComponent(t)+"&":e}),"")+"slots="+r.length+"&rand="+Math.random(),bidRequest:r}})))}return r},getOrderedParams:function(e){var r=/^tg_v/,t=/^tg_i/,i=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","rf","dt.id","dt.keyv","dt.pref","p_geo.latitude","p_geo.longitude","kw"].concat(Object.keys(e).filter((function(e){return r.test(e)}))).concat(Object.keys(e).filter((function(e){return t.test(e)}))).concat(["tk_flint","x_source.tid","p_screen_res","rp_floor","rp_secure","tk_user_key"]);return i.concat(Object.keys(e).filter((function(e){return-1===i.indexOf(e)})))},combineSlotUrlParams:function(n){if(1===n.length)return n[0];var i=n.reduce((function(r,t,i){return Object.keys(t).forEach((function(e){r.hasOwnProperty(e)||(r[e]=new Array(n.length)),r[e].splice(i,1,t[e])})),r}),{}),o=new RegExp("^([^;]*)(;\\1)+$");return Object.keys(i).forEach((function(e){var r=i[e].join(";"),t=r.match(o);i[e]=t?t[1]:r})),i},createSlotParams:function(e,r){e.startTime=(new Date).getTime();var t=e.params,i=_(e,"banner"),n=t.latLong||[],o=u(n,2),a=o[0],s=o[1],d={account_id:t.accountId,site_id:t.siteId,zone_id:t.zoneId,size_id:i[0],alt_size_ids:i.slice(1).join(",")||void 0,p_pos:"atf"===t.position||"btf"===t.position?t.position:"unknown",rp_floor:.01<(t.floor=parseFloat(t.floor))?t.floor:.01,rp_secure:"https:"===location.protocol?"1":"0",tk_flint:y,"x_source.tid":e.transactionId,p_screen_res:m(),kw:Array.isArray(t.keywords)?t.keywords.join(","):"",tk_user_key:t.userId,"p_geo.latitude":isNaN(parseFloat(a))?void 0:parseFloat(a).toFixed(4),"p_geo.longitude":isNaN(parseFloat(s))?void 0:parseFloat(s).toFixed(4),"tg_fl.eid":e.code,rf:b(e,r)};r.gdprConsent&&("boolean"==typeof r.gdprConsent.gdprApplies&&(d.gdpr=Number(r.gdprConsent.gdprApplies)),d.gdpr_consent=r.gdprConsent.consentString),null!==t.visitor&&"object"===p(t.visitor)&&Object.keys(t.visitor).forEach((function(e){null!=t.visitor[e]&&(d["tg_v."+e]=t.visitor[e].toString())})),null!==t.inventory&&"object"===p(t.inventory)&&Object.keys(t.inventory).forEach((function(e){null!=t.inventory[e]&&(d["tg_i."+e]=t.inventory[e].toString())}));var c=(function(){var e=(r=window.DigiTrust&&(f.config.getConfig("digiTrustId")||window.DigiTrust.getUser({member:"T9QSFKPDN9"})),r&&r.success&&r.identity||null);var r;if(!e||e.privacy&&e.privacy.optout)return[];return{"dt.id":e.id,"dt.keyv":e.keyv,"dt.pref":0}})();return Object.keys(c).forEach((function(e){d[e]=c[e]})),d},interpretResponse:function(d,e){var c=e.bidRequest;if(!(d=d.body)||"object"!==(void 0===d?"undefined":p(d)))return[];var r=d.ads;return"object"!==(void 0===c?"undefined":p(c))||Array.isArray(c)||"video"!==x(c)||"object"!==(void 0===r?"undefined":p(r))||(r=r[c.adUnitCode]),!Array.isArray(r)||r.length<1?[]:r.reduce((function(e,r,t){if("ok"!==r.status)return e;var i,n=Array.isArray(c)?c[t]:c;if(n&&"object"===(void 0===n?"undefined":p(n))){var o={requestId:n.bidId,currency:"USD",creativeId:r.creative_id||(r.network||"")+"-"+(r.advertiser||""),cpm:r.cpm||0,dealId:r.deal,ttl:300,netRevenue:f.config.getConfig("rubicon.netRevenue")||!1,rubicon:{advertiserId:r.advertiser,networkId:r.network}};if(r.creative_type&&(o.mediaType=r.creative_type),r.creative_type===v.VIDEO)o.width=n.params.video.playerWidth,o.height=n.params.video.playerHeight,o.vastUrl=r.creative_depot_url,o.impression_id=r.impression_id,o.videoCacheKey=r.impression_id;else{o.ad=(i=r.script,"<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='"+r.impression_id+"'>\n<script type='text/javascript'>"+i+"<\/script>\n</div>\n</body>\n</html>");var a=g[r.size_id].split("x").map((function(e){return Number(e)})),s=u(a,2);o.width=s[0],o.height=s[1]}o.rubiconTargeting=(Array.isArray(r.targeting)?r.targeting:[]).reduce((function(e,r){return e[r.key]=r.values[0],e}),{rpfl_elemid:n.adUnitCode}),e.push(o)}else l.logError("Rubicon bid adapter Error: bidRequest undefined at index position:"+t,c,d);return e}),[]).sort((function(e,r){return(r.cpm||0)-(e.cpm||0)}))},getUserSyncs:function(e,r,t){if(!A&&e.iframeEnabled){var i="";return t&&"string"==typeof t.consentString&&("boolean"==typeof t.gdprApplies?i+="?gdpr="+Number(t.gdprApplies)+"&gdpr_consent="+t.consentString:i+="?gdpr_consent="+t.consentString),A=!0,{type:"iframe",url:n+i}}},transformBidParams:function(e,r){return l.convertTypes({accountId:"number",siteId:"number",zoneId:"number"},e)}};function m(){return[window.screen.width,window.screen.height].join("x")}function b(e,r){var t=f.config.getConfig("pageUrl");return e.params.referrer?t=e.params.referrer:t||(t=r.refererInfo.referer),e.params.secure?t.replace(/^http:/i,"https:"):t}function _(e,r){var t=e.params;if("video"===r){var i=[];return t.video&&t.video.playerWidth&&t.video.playerHeight?i=[t.video.playerWidth,t.video.playerHeight]:Array.isArray(l.deepAccess(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?i=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&0<e.sizes.length&&Array.isArray(e.sizes[0])&&1<e.sizes[0].length&&(i=e.sizes[0]),i}var n=[];return Array.isArray(t.sizes)?n=t.sizes:void 0!==l.deepAccess(e,"mediaTypes.banner.sizes")?n=o(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&0<e.sizes.length?n=o(e.sizes):l.logWarn("Warning: no sizes are setup or found"),h(n)}function o(e){return l.parseSizesInput(e).reduce((function(e,r){var t=parseInt(g[r],10);return t&&e.push(t),e}),[])}function c(e){return void 0===l.deepAccess(e,"params.video")&&Array.isArray(l.deepAccess(e,"params.sizes"))?(l.logWarn("Rubicon bid adapter Warning: no video params found, convert to banner with the bidder size id"),!1):e.mediaType===v.VIDEO||void 0!==l.deepAccess(e,"mediaTypes."+v.VIDEO)}function x(e){var r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],t=void 0;if(c(e)){if(t=!0,"instream"===l.deepAccess(e,"mediaTypes."+v.VIDEO+".context")||e.mediaType===v.VIDEO?void 0===l.deepAccess(e,"params.video.size_id")&&(r&&l.logError("Rubicon bid adapter Error: size id is missing for instream video request."),t=!1):"outstream"===l.deepAccess(e,"mediaTypes."+v.VIDEO+".context")?203!==l.deepAccess(e,"params.video.size_id")&&r&&l.logWarn("Rubicon bid adapter Warning: outstream video is sending invalid size id, converting size id to 203."):(r&&l.logError("Rubicon bid adapter Error: no instream or outstream context defined in mediaTypes."),t=!1),t)return void 0!==l.deepAccess(e,"mediaTypes."+v.BANNER)&&r&&l.logWarn("Rubicon bid adapter Warning: video and banner requested for same adUnit, continuing with video request, multi-format request is not supported by rubicon yet."),"video";if(void 0===l.deepAccess(e,"mediaTypes."+v.BANNER))return}if(0<_(e,"banner").length)return r&&!1===t&&l.logWarn("Rubicon bid adapter Warning: invalid video requested for adUnit, continuing with banner request."),"banner"}function h(e){var n=[15,2,9];return e.sort((function(e,r){var t=n.indexOf(e),i=n.indexOf(r);return-1<t||-1<i?-1===t?1:-1===i?-1:t-i:e-r}))}var A=!1;(0,i.registerBidder)(d)},468:function(e,r){}},[466]);
SKpbjsChunk([172],{474:function(e,t,r){e.exports=r(475)},475:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spec=void 0;var n=r(1),u=t.spec={code:"sekindoGeneralVast",supportedMediaTypes:["video"],isBidRequestValid:function(e){return!0},buildRequests:function(e,t){return e.map((function(e){return{method:"GET",url:e.params.vastUrl,data:"",requestId:e.bidId,fixCpm:e.params.fixCpm}}))},interpretResponse:function(e,t){var r,n=e.body;try{if("string"==typeof n)if(window.ActiveXObject)(r=new ActiveXObject("Microsoft.XMLDOM")).async="false",r.loadXML(n);else r=(new DOMParser).parseFromString(n,"text/xml")}catch(e){utils.logError(e)}if(!r)return[];var i=r.getElementsByTagName("Ad");if(0==i.length)return[];var s=i[0].getElementsByTagName("InLine"),a=i[0].getElementsByTagName("Wrapper");if(0===s.length&&0===a.length)return[];var d=[];return 0<=t.fixCpm&&d.push({requestId:t.requestId,bidderCode:u.code,cpm:t.fixCpm,vastXml:r,creativeId:1,currency:"USD",netRevenue:!0,ttl:36e3}),d}};(0,n.registerBidder)(u)}},[474]);
SKpbjsChunk([171],{476:function(e,t,o){e.exports=o(477)},477:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spec=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=o(1),d=t.spec={code:"sekindoInternal",supportedMediaTypes:["video"],isBidRequestValid:function(e){return!0},buildRequests:function(e,t){return e.map((function(e){var t="http"+("https:"===document.location.protocol?"s":"")+"://live.sekindo.com/live/liveInternalSsp.php",o="sspData="+encodeURIComponent(JSON.stringify(e.params.data));try{if(window.Sekindo&&window.Sekindo.LogRest)o+="&dbgActKey=S84Lk2n6erhn56jmdf7&dbgActTicket="+window.Sekindo.LogRest.ticket}catch(e){}return{method:"GET",url:t,data:o,requestId:e.bidId}}))},interpretResponse:function(e,t){if("object"!==(void 0===e?"undefined":r(e))||e.body.cpm<=0)return[];var o=[],n={requestId:t.requestId,bidderCode:d.code,cpm:e.body.cpm,sspPixelData:e.body.sspPixelData,sspImpTrackers:e.body.sspImpTrackers,vastXml:e.body.xml,referenceId:e.body.referenceId,creativeId:1,currency:"USD",netRevenue:!0,ttl:36e3};return o.push(n),o}};(0,n.registerBidder)(d)}},[476]);
SKpbjsChunk([169],{512:function(e,t,r){e.exports=r(513)},513:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spec=void 0;var n=r(1),v=t.spec={code:"spotexSKcustom",supportedMediaTypes:["video"],isBidRequestValid:function(e){return!0},buildRequests:function(e,t){return e.map((function(e){return{method:"GET",url:e.params.vastUrl,data:"",requestId:e.bidId}}))},interpretResponse:function(e,t){var r,n=e.body;try{if("string"==typeof n)if(window.ActiveXObject)(r=new ActiveXObject("Microsoft.XMLDOM")).async="false",r.loadXML(n);else r=(new DOMParser).parseFromString(n,"text/xml")}catch(e){utils.logError(e)}if(!r)return[];var i=r.getElementsByTagName("Ad");if(0==i.length)return[];var a=i[0].getElementsByTagName("InLine");if(0===a.length)return[];var s=-1,u=(a=a.item(0)).getElementsByTagName("Extensions");if(0<u.length&&0<(u=u.item(0).getElementsByTagName("Extension")).length&&0<u.item(0).attributes.length&&("LR-Pricing"==u.item(0).attributes[0].value||"Pricing"==u.item(0).attributes[0].value)&&0<(u=u.item(0).getElementsByTagName("Price")).length){for(var o=u.item(0).attributes,l=!1,c=!1,m=!1,d=0;d<o.length;d++)"currency"==o[d].name&&"USD"==o[d].value&&(l=!0),"model"==o[d].name&&"CPM"==o[d].value&&(c=!0),"source"==o[d].name&&"spotxchange"==o[d].value&&(m=!0);l&&c&&m&&(s=parseFloat(u.item(0).textContent))}var g=[];return 0<=s&&g.push({requestId:t.requestId,bidderCode:v.code,cpm:s,vastXml:r,creativeId:1,currency:"USD",netRevenue:!0,ttl:36e3}),g}};(0,n.registerBidder)(v)}},[512]);
SKpbjsChunk([36],{517:function(r,e,t){t(518),r.exports=t(519)},518:function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.spec=void 0;var n=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},d=u(t(0)),p=u(t(16)),o=t(1),s=t(3),a=t(2),c=t(4);function u(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}var l="telaria",f=e.spec={code:l,aliases:["tremor","tremorvideo"],supportedMediaTypes:[a.VIDEO],isBidRequestValid:function(r){return!!(r&&r.params&&r.params.adCode&&r.params.supplyCode)},buildRequests:function(r){var t=[];return r.forEach((function(r){var e=y(r);e&&t.push({method:"GET",url:y(r),bidId:r.bidId,vastUrl:e.split("&fmt=json")[0]})})),t},interpretResponse:function(r,e){var t=void 0,o=void 0,a=void 0,i=[];try{t=r.body,e.url.split("&").forEach((function(r){var e=r.toLowerCase();-1<e.indexOf("player")&&(-1<e.indexOf("width")?o=r.split("=")[1]:-1<e.indexOf("height")&&(a=r.split("=")[1]))}))}catch(r){d.logError(r),a=o=0}if(!t||t.error){var s="in response for "+e.bidderCode+" adapter";t&&t.error&&(s+=": "+t.error),d.logError(s)}else t.seatbid&&0<t.seatbid.length&&t.seatbid[0].bid.forEach((function(r){i.push(function(r,e,t,o,a,i){var s=p.createBid(r,e);t&&n(s,{requestId:e.bidId,cpm:t.price,creativeId:t.crid||"-1",vastXml:t.adm,vastUrl:e.vastUrl,mediaType:"video",width:o,height:a,bidderCode:i,adId:t.id,currency:"USD",netRevenue:!0,ttl:300,ad:t.adm});return s}(c.STATUS.GOOD,e,r,o,a,l))}));return i},getUserSyncs:function(r,e){var t=[];if(r.pixelEnabled&&e.length)try{e[0].body.ext.telaria.userSync.forEach((function(r){return t.push({type:"image",url:r})}))}catch(r){}return t}};function y(r){var e=void 0,t=void 0;if(!r.sizes)return"";if(!d.isArray(r.sizes)||2!==r.sizes.length||isNaN(r.sizes[0])||isNaN(r.sizes[1])?"object"===i(r.sizes)&&(e=r.sizes[0][0],t=r.sizes[0][1]):(e=r.sizes[0],t=r.sizes[1]),e&&t&&r.params.supplyCode&&r.params.adCode){var o=("https:"===document.location.protocol?"https":"http")+"://"+r.params.supplyCode+".ads.tremorhub.com/ad/tag?adCode="+r.params.adCode;for(var a in o+="&playerWidth="+e,o+="&playerHeight="+t,r.params)r.params.hasOwnProperty(a)&&r.params[a]&&(o+="&"+a+"="+r.params[a]);return r.params.srcPageUrl||(o+="&srcPageUrl="+encodeURIComponent(document.location.href)),o+="&transactionId="+r.transactionId,(o+="&referrer="+s.config.getConfig("pageUrl")||d.getTopWindowUrl())+"&fmt=json"}}(0,o.registerBidder)(f)},519:function(r,e){}},[517]);
SKpbjs.processQueue();!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Hls=e():t.Hls=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(i){if(r[i])return r[i].exports;var a=r[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=26)}([function(t,e,r){"use strict";function i(){}function a(t,e){return e="["+t+"] > "+e}function n(t){var e=self.console[t];return e?function(){for(var r=arguments.length,i=Array(r),n=0;n<r;n++)i[n]=arguments[n];i[0]&&(i[0]=a(t,i[0])),e.apply(self.console,i)}:i}function o(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];r.forEach(function(e){u[e]=t[e]?t[e].bind(t):n(e)})}r.d(e,"a",function(){return d}),r.d(e,"b",function(){return c});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l={trace:i,debug:i,log:i,warn:i,info:i,error:i},u=l,d=function(t){if(!0===t||"object"===(void 0===t?"undefined":s(t))){o(t,"debug","log","info","warn","error");try{u.log()}catch(t){u=l}}else u=l},c=u},function(t,e,r){"use strict";var i={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"};e.a=i},function(t,e,r){"use strict";r.d(e,"b",function(){return i}),r.d(e,"a",function(){return a});var i={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},a={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=r(0),n=r(2),o=r(1),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=new Set(["hlsEventGeneric","hlsHandlerDestroying","hlsHandlerDestroyed"]),u=function(){function t(e){i(this,t),this.hls=e,this.onEvent=this.onEvent.bind(this);for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];this.handledEvents=a,this.useGenericHandler=!0,this.registerListeners()}return t.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.prototype.onHandlerDestroying=function(){},t.prototype.onHandlerDestroyed=function(){},t.prototype.isEventHandler=function(){return"object"===s(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},t.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if(l.has(t))throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)},this)},t.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},t.prototype.onEvent=function(t,e){this.onEventGeneric(t,e)},t.prototype.onEventGeneric=function(t,e){var r=function(t,e){var r="on"+t.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,e)};try{r.call(this,t,e).call()}catch(e){a.b.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.hls.trigger(o.a.ERROR,{type:n.b.OTHER_ERROR,details:n.a.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},t}();e.a=u},function(t,e,r){!function(e){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/;?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,n=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse base URL.");return a.path=o.normalizePath(a.path),o.buildURLFromParts(a)}var n=o.parseURL(e);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return r.alwaysNormalize?(n.path=o.normalizePath(n.path),o.buildURLFromParts(n)):e;var s=o.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=i.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};if(!n.netLoc&&(u.netLoc=s.netLoc,"/"!==n.path[0]))if(n.path){var d=s.path,c=d.substring(0,d.lastIndexOf("/")+1)+n.path;u.path=o.normalizePath(c)}else u.path=s.path,n.params||(u.params=s.params,n.query||(u.query=s.query));return null===u.path&&(u.path=r.alwaysNormalize?o.normalizePath(n.path):n.path),o.buildURLFromParts(u)},parseURL:function(t){var e=r.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(a,"");t.length!==(t=t.replace(n,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=o}()},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.d(e,"b",function(){return n});var a=function(){function t(){i(this,t)}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,r){for(var i=r,a=0;t.isHeader(e,r);){a+=10;a+=t._readSize(e,r+6),t.isFooter(e,r+10)&&(a+=10),r+=a}if(a>0)return e.subarray(i,i+a)},t._readSize=function(t,e){var r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,r|=(127&t[e+2])<<7,r|=127&t[e+3]},t.getTimeStamp=function(e){for(var r=t.getID3Frames(e),i=0;i<r.length;i++){var a=r[i];if(t.isTimeStampFrame(a))return t._readTimeStamp(a)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var r=String.fromCharCode(e[0],e[1],e[2],e[3]),i=t._readSize(e,4);return{type:r,size:i,data:e.subarray(10,10+i)}},t.getID3Frames=function(e){for(var r=0,i=[];t.isHeader(e,r);){var a=t._readSize(e,r+6);r+=10;for(var n=r+a;r+8<n;){var o=t._getFrameData(e.subarray(r)),s=t._decodeFrame(o);s&&i.push(s),r+=o.size+10}t.isFooter(e,r)&&(r+=10)}return i},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),r=1&e[3],i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var r=t._utf8ArrayToStr(e.data,!0),i=new Uint8Array(e.data.subarray(r.length+1));return{key:e.type,info:r,data:i.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var r=1,i=t._utf8ArrayToStr(e.data.subarray(r));r+=i.length+1;var a=t._utf8ArrayToStr(e.data.subarray(r));return{key:e.type,info:i,data:a}}var n=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:n}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var r=1,i=t._utf8ArrayToStr(e.data.subarray(r));r+=i.length+1;var a=t._utf8ArrayToStr(e.data.subarray(r));return{key:e.type,info:i,data:a}}var n=t._utf8ArrayToStr(e.data);return{key:e.type,data:n}},t._utf8ArrayToStr=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.length,i=void 0,a=void 0,n=void 0,o="",s=0;s<r;){if(0===(i=t[s++])&&e)return o;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(i);break;case 12:case 13:a=t[s++],o+=String.fromCharCode((31&i)<<6|63&a);break;case 14:a=t[s++],n=t[s++],o+=String.fromCharCode((15&i)<<12|(63&a)<<6|(63&n)<<0)}}return o},t}(),n=a._utf8ArrayToStr;e.a=a},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=r(4),n=r.n(a),o=r(16),s=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),l=function(){function t(){var e;i(this,t),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this._elementaryStreams=(e={},e[t.ElementaryStreamTypes.AUDIO]=!1,e[t.ElementaryStreamTypes.VIDEO]=!1,e)}return t.prototype.addElementaryStream=function(t){this._elementaryStreams[t]=!0},t.prototype.hasElementaryStream=function(t){return!0===this._elementaryStreams[t]},t.prototype.createInitializationVector=function(t){for(var e=new Uint8Array(16),r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e},t.prototype.fragmentDecryptdataFromLevelkey=function(t,e){var r=t;return t&&t.method&&t.uri&&!t.iv&&(r=new o.a,r.method=t.method,r.baseuri=t.baseuri,r.reluri=t.reluri,r.iv=this.createInitializationVector(e)),r},s(t,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=n.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var t=[];if(this.rawByteRange){var e=this.rawByteRange.split("@",2);if(1===e.length){var r=this.lastByteRangeEndOffset;t[0]=r||0}else t[0]=parseInt(e[1]);t[1]=parseInt(e[0])+t[0],this._byteRange=t}return t}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}],[{key:"ElementaryStreamTypes",get:function(){return{AUDIO:"audio",VIDEO:"video"}}}]),t}();e.a=l},function(t,e,r){"use strict";var i={search:function(t,e){for(var r=0,i=t.length-1,a=null,n=null;r<=i;){a=(r+i)/2|0,n=t[a];var o=e(n);if(o>0)r=a+1;else{if(!(o<0))return n;i=a-1}}return null}};e.a=i},function(t,e,r){"use strict";var i={isBuffered:function(t,e){try{if(t)for(var r=t.buffered,i=0;i<r.length;i++)if(e>=r.start(i)&&e<=r.end(i))return!0}catch(t){}return!1},bufferInfo:function(t,e,r){try{if(t){var i=t.buffered,a=[],n=void 0;for(n=0;n<i.length;n++)a.push({start:i.start(n),end:i.end(n)});return this.bufferedInfo(a,e,r)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},bufferedInfo:function(t,e,r){var i=[],a=void 0,n=void 0,o=void 0,s=void 0,l=void 0;for(t.sort(function(t,e){var r=t.start-e.start;return r||e.end-t.end}),l=0;l<t.length;l++){var u=i.length;if(u){var d=i[u-1].end;t[l].start-d<r?t[l].end>d&&(i[u-1].end=t[l].end):i.push(t[l])}else i.push(t[l])}for(l=0,a=0,n=o=e;l<i.length;l++){var c=i[l].start,h=i[l].end;if(e+r>=c&&e<h)n=c,o=h,a=o-e;else if(e+r<c){s=c;break}}return{len:a,start:n,end:o,nextStart:s}}};e.a=i},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=r(32),n=r(33),o=r(34),s=r(2),l=r(0),u=function(){function t(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.removePKCS7Padding,o=void 0===n||n;if(i(this,t),this.logEnabled=!0,this.observer=e,this.config=r,this.removePKCS7Padding=o,o)try{var s=crypto||self.crypto;this.subtle=s.subtle||s.webkitSubtle}catch(t){}this.disableWebCrypto=!this.subtle}return t.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.prototype.decrypt=function(t,e,r,i){var s=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(l.b.log("JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new o.a),u.expandKey(e),i(u.decrypt(t,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(l.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var d=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new n.a(d,e)),this.fastAesKey.expandKey().then(function(n){new a.a(d,r).decrypt(t,n).catch(function(a){s.onWebCryptoError(a,t,e,r,i)}).then(function(t){i(t)})}).catch(function(a){s.onWebCryptoError(a,t,e,r,i)})}},t.prototype.onWebCryptoError=function(t,e,r,i,a){this.config.enableSoftwareAES?(l.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,r,i,a)):(l.b.error("decrypting error : "+t.message),this.observer.trigger(Event.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},t.prototype.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}();e.a=u},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function a(t){return"number"==typeof t}function n(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!a(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,a,s,l,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var d=new Error('Uncaught, unspecified "error" event. ('+e+")");throw d.context=e,d}if(r=this._events[t],o(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(n(r))for(s=Array.prototype.slice.call(arguments,1),u=r.slice(),a=u.length,l=0;l<a;l++)u[l].apply(this,s);return!0},r.prototype.addListener=function(t,e){var a;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?n(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,n(this._events[t])&&!this._events[t].warned&&(a=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),a||(a=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var a=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,a,o,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],o=r.length,a=-1,r===e||i(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(n(r)){for(s=o;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){a=s;break}if(a<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(a,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],i(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){"use strict";function i(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}e.a=i},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.d(e,"a",function(){return l}),r.d(e,"b",function(){return u});var o=r(3),s=r(1),l={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},u=function(t){function e(r){i(this,e);var n=a(this,t.call(this,r,s.a.BUFFER_APPENDED,s.a.FRAG_BUFFERED,s.a.FRAG_LOADED));return n.bufferPadding=.2,n.fragments=Object.create(null),n.timeRanges=Object.create(null),n.config=r.config,n}return n(e,t),e.prototype.destroy=function(){this.fragments=null,this.timeRanges=null,this.config=null,o.a.prototype.destroy.call(this),t.prototype.destroy.call(this)},e.prototype.getBufferedFrag=function(t,e){var r=this.fragments,i=Object.keys(r).filter(function(i){var a=r[i];if(a.body.type!==e)return!1;if(!a.buffered)return!1;var n=a.body;return n.startPTS<=t&&t<=n.endPTS});if(0===i.length)return null;var a=i.pop();return r[a].body},e.prototype.detectEvictedFragments=function(t,e){var r=this,i=void 0,a=void 0;Object.keys(this.fragments).forEach(function(n){var o=r.fragments[n];if(!0===o.buffered){var s=o.range[t];if(s){i=s.time;for(var l=0;l<i.length;l++)if(a=i[l],!1===r.isTimeBuffered(a.startPTS,a.endPTS,e)){r.removeFragment(o.body);break}}}})},e.prototype.detectPartialFragments=function(t){var e=this,r=this.getFragmentKey(t),i=this.fragments[r];i.buffered=!0,Object.keys(this.timeRanges).forEach(function(r){if(!0===t.hasElementaryStream(r)){var a=e.timeRanges[r];i.range[r]=e.getBufferedTimes(t.startPTS,t.endPTS,a)}})},e.prototype.getBufferedTimes=function(t,e,r){for(var i=[],a=void 0,n=void 0,o=!1,s=0;s<r.length;s++){if(a=r.start(s)-this.bufferPadding,n=r.end(s)+this.bufferPadding,t>=a&&e<=n){i.push({startPTS:Math.max(t,r.start(s)),endPTS:Math.min(e,r.end(s))});break}if(t<n&&e>a)i.push({startPTS:Math.max(t,r.start(s)),endPTS:Math.min(e,r.end(s))}),o=!0;else if(e<=a)break}return{time:i,partial:o}},e.prototype.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.sn},e.prototype.getPartialFragment=function(t){var e=this,r=void 0,i=void 0,a=void 0,n=null,o=0;return Object.keys(this.fragments).forEach(function(s){var l=e.fragments[s];e.isPartial(l)&&(i=l.body.startPTS-e.bufferPadding,a=l.body.endPTS+e.bufferPadding,t>=i&&t<=a&&(r=Math.min(t-i,a-t),o<=r&&(n=l.body,o=r)))}),n},e.prototype.getState=function(t){var e=this.getFragmentKey(t),r=this.fragments[e],i=l.NOT_LOADED;return void 0!==r&&(i=r.buffered?!0===this.isPartial(r)?l.PARTIAL:l.OK:l.APPENDING),i},e.prototype.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},e.prototype.isTimeBuffered=function(t,e,r){for(var i=void 0,a=void 0,n=0;n<r.length;n++){if(i=r.start(n)-this.bufferPadding,a=r.end(n)+this.bufferPadding,t>=i&&e<=a)return!0;if(e<=i)return!1}return!1},e.prototype.onFragLoaded=function(t){var e=t.frag,r=this.getFragmentKey(e),i={body:e,range:Object.create(null),buffered:!1};this.fragments[r]=i},e.prototype.onBufferAppended=function(t){var e=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach(function(t){var r=e.timeRanges[t];e.detectEvictedFragments(t,r)})},e.prototype.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},e.prototype.hasFragment=function(t){var e=this.getFragmentKey(t);return void 0!==this.fragments[e]},e.prototype.removeFragment=function(t){var e=this.getFragmentKey(t);delete this.fragments[e]},e.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},e}(o.a)},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=r(3),s=function(t){function e(r){i(this,e);for(var n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];var l=a(this,t.call.apply(t,[this,r].concat(o)));return l._tickInterval=null,l._tickCallCount=0,l}return n(e,t),e.prototype.destroy=function(){this.clearInterval(),t.prototype.destroy.call(this)},e.prototype.hasInterval=function(){return null!==this._tickInterval},e.prototype.setInterval=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return!this._tickInterval&&(this._tickInterval=setInterval(this.tick.bind(this,!1),t),!0)}),e.prototype.clearInterval=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)}),e.prototype.tick=function(){1===++this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&setTimeout(this.tick.bind(this),0),this._tickCallCount=0)},e.prototype.doTick=function(){throw new Error("TaskLoop is abstract and `doLoop` must be implemented")},e}(o.a);e.a=s},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=r(1),s=r(3),l=r(2),u=r(0),d=r(15),c=r(27),h=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),f={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},p={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},v=function(t){function e(r){i(this,e);var n=a(this,t.call(this,r,o.a.MANIFEST_LOADING,o.a.LEVEL_LOADING,o.a.AUDIO_TRACK_LOADING,o.a.SUBTITLE_TRACK_LOADING));return n.loaders={},n}return n(e,t),e.canHaveQualityLevels=function(t){return t!==f.AUDIO_TRACK&&t!==f.SUBTITLE_TRACK},e.mapContextToLevelType=function(t){switch(t.type){case f.AUDIO_TRACK:return p.AUDIO;case f.SUBTITLE_TRACK:return p.SUBTITLE;default:return p.MAIN}},e.getResponseUrl=function(t,e){var r=t.url;return void 0!==r&&0!==r.indexOf("data:")||(r=e.url),r},e.prototype.createInternalLoader=function(t){var e=this.hls.config,r=e.pLoader,i=e.loader,a=r||i,n=new a(e);return t.loader=n,this.loaders[t.type]=n,n},e.prototype.getInternalLoader=function(t){return this.loaders[t.type]},e.prototype.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},e.prototype.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},e.prototype.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},e.prototype.onManifestLoading=function(t){this.load(t.url,{type:f.MANIFEST})},e.prototype.onLevelLoading=function(t){this.load(t.url,{type:f.LEVEL,level:t.level,id:t.id})},e.prototype.onAudioTrackLoading=function(t){this.load(t.url,{type:f.AUDIO_TRACK,id:t.id})},e.prototype.onSubtitleTrackLoading=function(t){this.load(t.url,{type:f.SUBTITLE_TRACK,id:t.id})},e.prototype.load=function(t,e){var r=this.hls.config,i=this.getInternalLoader(e);if(i){var a=i.context;if(a&&a.url===t)return u.b.trace("playlist request ongoing"),!1;u.b.warn("aborting previous loader for type: "+e.type),i.abort()}var n=void 0,o=void 0,s=void 0,l=void 0;switch(e.type){case f.MANIFEST:n=r.manifestLoadingMaxRetry,o=r.manifestLoadingTimeOut,s=r.manifestLoadingRetryDelay,l=r.manifestLoadingMaxRetryTimeout;break;case f.LEVEL:n=0,o=r.levelLoadingTimeOut;break;default:n=r.levelLoadingMaxRetry,o=r.levelLoadingTimeOut,s=r.levelLoadingRetryDelay,l=r.levelLoadingMaxRetryTimeout,u.b.log("Playlist loader for "+e.type+" "+(e.level||e.id))}i=this.createInternalLoader(e),e.url=t,e.responseType=e.responseType||"";var d=void 0,c=void 0;return d={timeout:o,maxRetry:n,retryDelay:s,maxRetryDelay:l},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},i.load(e,d,c),!0},e.prototype.loadsuccess=function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(r.isSidxRequest)return this._handleSidxRequest(t,r),void this._handlePlaylistLoaded(t,e,r,i);this.resetInternalLoader(r.type);var a=t.data;if(e.tload=performance.now(),0!==a.indexOf("#EXTM3U"))return void this._handleManifestParsingError(t,r,"no EXTM3U delimiter",i);a.indexOf("#EXTINF:")>0?this._handleTrackOrLevelPlaylist(t,e,r,i):this._handleMasterPlaylist(t,e,r,i)},e.prototype.loaderror=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._handleNetworkError(e,r)},e.prototype.loadtimeout=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._handleNetworkError(e,r)},e.prototype._handleMasterPlaylist=function(t,r,i,a){var n=this.hls,s=t.data,l=e.getResponseUrl(t,i),d=c.a.parseMasterPlaylist(s,l);if(!d.length)return void this._handleManifestParsingError(t,i,"no level found in manifest",a);var h=d.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),f=c.a.parseMasterPlaylistMedia(s,l,"AUDIO",h),p=c.a.parseMasterPlaylistMedia(s,l,"SUBTITLES");if(f.length){var v=!1;f.forEach(function(t){t.url||(v=!0)}),!1===v&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(u.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),f.unshift({type:"main",name:"main"}))}n.trigger(o.a.MANIFEST_LOADED,{levels:d,audioTracks:f,subtitles:p,url:l,stats:r,networkDetails:a})},e.prototype._handleTrackOrLevelPlaylist=function(t,r,i,a){var n=this.hls,s=i.id,l=i.level,u=i.type,d=e.getResponseUrl(t,i),h=isNaN(l)?isNaN(s)?0:s:l,p=e.mapContextToLevelType(i),v=c.a.parseLevelPlaylist(t.data,d,h,p);if(v.tload=r.tload,u===f.MANIFEST){var g={url:d,details:v};n.trigger(o.a.MANIFEST_LOADED,{levels:[g],audioTracks:[],url:d,stats:r,networkDetails:a})}if(r.tparsed=performance.now(),v.needSidxRanges){var y=v.initSegment.url;return void this.load(y,{isSidxRequest:!0,type:u,level:l,levelDetails:v,id:s,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}i.levelDetails=v,this._handlePlaylistLoaded(t,r,i,a)},e.prototype._handleSidxRequest=function(t,e){var r=d.a.parseSegmentIndex(new Uint8Array(t.data));r.references.forEach(function(t,r){var i=t.info,a=e.levelDetails.fragments[r];0===a.byteRange.length&&(a.rawByteRange=String(1+i.end-i.start)+"@"+String(i.start))}),e.levelDetails.initSegment.rawByteRange=String(r.moovEndOffset)+"@0"},e.prototype._handleManifestParsingError=function(t,e,r,i){this.hls.trigger(o.a.ERROR,{type:l.b.NETWORK_ERROR,details:l.a.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:r,networkDetails:i})},e.prototype._handleNetworkError=function(t,e){var r=void 0,i=void 0,a=this.getInternalLoader(t);switch(t.type){case f.MANIFEST:r=l.a.MANIFEST_LOAD_TIMEOUT,i=!0;break;case f.LEVEL:r=l.a.LEVEL_LOAD_TIMEOUT,i=!1;break;case f.AUDIO_TRACK:r=l.a.AUDIO_TRACK_LOAD_TIMEOUT,i=!1;break;default:i=!1}a&&(a.abort(),this.resetInternalLoader(t.type)),this.hls.trigger(o.a.ERROR,{type:l.b.NETWORK_ERROR,details:r,fatal:i,url:a.url,loader:a,context:t,networkDetails:e})},e.prototype._handlePlaylistLoaded=function(t,r,i,a){var n=i.type,s=i.level,l=i.id,u=i.levelDetails;if(!u.targetduration)return void this._handleManifestParsingError(t,i,"invalid target duration",a);if(e.canHaveQualityLevels(i.type))this.hls.trigger(o.a.LEVEL_LOADED,{details:u,level:s||0,id:l||0,stats:r,networkDetails:a});else switch(n){case f.AUDIO_TRACK:this.hls.trigger(o.a.AUDIO_TRACK_LOADED,{details:u,id:l,stats:r,networkDetails:a});break;case f.SUBTITLE_TRACK:this.hls.trigger(o.a.SUBTITLE_TRACK_LOADED,{details:u,id:l,stats:r,networkDetails:a})}},h(e,null,[{key:"ContextType",get:function(){return f}},{key:"LevelType",get:function(){return p}}]),e}(s.a);e.a=v},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=r(0),n=r(1),o=Math.pow(2,32)-1,s=function(){function t(e,r){i(this,t),this.observer=e,this.remuxer=r}return t.prototype.resetTimeStamp=function(t){this.initPTS=t},t.prototype.resetInitSegment=function(e,r,i,a){if(e&&e.byteLength){var o=this.initData=t.parseInitSegment(e);null==r&&(r="mp4a.40.5"),null==i&&(i="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:r+","+i,initSegment:a?e:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:a?e:null}),o.video&&(s.video={container:"video/mp4",codec:i,initSegment:a?e:null})),this.observer.trigger(n.a.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),i&&(this.videoCodec=i)},t.probe=function(e){return t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint16=function(t,e){t.data&&(e+=t.start,t=t.data);var r=t[e]<<8|t[e+1];return r<0?65536+r:r},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var r=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return r<0?4294967296+r:r},t.writeUint32=function(t,e,r){t.data&&(e+=t.start,t=t.data),t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r},t.findBox=function(e,r){var i=[],a=void 0,n=void 0,o=void 0,s=void 0,l=void 0,u=void 0,d=void 0;if(e.data?(u=e.start,s=e.end,e=e.data):(u=0,s=e.byteLength),!r.length)return null;for(a=u;a<s;)n=t.readUint32(e,a),o=t.bin2str(e.subarray(a+4,a+8)),d=n>1?a+n:s,o===r[0]&&(1===r.length?i.push({data:e,start:a+8,end:d}):(l=t.findBox({data:e,start:a+8,end:d},r.slice(1)),l.length&&(i=i.concat(l)))),a=d;return i},t.parseSegmentIndex=function(e){var r=t.findBox(e,["moov"])[0],i=r?r.end:null,a=0,n=t.findBox(e,["sidx"]),o=void 0;if(!n||!n[0])return null;o=[],n=n[0];var s=n.data[0];a=0===s?8:16;var l=t.readUint32(n,a);a+=4;a+=0===s?8:16,a+=2;var u=n.end+0,d=t.readUint16(n,a);a+=2;for(var c=0;c<d;c++){var h=a,f=t.readUint32(n,h);h+=4;var p=2147483647&f;if(1===(2147483648&f)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var v=t.readUint32(n,h);h+=4,o.push({referenceSize:p,subsegmentDuration:v,info:{duration:v/l,start:u,end:u+p-1}}),u+=p,h+=4,a=h}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:d,references:o,moovEndOffset:i}},t.parseInitSegment=function(e){var r=[];return t.findBox(e,["moov","trak"]).forEach(function(e){var i=t.findBox(e,["tkhd"])[0];if(i){var n=i.data[i.start],o=0===n?12:20,s=t.readUint32(i,o),l=t.findBox(e,["mdia","mdhd"])[0];if(l){n=l.data[l.start],o=0===n?12:20;var u=t.readUint32(l,o),d=t.findBox(e,["mdia","hdlr"])[0];if(d){var c=t.bin2str(d.data.subarray(d.start+8,d.start+12)),h={soun:"audio",vide:"video"}[c];if(h){var f=t.findBox(e,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var p=t.bin2str(f.data.subarray(f.start+12,f.start+16));a.b.log("MP4Demuxer:"+h+":"+p+" found")}r[s]={timescale:u,type:h},r[h]={timescale:u,id:s}}}}}}),r},t.getStartDTS=function(e,r){var i=void 0,a=void 0,n=void 0;return i=t.findBox(r,["moof","traf"]),a=[].concat.apply([],i.map(function(r){return t.findBox(r,["tfhd"]).map(function(i){var a=void 0,n=void 0;return a=t.readUint32(i,4),n=e[a].timescale||9e4,t.findBox(r,["tfdt"]).map(function(e){var r=void 0,i=void 0;return r=e.data[e.start],i=t.readUint32(e,4),1===r&&(i*=Math.pow(2,32),i+=t.readUint32(e,8)),i})[0]/n})})),n=Math.min.apply(null,a),isFinite(n)?n:0},t.offsetStartDTS=function(e,r,i){t.findBox(r,["moof","traf"]).map(function(r){return t.findBox(r,["tfhd"]).map(function(a){var n=t.readUint32(a,4),s=e[n].timescale||9e4;t.findBox(r,["tfdt"]).map(function(e){var r=e.data[e.start],a=t.readUint32(e,4);if(0===r)t.writeUint32(e,4,a-i*s);else{a*=Math.pow(2,32),a+=t.readUint32(e,8),a-=i*s,a=Math.max(a,0);var n=Math.floor(a/(o+1)),l=Math.floor(a%(o+1));t.writeUint32(e,4,n),t.writeUint32(e,8,l)}})})})},t.prototype.append=function(e,r,i,a){var o=this.initData;o||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),o=this.initData);var s=void 0,l=this.initPTS;if(void 0===l){var u=t.getStartDTS(o,e);this.initPTS=l=u-r,this.observer.trigger(n.a.INIT_PTS_FOUND,{initPTS:l})}t.offsetStartDTS(o,e,l),s=t.getStartDTS(o,e),this.remuxer.remux(o.audio,o.video,null,null,s,i,a,e)},t.prototype.destroy=function(){},t}();e.a=s},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=r(4),n=r.n(a),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),s=function(){function t(){i(this,t),this.method=null,this.key=null,this.iv=null,this._uri=null}return o(t,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=n.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),t}();e.a=s},function(t,e,r){"use strict";function i(t,e){var r=n[e];return!!r&&!0===r[t.slice(0,4)]}function a(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}r.d(e,"b",function(){return i}),r.d(e,"a",function(){return a});var n={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}}},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=r(1),n=r(19),o=r(0),s=r(2),l=r(10),u=r.n(l),d=r(44),c=r.n(d),h=r(11),f=Object(h.a)(),p=function(){function t(e,r){i(this,t),this.hls=e,this.id=r;var l=this.observer=new u.a,d=e.config;l.trigger=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];l.emit.apply(l,[t,t].concat(r))},l.off=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];l.removeListener.apply(l,[t].concat(r))};var h=function(t,r){r=r||{},r.frag=this.frag,r.id=this.id,e.trigger(t,r)}.bind(this);l.on(a.a.FRAG_DECRYPTED,h),l.on(a.a.FRAG_PARSING_INIT_SEGMENT,h),l.on(a.a.FRAG_PARSING_DATA,h),l.on(a.a.FRAG_PARSED,h),l.on(a.a.ERROR,h),l.on(a.a.FRAG_PARSING_METADATA,h),l.on(a.a.FRAG_PARSING_USERDATA,h),l.on(a.a.INIT_PTS_FOUND,h);var p={mp4:f.isTypeSupported("video/mp4"),mpeg:f.isTypeSupported("audio/mpeg"),mp3:f.isTypeSupported('audio/mp4; codecs="mp3"')},v=navigator.vendor;if(d.enableWorker&&"undefined"!=typeof Worker){o.b.log("demuxing in webworker");var g=void 0;try{g=this.w=c()(45),this.onwmsg=this.onWorkerMessage.bind(this),g.addEventListener("message",this.onwmsg),g.onerror=function(t){e.trigger(a.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},g.postMessage({cmd:"init",typeSupported:p,vendor:v,id:r,config:JSON.stringify(d)})}catch(t){o.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),g&&URL.revokeObjectURL(g.objectURL),this.demuxer=new n.a(l,p,d,v),this.w=void 0}}else this.demuxer=new n.a(l,p,d,v)}return t.prototype.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,e,r,i,a,n,s,l){var u=this.w,d=isNaN(a.startDTS)?a.start:a.startDTS,c=a.decryptdata,h=this.frag,f=!(h&&a.cc===h.cc),p=!(h&&a.level===h.level),v=h&&a.sn===h.sn+1,g=!p&&v;if(f&&o.b.log(this.id+":discontinuity detected"),p&&o.b.log(this.id+":switch detected"),this.frag=a,u)u.postMessage({cmd:"demux",data:t,decryptdata:c,initSegment:e,audioCodec:r,videoCodec:i,timeOffset:d,discontinuity:f,trackSwitch:p,contiguous:g,duration:n,accurateTimeOffset:s,defaultInitPTS:l},t instanceof ArrayBuffer?[t]:[]);else{var y=this.demuxer;y&&y.push(t,c,e,r,i,d,f,p,g,n,s,l)}},t.prototype.onWorkerMessage=function(t){var e=t.data,r=this.hls;switch(e.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case a.a.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data)}},t}();e.a=p},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=r(1),n=r(2),o=r(9),s=r(35),l=r(15),u=r(36),d=r(39),c=r(40),h=r(43),f=function(){function t(e,r,a,n){i(this,t),this.observer=e,this.typeSupported=r,this.config=a,this.vendor=n}return t.prototype.destroy=function(){var t=this.demuxer;t&&t.destroy()},t.prototype.push=function(t,e,r,i,n,s,l,u,d,c,h,f){if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var p=this.decrypter;null==p&&(p=this.decrypter=new o.a(this.observer,this.config));var v=this,g=void 0;try{g=performance.now()}catch(t){g=Date.now()}p.decrypt(t,e.key.buffer,e.iv.buffer,function(t){var o=void 0;try{o=performance.now()}catch(t){o=Date.now()}v.observer.trigger(a.a.FRAG_DECRYPTED,{stats:{tstart:g,tdecrypt:o}}),v.pushDecrypted(new Uint8Array(t),e,new Uint8Array(r),i,n,s,l,u,d,c,h,f)})}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(r),i,n,s,l,u,d,c,h,f)},t.prototype.pushDecrypted=function(t,e,r,i,o,f,p,v,g,y,m,b){var E=this.demuxer;if(!E||(p||v)&&!this.probe(t)){for(var T=this.observer,S=this.typeSupported,R=this.config,A=[{demux:u.a,remux:c.a},{demux:l.a,remux:h.a},{demux:s.a,remux:c.a},{demux:d.a,remux:c.a}],_=0,w=A.length;_<w;_++){var L=A[_],D=L.demux.probe;if(D(t)){var I=this.remuxer=new L.remux(T,R,S,this.vendor);E=new L.demux(T,I,R,S),this.probe=D;break}}if(!E)return void T.trigger(a.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=E}var k=this.remuxer;(p||v)&&(E.resetInitSegment(r,i,o,y),k.resetInitSegment()),p&&(E.resetTimeStamp(b),k.resetTimeStamp(b)),"function"==typeof E.setDecryptData&&E.setDecryptData(e),E.append(t,f,g,m)},t}();e.a=f},function(t,e,r){"use strict";function i(t,e,r,i){var a=void 0,n=void 0,o=void 0,s=void 0,l=void 0,u=navigator.userAgent.toLowerCase(),d=i,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return a=1+((192&e[r+2])>>>6),(n=(60&e[r+2])>>>2)>c.length-1?void t.trigger(Event.ERROR,{type:p.b.MEDIA_ERROR,details:p.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+n}):(s=(1&e[r+2])<<2,s|=(192&e[r+3])>>>6,f.b.log("manifest codec:"+i+",ADTS data:type:"+a+",sampleingIndex:"+n+"["+c[n]+"Hz],channelConfig:"+s),/firefox/i.test(u)?n>=6?(a=5,l=new Array(4),o=n-3):(a=2,l=new Array(2),o=n):-1!==u.indexOf("android")?(a=2,l=new Array(2),o=n):(a=5,l=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&n>=6?o=n-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(n>=6&&1===s||/vivaldi/i.test(u))||!i&&1===s)&&(a=2,l=new Array(2)),o=n)),l[0]=a<<3,l[0]|=(14&n)>>1,l[1]|=(1&n)<<7,l[1]|=s<<3,5===a&&(l[1]|=(14&o)>>1,l[2]=(1&o)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:c[n],channelCount:s,codec:"mp4a.40."+a,manifestCodec:d})}function a(t,e){return 255===t[e]&&240==(246&t[e+1])}function n(t,e){return 1&t[e+1]?7:9}function o(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function s(t,e){return!!(e+1<t.length&&a(t,e))}function l(t,e){if(e+1<t.length&&a(t,e)){var r=n(t,e),i=r;e+5<t.length&&(i=o(t,e));var s=e+i;if(s===t.length||s+1<t.length&&a(t,s))return!0}return!1}function u(t,e,r,a,n){if(!t.samplerate){var o=i(e,r,a,n);t.config=o.config,t.samplerate=o.samplerate,t.channelCount=o.channelCount,t.codec=o.codec,t.manifestCodec=o.manifestCodec,f.b.log("parsed codec:"+t.codec+",rate:"+o.samplerate+",nb channel:"+o.channelCount)}}function d(t){return 9216e4/t}function c(t,e,r,i,a){var s=void 0,l=void 0,u=void 0,d=t.length;if(s=n(t,e),l=o(t,e),(l-=s)>0&&e+s+l<=d)return u=r+i*a,{headerLength:s,frameLength:l,stamp:u}}function h(t,e,r,i,a){var n=d(t.samplerate),o=c(e,r,i,a,n);if(o){var s=o.stamp,l=o.headerLength,u=o.frameLength,h={unit:e.subarray(r+l,r+l+u),pts:s,dts:s};return t.samples.push(h),t.len+=u,{sample:h,length:u+l}}}e.d=s,e.e=l,e.c=u,e.b=d,e.a=h;var f=r(0),p=r(2)},function(t,e,r){"use strict";var i={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,r,i,a){if(!(r+24>e.length)){var n=this.parseHeader(e,r);if(n&&r+n.frameLength<=e.length){var o=9e4*n.samplesPerFrame/n.sampleRate,s=i+a*o,l={unit:e.subarray(r,r+n.frameLength),pts:s,dts:s};return t.config=[],t.channelCount=n.channelCount,t.samplerate=n.sampleRate,t.samples.push(l),t.len+=n.frameLength,{sample:l,length:n.frameLength}}}},parseHeader:function(t,e){var r=t[e+1]>>3&3,a=t[e+1]>>1&3,n=t[e+2]>>4&15,o=t[e+2]>>2&3,s=t[e+2]>>1&1;if(1!==r&&0!==n&&15!==n&&3!==o){var l=3===r?3-a:3===a?3:4,u=1e3*i.BitratesMap[14*l+n-1],d=3===r?0:2===r?1:2,c=i.SamplingRateMap[3*d+o],h=t[e+3]>>6==3?1:2,f=i.SamplesCoefficients[r][a],p=i.BytesInSlot[a],v=8*f*p;return{sampleRate:c,channelCount:h,frameLength:parseInt(f*u/c+s,10)*p,samplesPerFrame:v}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var r=this.parseHeader(t,e),i=4;r&&r.frameLength&&(i=r.frameLength);var a=e+i;if(a===t.length||a+1<t.length&&this.isHeaderPattern(t,a))return!0}return!1}};e.a=i},function(t,e,r){"use strict";function i(t,e,r){var i=t[e],a=t[r],n=a.startPTS;isNaN(n)?a.start=r>e?i.start+i.duration:Math.max(i.start-a.duration,0):r>e?(i.duration=n-i.start,i.duration<0&&o.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(a.duration=i.start-n,a.duration<0&&o.b.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!"))}function a(t,e,r,a,n,o){var s=r;if(!isNaN(e.startPTS)){var l=Math.abs(e.startPTS-r);isNaN(e.deltaPTS)?e.deltaPTS=l:e.deltaPTS=Math.max(l,e.deltaPTS),s=Math.max(r,e.startPTS),r=Math.min(r,e.startPTS),a=Math.max(a,e.endPTS),n=Math.min(n,e.startDTS),o=Math.max(o,e.endDTS)}var u=r-e.start;e.start=e.startPTS=r,e.maxStartPTS=s,e.endPTS=a,e.startDTS=n,e.endDTS=o,e.duration=a-r;var d=e.sn;if(!t||d<t.startSN||d>t.endSN)return 0;var c=void 0,h=void 0,f=void 0;for(c=d-t.startSN,h=t.fragments,h[c]=e,f=c;f>0;f--)i(h,f,f-1);for(f=c;f<h.length-1;f++)i(h,f,f+1);return t.PTSKnown=!0,u}function n(t,e){var r=Math.max(t.startSN,e.startSN)-e.startSN,i=Math.min(t.endSN,e.endSN)-e.startSN,n=e.startSN-t.startSN,s=t.fragments,l=e.fragments,u=0,d=void 0;if(i<r)return void(e.PTSKnown=!1);for(var c=r;c<=i;c++){var h=s[n+c],f=l[c];f&&h&&(u=h.cc-f.cc,isNaN(h.startPTS)||(f.start=f.startPTS=h.startPTS,f.endPTS=h.endPTS,f.duration=h.duration,f.backtracked=h.backtracked,f.dropped=h.dropped,d=f))}if(u)for(o.b.log("discontinuity sliding from playlist, take drift into account"),c=0;c<l.length;c++)l[c].cc+=u;if(d)a(e,d,d.startPTS,d.endPTS,d.startDTS,d.endDTS);else if(n>=0&&n<s.length){var p=s[n].start;for(c=0;c<l.length;c++)l[c].start+=p}e.PTSKnown=t.PTSKnown}e.b=a,e.a=n;var o=r(0)},function(t,e,r){"use strict";var i={toString:function(t){for(var e="",r=t.length,i=0;i<r;i++)e+="["+t.start(i).toFixed(3)+","+t.end(i).toFixed(3)+"]";return e}};e.a=i},function(t,e,r){"use strict";function i(t,e){for(var r=null,i=0;i<t.length;i+=1){var a=t[i];if(a&&a.cc===e){r=a;break}}return r}function a(t,e){return u.a.search(t,function(t){return t.cc<e?1:t.cc>e?-1:0})}function n(t,e,r){var i=!1;return e&&e.details&&r&&(r.endCC>r.startCC||t&&t.cc<r.startCC)&&(i=!0),i}function o(t,e){var r=t.fragments,a=e.fragments;if(!a.length||!r.length)return void d.b.log("No fragments to align");var n=i(r,a[0].cc);return!n||n&&!n.startPTS?void d.b.log("No frag in previous level to align on"):n}function s(t,e){e.fragments.forEach(function(e){if(e){var r=e.start+t;e.start=e.startPTS=r,e.endPTS=r+e.duration}}),e.PTSKnown=!0}function l(t,e,r){if(n(t,e,r)){var i=o(e.details,r);i&&(d.b.log("Adjusting PTS using last level due to CC increase within current level"),s(i.start,r))}if(!1===r.PTSKnown&&e&&e.details){var a=e.details.programDateTime,l=r.programDateTime,u=(l-a)/1e3+e.details.fragments[0].start;isNaN(u)||(d.b.log("adjusting PTS using programDateTime delta, sliding:"+u.toFixed(3)),s(u,r))}}e.b=a,e.a=l;var u=r(7),d=r(0)},function(t,e,r){"use strict";function i(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new d,this.regionList=[]}function a(t){function e(t,e,r,i){return 3600*(0|t)+60*(0|e)+(0|r)+(0|i)/1e3}var r=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?e(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?e(r[1],r[2],0,r[4]):e(0,r[1],r[2],r[4]):null}function n(){this.values=Object.create(null)}function o(t,e,r,i){var a=i?t.split(i):[t];for(var n in a)if("string"==typeof a[n]){var o=a[n].split(r);if(2===o.length){var s=o[0],l=o[1];e(s,l)}}}function s(t,e,r){function i(){var e=a(t);if(null===e)throw new Error("Malformed timestamp: "+l);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function s(){t=t.replace(/^\s+/,"")}var l=t;if(s(),e.startTime=i(),s(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+l);t=t.substr(3),s(),e.endTime=i(),s(),function(t,e){var i=new n;o(t,function(t,e){switch(t){case"region":for(var a=r.length-1;a>=0;a--)if(r[a].id===e){i.set(t,r[a].region);break}break;case"vertical":i.alt(t,e,["rl","lr"]);break;case"line":var n=e.split(","),o=n[0];i.integer(t,o),i.percent(t,o)&&i.set("snapToLines",!1),i.alt(t,o,["auto"]),2===n.length&&i.alt("lineAlign",n[1],["start",h,"end"]);break;case"position":n=e.split(","),i.percent(t,n[0]),2===n.length&&i.alt("positionAlign",n[1],["start",h,"end","line-left","line-right","auto"]);break;case"size":i.percent(t,e);break;case"align":i.alt(t,e,["start",h,"end","left","right"])}},/:/,/\s/),e.region=i.get("region",null),e.vertical=i.get("vertical","");var a=i.get("line","auto");"auto"===a&&-1===c.line&&(a=-1),e.line=a,e.lineAlign=i.get("lineAlign","start"),e.snapToLines=i.get("snapToLines",!0),e.size=i.get("size",100),e.align=i.get("align",h);var s=i.get("position","auto");"auto"===s&&50===c.position&&(s="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=s}(t,e)}function l(t){return t.replace(/<br(?: \/)?>/gi,"\n")}r.d(e,"b",function(){return l});var u=r(60),d=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};n.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,r){for(var i=0;i<r.length;++i)if(e===r[i]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var c=new u.a(0,0,0),h="middle"===c.align?"middle":"center";i.prototype={parse:function(t){function e(){var t=r.buffer,e=0;for(t=l(t);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var i=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,r.buffer=t.substr(e),i}var r=this;t&&(r.buffer+=r.decoder.decode(t,{stream:!0}));try{var i=void 0;if("INITIAL"===r.state){if(!/\r\n|\n/.test(r.buffer))return this;i=e();var a=i.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");r.state="HEADER"}for(var n=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(n?n=!1:i=e(),r.state){case"HEADER":/:/.test(i)?function(t){o(t,function(t,e){switch(t){case"Region":console.log("parse region",e)}},/:/)}(i):i||(r.state="ID");continue;case"NOTE":i||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){r.state="NOTE";break}if(!i)continue;if(r.cue=new u.a(0,0,""),r.state="CUE",-1===i.indexOf("--\x3e")){r.cue.id=i;continue}case"CUE":try{s(i,r.cue,r.regionList)}catch(t){r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var d=-1!==i.indexOf("--\x3e");if(!i||d&&(n=!0)){r.oncue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}r.cue.text&&(r.cue.text+="\n"),r.cue.text+=i;continue;case"BADCUE":i||(r.state="ID");continue}}}catch(t){"CUETEXT"===r.state&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state="INITIAL"===r.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return t.onflush&&t.onflush(),this}},e.a=i},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),n=r.n(a),o=r(2),s=r(14),l=r(29),u=r(30),d=r(31),c=r(46),h=r(47),f=r(48),p=r(0),v=r(49),g=r(12),y=r(1),m=r(10),b=r.n(m),E=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();r(69);var T=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var a=t.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var n in a)n in r||(r[n]=a[n]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(p.a)(r.debug),this.config=r,this._autoLevelCapping=-1;var o=this.observer=new b.a;o.trigger=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];o.emit.apply(o,[t,t].concat(r))},o.off=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];o.removeListener.apply(o,[t].concat(r))},this.on=o.on.bind(o),this.off=o.off.bind(o),this.trigger=o.trigger.bind(o);var f=this.abrController=new r.abrController(this),v=new r.bufferController(this),y=new r.capLevelController(this),m=new r.fpsController(this),E=new s.a(this),T=new l.a(this),S=new u.a(this),R=new h.a(this),A=this.levelController=new c.a(this),_=new g.b(this),w=this.streamController=new d.a(this,_),L=[A,w],D=r.audioStreamController;D&&L.push(new D(this,_)),this.networkControllers=L;var I=[E,T,S,f,v,y,m,R,_];if(D=r.audioTrackController){var k=new D(this);this.audioTrackController=k,I.push(k)}if(D=r.subtitleTrackController){var O=new D(this);this.subtitleTrackController=O,I.push(O)}if(D=r.emeController){var C=new D(this);this.emeController=C,I.push(C)}[r.subtitleStreamController,r.timelineController].forEach(function(t){t&&I.push(new t(e))}),this.coreComponents=I}return t.isSupported=function(){return Object(f.a)()},E(t,null,[{key:"version",get:function(){return"0.8.9"}},{key:"Events",get:function(){return y.a}},{key:"ErrorTypes",get:function(){return o.b}},{key:"ErrorDetails",get:function(){return o.a}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:v.a},set:function(e){t.defaultConfig=e}}]),t.prototype.destroy=function(){p.b.log("destroy"),this.trigger(y.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(t){p.b.log("attachMedia"),this.media=t,this.trigger(y.a.MEDIA_ATTACHING,{media:t})},t.prototype.detachMedia=function(){p.b.log("detachMedia"),this.trigger(y.a.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(t){t=n.a.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),p.b.log("loadSource:"+t),this.url=t,this.trigger(y.a.MANIFEST_LOADING,{url:t})},t.prototype.startLoad=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;p.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},t.prototype.stopLoad=function(){p.b.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},t.prototype.swapAudioCodec=function(){p.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){p.b.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)},E(t,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){p.b.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){p.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){p.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){p.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){p.b.log("set startLevel:"+t);var e=this;-1!==t&&(t=Math.max(t,e.minAutoLevel)),e.levelController.startLevel=t}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){p.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this,e=t.levels,r=t.config.minAutoBitrate,i=e?e.length:0,a=0;a<i;a++){if((e[a].realBitrate?Math.max(e[a].realBitrate,e[a].bitrate):e[a].bitrate)>r)return a}return 0}},{key:"maxAutoLevel",get:function(){var t=this,e=t.levels,r=t.autoLevelCapping;return-1===r&&e&&e.length?e.length-1:r}},{key:"nextAutoLevel",get:function(){var t=this;return Math.min(Math.max(t.abrController.nextAutoLevel,t.minAutoLevel),t.maxAutoLevel)},set:function(t){var e=this;e.abrController.nextAutoLevel=Math.max(e.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),t}();e.default=T},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=r(4),n=r.n(a),o=r(6),s=r(16),l=r(28),u=r(0),d=r(17),c=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,h=/#EXT-X-MEDIA:(.*)/g,f=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),p=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,v=function(){function t(){i(this,t)}return t.findGroup=function(t,e){if(!t)return null;for(var r=null,i=0;i<t.length;i++){var a=t[i];a.id===e&&(r=a)}return r},t.convertAVC1ToAVCOTI=function(t){var e=void 0,r=t.split(".");return r.length>2?(e=r.shift()+".",e+=parseInt(r.shift()).toString(16),e+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):e=t,e},t.resolve=function(t,e){return n.a.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,r){var i=[],a=void 0;for(c.lastIndex=0;null!=(a=c.exec(e));){var n={},o=n.attrs=new l.a(a[1]);n.url=t.resolve(a[2],r);var s=o.decimalResolution("RESOLUTION");s&&(n.width=s.width,n.height=s.height),n.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),n.name=o.NAME,function(t,e){["video","audio"].forEach(function(r){var i=t.filter(function(t){return Object(d.b)(t,r)});if(i.length){var a=i.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});e[r+"Codec"]=a.length>0?a[0]:i[0],t=t.filter(function(t){return-1===i.indexOf(t)})}}),e.unknownCodecs=t}([].concat((o.CODECS||"").split(/[ ,]+/)),n),n.videoCodec&&-1!==n.videoCodec.indexOf("avc1")&&(n.videoCodec=t.convertAVC1ToAVCOTI(n.videoCodec)),i.push(n)}return i},t.parseMasterPlaylistMedia=function(e,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=void 0,o=[],s=0;for(h.lastIndex=0;null!==(n=h.exec(e));){var u={},d=new l.a(n[1]);if(d.TYPE===i){if(u.groupId=d["GROUP-ID"],u.name=d.NAME,u.type=i,u.default="YES"===d.DEFAULT,u.autoselect="YES"===d.AUTOSELECT,u.forced="YES"===d.FORCED,d.URI&&(u.url=t.resolve(d.URI,r)),u.lang=d.LANGUAGE,u.name||(u.name=u.lang),a.length){var c=t.findGroup(a,u.groupId);u.audioCodec=c?c.codec:a[0].codec}u.id=s++,o.push(u)}}return o},t.parseLevelPlaylist=function(t,e,r,i){var a=0,n=0,d={type:null,version:null,url:e,fragments:[],live:!0,startSN:0},c=new s.a,h=0,v=null,g=new o.a,y=void 0,m=void 0;for(f.lastIndex=0;null!==(y=f.exec(t));){var b=y[1];if(b){g.duration=parseFloat(b);var E=(" "+y[2]).slice(1);g.title=E||null,g.tagList.push(E?["INF",b,E]:["INF",b])}else if(y[3]){if(!isNaN(g.duration)){var T=a++;g.type=i,g.start=n,g.levelkey=c,g.sn=T,g.level=r,g.cc=h,g.baseurl=e,g.relurl=(" "+y[3]).slice(1),d.programDateTime&&(v?g.rawProgramDateTime?g.pdt=Date.parse(g.rawProgramDateTime):g.pdt=v.pdt+1e3*v.duration:g.pdt=Date.parse(d.programDateTime),g.endPdt=g.pdt+1e3*g.duration),d.fragments.push(g),v=g,n+=g.duration,g=new o.a}}else if(y[4]){if(g.rawByteRange=(" "+y[4]).slice(1),v){var S=v.byteRangeEndOffset;S&&(g.lastByteRangeEndOffset=S)}}else if(y[5])g.rawProgramDateTime=(" "+y[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),void 0===d.programDateTime&&(d.programDateTime=new Date(new Date(Date.parse(y[5]))-1e3*n));else{for(y=y[0].match(p),m=1;m<y.length&&void 0===y[m];m++);var R=(" "+y[m+1]).slice(1),A=(" "+y[m+2]).slice(1);switch(y[m]){case"#":g.tagList.push(A?[R,A]:[R]);break;case"PLAYLIST-TYPE":d.type=R.toUpperCase();break;case"MEDIA-SEQUENCE":a=d.startSN=parseInt(R);break;case"TARGETDURATION":d.targetduration=parseFloat(R);break;case"VERSION":d.version=parseInt(R);break;case"EXTM3U":break;case"ENDLIST":d.live=!1;break;case"DIS":h++,g.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":h=parseInt(R);break;case"KEY":var _=R,w=new l.a(_),L=w.enumeratedString("METHOD"),D=w.URI,I=w.hexadecimalInteger("IV");L&&(c=new s.a,D&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(L)>=0&&(c.method=L,c.baseuri=e,c.reluri=D,c.key=null,c.iv=I));break;case"START":var k=R,O=new l.a(k),C=O.decimalFloatingPoint("TIME-OFFSET");isNaN(C)||(d.startTimeOffset=C);break;case"MAP":var P=new l.a(R);g.relurl=P.URI,g.rawByteRange=P.BYTERANGE,g.baseurl=e,g.level=r,g.type=i,g.sn="initSegment",d.initSegment=g,g=new o.a;break;default:u.b.warn("line parsed but not handled: "+y)}}}return g=v,g&&!g.relurl&&(d.fragments.pop(),n-=g.duration),d.totalduration=n,d.averagetargetduration=n/d.fragments.length,d.endSN=a-1,d.startCC=d.fragments[0]?d.fragments[0].cc:0,d.endCC=h,!d.initSegment&&d.fragments.length&&d.fragments.every(function(t){return t.relurl.endsWith(".mp4")})&&(u.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),g=new o.a,g.relurl=d.fragments[0].relurl,g.baseurl=e,g.level=r,g.type=i,g.sn="initSegment",d.initSegment=g,d.needSidxRanges=!0),d},t}();e.a=v},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=/^(\d+)x(\d+)$/,n=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,o=function(){function t(e){i(this,t),"string"==typeof e&&(e=t.parseAttrList(e));for(var r in e)e.hasOwnProperty(r)&&(this[r]=e[r])}return t.prototype.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var r=new Uint8Array(e.length/2),i=0;i<e.length/2;i++)r[i]=parseInt(e.slice(2*i,2*i+2),16);return r}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.decimalFloatingPoint=function(t){return parseFloat(this[t])},t.prototype.enumeratedString=function(t){return this[t]},t.prototype.decimalResolution=function(t){var e=a.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e=void 0,r={};for(n.lastIndex=0;null!==(e=n.exec(t));){var i=e[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[e[1]]=i}return r},t}();e.a=o},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=r(1),s=r(3),l=r(2),u=r(0),d=function(t){function e(r){i(this,e);var n=a(this,t.call(this,r,o.a.FRAG_LOADING));return n.loaders={},n}return n(e,t),e.prototype.destroy=function(){var e=this.loaders;for(var r in e){var i=e[r];i&&i.destroy()}this.loaders={},t.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag,r=e.type,i=this.loaders,a=this.hls.config,n=a.fLoader,o=a.loader;e.loaded=0;var s=i[r];s&&(u.b.warn("abort previous fragment loader for type: "+r),s.abort()),s=i[r]=e.loader=a.fLoader?new n(a):new o(a);var l=void 0,d=void 0,c=void 0;l={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var h=e.byteRangeStartOffset,f=e.byteRangeEndOffset;isNaN(h)||isNaN(f)||(l.rangeStart=h,l.rangeEnd=f),d={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},s.load(l,d,c)},e.prototype.loadsuccess=function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.data,n=r.frag;n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(o.a.FRAG_LOADED,{payload:a,frag:n,stats:e,networkDetails:i})},e.prototype.loaderror=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(o.a.ERROR,{type:l.b.NETWORK_ERROR,details:l.a.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:r})},e.prototype.loadtimeout=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(o.a.ERROR,{type:l.b.NETWORK_ERROR,details:l.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:r})},e.prototype.loadprogress=function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=e.frag;a.loaded=t.loaded,this.hls.trigger(o.a.FRAG_LOAD_PROGRESS,{frag:a,stats:t,networkDetails:i})},e}(s.a);e.a=d},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=r(1),s=r(3),l=r(2),u=r(0),d=function(t){function e(r){i(this,e);var n=a(this,t.call(this,r,o.a.KEY_LOADING));return n.loaders={},n.decryptkey=null,n.decrypturl=null,n}return n(e,t),e.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},s.a.prototype.destroy.call(this)},e.prototype.onKeyLoading=function(t){var e=t.frag,r=e.type,i=this.loaders[r],a=e.decryptdata,n=a.uri;if(n!==this.decrypturl||null===this.decryptkey){var s=this.hls.config;i&&(u.b.warn("abort previous key loader for type:"+r),i.abort()),e.loader=this.loaders[r]=new s.loader(s),this.decrypturl=n,this.decryptkey=null;var l=void 0,d=void 0,c=void 0;l={url:n,frag:e,responseType:"arraybuffer"},d={timeout:s.fragLoadingTimeOut,maxRetry:s.fragLoadingMaxRetry,retryDelay:s.fragLoadingRetryDelay,maxRetryDelay:s.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.loader.load(l,d,c)}else this.decryptkey&&(a.key=this.decryptkey,this.hls.trigger(o.a.KEY_LOADED,{frag:e}))},e.prototype.loadsuccess=function(t,e,r){var i=r.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(t.data),i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(o.a.KEY_LOADED,{frag:i})},e.prototype.loaderror=function(t,e){var r=e.frag,i=r.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(o.a.ERROR,{type:l.b.NETWORK_ERROR,details:l.a.KEY_LOAD_ERROR,fatal:!1,frag:r,response:t})},e.prototype.loadtimeout=function(t,e){var r=e.frag,i=r.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(o.a.ERROR,{type:l.b.NETWORK_ERROR,details:l.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},e}(s.a);e.a=d},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=r(7),s=r(8),l=r(18),u=r(1),d=r(12),c=r(6),h=r(14),f=r(22),p=r(23),v=r(2),g=r(0),y=r(24),m=r(13),b=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),E={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},T=function(t){function e(r,n){i(this,e);var o=a(this,t.call(this,r,u.a.MEDIA_ATTACHED,u.a.MEDIA_DETACHING,u.a.MANIFEST_LOADING,u.a.MANIFEST_PARSED,u.a.LEVEL_LOADED,u.a.KEY_LOADED,u.a.FRAG_LOADED,u.a.FRAG_LOAD_EMERGENCY_ABORTED,u.a.FRAG_PARSING_INIT_SEGMENT,u.a.FRAG_PARSING_DATA,u.a.FRAG_PARSED,u.a.ERROR,u.a.AUDIO_TRACK_SWITCHING,u.a.AUDIO_TRACK_SWITCHED,u.a.BUFFER_CREATED,u.a.BUFFER_APPENDED,u.a.BUFFER_FLUSHED));return o.fragmentTracker=n,o.config=r.config,o.audioCodecSwap=!1,o._state=E.STOPPED,o}return n(e,t),e.prototype.onHandlerDestroying=function(){this.stopLoad()},e.prototype.onHandlerDestroyed=function(){this.state=E.STOPPED,this.fragmentTracker=null},e.prototype.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=r.startLevel;-1===i&&(i=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=i,this.loadedmetadata=!1}e>0&&-1===t&&(g.b.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=E.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=E.STOPPED},e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.clearInterval(),this.state=E.STOPPED,this.forceStartLoad=!1},e.prototype.doTick=function(){switch(this.state){case E.BUFFER_FLUSHING:this.fragLoadError=0;break;case E.IDLE:this._doTickIdle();break;case E.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=E.IDLE);break;case E.FRAG_LOADING_WAITING_RETRY:var e=performance.now(),r=this.retryDate;(!r||e>=r||this.media&&this.media.seeking)&&(g.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=E.IDLE);break;case E.ERROR:case E.STOPPED:case E.FRAG_LOADING:case E.PARSING:case E.PARSED:case E.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},e.prototype._doTickIdle=function(){var t=this.hls,e=t.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&e.startFragPrefetch)){var i=void 0;i=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var a=t.nextLoadLevel,n=this.levels[a];if(n){var o=n.bitrate,l=void 0;l=o?Math.max(8*e.maxBufferSize/o,e.maxBufferLength):e.maxBufferLength,l=Math.min(l,e.maxMaxBufferLength);var d=s.a.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,i,e.maxBufferHole),c=d.len;if(!(c>=l)){g.b.trace("buffer length of "+c.toFixed(3)+" is below max of "+l.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=a;var h=n.details;if(void 0===h||!0===h.live&&this.levelLastLoaded!==a)return void(this.state=E.WAITING_LEVEL);var f=this.fragPrevious;if(!h.live&&f&&!f.backtracked&&f.sn===h.endSN&&!d.nextStart){if(Math.min(r.duration,f.start+f.duration)-Math.max(d.end,f.start)<=Math.max(.2,f.duration)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(u.a.BUFFER_EOS,p),void(this.state=E.ENDED)}}this._fetchPayloadOrEos(i,d,h)}}}},e.prototype._fetchPayloadOrEos=function(t,e,r){var i=this.fragPrevious,a=this.level,n=r.fragments,o=n.length;if(0!==o){var s=n[0].start,l=n[o-1].start+n[o-1].duration,u=e.end,d=void 0;if(r.initSegment&&!r.initSegment.data)d=r.initSegment;else if(r.live){var c=this.config.initialLiveManifestSize;if(o<c)return void g.b.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+c);if(null===(d=this._ensureFragmentAtLivePoint(r,u,s,l,i,n,o)))return}else u<s&&(d=n[0]);d||(d=this._findFragment(s,i,o,n,u,l,r)),d&&this._loadFragmentOrKey(d,a,r,t,u)}},e.prototype._ensureFragmentAtLivePoint=function(t,e,r,i,a,n,s){var l=this.hls.config,u=this.media,d=void 0,c=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*t.targetduration;if(e<Math.max(r-l.maxFragLookUpTolerance,i-c)){var h=this.liveSyncPosition=this.computeLivePosition(r,t);g.b.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),e=h,u&&u.readyState&&u.duration>h&&(u.currentTime=h),this.nextLoadPosition=h}if(t.PTSKnown&&e>i&&u&&u.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(a)if(t.programDateTime)d=this._findFragmentByPDT(n,a.endPdt+1);else{var f=a.sn+1;if(f>=t.startSN&&f<=t.endSN){var p=n[f-t.startSN];a.cc===p.cc&&(d=p,g.b.log("live playlist, switching playlist, load frag with next SN: "+d.sn))}d||(d=o.a.search(n,function(t){return a.cc-t.cc}))&&g.b.log("live playlist, switching playlist, load frag with same CC: "+d.sn)}d||(d=n[Math.min(s-1,Math.round(s/2))],g.b.log("live playlist, switching playlist, unknown, load middle frag : "+d.sn))}return d},e.prototype._findFragmentByPDT=function(t,e){if(!t||void 0===e)return null;var r=t[0];if(e<r.pdt)return null;var i=t[t.length-1];return e>=i.endPdt?null:o.a.search(t,function(t){return e<t.pdt?-1:e>=t.endPdt?1:0})},e.prototype._findFragmentBySN=function(t,e,r,i){var a=this.hls.config,n=void 0,s=a.maxFragLookUpTolerance,l=t?e[t.sn-e[0].sn+1]:void 0,u=function(t){var e=Math.min(s,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-e<=r?1:t.start-e>r&&t.start?-1:0};return r<i&&(r>i-s&&(s=0),n=l&&!u(l)?l:o.a.search(e,u)),n},e.prototype._findFragment=function(t,e,r,i,a,n,o){var s=this.hls.config,l=void 0,u=void 0;if(u=a<n?o.programDateTime?this._findFragmentByPDT(i,e?e.endPdt+1:a+(o.programDateTime?Date.parse(o.programDateTime):0)):this._findFragmentBySN(e,i,a,n):i[r-1]){l=u;var d=l.sn-o.startSN,c=e&&l.level===e.level,h=i[d-1],f=i[d+1];if(e&&l.sn===e.sn)if(c&&!l.backtracked)if(l.sn<o.endSN){var p=e.deltaPTS;p&&p>s.maxBufferHole&&e.dropped&&d?(l=h,g.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(l=f,g.b.log("SN just loaded, load next one: "+l.sn))}else l=null;else l.backtracked&&(f&&f.backtracked?(g.b.warn("Already backtracked from fragment "+f.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+f.sn),l=f):(g.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,h?(l=h,l.backtracked=!0):d&&(l=null)))}return l},e.prototype._loadFragmentOrKey=function(t,e,r,i,a){if(t.decryptdata&&null!=t.decryptdata.uri&&null==t.decryptdata.key)g.b.log("Loading key for "+t.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+e),this.state=E.KEY_LOADING,this.hls.trigger(u.a.KEY_LOADING,{frag:t});else{g.b.log("Loading "+t.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+e+", currentTime:"+i.toFixed(3)+",bufferEnd:"+a.toFixed(3));var n=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,isNaN(t.sn)||t.bitrateTest||(this.nextLoadPosition=t.start+t.duration),t.backtracked||n===d.a.NOT_LOADED?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(u.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new l.a(this.hls,"main")),this.state=E.FRAG_LOADING):n===d.a.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)}},e.prototype.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,h.a.LevelType.MAIN)},e.prototype.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},e.prototype._checkFragmentChanged=function(){var t=void 0,e=void 0,r=this.media;if(r&&r.readyState&&!1===r.seeking&&(e=r.currentTime,e>r.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=e),s.a.isBuffered(r,e)?t=this.getBufferedFrag(e):s.a.isBuffered(r,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var i=t;if(i!==this.fragPlaying){this.hls.trigger(u.a.FRAG_CHANGED,{frag:i});var a=i.level;this.fragPlaying&&this.fragPlaying.level===a||this.hls.trigger(u.a.LEVEL_SWITCHED,{level:a}),this.fragPlaying=i}}},e.prototype.immediateLevelSwitch=function(){if(g.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,e=void 0;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},e.prototype.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,s.a.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},e.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e=void 0,r=void 0,i=void 0;if(r=this.getBufferedFrag(t.currentTime),r&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),t.paused)e=0;else{var a=this.hls.nextLoadLevel,n=this.levels[a],o=this.fragLastKbps;e=o&&this.fragCurrent?this.fragCurrent.duration*n.bitrate/(1e3*o)+1:0}if((i=this.getBufferedFrag(t.currentTime+e))&&(i=this.followingBufferedFrag(i))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY)}}},e.prototype.flushMainBuffer=function(t,e){this.state=E.BUFFER_FLUSHING;var r={startOffset:t,endOffset:e};this.altAudio&&(r.type="video"),this.hls.trigger(u.a.BUFFER_FLUSHING,r)},e.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(g.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onMediaSeeking=function(){var t=this.media,e=t?t.currentTime:void 0,r=this.config;isNaN(e)||g.b.log("media seeking to "+e.toFixed(3));var i=this.mediaBuffer?this.mediaBuffer:t,a=s.a.bufferInfo(i,e,this.config.maxBufferHole);if(this.state===E.FRAG_LOADING){var n=this.fragCurrent;if(0===a.len&&n){var o=r.maxFragLookUpTolerance,l=n.start-o,u=n.start+n.duration+o;e<l||e>u?(n.loader&&(g.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=E.IDLE):g.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===E.ENDED&&(0===a.len&&(this.fragPrevious=0),this.state=E.IDLE);t&&(this.lastCurrentTime=e),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=e),this.tick()},e.prototype.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;isNaN(e)||g.b.log("media seeked to "+e.toFixed(3)),this.tick()},e.prototype.onMediaEnded=function(){g.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},e.prototype.onManifestLoading=function(){g.b.log("trigger BUFFER_RESET"),this.hls.trigger(u.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},e.prototype.onManifestParsed=function(t){var e=!1,r=!1,i=void 0;t.levels.forEach(function(t){(i=t.audioCodec)&&(-1!==i.indexOf("mp4a.40.2")&&(e=!0),-1!==i.indexOf("mp4a.40.5")&&(r=!0))}),this.audioCodecSwitch=e&&r,this.audioCodecSwitch&&g.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1;var a=this.config;(a.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(a.startPosition)},e.prototype.onLevelLoaded=function(t){var e=t.details,r=t.level,i=this.levels[this.levelLastLoaded],a=this.levels[r],n=e.totalduration,o=0;if(g.b.log("level "+r+" loaded ["+e.startSN+","+e.endSN+"],duration:"+n),e.live){var s=a.details;s&&e.fragments.length>0?(f.a(s,e),o=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),e.PTSKnown&&!isNaN(o)?g.b.log("live playlist sliding:"+o.toFixed(3)):(g.b.log("live playlist - outdated PTS, unknown sliding"),Object(y.a)(this.fragPrevious,i,e))):(g.b.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,Object(y.a)(this.fragPrevious,i,e))}else e.PTSKnown=!1;if(a.details=e,this.levelLastLoaded=r,this.hls.trigger(u.a.LEVEL_UPDATED,{details:e,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=e.startTimeOffset;isNaN(l)?e.live?(this.startPosition=this.computeLivePosition(o,e),g.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(l<0&&(g.b.log("negative start time offset "+l+", count from end of last fragment"),l=o+n+l),g.b.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===E.WAITING_LEVEL&&(this.state=E.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===E.KEY_LOADING&&(this.state=E.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag;if(this.state===E.FRAG_LOADING&&e&&"main"===r.type&&r.level===e.level&&r.sn===e.sn){var i=t.stats,a=this.levels[e.level],n=a.details;if(g.b.log("Loaded  "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+e.level),this.bitrateTest=!1,this.stats=i,!0===r.bitrateTest&&this.hls.nextLoadLevel)this.state=E.IDLE,this.startFragRequested=!1,i.tparsed=i.tbuffered=performance.now(),this.hls.trigger(u.a.FRAG_BUFFERED,{stats:i,frag:e,id:"main"}),this.tick();else if("initSegment"===r.sn)this.state=E.IDLE,i.tparsed=i.tbuffered=performance.now(),n.initSegment.data=t.payload,this.hls.trigger(u.a.FRAG_BUFFERED,{stats:i,frag:e,id:"main"}),this.tick();else{this.state=E.PARSING;var o=n.totalduration,s=e.level,d=e.sn,c=this.config.defaultAudioCodec||a.audioCodec;this.audioCodecSwap&&(g.b.log("swapping playlist audio codec"),void 0===c&&(c=this.lastAudioCodec),c&&(c=-1!==c.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,g.b.log("Parsing "+d+" of ["+n.startSN+" ,"+n.endSN+"],level "+s+", cc "+e.cc);var h=this.demuxer;h||(h=this.demuxer=new l.a(this.hls,"main"));var f=this.media,p=f&&f.seeking,v=!p&&(n.PTSKnown||!n.live),y=n.initSegment?n.initSegment.data:[];h.push(t.payload,y,c,a.videoCodec,e,o,v,void 0)}}this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,r=t.frag;if(e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===E.PARSING){var i=t.tracks,a=void 0,n=void 0;if(i.audio&&this.altAudio&&delete i.audio,n=i.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(g.b.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==n.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==n.container&&(o="mp4a.40.2",g.b.log("Android: force audio codec to "+o)),n.levelCodec=o,n.id=t.id}n=i.video,n&&(n.levelCodec=this.levels[this.level].videoCodec,n.id=t.id),this.hls.trigger(u.a.BUFFER_CODECS,i);for(a in i){n=i[a],g.b.log("main track:"+a+",container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var l=n.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.a.BUFFER_APPENDING,{type:a,data:l,parent:"main",content:"initSegment"}))}this.tick()}},e.prototype.onFragParsingData=function(t){var e=this,r=this.fragCurrent,i=t.frag;if(r&&"main"===t.id&&i.sn===r.sn&&i.level===r.level&&("audio"!==t.type||!this.altAudio)&&this.state===E.PARSING){var a=this.levels[this.level],n=r;if(isNaN(t.endPTS)&&(t.endPTS=t.startPTS+r.duration,t.endDTS=t.startDTS+r.duration),!0===t.hasAudio&&n.addElementaryStream(c.a.ElementaryStreamTypes.AUDIO),!0===t.hasVideo&&n.addElementaryStream(c.a.ElementaryStreamTypes.VIDEO),g.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(n.dropped=t.dropped,n.dropped)if(n.backtracked)g.b.warn("Already backtracked on this fragment, appending with the gap");else{var o=a.details;if(!o||n.sn!==o.startSN)return g.b.warn("missing video frame(s), backtracking fragment"),this.fragmentTracker.removeFragment(n),n.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=E.IDLE,this.fragPrevious=n,void this.tick();g.b.warn("missing video frame(s) on first frag, appending with gap")}else n.backtracked=!1;var s=f.b(a.details,n,t.startPTS,t.endPTS,t.startDTS,t.endDTS),l=this.hls;l.trigger(u.a.LEVEL_PTS_UPDATED,{details:a.details,level:this.level,drift:s,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(r){r&&r.length&&e.state===E.PARSING&&(e.appended=!0,e.pendingBuffering=!0,l.trigger(u.a.BUFFER_APPENDING,{type:t.type,data:r,parent:"main",content:"data"}))}),this.tick()}},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,r=t.frag;e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===E.PARSING&&(this.stats.tparsed=performance.now(),this.state=E.PARSED,this._checkAppendedParsed())},e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url,r=t.id;if(!e){if(this.mediaBuffer!==this.media){g.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(g.b.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=E.IDLE}var a=this.hls;a.trigger(u.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger(u.a.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}},e.prototype.onAudioTrackSwitched=function(t){var e=t.id,r=!!this.hls.audioTracks[e].url;if(r){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(g.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r,this.tick()},e.prototype.onBufferCreated=function(t){var e=t.tracks,r=void 0,i=void 0,a=!1;for(var n in e){var o=e[n];"main"===o.id?(i=n,r=o,"video"===n&&(this.videoBuffer=e[n].buffer)):a=!0}a&&r?(g.b.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},e.prototype.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==E.PARSING&&e!==E.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},e.prototype._checkAppendedParsed=function(){if(!(this.state!==E.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;g.b.log("main buffered : "+p.a.toString(e.buffered)),this.fragPrevious=t;var r=this.stats;r.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(u.a.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.state=E.IDLE}this.tick()}},e.prototype.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var r=!!this.media&&s.a.isBuffered(this.media,this.media.currentTime)&&s.a.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case v.a.FRAG_LOAD_ERROR:case v.a.FRAG_LOAD_TIMEOUT:case v.a.KEY_LOAD_ERROR:case v.a.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);g.b.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=E.FRAG_LOADING_WAITING_RETRY}else g.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=E.ERROR;break;case v.a.LEVEL_LOAD_ERROR:case v.a.LEVEL_LOAD_TIMEOUT:this.state!==E.ERROR&&(t.fatal?(this.state=E.ERROR,g.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==E.WAITING_LEVEL||(this.state=E.IDLE));break;case v.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==E.PARSING&&this.state!==E.PARSED||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=E.IDLE):(g.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},e.prototype._reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,g.b.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},e.prototype._checkBuffer=function(){var t=this.media,e=this.config;if(t&&t.readyState){var r=t.currentTime,i=this.mediaBuffer?this.mediaBuffer:t,a=i.buffered;if(!this.loadedmetadata&&a.length){this.loadedmetadata=!0;var n=t.seeking?r:this.startPosition,o=s.a.isBuffered(i,n),l=a.start(0),d=!o&&Math.abs(n-l)<e.maxSeekHole;(r!==n||d)&&(g.b.log("target start position:"+n),d&&(n=l,g.b.log("target start position not buffered, seek to buffered.start(0) "+n)),g.b.log("adjust currentTime from "+r+" to "+n),t.currentTime=n)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var c=s.a.bufferInfo(t,r,e.maxBufferHole),h=!(t.paused||t.ended||0===t.buffered.length),f=r!==this.lastCurrentTime;if(f)this.stallReported&&(g.b.warn("playback not stuck anymore @"+r+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(h){var p=performance.now(),y=this.hls;if(this.stalled){var m=p-this.stalled,b=c.len,E=this.nudgeRetry||0,T=this.fragmentTracker.getPartialFragment(r);if(null!==T)for(var S=0,R=0;R<t.buffered.length;R++){var A=t.buffered.start(R);if(r>=S&&r<A)return t.currentTime=Math.max(A,t.currentTime+.1),g.b.warn("skipping hole, adjusting currentTime from "+r+" to "+t.currentTime),this.stalled=void 0,void y.trigger(u.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+r+" to "+t.currentTime,frag:T});S=t.buffered.end(R)}if(b>.5&&m>1e3*e.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,g.b.warn("playback stalling in high buffer @"+r),y.trigger(u.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:b})),this.stalled=void 0,this.nudgeRetry=++E,E<e.nudgeMaxRetry){var _=t.currentTime,w=_+E*e.nudgeOffset;g.b.log("adjust currentTime from "+_+" to "+w),t.currentTime=w,y.trigger(u.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else g.b.error("still stuck in high buffer @"+r+" after "+e.nudgeMaxRetry+", raise fatal error"),y.trigger(u.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=p,this.stallReported=!1}}}},e.prototype.onFragLoadEmergencyAborted=function(){this.state=E.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},e.prototype.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;this.fragmentTracker.detectEvictedFragments(c.a.ElementaryStreamTypes.VIDEO,t.buffered),this.state=E.IDLE,this.fragPrevious=null},e.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},e.prototype.computeLivePosition=function(t,e){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-r)},b(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,g.b.log("main stream:"+e+"->"+t),this.hls.trigger(u.a.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),e}(m.a);e.a=T},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(e,r){i(this,t),this.subtle=e,this.aesIV=r}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}();e.a=a},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(e,r){i(this,t),this.subtle=e,this.key=r}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}();e.a=a},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){var e=t.byteLength,r=e&&new DataView(t).getUint8(e-1);return r?t.slice(0,e-r):t}var n=function(){function t(){i(this,t),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return t.prototype.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),r=new Uint32Array(4),i=0;i<4;i++)r[i]=e.getUint32(4*i);return r},t.prototype.initTable=function(){var t=this.sBox,e=this.invSBox,r=this.subMix,i=r[0],a=r[1],n=r[2],o=r[3],s=this.invSubMix,l=s[0],u=s[1],d=s[2],c=s[3],h=new Uint32Array(256),f=0,p=0,v=0;for(v=0;v<256;v++)h[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^255&g^99,t[f]=g,e[g]=f;var y=h[f],m=h[y],b=h[m],E=257*h[g]^16843008*g;i[f]=E<<24|E>>>8,a[f]=E<<16|E>>>16,n[f]=E<<8|E>>>24,o[f]=E,E=16843009*b^65537*m^257*y^16843008*f,l[g]=E<<24|E>>>8,u[g]=E<<16|E>>>16,d[g]=E<<8|E>>>24,c[g]=E,f?(f=y^h[h[h[b^y]]],p^=h[h[p]]):f=p=1}},t.prototype.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,i=0;i<e.length&&r;)r=e[i]===this.key[i],i++;if(!r){this.key=e;var a=this.keySize=e.length;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size="+a);var n=this.ksRows=4*(a+6+1),o=void 0,s=void 0,l=this.keySchedule=new Uint32Array(n),u=this.invKeySchedule=new Uint32Array(n),d=this.sBox,c=this.rcon,h=this.invSubMix,f=h[0],p=h[1],v=h[2],g=h[3],y=void 0,m=void 0;for(o=0;o<n;o++)o<a?y=l[o]=e[o]:(m=y,o%a==0?(m=m<<8|m>>>24,m=d[m>>>24]<<24|d[m>>>16&255]<<16|d[m>>>8&255]<<8|d[255&m],m^=c[o/a|0]<<24):a>6&&o%a==4&&(m=d[m>>>24]<<24|d[m>>>16&255]<<16|d[m>>>8&255]<<8|d[255&m]),l[o]=y=(l[o-a]^m)>>>0);for(s=0;s<n;s++)o=n-s,m=3&s?l[o]:l[o-4],u[s]=s<4||o<=4?m:f[d[m>>>24]]^p[d[m>>>16&255]]^v[d[m>>>8&255]]^g[d[255&m]],u[s]=u[s]>>>0}},t.prototype.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},t.prototype.decrypt=function(t,e,r,i){for(var n=this.keySize+6,o=this.invKeySchedule,s=this.invSBox,l=this.invSubMix,u=l[0],d=l[1],c=l[2],h=l[3],f=this.uint8ArrayToUint32Array_(r),p=f[0],v=f[1],g=f[2],y=f[3],m=new Int32Array(t),b=new Int32Array(m.length),E=void 0,T=void 0,S=void 0,R=void 0,A=void 0,_=void 0,w=void 0,L=void 0,D=void 0,I=void 0,k=void 0,O=void 0,C=void 0,P=void 0,x=this.networkToHostOrderSwap;e<m.length;){for(D=x(m[e]),I=x(m[e+1]),k=x(m[e+2]),O=x(m[e+3]),A=D^o[0],_=O^o[1],w=k^o[2],L=I^o[3],C=4,P=1;P<n;P++)E=u[A>>>24]^d[_>>16&255]^c[w>>8&255]^h[255&L]^o[C],T=u[_>>>24]^d[w>>16&255]^c[L>>8&255]^h[255&A]^o[C+1],S=u[w>>>24]^d[L>>16&255]^c[A>>8&255]^h[255&_]^o[C+2],R=u[L>>>24]^d[A>>16&255]^c[_>>8&255]^h[255&w]^o[C+3],A=E,_=T,w=S,L=R,C+=4;E=s[A>>>24]<<24^s[_>>16&255]<<16^s[w>>8&255]<<8^s[255&L]^o[C],T=s[_>>>24]<<24^s[w>>16&255]<<16^s[L>>8&255]<<8^s[255&A]^o[C+1],S=s[w>>>24]<<24^s[L>>16&255]<<16^s[A>>8&255]<<8^s[255&_]^o[C+2],R=s[L>>>24]<<24^s[A>>16&255]<<16^s[_>>8&255]<<8^s[255&w]^o[C+3],C+=3,b[e]=x(E^p),b[e+1]=x(R^v),b[e+2]=x(S^g),b[e+3]=x(T^y),p=D,v=I,g=k,y=O,e+=4}return i?a(b.buffer):b.buffer},t.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}();e.a=n},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=r(20),n=r(0),o=r(5),s=function(){function t(e,r,a){i(this,t),this.observer=e,this.config=a,this.remuxer=r}return t.prototype.resetInitSegment=function(t,e,r,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:i,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var e=o.a.getID3Data(t,0)||[],r=e.length,i=t.length;r<i;r++)if(a.e(t,r))return n.b.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,e,r,i){for(var s=this._audioTrack,l=o.a.getID3Data(t,0)||[],u=o.a.getTimeStamp(l),d=u?90*u:9e4*e,c=0,h=d,f=t.length,p=l.length,v=[{pts:h,dts:h,data:l}];p<f-1;)if(a.d(t,p)&&p+5<f){a.c(s,this.observer,t,p,s.manifestCodec);var g=a.a(s,t,p,d,c);if(!g){n.b.log("Unable to parse AAC frame");break}p+=g.length,h=g.sample.pts,c++}else o.a.isHeader(t,p)?(l=o.a.getID3Data(t,p),v.push({pts:h,dts:h,data:l}),p+=l.length):p++;this.remuxer.remux(s,{samples:[]},{samples:v,inputTimeScale:9e4},{samples:[]},e,r,i)},t.prototype.destroy=function(){},t}();e.a=s},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=r(20),n=r(21),o=r(1),s=r(37),l=r(38),u=r(0),d=r(2),c={video:0,audio:1,id3:2,text:3},h=function(){function t(e,r,a,n){i(this,t),this.observer=e,this.config=a,this.typeSupported=n,this.remuxer=r,this.sampleAes=null}return t.prototype.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new l.a(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(e){var r=t._syncOffset(e);return!(r<0)&&(r&&u.b.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),!0)},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),r=0;r<e;){if(71===t[r]&&71===t[r+188]&&71===t[r+376])return r;r++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:c[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},t.prototype.resetInitSegment=function(e,r,i,a){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",a),this._audioTrack=t.createTrack("audio",a),this._id3Track=t.createTrack("id3",a),this._txtTrack=t.createTrack("text",a),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=i,this._duration=a},t.prototype.resetTimeStamp=function(){},t.prototype.append=function(e,r,i,a){var n=void 0,s=e.length,l=void 0,c=void 0,h=void 0,f=void 0,p=!1;this.contiguous=i;var v=this.pmtParsed,g=this._avcTrack,y=this._audioTrack,m=this._id3Track,b=g.pid,E=y.pid,T=m.pid,S=this._pmtId,R=g.pesData,A=y.pesData,_=m.pesData,w=this._parsePAT,L=this._parsePMT,D=this._parsePES,I=this._parseAVCPES.bind(this),k=this._parseAACPES.bind(this),O=this._parseMPEGPES.bind(this),C=this._parseID3PES.bind(this),P=t._syncOffset(e);for(s-=(s+P)%188,n=P;n<s;n+=188)if(71===e[n]){if(l=!!(64&e[n+1]),c=((31&e[n+1])<<8)+e[n+2],(48&e[n+3])>>4>1){if((h=n+5+e[n+4])===n+188)continue}else h=n+4;switch(c){case b:l&&(R&&(f=D(R))&&void 0!==f.pts&&I(f,!1),R={data:[],size:0}),R&&(R.data.push(e.subarray(h,n+188)),R.size+=n+188-h);break;case E:l&&(A&&(f=D(A))&&void 0!==f.pts&&(y.isAAC?k(f):O(f)),A={data:[],size:0}),A&&(A.data.push(e.subarray(h,n+188)),A.size+=n+188-h);break;case T:l&&(_&&(f=D(_))&&void 0!==f.pts&&C(f),_={data:[],size:0}),_&&(_.data.push(e.subarray(h,n+188)),_.size+=n+188-h);break;case 0:l&&(h+=e[h]+1),S=this._pmtId=w(e,h);break;case S:l&&(h+=e[h]+1);var x=L(e,h,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);b=x.avc,b>0&&(g.pid=b),E=x.audio,E>0&&(y.pid=E,y.isAAC=x.isAAC),T=x.id3,T>0&&(m.pid=T),p&&!v&&(u.b.log("reparse from beginning"),p=!1,n=P-188),v=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(o.a.ERROR,{type:d.b.MEDIA_ERROR,details:d.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});R&&(f=D(R))&&void 0!==f.pts?(I(f,!0),g.pesData=null):g.pesData=R,A&&(f=D(A))&&void 0!==f.pts?(y.isAAC?k(f):O(f),y.pesData=null):(A&&A.size&&u.b.log("last AAC PES packet truncated,might overlap between fragments"),y.pesData=A),_&&(f=D(_))&&void 0!==f.pts?(C(f),m.pesData=null):m.pesData=_,null==this.sampleAes?this.remuxer.remux(y,g,m,this._txtTrack,r,i,a):this.decryptAndRemux(y,g,m,this._txtTrack,r,i,a)},t.prototype.decryptAndRemux=function(t,e,r,i,a,n,o){if(t.samples&&t.isAAC){var s=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){s.decryptAndRemuxAvc(t,e,r,i,a,n,o)})}else this.decryptAndRemuxAvc(t,e,r,i,a,n,o)},t.prototype.decryptAndRemuxAvc=function(t,e,r,i,a,n,o){if(e.samples){var s=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,function(){s.remuxer.remux(t,e,r,i,a,n,o)})}else this.remuxer.remux(t,e,r,i,a,n,o)},t.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t.prototype._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},t.prototype._parsePMT=function(t,e,r,i){var a=void 0,n=void 0,o=void 0,s=void 0,l={audio:-1,avc:-1,id3:-1,isAAC:!0};for(a=(15&t[e+1])<<8|t[e+2],n=e+3+a-4,o=(15&t[e+10])<<8|t[e+11],e+=12+o;e<n;){switch(s=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!i){u.b.log("unkown stream type:"+t[e]);break}case 15:-1===l.audio&&(l.audio=s);break;case 21:-1===l.id3&&(l.id3=s);break;case 219:if(!i){u.b.log("unkown stream type:"+t[e]);break}case 27:-1===l.avc&&(l.avc=s);break;case 3:case 4:r?-1===l.audio&&(l.audio=s,l.isAAC=!1):u.b.log("MPEG audio found, not supported in this browser for now");break;case 36:u.b.warn("HEVC stream type found, not supported for now");break;default:u.b.log("unkown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return l},t.prototype._parsePES=function(t){var e=0,r=void 0,i=void 0,a=void 0,n=void 0,o=void 0,s=void 0,l=void 0,d=void 0,c=t.data;if(!t||0===t.size)return null;for(;c[0].length<19&&c.length>1;){var h=new Uint8Array(c[0].length+c[1].length);h.set(c[0]),h.set(c[1],c[0].length),c[0]=h,c.splice(1,1)}if(r=c[0],1===(r[0]<<16)+(r[1]<<8)+r[2]){if((a=(r[4]<<8)+r[5])&&a>t.size-6)return null;i=r[7],192&i&&(s=536870912*(14&r[9])+4194304*(255&r[10])+16384*(254&r[11])+128*(255&r[12])+(254&r[13])/2,s>4294967295&&(s-=8589934592),64&i?(l=536870912*(14&r[14])+4194304*(255&r[15])+16384*(254&r[16])+128*(255&r[17])+(254&r[18])/2,l>4294967295&&(l-=8589934592),s-l>54e5&&(u.b.warn(Math.round((s-l)/9e4)+"s delta between PTS and DTS, align them"),s=l)):l=s),n=r[8],d=n+9,t.size-=d,o=new Uint8Array(t.size);for(var f=0,p=c.length;f<p;f++){r=c[f];var v=r.byteLength;if(d){if(d>v){d-=v;continue}r=r.subarray(d),v-=d,d=0}o.set(r,e),e+=v}return a&&(a-=n+3),{data:o,pts:s,dts:l,len:a}}return null},t.prototype.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var r=e.samples,i=r.length;!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(i||this.contiguous)?(t.id=i,r.push(t)):e.dropped++}t.debug.length&&u.b.log(t.pts+"/"+t.dts+":"+t.debug)},t.prototype._parseAVCPES=function(t,e){var r=this,i=this._avcTrack,a=this._parseAVCNALu(t.data),n=void 0,o=this.avcSample,l=void 0,u=!1,d=void 0,c=this.pushAccesUnit.bind(this),h=function(t,e,r,i){return{key:t,pts:e,dts:r,units:[],debug:i}};t.data=null,o&&a.length&&!i.audFound&&(c(o,i),o=this.avcSample=h(!1,t.pts,t.dts,"")),a.forEach(function(e){switch(e.type){case 1:l=!0,o||(o=r.avcSample=h(!0,t.pts,t.dts,"")),o.frame=!0;var a=e.data;if(u&&a.length>4){var f=new s.a(a).readSliceType();2!==f&&4!==f&&7!==f&&9!==f||(o.key=!0)}break;case 5:l=!0,o||(o=r.avcSample=h(!0,t.pts,t.dts,"")),o.key=!0,o.frame=!0;break;case 6:l=!0,n=new s.a(r.discardEPB(e.data)),n.readUByte();for(var p=0,v=0,g=!1,y=0;!g&&n.bytesAvailable>1;){p=0;do{y=n.readUByte(),p+=y}while(255===y);v=0;do{y=n.readUByte(),v+=y}while(255===y);if(4===p&&0!==n.bytesAvailable){g=!0;if(181===n.readUByte()){if(49===n.readUShort()){if(1195456820===n.readUInt()){if(3===n.readUByte()){var m=n.readUByte(),b=n.readUByte(),E=31&m,T=[m,b];for(d=0;d<E;d++)T.push(n.readUByte()),T.push(n.readUByte()),T.push(n.readUByte());r._insertSampleInOrder(r._txtTrack.samples,{type:3,pts:t.pts,bytes:T})}}}}}else if(v<n.bytesAvailable)for(d=0;d<v;d++)n.readUByte()}break;case 7:if(l=!0,u=!0,!i.sps){n=new s.a(e.data);var S=n.readSPS();i.width=S.width,i.height=S.height,i.pixelRatio=S.pixelRatio,i.sps=[e.data],i.duration=r._duration;var R=e.data.subarray(1,4),A="avc1.";for(d=0;d<3;d++){var _=R[d].toString(16);_.length<2&&(_="0"+_),A+=_}i.codec=A}break;case 8:l=!0,i.pps||(i.pps=[e.data]);break;case 9:l=!1,i.audFound=!0,o&&c(o,i),o=r.avcSample=h(!1,t.pts,t.dts,"");break;case 12:l=!1;break;default:l=!1,o&&(o.debug+="unknown NAL "+e.type+" ")}if(o&&l){o.units.push(e)}}),e&&o&&(c(o,i),this.avcSample=null)},t.prototype._insertSampleInOrder=function(t,e){var r=t.length;if(r>0){if(e.pts>=t[r-1].pts)t.push(e);else for(var i=r-1;i>=0;i--)if(e.pts<t[i].pts){t.splice(i,0,e);break}}else t.push(e)},t.prototype._getLastNalUnit=function(){var t=this.avcSample,e=void 0;if(!t||0===t.units.length){var r=this._avcTrack,i=r.samples;t=i[i.length-1]}if(t){var a=t.units;e=a[a.length-1]}return e},t.prototype._parseAVCNALu=function(t){var e=0,r=t.byteLength,i=void 0,a=void 0,n=this._avcTrack,o=n.naluState||0,s=o,l=[],u=void 0,d=void 0,c=-1,h=void 0;for(-1===o&&(c=0,h=31&t[0],o=0,e=1);e<r;)if(i=t[e++],o)if(1!==o)if(i)if(1===i){if(c>=0)u={data:t.subarray(c,e-o-1),type:h},l.push(u);else{var f=this._getLastNalUnit();if(f&&(s&&e<=4-s&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-s)),(a=e-o-1)>0)){var p=new Uint8Array(f.data.byteLength+a);p.set(f.data,0),p.set(t.subarray(0,a),f.data.byteLength),f.data=p}}e<r?(d=31&t[e],c=e,h=d,o=0):o=-1}else o=0;else o=3;else o=i?0:2;else o=i?0:1;if(c>=0&&o>=0&&(u={data:t.subarray(c,r),type:h,state:o},l.push(u)),0===l.length){var v=this._getLastNalUnit();if(v){var g=new Uint8Array(v.data.byteLength+t.byteLength);g.set(v.data,0),g.set(t,v.data.byteLength),v.data=g}}return n.naluState=o,l},t.prototype.discardEPB=function(t){for(var e=t.byteLength,r=[],i=1,a=void 0,n=void 0;i<e-2;)0===t[i]&&0===t[i+1]&&3===t[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return t;a=e-r.length,n=new Uint8Array(a);var o=0;for(i=0;i<a;o++,i++)o===r[0]&&(o++,r.shift()),n[i]=t[o];return n},t.prototype._parseAACPES=function(t){var e=this._audioTrack,r=t.data,i=t.pts,n=this.aacOverFlow,s=this.aacLastPTS,l=void 0,c=void 0,h=void 0,f=void 0,p=void 0;if(n){var v=new Uint8Array(n.byteLength+r.byteLength);v.set(n,0),v.set(r,n.byteLength),r=v}for(h=0,p=r.length;h<p-1&&!a.d(r,h);h++);if(h){var g=void 0,y=void 0;if(h<p-1?(g="AAC PES did not start with ADTS header,offset:"+h,y=!1):(g="no ADTS header found in AAC PES",y=!0),u.b.warn("parsing error:"+g),this.observer.trigger(o.a.ERROR,{type:d.b.MEDIA_ERROR,details:d.a.FRAG_PARSING_ERROR,fatal:y,reason:g}),y)return}if(a.c(e,this.observer,r,h,this.audioCodec),c=0,l=a.b(e.samplerate),n&&s){var m=s+l;Math.abs(m-i)>1&&(u.b.log("AAC: align PTS for overlapping frames by "+Math.round((m-i)/90)),i=m)}for(;h<p;)if(a.d(r,h)&&h+5<p){var b=a.a(e,r,h,i,c);if(!b)break;h+=b.length,f=b.sample.pts,c++}else h++;n=h<p?r.subarray(h,p):null,this.aacOverFlow=n,this.aacLastPTS=f},t.prototype._parseMPEGPES=function(t){for(var e=t.data,r=e.length,i=0,a=0,o=t.pts;a<r;)if(n.a.isHeader(e,a)){var s=n.a.appendFrame(this._audioTrack,e,a,o,i);if(!s)break;a+=s.length,i++}else a++},t.prototype._parseID3PES=function(t){this._id3Track.samples.push(t)},t}();e.a=h},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=r(0),n=function(){function t(e){i(this,t),this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return t.prototype.loadWord=function(){var t=this.data,e=this.bytesAvailable,r=t.byteLength-e,i=new Uint8Array(4),a=Math.min(4,e);if(0===a)throw new Error("no bytes available");i.set(t.subarray(r,r+a)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*a,this.bytesAvailable-=a},t.prototype.skipBits=function(t){var e=void 0;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,e=t>>3,t-=e>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},t.prototype.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;return t>32&&a.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),e=t-e,e>0&&this.bitsAvailable?r<<e|this.readBits(e):r},t.prototype.skipLZ=function(){var t=void 0;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},t.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},t.prototype.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},t.prototype.readBoolean=function(){return 1===this.readBits(1)},t.prototype.readUByte=function(){return this.readBits(8)},t.prototype.readUShort=function(){return this.readBits(16)},t.prototype.readUInt=function(){return this.readBits(32)},t.prototype.skipScalingList=function(t){var e=8,r=8,i=void 0,a=void 0;for(i=0;i<t;i++)0!==r&&(a=this.readEG(),r=(e+a+256)%256),e=0===r?e:r},t.prototype.readSPS=function(){var t=0,e=0,r=0,i=0,a=void 0,n=void 0,o=void 0,s=void 0,l=void 0,u=void 0,d=void 0,c=this.readUByte.bind(this),h=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),v=this.skipBits.bind(this),g=this.skipEG.bind(this),y=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(c(),a=c(),h(5),v(3),c(),y(),100===a||110===a||122===a||244===a||44===a||83===a||86===a||118===a||128===a){var b=f();if(3===b&&v(1),y(),y(),v(1),p())for(u=3!==b?8:12,d=0;d<u;d++)p()&&m(d<6?16:64)}y();var E=f();if(0===E)f();else if(1===E)for(v(1),g(),g(),n=f(),d=0;d<n;d++)g();y(),v(1),o=f(),s=f(),l=h(1),0===l&&v(1),v(1),p()&&(t=f(),e=f(),r=f(),i=f());var T=[1,1];if(p()&&p()){switch(c()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[c()<<8|c(),c()<<8|c()]}}return{width:Math.ceil(16*(o+1)-2*t-2*e),height:(2-l)*(s+1)*16-(l?2:4)*(r+i),pixelRatio:T}},t.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}();e.a=n},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=r(9),n=function(){function t(e,r,n,o){i(this,t),this.decryptdata=n,this.discardEPB=o,this.decrypter=new a.a(e,r,{removePKCS7Padding:!1})}return t.prototype.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},t.prototype.decryptAacSample=function(t,e,r,i){var a=t[e].unit,n=a.subarray(16,a.length-a.length%16),o=n.buffer.slice(n.byteOffset,n.byteOffset+n.length),s=this;this.decryptBuffer(o,function(n){n=new Uint8Array(n),a.set(n,16),i||s.decryptAacSamples(t,e+1,r)})},t.prototype.decryptAacSamples=function(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(t,e,r,i),!i)return}}},t.prototype.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e),i=0,a=32;a<=t.length-16;a+=160,i+=16)r.set(t.subarray(a,a+16),i);return r},t.prototype.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var r=0,i=32;i<=t.length-16;i+=160,r+=16)t.set(e.subarray(r,r+16),i);return t},t.prototype.decryptAvcSample=function(t,e,r,i,a,n){var o=this.discardEPB(a.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,function(s){a.data=l.getAvcDecryptedUnit(o,s),n||l.decryptAvcSamples(t,e,r+1,i)})},t.prototype.decryptAvcSamples=function(t,e,r,i){for(;;e++,r=0){if(e>=t.length)return void i();for(var a=t[e].units;!(r>=a.length);r++){var n=a[r];if(!(n.length<=48||1!==n.type&&5!==n.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(t,e,r,i,n,o),!o)return}}}},t}();e.a=n},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=r(5),n=r(0),o=r(21),s=function(){function t(e,r,a){i(this,t),this.observer=e,this.config=a,this.remuxer=r}return t.prototype.resetInitSegment=function(t,e,r,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:i,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){var e=void 0,r=void 0,i=a.a.getID3Data(t,0);if(i&&void 0!==a.a.getTimeStamp(i))for(e=i.length,r=Math.min(t.length-1,e+100);e<r;e++)if(o.a.probe(t,e))return n.b.log("MPEG Audio sync word found !"),!0;return!1},t.prototype.append=function(t,e,r,i){for(var n=a.a.getID3Data(t,0),s=a.a.getTimeStamp(n),l=s?90*s:9e4*e,u=n.length,d=t.length,c=0,h=0,f=this._audioTrack,p=[{pts:l,dts:l,data:n}];u<d;)if(o.a.isHeader(t,u)){var v=o.a.appendFrame(f,t,u,l,c);if(!v)break;u+=v.length,h=v.sample.pts,c++}else a.a.isHeader(t,u)?(n=a.a.getID3Data(t,u),p.push({pts:h,dts:h,data:n}),u+=n.length):u++;this.remuxer.remux(f,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},e,r,i)},t.prototype.destroy=function(){},t}();e.a=s},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=r(41),n=r(1),o=r(0),s=r(42),l=r(2),u=function(){function t(e,r,a,n){i(this,t),this.observer=e,this.config=r,this.typeSupported=a;var o=navigator.userAgent;this.isSafari=n&&n.indexOf("Apple")>-1&&o&&!o.match("CriOS"),this.ISGenerated=!1}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},t.prototype.resetInitSegment=function(){this.ISGenerated=!1},t.prototype.remux=function(t,e,r,i,a,s,l){if(this.ISGenerated||this.generateIS(t,e,a),this.ISGenerated){var u=t.samples.length,d=e.samples.length,c=a,h=a;if(u&&d){var f=(t.samples[0].dts-e.samples[0].dts)/e.inputTimeScale;c+=Math.max(0,f),h+=Math.max(0,-f)}if(u){t.timescale||(o.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,a));var p=this.remuxAudio(t,c,s,l);if(d){var v=void 0;p&&(v=p.endPTS-p.startPTS),e.timescale||(o.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,a)),this.remuxVideo(e,h,s,v,l)}}else if(d){var g=this.remuxVideo(e,h,s,0,l);g&&t.codec&&this.remuxEmptyAudio(t,c,s,g)}}r.samples.length&&this.remuxID3(r,a),i.samples.length&&this.remuxText(i,a),this.observer.trigger(n.a.FRAG_PARSED)},t.prototype.generateIS=function(t,e,r){var i=this.observer,a=t.samples,u=e.samples,d=this.typeSupported,c="audio/mp4",h={},f={tracks:h},p=void 0===this._initPTS,v=void 0,g=void 0;if(p&&(v=g=1/0),t.config&&a.length&&(t.timescale=t.samplerate,o.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(d.mpeg?(c="audio/mpeg",t.codec=""):d.mp3&&(t.codec="mp3")),h.audio={container:c,codec:t.codec,initSegment:!t.isAAC&&d.mpeg?new Uint8Array:s.a.initSegment([t]),metadata:{channelCount:t.channelCount}},p&&(v=g=a[0].pts-t.inputTimeScale*r)),e.sps&&e.pps&&u.length){var y=e.inputTimeScale;e.timescale=y,h.video={container:"video/mp4",codec:e.codec,initSegment:s.a.initSegment([e]),metadata:{width:e.width,height:e.height}},p&&(v=Math.min(v,u[0].pts-y*r),g=Math.min(g,u[0].dts-y*r),this.observer.trigger(n.a.INIT_PTS_FOUND,{initPTS:v}))}Object.keys(h).length?(i.trigger(n.a.FRAG_PARSING_INIT_SEGMENT,f),this.ISGenerated=!0,p&&(this._initPTS=v,this._initDTS=g)):i.trigger(n.a.ERROR,{type:l.b.MEDIA_ERROR,details:l.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.prototype.remuxVideo=function(t,e,r,i,a){var u=8,d=t.timescale,c=void 0,h=void 0,f=void 0,p=void 0,v=void 0,g=void 0,y=void 0,m=t.samples,b=[],E=m.length,T=this._PTSNormalize,S=this._initDTS,R=this.nextAvcDts,A=this.isSafari;if(0!==E){A&&(r|=m.length&&R&&(a&&Math.abs(e-R/d)<.1||Math.abs(m[0].pts-R-S)<d/5)),r||(R=e*d),m.forEach(function(t){t.pts=T(t.pts-S,R),t.dts=T(t.dts-S,R)}),m.sort(function(t,e){var r=t.dts-e.dts,i=t.pts-e.pts;return r||i||t.id-e.id});var _=m.reduce(function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)},0);if(_<0){o.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(_/90)+" ms to overcome this issue");for(var w=0;w<m.length;w++)m[w].dts+=_}var L=m[0];v=Math.max(L.dts,0),p=Math.max(L.pts,0);var D=Math.round((v-R)/90);r&&D&&(D>1?o.b.log("AVC:"+D+" ms hole between fragments detected,filling it"):D<-1&&o.b.log("AVC:"+-D+" ms overlapping between fragments detected"),v=R,m[0].dts=v,p=Math.max(p-D,R),m[0].pts=p,o.b.log("Video/PTS/DTS adjusted: "+Math.round(p/90)+"/"+Math.round(v/90)+",delta:"+D+" ms")),v,L=m[m.length-1],y=Math.max(L.dts,0),g=Math.max(L.pts,0,y),A&&(c=Math.round((y-v)/(m.length-1)));for(var I=0,k=0,O=0;O<E;O++){for(var C=m[O],P=C.units,x=P.length,F=0,N=0;N<x;N++)F+=P[N].data.length;k+=F,I+=x,C.length=F,C.dts=A?v+O*c:Math.max(C.dts,v),C.pts=Math.max(C.pts,C.dts)}var M=k+4*I+8;try{h=new Uint8Array(M)}catch(t){return void this.observer.trigger(n.a.ERROR,{type:l.b.MUX_ERROR,details:l.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:M,reason:"fail allocating video mdat "+M})}var U=new DataView(h.buffer);U.setUint32(0,M),h.set(s.a.types.mdat,4);for(var B=0;B<E;B++){for(var G=m[B],K=G.units,j=0,H=void 0,V=0,W=K.length;V<W;V++){var Y=K[V],q=Y.data,X=Y.data.byteLength;U.setUint32(u,X),u+=4,h.set(q,u),u+=X,j+=4+X}if(A)H=Math.max(0,c*Math.round((G.pts-G.dts)/c));else{if(B<E-1)c=m[B+1].dts-G.dts;else{var z=this.config,Q=G.dts-m[B>0?B-1:B].dts;if(z.stretchShortVideoTrack){var J=z.maxBufferHole,$=Math.floor(J*d),Z=(i?p+i*d:this.nextAudioPts)-G.pts;Z>$?(c=Z-Q,c<0&&(c=Q),o.b.log("It is approximately "+Z/90+" ms to the next segment; using duration "+c/90+" ms for the last video frame.")):c=Q}else c=Q}H=Math.round(G.pts-G.dts)}b.push({size:j,duration:c,cts:H,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:G.key?2:1,isNonSync:G.key?0:1}})}this.nextAvcDts=y+c;var tt=t.dropped;if(t.len=0,t.nbNalu=0,t.dropped=0,b.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var et=b[0].flags;et.dependsOn=2,et.isNonSync=0}t.samples=b,f=s.a.moof(t.sequenceNumber++,v,t),t.samples=[];var rt={data1:f,data2:h,startPTS:p/d,endPTS:(g+c)/d,startDTS:v/d,endDTS:this.nextAvcDts/d,type:"video",hasAudio:!1,hasVideo:!0,nb:b.length,dropped:tt};return this.observer.trigger(n.a.FRAG_PARSING_DATA,rt),rt}},t.prototype.remuxAudio=function(t,e,r,i){var u=t.inputTimeScale,d=t.timescale,c=u/d,h=t.isAAC?1024:1152,f=h*c,p=this._PTSNormalize,v=this._initDTS,g=!t.isAAC&&this.typeSupported.mpeg,y=void 0,m=void 0,b=void 0,E=void 0,T=void 0,S=void 0,R=void 0,A=t.samples,_=[],w=this.nextAudioPts;if(r|=A.length&&w&&(i&&Math.abs(e-w/u)<.1||Math.abs(A[0].pts-w-v)<20*f),A.forEach(function(t){t.pts=t.dts=p(t.pts-v,e*u)}),A=A.filter(function(t){return t.pts>=0}),0!==A.length){if(r||(w=i?e*u:A[0].pts),t.isAAC)for(var L=this.config.maxAudioFramesDrift,D=0,I=w;D<A.length;){var k,O=A[D],C=O.pts;k=C-I;var P=Math.abs(1e3*k/u);if(k<=-L*f)o.b.warn("Dropping 1 audio frame @ "+(I/u).toFixed(3)+"s due to "+Math.round(P)+" ms overlap."),A.splice(D,1),t.len-=O.unit.length;else if(k>=L*f&&P<1e4&&I){var x=Math.round(k/f);o.b.warn("Injecting "+x+" audio frame @ "+(I/u).toFixed(3)+"s due to "+Math.round(1e3*k/u)+" ms gap.");for(var F=0;F<x;F++){var N=Math.max(I,0);b=a.a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),b||(o.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),b=O.unit.subarray()),A.splice(D,0,{unit:b,pts:N,dts:N}),t.len+=b.length,I+=f,D++}O.pts=O.dts=I,I+=f,D++}else Math.abs(k),O.pts=O.dts=I,I+=f,D++}for(var M=0,U=A.length;M<U;M++){var B=A[M],G=B.unit,K=B.pts;if(void 0!==R)m.duration=Math.round((K-R)/c);else{var j=Math.round(1e3*(K-w)/u),H=0;if(r&&t.isAAC&&j){if(j>0&&j<1e4)H=Math.round((K-w)/f),o.b.log(j+" ms hole between AAC samples detected,filling it"),H>0&&(b=a.a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),b||(b=G.subarray()),t.len+=H*b.length);else if(j<-12){o.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(w/u).toFixed(3)+"s/"+(K/u).toFixed(3)+"s/"+-j+"ms"),t.len-=G.byteLength;continue}K=w}if(S=K,!(t.len>0))return;var V=g?t.len:t.len+8;y=g?0:8;try{E=new Uint8Array(V)}catch(t){return void this.observer.trigger(n.a.ERROR,{type:l.b.MUX_ERROR,details:l.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:V,reason:"fail allocating audio mdat "+V})}if(!g){new DataView(E.buffer).setUint32(0,V),E.set(s.a.types.mdat,4)}for(var W=0;W<H;W++)b=a.a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),b||(o.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),b=G.subarray()),E.set(b,y),y+=b.byteLength,m={size:b.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},_.push(m)}E.set(G,y);var Y=G.byteLength;y+=Y,m={size:Y,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},_.push(m),R=K}var q=0,X=_.length;if(X>=2&&(q=_[X-2].duration,m.duration=q),X){this.nextAudioPts=w=R+c*q,t.len=0,t.samples=_,T=g?new Uint8Array:s.a.moof(t.sequenceNumber++,S/c,t),t.samples=[];var z=S/u,Q=w/u,J={data1:T,data2:E,startPTS:z,endPTS:Q,startDTS:z,endDTS:Q,type:"audio",hasAudio:!0,hasVideo:!1,nb:X};return this.observer.trigger(n.a.FRAG_PARSING_DATA,J),J}return null}},t.prototype.remuxEmptyAudio=function(t,e,r,i){var n=t.inputTimeScale,s=t.samplerate?t.samplerate:n,l=n/s,u=this.nextAudioPts,d=(void 0!==u?u:i.startDTS*n)+this._initDTS,c=i.endDTS*n+this._initDTS,h=1024*l,f=Math.ceil((c-d)/h),p=a.a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(o.b.warn("remux empty Audio"),!p)return void o.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var v=[],g=0;g<f;g++){var y=d+g*h;v.push({unit:p,pts:y,dts:y}),t.len+=p.length}t.samples=v,this.remuxAudio(t,e,r)},t.prototype.remuxID3=function(t,e){var r=t.samples.length,i=void 0,a=t.inputTimeScale,o=this._initPTS,s=this._initDTS;if(r){for(var l=0;l<r;l++)i=t.samples[l],i.pts=(i.pts-o)/a,i.dts=(i.dts-s)/a;this.observer.trigger(n.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[],e=e},t.prototype.remuxText=function(t,e){t.samples.sort(function(t,e){return t.pts-e.pts});var r=t.samples.length,i=void 0,a=t.inputTimeScale,o=this._initPTS;if(r){for(var s=0;s<r;s++)i=t.samples[s],i.pts=(i.pts-o)/a;this.observer.trigger(n.a.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[],e=e},t.prototype._PTSNormalize=function(t,e){var r=void 0;if(void 0===e)return t;for(r=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=r;return t},t}();e.a=u},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(){i(this,t)}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}();e.a=a},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=Math.pow(2,32)-1,n=function(){function t(){i(this,t)}return t.init=function(){t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e=void 0;for(e in t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:i};var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=n,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,o,l,o,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,a))},t.box=function(t){for(var e=Array.prototype.slice.call(arguments,1),r=8,i=e.length,a=i,n=void 0;i--;)r+=e[i].byteLength;for(n=new Uint8Array(r),n[0]=r>>24&255,n[1]=r>>16&255,n[2]=r>>8&255,n[3]=255&r,n.set(t,4),i=0,r=8;i<a;i++)n.set(e[i],r),r+=e[i].byteLength;return n},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,r){r*=e;var i=Math.floor(r/(a+1)),n=Math.floor(r%(a+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,r,i){return t.box(t.types.moof,t.mfhd(e),t.traf(i,r))},t.moov=function(e){for(var r=e.length,i=[];r--;)i[r]=t.trak(e[r]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(t.mvex(e)))},t.mvex=function(e){for(var r=e.length,i=[];r--;)i[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(i))},t.mvhd=function(e,r){r*=e;var i=Math.floor(r/(a+1)),n=Math.floor(r%(a+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,o)},t.sdtp=function(e){var r=e.samples||[],i=new Uint8Array(4+r.length),a=void 0,n=void 0;for(n=0;n<r.length;n++)a=r[n].flags,i[n+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return t.box(t.types.sdtp,i)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var r=[],i=[],a=void 0,n=void 0,o=void 0;for(a=0;a<e.sps.length;a++)n=e.sps[a],o=n.byteLength,r.push(o>>>8&255),r.push(255&o),r=r.concat(Array.prototype.slice.call(n));for(a=0;a<e.pps.length;a++)n=e.pps[a],o=n.byteLength,i.push(o>>>8&255),i.push(255&o),i=i.concat(Array.prototype.slice.call(n));var s=t.box(t.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(i))),l=e.width,u=e.height,d=e.pixelRatio[0],c=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,c>>24,c>>16&255,c>>8&255,255&c])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var r=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var r=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var r=e.id,i=e.duration*e.timescale,n=e.width,o=e.height,s=Math.floor(i/(a+1)),l=Math.floor(i%(a+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,o>>8&255,255&o,0,0]))},t.traf=function(e,r){var i=t.sdtp(e),n=e.id,o=Math.floor(r/(a+1)),s=Math.floor(r%(a+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s])),t.trun(e,i.length+16+20+8+16+8+8),i)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,r){var i=e.samples||[],a=i.length,n=12+16*a,o=new Uint8Array(n),s=void 0,l=void 0,u=void 0,d=void 0,c=void 0,h=void 0;for(r+=8+n,o.set([0,0,15,1,a>>>24&255,a>>>16&255,a>>>8&255,255&a,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),s=0;s<a;s++)l=i[s],u=l.duration,d=l.size,c=l.flags,h=l.cts,o.set([u>>>24&255,u>>>16&255,u>>>8&255,255&u,d>>>24&255,d>>>16&255,d>>>8&255,255&d,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.paddingValue<<1|c.isNonSync,61440&c.degradPrio,15&c.degradPrio,h>>>24&255,h>>>16&255,h>>>8&255,255&h],12+16*s);return t.box(t.types.trun,o)},t.initSegment=function(e){t.types||t.init();var r=t.moov(e),i=void 0;return i=new Uint8Array(t.FTYP.byteLength+r.byteLength),i.set(t.FTYP),i.set(r,t.FTYP.byteLength),i},t}();e.a=n},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=r(1),n=function(){function t(e){i(this,t),this.observer=e}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(){},t.prototype.resetInitSegment=function(){},t.prototype.remux=function(t,e,r,i,n,o,s,l){var u=this.observer,d="";t&&(d+="audio"),e&&(d+="video"),u.trigger(a.a.FRAG_PARSING_DATA,{data1:l,startPTS:n,startDTS:n,type:d,hasAudio:!!t,hasVideo:!!e,nb:1,dropped:0}),u.trigger(a.a.FRAG_PARSED)},t}();e.a=n},function(t,e,r){function i(t){function e(i){if(r[i])return r[i].exports;var a=r[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var r={};e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw console.error(t),t};var i=e(e.s=ENTRY_MODULE);return i.default||i}function a(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function n(t,e,i){var n={};n[i]=[];var o=e.toString(),s=o.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return n;for(var d,c=s[1],h=new RegExp("(\\\\n|\\W)"+a(c)+u,"g");d=h.exec(o);)"dll-reference"!==d[3]&&n[i].push(d[3]);for(h=new RegExp("\\("+a(c)+'\\("(dll-reference\\s('+l+'))"\\)\\)'+u,"g");d=h.exec(o);)t[d[2]]||(n[i].push(d[1]),t[d[2]]=r(d[1]).m),n[d[2]]=n[d[2]]||[],n[d[2]].push(d[4]);return n}function o(t){return Object.keys(t).reduce(function(e,r){return e||t[r].length>0},!1)}function s(t,e){for(var r={main:[e]},i={main:[]},a={main:{}};o(r);)for(var s=Object.keys(r),l=0;l<s.length;l++){var u=s[l],d=r[u],c=d.pop();if(a[u]=a[u]||{},!a[u][c]&&t[u][c]){a[u][c]=!0,i[u]=i[u]||[],i[u].push(c);for(var h=n(t,t[u][c],u),f=Object.keys(h),p=0;p<f.length;p++)r[f[p]]=r[f[p]]||[],r[f[p]]=r[f[p]].concat(h[f[p]])}}return i}var l="[\\.|\\-|\\+|\\w|/|@]+",u="\\((/\\*.*?\\*/)?s?.*?("+l+").*?\\)";t.exports=function(t,e){e=e||{};var a={main:r.m},n=e.all?{main:Object.keys(a)}:s(a,t),o="";Object.keys(n).filter(function(t){return"main"!==t}).forEach(function(t){for(var e=0;n[t][e];)e++;n[t].push(e),a[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+t+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+n[t].map(function(e){return JSON.stringify(e)+": "+a[t][e].toString()}).join(",")+"});\n"}),o=o+"("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+n.main.map(function(t){return JSON.stringify(t)+": "+a.main[t].toString()}).join(",")+"})(self);";var l=new window.Blob([o],{type:"text/javascript"});if(e.bare)return l;var u=window.URL||window.webkitURL||window.mozURL||window.msURL,d=u.createObjectURL(l),c=new window.Worker(d);return c.objectURL=d,c}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(19),a=r(1),n=r(0),o=r(10),s=r.n(o),l=function(t){var e=new s.a;e.trigger=function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];e.emit.apply(e,[t,t].concat(i))},e.off=function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];e.removeListener.apply(e,[t].concat(i))};var r=function(e,r){t.postMessage({event:e,data:r})};t.addEventListener("message",function(a){var o=a.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);t.demuxer=new i.a(e,o.typeSupported,s,o.vendor);try{Object(n.a)(!0===s.debug)}catch(t){console.warn("demuxerWorker: unable to enable logs")}r("init",null);break;case"demux":t.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}}),e.on(a.a.FRAG_DECRYPTED,r),e.on(a.a.FRAG_PARSING_INIT_SEGMENT,r),e.on(a.a.FRAG_PARSED,r),e.on(a.a.ERROR,r),e.on(a.a.FRAG_PARSING_METADATA,r),e.on(a.a.FRAG_PARSING_USERDATA,r),e.on(a.a.INIT_PTS_FOUND,r),e.on(a.a.FRAG_PARSING_DATA,function(e,r){var i=[],a={event:e,data:r};r.data1&&(a.data1=r.data1.buffer,i.push(r.data1.buffer),delete r.data1),r.data2&&(a.data2=r.data2.buffer,i.push(r.data2.buffer),delete r.data2),t.postMessage(a,i)})};e.default=l},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=r(1),s=r(3),l=r(0),u=r(2),d=r(17),c=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),h=function(t){function e(r){i(this,e);var n=a(this,t.call(this,r,o.a.MANIFEST_LOADED,o.a.LEVEL_LOADED,o.a.FRAG_LOADED,o.a.ERROR));return n.canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,n}return n(e,t),e.prototype.onHandlerDestroying=function(){this.cleanTimer(),this.manualLevelIndex=-1},e.prototype.cleanTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},e.prototype.stopLoad=function(){this.canload=!1},e.prototype.onManifestLoaded=function(t){var e=[],r=void 0,i={},a=null,n=!1,s=!1,c=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),h=[];if(t.levels.forEach(function(t){t.loadError=0,t.fragmentError=!1,n=n||!!t.videoCodec,s=s||!!t.audioCodec||!(!t.attrs||!t.attrs.AUDIO),!0===c&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),a=i[t.bitrate],void 0===a?(t.url=[t.url],t.urlId=0,i[t.bitrate]=t,e.push(t)):a.url.push(t.url)}),!0===n&&!0===s&&(e=e.filter(function(t){return!!t.videoCodec})),e=e.filter(function(t){var e=t.audioCodec,r=t.videoCodec;return(!e||Object(d.a)(e))&&(!r||Object(d.a)(r))}),t.audioTracks&&(h=t.audioTracks.filter(function(t){return!t.audioCodec||Object(d.a)(t.audioCodec,"audio")})),e.length>0){r=e[0].bitrate,e.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=e;for(var f=0;f<e.length;f++)if(e[f].bitrate===r){this._firstLevel=f,l.b.log("manifest loaded,"+e.length+" level(s) found, first bitrate:"+r);break}this.hls.trigger(o.a.MANIFEST_PARSED,{levels:e,audioTracks:h,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:n,altAudio:h.length>0})}else this.hls.trigger(o.a.ERROR,{type:u.b.MEDIA_ERROR,details:u.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},e.prototype.setLevelInternal=function(t){var e=this._levels,r=this.hls;if(t>=0&&t<e.length){if(this.cleanTimer(),this.currentLevelIndex!==t){l.b.log("switching to level "+t),this.currentLevelIndex=t;var i=e[t];i.level=t,r.trigger(o.a.LEVEL_SWITCH,i),r.trigger(o.a.LEVEL_SWITCHING,i)}var a=e[t],n=a.details;if(!n||!0===n.live){var s=a.urlId;r.trigger(o.a.LEVEL_LOADING,{url:a.url[s],level:t,id:s})}}else r.trigger(o.a.ERROR,{type:u.b.OTHER_ERROR,details:u.a.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},e.prototype.onError=function(t){if(!0===t.fatal)return void(t.type===u.b.NETWORK_ERROR&&this.cleanTimer());var e=!1,r=!1,i=void 0;switch(t.details){case u.a.FRAG_LOAD_ERROR:case u.a.FRAG_LOAD_TIMEOUT:case u.a.KEY_LOAD_ERROR:case u.a.KEY_LOAD_TIMEOUT:i=t.frag.level,r=!0;break;case u.a.LEVEL_LOAD_ERROR:case u.a.LEVEL_LOAD_TIMEOUT:i=t.context.level,e=!0;break;case u.a.REMUX_ALLOC_ERROR:i=t.level,e=!0}void 0!==i&&this.recoverLevel(t,i,e,r)},e.prototype.recoverLevel=function(t,e,r,i){var a=this,n=this.hls.config,o=t.details,s=this._levels[e],u=void 0,d=void 0,c=void 0;if(s.loadError++,s.fragmentError=i,!0===r){if(!(this.levelRetryCount+1<=n.levelLoadingMaxRetry))return l.b.error("level controller, cannot recover from "+o+" error"),this.currentLevelIndex=null,this.cleanTimer(),void(t.fatal=!0);d=Math.min(Math.pow(2,this.levelRetryCount)*n.levelLoadingRetryDelay,n.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return a.loadLevel()},d),t.levelRetry=!0,this.levelRetryCount++,l.b.warn("level controller, "+o+", retry in "+d+" ms, current retry count is "+this.levelRetryCount)}!0!==r&&!0!==i||(u=s.url.length,u>1&&s.loadError<u?(l.b.warn("level controller, "+o+" for level "+e+": switching to redundant stream id "+s.urlId),s.urlId=(s.urlId+1)%u,s.details=void 0):-1===this.manualLevelIndex?(c=0===e?this._levels.length-1:e-1,l.b.warn("level controller, "+o+": switch to "+c),this.hls.nextAutoLevel=this.currentLevelIndex=c):!0===i&&(l.b.warn("level controller, "+o+": reload a fragment"),this.currentLevelIndex=null))},e.prototype.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var r=this._levels[e.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},e.prototype.onLevelLoaded=function(t){var e=this,r=t.level;if(r===this.currentLevelIndex){var i=this._levels[r];!1===i.fragmentError&&(i.loadError=0,this.levelRetryCount=0);var a=t.details;if(a.live){var n=1e3*(a.averagetargetduration?a.averagetargetduration:a.targetduration),o=i.details;o&&a.endSN===o.endSN&&(n/=2,l.b.log("same live playlist, reload twice faster")),n-=performance.now()-t.stats.trequest,n=Math.max(1e3,Math.round(n)),l.b.log("live playlist, reload in "+n+" ms"),this.timer=setTimeout(function(){return e.loadLevel()},n)}else this.cleanTimer()}},e.prototype.loadLevel=function(){var t=void 0,e=void 0;null!==this.currentLevelIndex&&!0===this.canload&&void 0!==(t=this._levels[this.currentLevelIndex])&&t.url.length>0&&(e=t.urlId,this.hls.trigger(o.a.LEVEL_LOADING,{url:t.url[e],level:this.currentLevelIndex,id:e}))},c(e,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&void 0!==e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),e}(s.a);e.a=h},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=r(1),s=r(3),l=r(5),u=function(t){function e(r){i(this,e);var n=a(this,t.call(this,r,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.FRAG_PARSING_METADATA));return n.id3Track=void 0,n.media=void 0,n}return n(e,t),e.prototype.destroy=function(){s.a.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){this.media=t.media,this.media},e.prototype.onMediaDetaching=function(){this.media=void 0},e.prototype.onFragParsingMetadata=function(t){var e=t.frag,r=t.samples;this.id3Track||(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,a=0;a<r.length;a++){var n=l.a.getID3Frames(r[a].data);if(n){var o=r[a].pts,s=a<r.length-1?r[a+1].pts:e.endPTS;o===s&&(s+=1e-4);for(var u=0;u<n.length;u++){var d=n[u];if(!l.a.isTimeStampFrame(d)){var c=new i(o,s,"");c.value=d,this.id3Track.addCue(c)}}}}},e}(s.a);e.a=u},function(t,e,r){"use strict";function i(){var t=Object(a.a)(),e=window.SourceBuffer||window.WebKitSourceBuffer,r=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!r&&!!i}e.a=i;var a=r(11)},function(t,e,r){"use strict";r.d(e,"a",function(){return g});var i=r(50),a=r(53),n=r(54),o=r(55),s=r(56),l=r(57),u=r(58),d=r(59),c=r(61),h=r(65),f=r(66),p=r(67),v=r(68),g={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.a,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:i.a,bufferController:a.a,capLevelController:n.a,fpsController:o.a,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:v.a};g.subtitleStreamController=f.a,g.subtitleTrackController=h.a,g.timelineController=c.a,g.cueHandler=d,g.enableCEA708Captions=!0,g.enableWebVTT=!0,g.captionsTextTrack1Label="English",g.captionsTextTrack1LanguageCode="en",g.captionsTextTrack2Label="Spanish",g.captionsTextTrack2LanguageCode="es",g.audioStreamController=u.a,g.audioTrackController=l.a,g.emeController=p.a},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=r(1),s=r(3),l=r(8),u=r(2),d=r(0),c=r(51),h=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),f=function(t){function e(r){i(this,e);var n=a(this,t.call(this,r,o.a.FRAG_LOADING,o.a.FRAG_LOADED,o.a.FRAG_BUFFERED,o.a.ERROR));return n.lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=r,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(n),n}return n(e,t),e.prototype.destroy=function(){this.clearTimer(),s.a.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag;if("main"===e.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var r=this.hls,i=t.frag.level,a=r.levels[i].details.live,n=r.config,o=void 0,s=void 0;a?(o=n.abrEwmaFastLive,s=n.abrEwmaSlowLive):(o=n.abrEwmaFastVoD,s=n.abrEwmaSlowVoD),this._bwEstimator=new c.a(r,s,o,n.abrEwmaDefaultEstimate)}this.fragCurrent=e}},e.prototype._abandonRulesCheck=function(){var t=this.hls,e=t.media,r=this.fragCurrent,i=r.loader,a=t.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return d.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var n=i.stats;if(e&&n&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&r.autoLevel&&r.level){var s=performance.now()-n.trequest,u=Math.abs(e.playbackRate);if(s>500*r.duration/u){var c=t.levels,h=Math.max(1,n.bw?n.bw/8:1e3*n.loaded/s),f=c[r.level],p=f.realBitrate?Math.max(f.realBitrate,f.bitrate):f.bitrate,v=n.total?n.total:Math.max(n.loaded,Math.round(r.duration*p/8)),g=e.currentTime,y=(v-n.loaded)/h,m=(l.a.bufferInfo(e,g,t.config.maxBufferHole).end-g)/u;if(m<2*r.duration/u&&y>m){var b=void 0,E=void 0;for(E=r.level-1;E>a;E--){var T=c[E].realBitrate?Math.max(c[E].realBitrate,c[E].bitrate):c[E].bitrate;if((b=r.duration*T/(6.4*h))<m)break}b<y&&(d.b.warn("loading too slow, abort fragment loading and switch to level "+E+":fragLoadedDelay["+E+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+b.toFixed(1)+"<"+y.toFixed(1)+":"+m.toFixed(1)),t.nextLoadLevel=E,this._bwEstimator.sample(s,n.loaded),i.abort(),this.clearTimer(),t.trigger(o.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:n}))}}}},e.prototype.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&!isNaN(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[e.level],i=(r.loaded?r.loaded.bytes:0)+t.stats.loaded,a=(r.loaded?r.loaded.duration:0)+t.frag.duration;r.loaded={bytes:i,duration:a},r.realBitrate=Math.round(8*i/a)}if(t.frag.bitrateTest){var n=t.stats;n.tparsed=n.tbuffered=n.tload,this.onFragBuffered(t)}}},e.prototype.onFragBuffered=function(t){var e=t.stats,r=t.frag;if(!(!0===e.aborted||"main"!==r.type||isNaN(r.sn)||r.bitrateTest&&e.tload!==e.tbuffered)){var i=e.tparsed-e.trequest;d.b.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(i,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},e.prototype.onError=function(t){switch(t.details){case u.a.FRAG_LOAD_ERROR:case u.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},e.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},e.prototype._findBestLevel=function(t,e,r,i,a,n,o,s,l){for(var u=a;u>=i;u--){var c=l[u],h=c.details,f=h?h.totalduration/h.fragments.length:e,p=!!h&&h.live,v=void 0;v=u<=t?o*r:s*r;var g=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,y=g*f/v;if(d.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(v)+"/"+g+"/"+f+"/"+n+"/"+y),v>g&&(!y||p&&!this.bitrateTestDelay||y<n))return u}return-1},h(e,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var r=this._nextABRAutoLevel;return-1!==t&&(r=Math.min(t,r)),r},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,r=t.levels,i=t.config,a=t.minAutoLevel,n=t.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=n?n.currentTime:0,c=n&&0!==n.playbackRate?Math.abs(n.playbackRate):1,h=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,f=(l.a.bufferInfo(n,u,i.maxBufferHole).end-u)/c,p=this._findBestLevel(o,s,h,a,e,f,i.abrBandWidthFactor,i.abrBandWidthUpFactor,r);if(p>=0)return p;d.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var v=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay,g=i.abrBandWidthFactor,y=i.abrBandWidthUpFactor;if(0===f){var m=this.bitrateTestDelay;if(m){v=(s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay)-m,d.b.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*v)+" ms"),g=y=1}}return p=this._findBestLevel(o,s,h,a,e,f+v,g,y,r),Math.max(p,0)}}]),e}(s.a);e.a=f},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=r(52),n=function(){function t(e,r,n,o){i(this,t),this.hls=e,this.defaultEstimate_=o,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new a.a(r),this.fast_=new a.a(n)}return t.prototype.sample=function(t,e){t=Math.max(t,this.minDelayMs_);var r=8e3*e/t,i=t/1e3;this.fast_.sample(i,r),this.slow_.sample(i,r)},t.prototype.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},t.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.prototype.destroy=function(){},t}();e.a=n},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(e){i(this,t),this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return t.prototype.sample=function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t},t.prototype.getTotalWeight=function(){return this.totalWeight_},t.prototype.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}();e.a=a},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=r(1),s=r(3),l=r(0),u=r(2),d=r(11),c=Object(d.a)(),h=function(t){function e(r){i(this,e);var n=a(this,t.call(this,r,o.a.MEDIA_ATTACHING,o.a.MEDIA_DETACHING,o.a.MANIFEST_PARSED,o.a.BUFFER_RESET,o.a.BUFFER_APPENDING,o.a.BUFFER_CODECS,o.a.BUFFER_EOS,o.a.BUFFER_FLUSHING,o.a.LEVEL_PTS_UPDATED,o.a.LEVEL_UPDATED));return n._msDuration=null,n._levelDuration=null,n._live=null,n._objectUrl=null,n.onsbue=n.onSBUpdateEnd.bind(n),n.onsbe=n.onSBUpdateError.bind(n),n.pendingTracks={},n.tracks={},n}return n(e,t),e.prototype.destroy=function(){s.a.prototype.destroy.call(this)},e.prototype.onLevelPtsUpdated=function(t){var e=t.type,r=this.tracks.audio;if("audio"===e&&r&&"audio/mpeg"===r.container){var i=this.sourceBuffer.audio;if(Math.abs(i.timestampOffset-t.start)>.1){var a=i.updating;try{i.abort()}catch(t){a=!0,l.b.warn("can not abort audio buffer: "+t)}a?this.audioTimestampOffset=t.start:(l.b.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+t.start),i.timestampOffset=t.start)}}},e.prototype.onManifestParsed=function(t){var e=t.audio,r=t.video||t.levels.length&&t.audio,i=0;t.altAudio&&(e||r)&&(i=(e?1:0)+(r?1:0),l.b.log(i+" sourceBuffer(s) expected")),this.sourceBufferNb=i},e.prototype.onMediaAttaching=function(t){var e=this.media=t.media;if(e){var r=this.mediaSource=new c;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),e.src=URL.createObjectURL(r),this._objectUrl=e.src}},e.prototype.onMediaDetaching=function(){l.b.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){l.b.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):l.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(o.a.MEDIA_DETACHED)},e.prototype.onMediaSourceOpen=function(){l.b.log("media source opened"),this.hls.trigger(o.a.MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},e.prototype.checkPendingTracks=function(){var t=this.pendingTracks,e=Object.keys(t).length;e&&(this.sourceBufferNb<=e||0===this.sourceBufferNb)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},e.prototype.onMediaSourceClose=function(){l.b.log("media source closed")},e.prototype.onMediaSourceEnded=function(){l.b.log("media source ended")},e.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var t=this.sourceBuffer.audio;l.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var e=this.parent,r=this.segments.reduce(function(t,r){return r.parent===e?t+1:t},0),i={},a=this.sourceBuffer;for(var n in a)i[n]=a[n].buffered;this.hls.trigger(o.a.BUFFER_APPENDED,{parent:e,pending:r,timeRanges:i}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},e.prototype.onSBUpdateError=function(t){l.b.error("sourceBuffer error:",t),this.hls.trigger(o.a.ERROR,{type:u.b.MEDIA_ERROR,details:u.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var r=t[e];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},e.prototype.onBufferCodecs=function(t){if(0===Object.keys(this.sourceBuffer).length){for(var e in t)this.pendingTracks[e]=t[e];var r=this.mediaSource;r&&"open"===r.readyState&&this.checkPendingTracks()}},e.prototype.createSourceBuffers=function(t){var e=this.sourceBuffer,r=this.mediaSource;for(var i in t)if(!e[i]){var a=t[i],n=a.levelCodec||a.codec,s=a.container+";codecs="+n;l.b.log("creating sourceBuffer("+s+")");try{var d=e[i]=r.addSourceBuffer(s);d.addEventListener("updateend",this.onsbue),d.addEventListener("error",this.onsbe),this.tracks[i]={codec:n,container:a.container},a.buffer=d}catch(t){l.b.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(o.a.ERROR,{type:u.b.MEDIA_ERROR,details:u.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:s})}}this.hls.trigger(o.a.BUFFER_CREATED,{tracks:t})},e.prototype.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},e.prototype.onBufferAppendFail=function(t){l.b.error("sourceBuffer error:",t.event),this.hls.trigger(o.a.ERROR,{type:u.b.MEDIA_ERROR,details:u.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferEos=function(t){var e=this.sourceBuffer,r=t.type;for(var i in e)r&&i!==r||e[i].ended||(e[i].ended=!0,l.b.log(i+" sourceBuffer now EOS"));this.checkEos()},e.prototype.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(!e||"open"!==e.readyState)return void(this._needsEos=!1);for(var r in t){var i=t[r];if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}l.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){l.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},e.prototype.onBufferFlushing=function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},e.prototype.onLevelUpdated=function(t){var e=t.details;e.fragments.length>0&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._live=e.live,this.updateMediaElementDuration())},e.prototype.updateMediaElementDuration=function(){var t=this.hls.config,e=void 0;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer)if(!0===this.sourceBuffer[r].updating)return;e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(l.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||e===1/0||isNaN(e))&&(l.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},e.prototype.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,r=this.sourceBuffer;try{for(var i in r)e+=r[i].buffered.length}catch(t){l.b.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(o.a.BUFFER_FLUSHED)}},e.prototype.doAppending=function(){var t=this.hls,e=this.sourceBuffer,r=this.segments;if(Object.keys(e).length){if(this.media.error)return this.segments=[],void l.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var i=r.shift();try{var a=i.type,n=e[a];n?n.updating?r.unshift(i):(n.ended=!1,this.parent=i.parent,n.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(e){l.b.error("error while trying to append buffer:"+e.message),r.unshift(i);var s={type:u.b.MEDIA_ERROR,parent:i.parent};22!==e.code?(this.appendError?this.appendError++:this.appendError=1,s.details=u.a.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry?(l.b.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],s.fatal=!0,t.trigger(o.a.ERROR,s)):(s.fatal=!1,t.trigger(o.a.ERROR,s))):(this.segments=[],s.details=u.a.BUFFER_FULL_ERROR,s.fatal=!1,t.trigger(o.a.ERROR,s))}}}},e.prototype.flushBuffer=function(t,e,r){var i=void 0,a=void 0,n=void 0,o=void 0,s=void 0,u=void 0,d=this.sourceBuffer;if(Object.keys(d).length){if(l.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+t+"/"+e),this.flushBufferCounter<this.appended){for(var c in d)if(!r||c===r){if(i=d[c],i.ended=!1,i.updating)return l.b.warn("cannot flush, sb updating in progress"),!1;try{for(a=0;a<i.buffered.length;a++)if(n=i.buffered.start(a),o=i.buffered.end(a),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&e===Number.POSITIVE_INFINITY?(s=t,u=e):(s=Math.max(n,t),u=Math.min(o,e)),Math.min(u,o)-s>.5)return this.flushBufferCounter++,l.b.log("flush "+c+" ["+s+","+u+"], of ["+n+","+o+"], pos:"+this.media.currentTime),i.remove(s,u),!1}catch(t){l.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else l.b.warn("abort flushing too many retries");l.b.log("buffer flushed")}return!0},e}(s.a);e.a=h},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=r(1),s=r(3),l=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),u=function(t){function e(r){return i(this,e),a(this,t.call(this,r,o.a.FPS_DROP_LEVEL_CAPPING,o.a.MEDIA_ATTACHING,o.a.MANIFEST_PARSED))}return n(e,t),e.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},e.prototype.onFpsDropLevelCapping=function(t){e.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},e.prototype.onMediaAttaching=function(t){this.media=t.media instanceof HTMLVideoElement?t.media:null},e.prototype.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],e.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=t.levels,e.firstLevel=this.getMaxLevel(t.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},e.prototype.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},e.prototype.getMaxLevel=function(t){var r=this;if(!this.levels)return-1;var i=this.levels.filter(function(i,a){return e.isLevelAllowed(a,r.restrictedLevels)&&a<=t});return e.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},e.isLevelAllowed=function(t){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(t)},e.getMaxLevelByMediaSize=function(t,e,r){if(!t||t&&!t.length)return-1;for(var i=t.length-1,a=0;a<t.length;a+=1){var n=t[a];if((n.width>=e||n.height>=r)&&function(t,e){return!e||(t.width!==e.width||t.height!==e.height)}(n,t[a+1])){i=a;break}}return i},l(e,[{key:"mediaWidth",get:function(){var t=void 0,r=this.media;return r&&(t=r.width||r.clientWidth||r.offsetWidth,t*=e.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t=void 0,r=this.media;return r&&(t=r.height||r.clientHeight||r.offsetHeight,t*=e.contentScaleFactor),t}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}}]),e}(s.a);e.a=u},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=r(1),s=r(3),l=r(0),u=function(t){function e(r){return i(this,e),a(this,t.call(this,r,o.a.MEDIA_ATTACHING))}return n(e,t),e.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},e.prototype.onMediaAttaching=function(t){var e=this.hls.config;if(e.capLevelOnFPSDrop){"function"==typeof(this.video=t.media instanceof HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod)}},e.prototype.checkFPS=function(t,e,r){var i=performance.now();if(e){if(this.lastTime){var a=i-this.lastTime,n=r-this.lastDroppedFrames,s=e-this.lastDecodedFrames,u=1e3*n/a,d=this.hls;if(d.trigger(o.a.FPS_DROP,{currentDropped:n,currentDecoded:s,totalDroppedFrames:r}),u>0&&n>d.config.fpsDroppedMonitoringThreshold*s){var c=d.currentLevel;l.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(-1===d.autoLevelCapping||d.autoLevelCapping>=c)&&(c-=1,d.trigger(o.a.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:d.currentLevel}),d.autoLevelCapping=c,d.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=e}},e.prototype.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},e}(s.a);e.a=u},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=r(0),n=function(){function t(e){i(this,t),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return t.prototype.destroy=function(){this.abort(),this.loader=null},t.prototype.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.prototype.load=function(t,e,r){this.context=t,this.config=e,this.callbacks=r,this.stats={trequest:performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},t.prototype.loadInternal=function(){var t=void 0,e=this.context;t=this.loader=new XMLHttpRequest;var r=this.stats;r.tfirst=0,r.loaded=0;var i=this.xhrSetup;try{if(i)try{i(t,e.url)}catch(r){t.open("GET",e.url,!0),i(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(r){return void this.callbacks.onError({code:t.status,text:r.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},t.prototype.readystatechange=function(t){var e=t.currentTarget,r=e.readyState,i=this.stats,n=this.context,o=this.config;if(!i.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(performance.now(),i.trequest)),4===r){var s=e.status;if(s>=200&&s<300){i.tload=Math.max(i.tfirst,performance.now());var l=void 0,u=void 0;"arraybuffer"===n.responseType?(l=e.response,u=l.byteLength):(l=e.responseText,u=l.length),i.loaded=i.total=u;var d={url:e.responseURL,data:l};this.callbacks.onSuccess(d,i,n,e)}else i.retry>=o.maxRetry||s>=400&&s<499?(a.b.error(s+" while loading "+n.url),this.callbacks.onError({code:s,text:e.statusText},n,e)):(a.b.warn(s+" while loading "+n.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)},t.prototype.loadtimeout=function(){a.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.prototype.loadprogress=function(t){var e=t.currentTarget,r=this.stats;r.loaded=t.loaded,t.lengthComputable&&(r.total=t.total);var i=this.callbacks.onProgress;i&&i(r,this.context,null,e)},t}();e.a=n},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=r(1),s=r(3),l=r(0),u=r(2),d=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),c=function(t){function e(r){i(this,e);var n=a(this,t.call(this,r,o.a.MANIFEST_LOADING,o.a.MANIFEST_PARSED,o.a.AUDIO_TRACK_LOADED,o.a.ERROR));return n.ticks=0,n.ontick=n.tick.bind(n),n}return n(e,t),e.prototype.destroy=function(){this.cleanTimer(),s.a.prototype.destroy.call(this)},e.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.tick=function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},e.prototype.doTick=function(){this.updateTrack(this.trackId)},e.prototype.onError=function(t){t.fatal&&t.type===u.b.NETWORK_ERROR&&this.cleanTimer()},e.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},e.prototype.onManifestParsed=function(t){var e=this,r=t.audioTracks||[],i=!1;this.tracks=r,this.hls.trigger(o.a.AUDIO_TRACKS_UPDATED,{audioTracks:r});var a=0;r.forEach(function(t){if(t.default&&!i)return e.audioTrack=a,void(i=!0);a++}),!1===i&&r.length&&(l.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},e.prototype.onAudioTrackLoaded=function(t){t.id<this.tracks.length&&(l.b.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*t.details.targetduration)),!t.details.live&&this.timer&&this.cleanTimer())},e.prototype.setAudioTrackInternal=function(t){if(t>=0&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,l.b.log("switching to audioTrack "+t);var e=this.tracks[t],r=this.hls,i=e.type,a=e.url,n={id:t,type:i,url:a};r.trigger(o.a.AUDIO_TRACK_SWITCH,n),r.trigger(o.a.AUDIO_TRACK_SWITCHING,n);var s=e.details;!a||void 0!==s&&!0!==s.live||(l.b.log("(re)loading playlist for audioTrack "+t),r.trigger(o.a.AUDIO_TRACK_LOADING,{url:a,id:t}))}},e.prototype.updateTrack=function(t){if(t>=0&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,l.b.log("updating audioTrack "+t);var e=this.tracks[t],r=e.url,i=e.details;!r||void 0!==i&&!0!==i.live||(l.b.log("(re)loading playlist for audioTrack "+t),this.hls.trigger(o.a.AUDIO_TRACK_LOADING,{url:r,id:t}))}},d(e,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.trackId===t&&void 0!==this.tracks[t].details||this.setAudioTrackInternal(t)}}]),e}(s.a);e.a=c},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=r(7),s=r(8),l=r(18),u=r(1),d=r(22),c=r(23),h=r(2),f=r(0),p=r(24),v=r(13),g=r(12),y=r(6),m=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),b={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},E=function(t){function e(r,n){i(this,e);var o=a(this,t.call(this,r,u.a.MEDIA_ATTACHED,u.a.MEDIA_DETACHING,u.a.AUDIO_TRACKS_UPDATED,u.a.AUDIO_TRACK_SWITCHING,u.a.AUDIO_TRACK_LOADED,u.a.KEY_LOADED,u.a.FRAG_LOADED,u.a.FRAG_PARSING_INIT_SEGMENT,u.a.FRAG_PARSING_DATA,u.a.FRAG_PARSED,u.a.ERROR,u.a.BUFFER_RESET,u.a.BUFFER_CREATED,u.a.BUFFER_APPENDED,u.a.BUFFER_FLUSHED,u.a.INIT_PTS_FOUND));return o.fragmentTracker=n,o.config=r.config,o.audioCodecSwap=!1,o._state=b.STOPPED,o.initPTS=[],o.waitingFragment=null,o.videoTrackCC=null,o}return n(e,t),e.prototype.onHandlerDestroying=function(){this.stopLoad()},e.prototype.onHandlerDestroyed=function(){this.state=b.STOPPED,this.fragmentTracker=null},e.prototype.onInitPtsFound=function(t){var e=t.id,r=t.frag.cc,i=t.initPTS;"main"===e&&(this.initPTS[r]=i,this.videoTrackCC=r,f.b.log("InitPTS for cc: "+r+" found from video track: "+i),this.state===b.WAITING_INIT_PTS&&this.tick())},e.prototype.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,e>0&&-1===t?(f.b.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=b.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=b.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=b.STOPPED},e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=b.STOPPED},e.prototype.doTick=function(){var t=void 0,e=void 0,r=void 0,i=this.hls,a=i.config;switch(this.state){case b.ERROR:case b.PAUSED:case b.BUFFER_FLUSHING:break;case b.STARTING:this.state=b.WAITING_TRACK,this.loadedmetadata=!1;break;case b.IDLE:var n=this.tracks;if(!n)break;if(!this.media&&(this.startFragRequested||!a.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var l=this.mediaBuffer?this.mediaBuffer:this.media,d=this.videoBuffer?this.videoBuffer:this.media,c=s.a.bufferInfo(l,t,a.maxBufferHole),h=s.a.bufferInfo(d,t,a.maxBufferHole),v=c.len,y=c.end,m=this.fragPrevious,E=Math.min(a.maxBufferLength,a.maxMaxBufferLength),T=Math.max(E,h.len),S=this.audioSwitch,R=this.trackId;if((v<T||S)&&R<n.length){if(void 0===(r=n[R].details)){this.state=b.WAITING_TRACK;break}if(!S&&!r.live&&m&&m.sn===r.endSN&&!c.nextStart&&(!this.media.seeking||this.media.duration-y<m.duration/2)){this.hls.trigger(u.a.BUFFER_EOS,{type:"audio"}),this.state=b.ENDED;break}var A=r.fragments,_=A.length,w=A[0].start,L=A[_-1].start+A[_-1].duration,D=void 0;if(S)if(r.live&&!r.PTSKnown)f.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),y=0;else if(y=t,r.PTSKnown&&t<w){if(!(c.end>w||c.nextStart))return;f.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=w+.05}if(r.initSegment&&!r.initSegment.data)D=r.initSegment;else if(y<=w){if(D=A[0],null!==this.videoTrackCC&&D.cc!==this.videoTrackCC&&(D=Object(p.b)(A,this.videoTrackCC)),r.live&&D.loadIdx&&D.loadIdx===this.fragLoadIdx){var I=c.nextStart?c.nextStart:w;return f.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(I+.05)),void(this.media.currentTime=I+.05)}}else{var k=void 0,O=a.maxFragLookUpTolerance,C=m?A[m.sn-A[0].sn+1]:void 0,P=function(t){var e=Math.min(O,t.duration);return t.start+t.duration-e<=y?1:t.start-e>y&&t.start?-1:0};y<L?(y>L-O&&(O=0),k=C&&!P(C)?C:o.a.search(A,P)):k=A[_-1],k&&(D=k,w=k.start,m&&D.level===m.level&&D.sn===m.sn&&(D.sn<r.endSN?(D=A[D.sn+1-r.startSN],f.b.log("SN just loaded, load next one: "+D.sn)):D=null))}D&&(D.decryptdata&&null!=D.decryptdata.uri&&null==D.decryptdata.key?(f.b.log("Loading key for "+D.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+R),this.state=b.KEY_LOADING,i.trigger(u.a.KEY_LOADING,{frag:D})):(f.b.log("Loading "+D.sn+", cc: "+D.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+R+", currentTime:"+t+",bufferEnd:"+y.toFixed(3)),this.fragmentTracker.getState(D)===g.a.NOT_LOADED&&(this.fragCurrent=D,this.startFragRequested=!0,isNaN(D.sn)||(this.nextLoadPosition=D.start+D.duration),i.trigger(u.a.FRAG_LOADING,{frag:D}),this.state=b.FRAG_LOADING)))}break;case b.WAITING_TRACK:e=this.tracks[this.trackId],e&&e.details&&(this.state=b.IDLE);break;case b.FRAG_LOADING_WAITING_RETRY:var x=performance.now(),F=this.retryDate;l=this.media;var N=l&&l.seeking;(!F||x>=F||N)&&(f.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=b.IDLE);break;case b.WAITING_INIT_PTS:var M=this.videoTrackCC;if(void 0===this.initPTS[M])break;var U=this.waitingFragment;if(U){var B=U.frag.cc;M!==B?(e=this.tracks[this.trackId],e.details&&e.details.live&&(f.b.warn("Waiting fragment CC ("+B+") does not match video track CC ("+M+")"),this.waitingFragment=null,this.state=b.IDLE)):(this.state=b.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=b.IDLE;break;case b.STOPPED:case b.FRAG_LOADING:case b.PARSING:case b.PARSED:case b.ENDED:}},e.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(f.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onMediaSeeking=function(){this.state===b.ENDED&&(this.state=b.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),this.tick()},e.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},e.prototype.onAudioTracksUpdated=function(t){f.b.log("audio tracks updated"),this.tracks=t.audioTracks},e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.state=b.PAUSED,this.waitingFragment=null,e?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=b.IDLE),this.tick()},e.prototype.onAudioTrackLoaded=function(t){var e=t.details,r=t.id,i=this.tracks[r],a=e.totalduration,n=0;if(f.b.log("track "+r+" loaded ["+e.startSN+","+e.endSN+"],duration:"+a),e.live){var o=i.details;o&&e.fragments.length>0?(d.a(o,e),n=e.fragments[0].start,e.PTSKnown?f.b.log("live audio playlist sliding:"+n.toFixed(3)):f.b.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,f.b.log("live audio playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(i.details=e,!this.startFragRequested){if(-1===this.startPosition){var s=e.startTimeOffset;isNaN(s)?this.startPosition=0:(f.b.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===b.WAITING_TRACK&&(this.state=b.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===b.KEY_LOADING&&(this.state=b.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag;if(this.state===b.FRAG_LOADING&&e&&"audio"===r.type&&r.level===e.level&&r.sn===e.sn){var i=this.tracks[this.trackId],a=i.details,n=a.totalduration,o=e.level,s=e.sn,d=e.cc,c=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",h=this.stats=t.stats;if("initSegment"===s)this.state=b.IDLE,h.tparsed=h.tbuffered=performance.now(),a.initSegment.data=t.payload,this.hls.trigger(u.a.FRAG_BUFFERED,{stats:h,frag:e,id:"audio"}),this.tick();else{this.state=b.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new l.a(this.hls,"audio"));var p=this.initPTS[d],v=a.initSegment?a.initSegment.data:[];if(a.initSegment||void 0!==p){this.pendingBuffering=!0,f.b.log("Demuxing "+s+" of ["+a.startSN+" ,"+a.endSN+"],track "+o);this.demuxer.push(t.payload,v,c,null,e,n,!1,p)}else f.b.log("unknown video PTS for continuity counter "+d+", waiting for video PTS before demuxing audio frag "+s+" of ["+a.startSN+" ,"+a.endSN+"],track "+o),this.waitingFragment=t,this.state=b.WAITING_INIT_PTS}}this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,r=t.frag;if(e&&"audio"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===b.PARSING){var i=t.tracks,a=void 0;if(i.video&&delete i.video,a=i.audio){a.levelCodec=a.codec,a.id=t.id,this.hls.trigger(u.a.BUFFER_CODECS,i),f.b.log("audio track:audio,container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var n=a.initSegment;if(n){var o={type:"audio",data:n,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.a.BUFFER_APPENDING,o))}this.tick()}}},e.prototype.onFragParsingData=function(t){var e=this,r=this.fragCurrent,i=t.frag;if(r&&"audio"===t.id&&"audio"===t.type&&i.sn===r.sn&&i.level===r.level&&this.state===b.PARSING){var a=this.trackId,n=this.tracks[a],o=this.hls;isNaN(t.endPTS)&&(t.endPTS=t.startPTS+r.duration,t.endDTS=t.startDTS+r.duration),r.addElementaryStream(y.a.ElementaryStreamTypes.AUDIO),f.b.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),d.b(n.details,r,t.startPTS,t.endPTS);var s=this.audioSwitch,l=this.media,c=!1;if(s&&l)if(l.readyState){var p=l.currentTime;f.b.log("switching audio track : currentTime:"+p),p>=t.startPTS&&(f.b.log("switching audio track : flushing all audio"),this.state=b.BUFFER_FLUSHING,o.trigger(u.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),c=!0,this.audioSwitch=!1,o.trigger(u.a.AUDIO_TRACK_SWITCHED,{id:a}))}else this.audioSwitch=!1,o.trigger(u.a.AUDIO_TRACK_SWITCHED,{id:a});var v=this.pendingData;if(!v)return console.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(u.a.ERROR,{type:h.b.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&v.push({type:t.type,data:e,parent:"audio",content:"data"})}),!c&&v.length&&(v.forEach(function(t){e.state===b.PARSING&&(e.pendingBuffering=!0,e.hls.trigger(u.a.BUFFER_APPENDING,t))}),this.pendingData=[],this.appended=!0)),this.tick()}},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,r=t.frag;e&&"audio"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===b.PARSING&&(this.stats.tparsed=performance.now(),this.state=b.PARSED,this._checkAppendedParsed())},e.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},e.prototype.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},e.prototype.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==b.PARSING&&e!==b.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},e.prototype._checkAppendedParsed=function(){if(!(this.state!==b.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,r=this.hls;if(t){this.fragPrevious=t,e.tbuffered=performance.now(),r.trigger(u.a.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;f.b.log("audio buffered : "+c.a.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(u.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=b.IDLE}this.tick()}},e.prototype.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case h.a.FRAG_LOAD_ERROR:case h.a.FRAG_LOAD_TIMEOUT:if(!t.fatal){var r=this.fragLoadError;r?r++:r=1;var i=this.config;if(r<=i.fragLoadingMaxRetry){this.fragLoadError=r;var a=Math.min(Math.pow(2,r-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);f.b.warn("audioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=performance.now()+a,this.state=b.FRAG_LOADING_WAITING_RETRY}else f.b.error("audioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=b.ERROR}break;case h.a.AUDIO_TRACK_LOAD_ERROR:case h.a.AUDIO_TRACK_LOAD_TIMEOUT:case h.a.KEY_LOAD_ERROR:case h.a.KEY_LOAD_TIMEOUT:this.state!==b.ERROR&&(this.state=t.fatal?b.ERROR:b.IDLE,f.b.warn("audioStreamController: "+t.details+" while loading frag,switch to "+this.state+" state ..."));break;case h.a.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===b.PARSING||this.state===b.PARSED)){var n=this.mediaBuffer,o=this.media.currentTime;if(n&&s.a.isBuffered(n,o)&&s.a.isBuffered(n,o+.5)){var l=this.config;l.maxMaxBufferLength>=l.maxBufferLength&&(l.maxMaxBufferLength/=2,f.b.warn("audio:reduce max buffer length to "+l.maxMaxBufferLength+"s")),this.state=b.IDLE}else f.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=b.BUFFER_FLUSHING,this.hls.trigger(u.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},e.prototype.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(f.b.log("appending pending audio data on Buffer Flushed"),e.forEach(function(e){t.hls.trigger(u.a.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state=b.PARSED):(this.state=b.IDLE,this.fragPrevious=null,this.tick())},m(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,f.b.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}]),e}(v.a);e.a=E},function(t,e,r){"use strict";function i(t,e,r,i){for(var n=void 0,o=void 0,s=void 0,l=void 0,u=void 0,d=window.VTTCue||window.TextTrackCue,c=0;c<i.rows.length;c++)if(n=i.rows[c],s=!0,l=0,u="",!n.isEmpty()){for(var h=0;h<n.chars.length;h++)n.chars[h].uchar.match(/\s/)&&s?l++:(u+=n.chars[h].uchar,s=!1);n.cueStartTime=e,e===r&&(r+=1e-4),o=new d(e,r,Object(a.b)(u.trim())),l>=16?l--:l++,navigator.userAgent.match(/Firefox\//)?o.line=c+1:o.line=c>7?c-2:c+1,o.align="left",o.position=Math.max(0,Math.min(100,l/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),t.addCue(o)}}Object.defineProperty(e,"__esModule",{value:!0}),e.newCue=i;var a=r(25)},function(t,e,r){"use strict";e.a=function(){function t(t){return"string"==typeof t&&(!!n[t.toLowerCase()]&&t.toLowerCase())}function e(t){return"string"==typeof t&&(!!o[t.toLowerCase()]&&t.toLowerCase())}function r(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)t[i]=r[i]}return t}function i(i,n,o){var s=this,l=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),u={};l?s=document.createElement("custom"):u.enumerable=!0,s.hasBeenReset=!1;var d="",c=!1,h=i,f=n,p=o,v=null,g="",y=!0,m="auto",b="start",E=50,T="middle",S=50,R="middle";if(Object.defineProperty(s,"id",r({},u,{get:function(){return d},set:function(t){d=""+t}})),Object.defineProperty(s,"pauseOnExit",r({},u,{get:function(){return c},set:function(t){c=!!t}})),Object.defineProperty(s,"startTime",r({},u,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",r({},u,{get:function(){return f},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",r({},u,{get:function(){return p},set:function(t){p=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",r({},u,{get:function(){return v},set:function(t){v=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",r({},u,{get:function(){return g},set:function(e){var r=t(e);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");g=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",r({},u,{get:function(){return y},set:function(t){y=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",r({},u,{get:function(){return m},set:function(t){if("number"!=typeof t&&t!==a)throw new SyntaxError("An invalid number or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",r({},u,{get:function(){return b},set:function(t){var r=e(t);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");b=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",r({},u,{get:function(){return E},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",r({},u,{get:function(){return T},set:function(t){var r=e(t);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");T=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",r({},u,{get:function(){return S},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");S=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",r({},u,{get:function(){return R},set:function(t){var r=e(t);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");R=r,this.hasBeenReset=!0}})),s.displayState=void 0,l)return s}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var a="auto",n={"":!0,lr:!0,rl:!0},o={start:!0,middle:!0,end:!0,left:!0,right:!0};return i.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},i}()},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t){if(t&&t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}function s(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}function l(t,e,r,i){return Math.min(e,i)-Math.max(t,r)}var u=r(1),d=r(3),c=r(62),h=r(63),f=r(64),p=r(0),v=function(t){function e(r){i(this,e);var n=a(this,t.call(this,r,u.a.MEDIA_ATTACHING,u.a.MEDIA_DETACHING,u.a.FRAG_PARSING_USERDATA,u.a.FRAG_DECRYPTED,u.a.MANIFEST_LOADING,u.a.MANIFEST_LOADED,u.a.FRAG_LOADED,u.a.LEVEL_SWITCHING,u.a.INIT_PTS_FOUND));if(n.hls=r,n.config=r.config,n.enabled=!0,n.Cues=r.config.cueHandler,n.textTracks=[],n.tracks=[],n.unparsedVttFrags=[],n.initPTS=void 0,n.cueRanges=[],n.config.enableCEA708Captions){var o=new h.a(n,1),s=new h.a(n,2);n.cea608Parser=new c.a(0,o,s)}return n}return n(e,t),e.prototype.addCues=function(t,e,r,i){for(var a=this.cueRanges,n=!1,o=a.length;o--;){var s=a[o],u=l(s[0],s[1],e,r);if(u>=0&&(s[0]=Math.min(s[0],e),s[1]=Math.max(s[1],r),n=!0,u/(r-e)>.5))return}n||a.push([e,r]),this.Cues.newCue(this[t],e,r,i)},e.prototype.onInitPtsFound=function(t){var e=this;void 0===this.initPTS&&(this.initPTS=t.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(t){e.onFragLoaded(t)}),this.unparsedVttFrags=[])},e.prototype.getExistingTrack=function(t){var e=this.media;if(e)for(var r=0;r<e.textTracks.length;r++){var i=e.textTracks[r],a="textTrack"+t;if(!0===i[a])return i}return null},e.prototype.sendAddTrackEvent=function(t,e){var r=null;try{r=new window.Event("addtrack")}catch(t){r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)},e.prototype.createCaptionsTrack=function(t){var e="textTrack"+t;if(!this[e]){var r=this.getExistingTrack(t);if(r)this[e]=r,o(this[e]),this.sendAddTrackEvent(this[e],this.media);else{var i=this.createTextTrack("captions",this.config["captionsTextTrack"+t+"Label"],this.config["captionsTextTrack"+t+"LanguageCode"]);i&&(i[e]=!0,this[e]=i)}}},e.prototype.createTextTrack=function(t,e,r){var i=this.media;if(i)return i.addTextTrack(t,e,r)},e.prototype.destroy=function(){d.a.prototype.destroy.call(this)},e.prototype.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},e.prototype.onMediaDetaching=function(){o(this.textTrack1),o(this.textTrack2)},e.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},e.prototype._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var r=0;r<e.length;r++)o(e[r])}},e.prototype.onManifestLoaded=function(t){var e=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=t.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach(function(t,i){var a=void 0;if(i<r.length){var n=r[i];s(n,t)&&(a=n)}a||(a=e.createTextTrack("subtitles",t.name,t.lang)),t.default?a.mode=e.hls.subtitleDisplay?"showing":"hidden":a.mode="disabled",e.textTracks.push(a)})}},e.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},e.prototype.onFragLoaded=function(t){var e=t.frag,r=t.payload;if("main"===e.type){var i=e.sn;if(i!==this.lastSn+1){var a=this.cea608Parser;a&&a.reset()}this.lastSn=i}else if("subtitle"===e.type)if(r.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);var n=e.decryptdata;null!=n&&null!=n.key&&"AES-128"===n.method||this._parseVTTs(e,r)}else this.hls.trigger(u.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},e.prototype._parseVTTs=function(t,e){var r=this.vttCCs;r[t.cc]||(r[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var i=this.textTracks,a=this.hls;f.a.parse(e,this.initPTS,r,t.cc,function(e){var r=i[t.trackId];e.forEach(function(t){if(!r.cues.getCueById(t.id))try{r.addCue(t)}catch(i){var e=new window.TextTrackCue(t.startTime,t.endTime,t.text);e.id=t.id,r.addCue(e)}}),a.trigger(u.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){p.b.log("Failed to parse VTT cue: "+e),a.trigger(u.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})},e.prototype.onFragDecrypted=function(t){var e=t.payload,r=t.frag;if("subtitle"===r.type){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);this._parseVTTs(r,e)}},e.prototype.onFragParsingUserdata=function(t){if(this.enabled&&this.config.enableCEA708Captions)for(var e=0;e<t.samples.length;e++){var r=this.extractCea608Data(t.samples[e].bytes);this.cea608Parser.addData(t.samples[e].pts,r)}},e.prototype.extractCea608Data=function(t){for(var e=31&t[0],r=2,i=void 0,a=void 0,n=void 0,o=void 0,s=void 0,l=[],u=0;u<e;u++)i=t[r++],a=127&t[r++],n=127&t[r++],o=0!=(4&i),s=3&i,0===a&&0===n||o&&0===s&&(l.push(a),l.push(n));return l},e}(d.a);e.a=v},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},n=function(t){var e=t;return a.hasOwnProperty(t)&&(e=a[t]),String.fromCharCode(e)},o=15,s=100,l={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},u={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],f={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){var r=this.verboseFilter[t];this.verboseLevel>=r&&console.log(this.time+" ["+t+"] "+e)}},p=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].toString(16));return e},v=function(){function t(e,r,a,n,o){i(this,t),this.foreground=e||"white",this.underline=r||!1,this.italics=a||!1,this.background=n||"black",this.flash=o||!1}return t.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.prototype.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(this[i]=t[i])}},t.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.prototype.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},t.prototype.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},t.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),g=function(){function t(e,r,a,n,o,s){i(this,t),this.uchar=e||" ",this.penState=new v(r,a,n,o,s)}return t.prototype.reset=function(){this.uchar=" ",this.penState.reset()},t.prototype.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},t.prototype.setPenState=function(t){this.penState.copy(t)},t.prototype.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},t.prototype.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},t.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),y=function(){function t(){i(this,t),this.chars=[];for(var e=0;e<s;e++)this.chars.push(new g);this.pos=0,this.currPenState=new v}return t.prototype.equals=function(t){for(var e=!0,r=0;r<s;r++)if(!this.chars[r].equals(t.chars[r])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<s;e++)this.chars[e].copy(t.chars[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<s;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},t.prototype.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(f.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>s&&(f.log("ERROR","Too large cursor position "+this.pos),this.pos=s)},t.prototype.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var r=this.pos+1;r<e+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(e)},t.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.prototype.insertChar=function(t){t>=144&&this.backSpace();var e=n(t);if(this.pos>=s)return void f.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!");this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1)},t.prototype.clearFromPos=function(t){var e=void 0;for(e=t;e<s;e++)this.chars[e].reset()},t.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.prototype.getTextString=function(){for(var t=[],e=!0,r=0;r<s;r++){var i=this.chars[r].uchar;" "!==i&&(e=!1),t.push(i)}return e?"":t.join("")},t.prototype.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),m=function(){function t(){i(this,t),this.rows=[];for(var e=0;e<o;e++)this.rows.push(new y);this.currRow=o-1,this.nrRollUpRows=null,this.reset()}return t.prototype.reset=function(){for(var t=0;t<o;t++)this.rows[t].clear();this.currRow=o-1},t.prototype.equals=function(t){for(var e=!0,r=0;r<o;r++)if(!this.rows[r].equals(t.rows[r])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<o;e++)this.rows[e].copy(t.rows[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<o;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},t.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},t.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.prototype.insertChar=function(t){this.rows[this.currRow].insertChar(t)},t.prototype.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},t.prototype.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},t.prototype.setCursor=function(t){f.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},t.prototype.setPAC=function(t){f.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var r=0;r<o;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var n=a.rows[i].cueStartTime;if(n&&n<f.time)for(var s=0;s<this.nrRollUpRows;s++)this.rows[e-this.nrRollUpRows+s+1].copy(a.rows[i+s])}}this.currRow=e;var l=this.rows[this.currRow];if(null!==t.indent){var u=t.indent,d=Math.max(u-1,0);l.setCursor(t.indent),t.color=l.chars[d].penState.foreground}var c={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(c)},t.prototype.setBkgData=function(t){f.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},t.prototype.setRollUpRows=function(t){this.nrRollUpRows=t},t.prototype.rollUp=function(){if(null===this.nrRollUpRows)return void f.log("DEBUG","roll_up but nrRollUpRows not set yet");f.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),f.log("INFO","Rolling up")},t.prototype.getDisplayText=function(t){t=t||!1;for(var e=[],r="",i=-1,a=0;a<o;a++){var n=this.rows[a].getTextString();n&&(i=a+1,t?e.push("Row "+i+": '"+n+"'"):e.push(n.trim()))}return e.length>0&&(r=t?"["+e.join(" | ")+"]":e.join("\n")),r},t.prototype.getTextAndFormat=function(){return this.rows},t}(),b=function(){function t(e,r){i(this,t),this.chNr=e,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new m,this.nonDisplayedMemory=new m,this.lastOutputScreen=new m,this.currRollUpRow=this.displayedMemory.rows[o-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return t.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[o-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},t.prototype.getHandler=function(){return this.outputFilter},t.prototype.setHandler=function(t){this.outputFilter=t},t.prototype.setPAC=function(t){this.writeScreen.setPAC(t)},t.prototype.setBkgData=function(t){this.writeScreen.setBkgData(t)},t.prototype.setMode=function(t){t!==this.mode&&(this.mode=t,f.log("INFO","MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},t.prototype.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";f.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(f.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.prototype.ccRCL=function(){f.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.prototype.ccBS=function(){f.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.prototype.ccAOF=function(){},t.prototype.ccAON=function(){},t.prototype.ccDER=function(){f.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.prototype.ccRU=function(t){f.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},t.prototype.ccFON=function(){f.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.prototype.ccRDC=function(){f.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.prototype.ccTR=function(){f.log("INFO","TR"),this.setMode("MODE_TEXT")},t.prototype.ccRTD=function(){f.log("INFO","RTD"),this.setMode("MODE_TEXT")},t.prototype.ccEDM=function(){f.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.prototype.ccCR=function(){f.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.prototype.ccENM=function(){f.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.prototype.ccEOC=function(){if(f.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,f.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.prototype.ccTO=function(t){f.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},t.prototype.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var r=Math.floor(t/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];e.foreground=i[r]}f.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},t.prototype.outputDataUpdate=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=f.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),!0===t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},t.prototype.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}(),E=function(){function t(e,r,a){i(this,t),this.field=e||1,this.outputs=[r,a],this.channels=[new b(1,r),new b(2,a)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return t.prototype.getHandler=function(t){return this.channels[t].getHandler()},t.prototype.setHandler=function(t,e){this.channels[t].setHandler(e)},t.prototype.addData=function(t,e){var r=void 0,i=void 0,a=void 0,n=!1;this.lastTime=t,f.setTime(t);for(var o=0;o<e.length;o+=2)if(i=127&e[o],a=127&e[o+1],0!==i||0!==a){if(f.log("DATA","["+p([e[o],e[o+1]])+"] -> ("+p([i,a])+")"),r=this.parseCmd(i,a),r||(r=this.parseMidrow(i,a)),r||(r=this.parsePAC(i,a)),r||(r=this.parseBackgroundAttributes(i,a)),!r&&(n=this.parseChars(i,a)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(n)}else f.log("WARNING","No channel found yet. TEXT-MODE?");r?this.dataCounters.cmd+=2:n?this.dataCounters.char+=2:(this.dataCounters.other+=2,f.log("WARNING","Couldn't parse cleaned data "+p([i,a])+" orig: "+p([e[o],e[o+1]])))}else this.dataCounters.padding+=2},t.prototype.parseCmd=function(t,e){var r=null,i=(20===t||28===t)&&e>=32&&e<=47,a=(23===t||31===t)&&e>=33&&e<=35;if(!i&&!a)return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,f.log("DEBUG","Repeated command ("+p([t,e])+") is dropped"),!0;r=20===t||23===t?1:2;var n=this.channels[r-1];return 20===t||28===t?32===e?n.ccRCL():33===e?n.ccBS():34===e?n.ccAOF():35===e?n.ccAON():36===e?n.ccDER():37===e?n.ccRU(2):38===e?n.ccRU(3):39===e?n.ccRU(4):40===e?n.ccFON():41===e?n.ccRDC():42===e?n.ccTR():43===e?n.ccRTD():44===e?n.ccEDM():45===e?n.ccCR():46===e?n.ccENM():47===e&&n.ccEOC():n.ccTO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=r,!0},t.prototype.parseMidrow=function(t,e){var r=null;if((17===t||25===t)&&e>=32&&e<=47){if((r=17===t?1:2)!==this.currChNr)return f.log("ERROR","Mismatch channel in midrow parsing"),!1;return this.channels[r-1].ccMIDROW(e),f.log("DEBUG","MIDROW ("+p([t,e])+")"),!0}return!1},t.prototype.parsePAC=function(t,e){var r=null,i=null,a=(t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127,n=(16===t||24===t)&&e>=64&&e<=95;if(!a&&!n)return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=t<=23?1:2,i=e>=64&&e<=95?1===r?l[t]:d[t]:1===r?u[t]:c[t];var o=this.interpretPAC(i,e);return this.channels[r-1].setPAC(o),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=r,!0},t.prototype.interpretPAC=function(t,e){var r=e,i={color:null,italics:!1,indent:null,underline:!1,row:t};return r=e>95?e-96:e-64,i.underline=1==(1&r),r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((r-16)/2),i},t.prototype.parseChars=function(t,e){var r=null,i=null,a=null;if(t>=25?(r=2,a=t-8):(r=1,a=t),a>=17&&a<=19){var o=e;o=17===a?e+80:18===a?e+112:e+144,f.log("INFO","Special char '"+n(o)+"' in channel "+r),i=[o]}else t>=32&&t<=127&&(i=0===e?[t]:[t,e]);if(i){var s=p(i);f.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},t.prototype.parseBackgroundAttributes=function(t,e){var r=void 0,i=void 0,a=void 0,n=void 0,o=(16===t||24===t)&&e>=32&&e<=47,s=(23===t||31===t)&&e>=45&&e<=47;return!(!o&&!s)&&(r={},16===t||24===t?(i=Math.floor((e-32)/2),r.background=h[i],e%2==1&&(r.background=r.background+"_semi")):45===e?r.background="transparent":(r.foreground="black",47===e&&(r.underline=!0)),a=t<24?1:2,n=this.channels[a-1],n.setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)},t.prototype.reset=function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},t.prototype.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)},t}();e.a=E},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(e,r){i(this,t),this.timelineController=e,this.track=r,this.startTime=null,this.endTime=null,this.screen=null}return t.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues("textTrack"+this.track,this.startTime,this.endTime,this.screen),this.startTime=null)},t.prototype.newCue=function(t,e,r){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=r,this.timelineController.createCaptionsTrack(this.track)},t}();e.a=a},function(t,e,r){"use strict";var i=r(25),a=r(5),n=function(t,e,r){return t.substr(r||0,e.length)===e},o=function(t){var e=parseInt(t.substr(-3)),r=parseInt(t.substr(-6,2)),i=parseInt(t.substr(-9,2)),a=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;return isNaN(e)||isNaN(r)||isNaN(i)||isNaN(a)?-1:(e+=1e3*r,e+=6e4*i,e+=36e5*a)},s=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return(e>>>0).toString()},l=function(t,e,r){var i=t[e],a=t[i.prevCC];if(!a||!a.new&&i.new)return t.ccOffset=t.presentationOffset=i.start,void(i.new=!1);for(;a&&a.new;)t.ccOffset+=i.start-a.start,i.new=!1,i=a,a=t[i.prevCC];t.presentationOffset=r},u={parse:function(t,e,r,u,d,c){var h=/\r\n|\n\r|\n|\r/g,f=Object(a.b)(new Uint8Array(t)).trim().replace(h,"\n").split("\n"),p="00:00.000",v=0,g=0,y=0,m=[],b=void 0,E=!0,T=new i.a;T.oncue=function(t){var e=r[u],i=r.ccOffset;e&&e.new&&(void 0!==g?i=r.ccOffset=e.start:l(r,u,y)),y&&(i=y+r.ccOffset-r.presentationOffset),t.startTime+=i-g,t.endTime+=i-g,t.id=s(t.startTime.toString())+s(t.endTime.toString())+s(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),t.endTime>0&&m.push(t)},T.onparsingerror=function(t){b=t},T.onflush=function(){if(b&&c)return void c(b);d(m)},f.forEach(function(t){if(E){if(n(t,"X-TIMESTAMP-MAP=")){E=!1,t.substr(16).split(",").forEach(function(t){n(t,"LOCAL:")?p=t.substr(6):n(t,"MPEGTS:")&&(v=parseInt(t.substr(7)))});try{e=e<0?e+8589934592:e,v-=e,g=o(p)/1e3,y=v/9e4,-1===g&&(b=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){b=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(E=!1)}T.parse(t+"\n")}),T.flush()}};e.a=u},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t){for(var e=[],r=0;r<t.length;r++)"subtitles"===t[r].kind&&e.push(t[r]);return e}var s=r(1),l=r(3),u=r(0),d=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),c=function(t){function e(r){i(this,e);var n=a(this,t.call(this,r,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.MANIFEST_LOADING,s.a.MANIFEST_LOADED,s.a.SUBTITLE_TRACK_LOADED));return n.tracks=[],n.trackId=-1,n.media=void 0,n.subtitleDisplay=!1,n}return n(e,t),e.prototype._onTextTracksChanged=function(){if(this.media){for(var t=-1,e=o(this.media.textTracks),r=0;r<e.length;r++)if("hidden"===e[r].mode)t=r;else if("showing"===e[r].mode){t=r;break}this.subtitleTrack=t}},e.prototype.destroy=function(){l.a.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(void 0!==this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){e.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},e.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},e.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},e.prototype.onManifestLoaded=function(t){var e=this,r=t.subtitles||[];this.tracks=r,this.trackId=-1,this.hls.trigger(s.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(t){t.default&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)})},e.prototype.onTick=function(){var t=this.trackId,e=this.tracks[t];if(e){var r=e.details;void 0!==r&&!0!==r.live||(u.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(s.a.SUBTITLE_TRACK_LOADING,{url:e.url,id:t}))}},e.prototype.onSubtitleTrackLoaded=function(t){var e=this;t.id<this.tracks.length&&(u.b.log("subtitle track "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(function(){e.onTick()},1e3*t.details.targetduration,this)),!t.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},e.prototype.setSubtitleTrackInternal=function(t){if(!(t<-1||t>=this.tracks.length)){this.timer&&(clearInterval(this.timer),this.timer=null);var e=o(this.media.textTracks);if(-1!==this.trackId&&(e[this.trackId].mode="disabled"),this.trackId=t,u.b.log("switching to subtitle track "+t),this.hls.trigger(s.a.SUBTITLE_TRACK_SWITCH,{id:t}),-1!==t){var r=this.tracks[t];t<e.length&&(e[t].mode=this.subtitleDisplay?"showing":"hidden");var i=r.details;void 0!==i&&!0!==i.live||(u.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(s.a.SUBTITLE_TRACK_LOADING,{url:r.url,id:t}))}}},d(e,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&this.setSubtitleTrackInternal(t)}}]),e}(l.a);e.a=c},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=r(1),s=r(0),l=r(9),u=r(13),d={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},c=function(t){function e(r){i(this,e);var n=a(this,t.call(this,r,o.a.MEDIA_ATTACHED,o.a.ERROR,o.a.KEY_LOADED,o.a.FRAG_LOADED,o.a.SUBTITLE_TRACKS_UPDATED,o.a.SUBTITLE_TRACK_SWITCH,o.a.SUBTITLE_TRACK_LOADED,o.a.SUBTITLE_FRAG_PROCESSED));return n.config=r.config,n.vttFragSNsProcessed={},n.vttFragQueues=void 0,n.currentlyProcessing=null,n.state=d.STOPPED,n.currentTrackId=-1,n.decrypter=new l.a(r.observer,r.config),n}return n(e,t),e.prototype.onHandlerDestroyed=function(){this.state=d.STOPPED},e.prototype.clearVttFragQueues=function(){var t=this;this.vttFragQueues={},this.tracks.forEach(function(e){t.vttFragQueues[e.id]=[]})},e.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var t=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=t,this.hls.trigger(o.a.FRAG_LOADING,{frag:t}),this.state=d.FRAG_LOADING}},e.prototype.onSubtitleFragProcessed=function(t){t.success&&this.vttFragSNsProcessed[t.frag.trackId].push(t.frag.sn),this.currentlyProcessing=null,this.state=d.IDLE,this.nextFrag()},e.prototype.onMediaAttached=function(){this.state=d.IDLE},e.prototype.onError=function(t){var e=t.frag;e&&"subtitle"!==e.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},e.prototype.doTick=function(){var t=this;switch(this.state){case d.IDLE:var e=this.tracks,r=this.currentTrackId,i=this.vttFragSNsProcessed[r],a=this.vttFragQueues[r],n=this.currentlyProcessing?this.currentlyProcessing.sn:-1,l=function(t){return i.indexOf(t.sn)>-1},u=function(t){return a.some(function(e){return e.sn===t.sn})};if(!e)break;var c;if(r<e.length&&(c=e[r].details),void 0===c)break;c.fragments.forEach(function(e){l(e)||e.sn===n||u(e)||(e.decryptdata&&null!=e.decryptdata.uri&&null==e.decryptdata.key?(s.b.log("Loading key for "+e.sn),t.state=d.KEY_LOADING,t.hls.trigger(o.a.KEY_LOADING,{frag:e})):(e.trackId=r,a.push(e),t.nextFrag()))})}},e.prototype.onSubtitleTracksUpdated=function(t){var e=this;s.b.log("subtitle tracks updated"),this.tracks=t.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(t){e.vttFragSNsProcessed[t.id]=[]})},e.prototype.onSubtitleTrackSwitch=function(t){this.currentTrackId=t.id,this.clearVttFragQueues()},e.prototype.onSubtitleTrackLoaded=function(){this.tick()},e.prototype.onKeyLoaded=function(){this.state===d.KEY_LOADING&&(this.state=d.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag.decryptdata,i=t.frag,a=this.hls;if(this.state===d.FRAG_LOADING&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&t.payload.byteLength>0&&null!=r&&null!=r.key&&"AES-128"===r.method){var n=void 0;try{n=performance.now()}catch(t){n=Date.now()}this.decrypter.decrypt(t.payload,r.key.buffer,r.iv.buffer,function(t){var e=void 0;try{e=performance.now()}catch(t){e=Date.now()}a.trigger(o.a.FRAG_DECRYPTED,{frag:i,payload:t,stats:{tstart:n,tdecrypt:e}})})}},e}(u.a);e.a=c},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=r(3),s=r(1),l=r(2),u=r(0),d=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),c={WIDEVINE:"com.widevine.alpha",PLAYREADY:"com.microsoft.playready"},h=function(t,e,r){var i={videoCapabilities:[]};return e.forEach(function(t){i.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"'})}),[i]},f=function(t,e,r){switch(t){case c.WIDEVINE:return h(0,r);default:throw Error("Unknown key-system: "+t)}},p=function(t){function e(r){i(this,e);var n=a(this,t.call(this,r,s.a.MEDIA_ATTACHED,s.a.MANIFEST_PARSED));return n._widevineLicenseUrl=r.config.widevineLicenseUrl,n._licenseXhrSetup=r.config.licenseXhrSetup,n._emeEnabled=r.config.emeEnabled,n._requestMediaKeySystemAccess=r.config.requestMediaKeySystemAccessFunc,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._isMediaEncrypted=!1,n._requestLicenseFailureCount=0,n}return n(e,t),e.prototype.getLicenseServerUrl=function(t){var e=void 0;switch(t){case c.WIDEVINE:e=this._widevineLicenseUrl;break;default:e=null}return e||(u.b.error('No license server URL configured for key-system "'+t+'"'),this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),e},e.prototype._attemptKeySystemAccess=function(t,e,r){var i=this,a=f(t,0,r);if(!a)return void u.b.warn("Can not create config for key-system (maybe because platform is not supported):",t);u.b.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(t,a).then(function(e){i._onMediaKeySystemAccessObtained(t,e)}).catch(function(e){u.b.error('Failed to obtain key-system "'+t+'" access:',e)})},e.prototype._onMediaKeySystemAccessObtained=function(t,e){var r=this;u.b.log('Access for key-system "'+t+'" obtained');var i={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(i),e.createMediaKeys().then(function(e){i.mediaKeys=e,u.b.log('Media-keys created for key-system "'+t+'"'),r._onMediaKeysCreated()}).catch(function(t){u.b.error("Failed to create media-keys:",t)})},e.prototype._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach(function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))})},e.prototype._onNewMediaKeySession=function(t){var e=this;u.b.log("New key-system session "+t.sessionId),t.addEventListener("message",function(r){e._onKeySessionMessage(t,r.message)},!1)},e.prototype._onKeySessionMessage=function(t,e){u.b.log("Got EME message event, creating license request"),this._requestLicense(e,function(e){u.b.log("Received license data, updating key-session"),t.update(e)})},e.prototype._onMediaEncrypted=function(t,e){u.b.log('Media is encrypted using "'+t+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=t,this._mediaEncryptionInitData=e,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},e.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return u.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_NO_KEYS,fatal:!0});u.b.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},e.prototype._generateRequestWithPreferredKeySession=function(){var t=this,e=this._mediaKeysList[0];if(!e)return u.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(e.mediaKeysSessionInitialized)return void u.b.warn("Key-Session already initialized but requested again");var r=e.mediaKeysSession;r||(u.b.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_NO_SESSION,fatal:!0}));var i=this._mediaEncryptionInitDataType,a=this._mediaEncryptionInitData;u.b.log('Generating key-session request for "'+i+'" init data type'),e.mediaKeysSessionInitialized=!0,r.generateRequest(i,a).then(function(){u.b.debug("Key-session generation succeeded")}).catch(function(e){u.b.error("Error generating key-session request:",e),t.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_NO_SESSION,fatal:!1})})},e.prototype._createLicenseXhr=function(t,e,r){var i=new XMLHttpRequest,a=this._licenseXhrSetup;try{if(a)try{a(i,t)}catch(e){i.open("POST",t,!0),a(i,t)}i.readyState||i.open("POST",t,!0)}catch(t){return u.b.error("Error setting up key-system license XHR",t),void this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,t,e,r),i},e.prototype._onLicenseRequestReadyStageChange=function(t,e,r,i){switch(t.readyState){case 4:if(200===t.status)this._requestLicenseFailureCount=0,u.b.log("License request succeeded"),i(t.response);else{if(u.b.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),++this._requestLicenseFailureCount<=3){var a=3-this._requestLicenseFailureCount+1;return u.b.warn("Retrying license request, "+a+" attempts left"),void this._requestLicense(r,i)}this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},e.prototype._generateLicenseRequestChallenge=function(t,e){var r=void 0;return t.mediaKeySystemDomain===c.PLAYREADY?u.b.error("PlayReady is not supported (yet)"):t.mediaKeySystemDomain===c.WIDEVINE?r=e:u.b.error("Unsupported key-system:",t.mediaKeySystemDomain),r},e.prototype._requestLicense=function(t,e){u.b.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return u.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(s.a.ERROR,{type:l.b.KEY_SYSTEM_ERROR,details:l.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});var i=this.getLicenseServerUrl(r.mediaKeySystemDomain),a=this._createLicenseXhr(i,t,e);u.b.log("Sending license request to URL: "+i),a.send(this._generateLicenseRequestChallenge(r,t))},e.prototype.onMediaAttached=function(t){var e=this;if(this._emeEnabled){var r=t.media;this._media=r,r.addEventListener("encrypted",function(t){e._onMediaEncrypted(t.initDataType,t.initData)})}},e.prototype.onManifestParsed=function(t){if(this._emeEnabled){var e=t.levels.map(function(t){return t.audioCodec}),r=t.levels.map(function(t){return t.videoCodec});this._attemptKeySystemAccess(c.WIDEVINE,e,r)}},d(e,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),e}(o.a);e.a=p},function(t,e,r){"use strict";r.d(e,"a",function(){return i});var i=function(){return window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}()},function(t,e){/*! http://mths.be/endswith v0.2.0 by @mathias */
String.prototype.endsWith||function(){"use strict";var t=function(){try{var t={},e=Object.defineProperty,r=e(t,t,t)&&e}catch(t){}return r}(),e={}.toString,r=function(t){if(null==this)throw TypeError();var r=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var i=r.length,a=String(t),n=a.length,o=i;if(arguments.length>1){var s=arguments[1];void 0!==s&&(o=s?Number(s):0)!=o&&(o=0)}var l=Math.min(Math.max(o,0),i),u=l-n;if(u<0)return!1;for(var d=-1;++d<n;)if(r.charCodeAt(u+d)!=a.charCodeAt(d))return!1;return!0};t?t(String.prototype,"endsWith",{value:r,configurable:!0,writable:!0}):String.prototype.endsWith=r}()}]).default});

function SekindoVideoManager(e){var t=this;return this.config=e,this.quality=!1,this.runningQuality=!1,this.singleQualityPlayer=!1,this.isStreamingVideo=!1,this.listenersArray=[],this.syncPlayersTimeFunc=this.syncPlayersTime.bind(this),this.vidWrapper=this.config.videoIFrameDoc.createElement("div"),this.vidWrapper.style.width="100%",this.vidWrapper.style.height="100%",this.defineVidWrapperProperties(),this.videoElement=this.generateVideoElement(),this.wrapVideoElement(),this.vidWrapper.appendChild(this.videoElement),this.config.bus.addCallBack("onFullScreen",function(e){t.swapVideoElement(e.type)}),this.vidWrapper}function SlickSkin(e){this.config=e,this.skin=this.config.videoIFrameDoc.createElement("div"),this.skin.id="slickSkin",this.designColor=this.config.playerTemplateData.designColor,this.rgbColor=["0x"+this.designColor[1]+this.designColor[2]|0,"0x"+this.designColor[3]+this.designColor[4]|0,"0x"+this.designColor[5]+this.designColor[6]|0],this.opacityInit="1"==this.config.isAutoPlay||"3"==this.config.isAutoPlay?"0":"1",this.skin.style.opacity="1",this.skin.style.overflow="hidden",this.skin.style.position="absolute",this.skin.style.left="0px",this.skin.style.top="0px",this.skin.style.width="100%",this.skin.style.height="100%",this.skin.style.zIndex=111,SekindoUtils.isMobile.any()||(this.skin.style.visibility="hidden"),this.rightMerge="8px",this.leftMerge="12px",this.topMerge="10px",this.bottomMerge="20px",this.logoTopMerge="35px",this.iconsTop=-24,this.iconsTopGap=32,this.reportFs=1,this.isPlaying=!1,this.intentStatus=!1;try{window.frameElement.setAttribute("allowFullScreen",""),window.frameElement.setAttribute("allowfullscreen","")}catch(e){}if(this.config.allowFullScreen=this.config.allowFullScreen&&SekindoUtils.isFriendlyIframe()&&SekindoServices.fullscreen.enabled&&("flow"==this.config.playerMode||"normal"==this.config.playerMode||"sticky"==this.config.playerMode),this.activeButtons="closeBtn"+(this.config.playerTemplateData.isPrimisLogo?"primisLogo":"")+(this.config.allowFullScreen?",normalScreenBtn"+(this.config.playerTemplateData.isLightBox?",lightBoxBtn,lightBoxCloseBtn":",fullScreenBtn"):"")+(this.config.playerTemplateData.goToArticleText?",goToArticleBtn,":",")+(this.config.playerTemplateData.isNextBackBtns?"nextBtn,backBtn":""),this.constructView(),this.config.bus.triggerNote("addChild",{visual:this.skin,destiny:"skin"}),this.constructSkin(),this.addFunctionality(),this.config.flowSkinWrap&&this.flowSkinWrapper(this.config.windowsArray[0].frameElement),0!=this.config.forceWidth){var t={centeredVideo:!0,width:this.config.forceWidth,height:this.config.forceHeight,extFrameWidth:this.config.width,extFrameHeight:this.config.height};this.playerResize(t)}else this.config.responsive||"slider"==this.config.playerMode||"inRead"==this.config.playerMode||this.playerResize({});return this}function SlickPlaylistUnit(e,t,i,n){function s(e){var t=document.createElement("div");t.style.position="absolute",t.style.zIndex=100,t.style.pointerEvents="none",t.style.color="#FFFFFF",t.style.fontFamily="Roboto",t.style.textOverflow="ellipsis",t.style.whiteSpace="nowrap",t.style.overflow="hidden",t.style.userSelect="none",t.style.msUserSelect="none",t.style.mozUserSelect="none",t.style.webkitUserSelect="none";for(var i in e)t.style[i]=e[i];return t}function o(e){d.isPlaying||(d.header.style.color=t.config.playerTemplateData.designColor,g.style.display="block")}function a(e){d.header.style.color="#FFFFFF",g.style.display="none"}function r(e){d.isPlaying||(d.clickPos=e.clientX||e.changedTouches[0].clientX)}function l(e){d.isPlaying||Math.abs((e.clientX||e.changedTouches[0].clientX)-d.clickPos)<10&&(t.config.isPlaying=!0,d.config.nextContentIndex=i,d.config.intentInitiator="userSwitchContentFS",t.config.bus.triggerNote("userIntentOn"),t.config.bus.triggerNote("onUserEvent",{type:"onPlay"}),t.config.bus.triggerNote("userSwitchContent",i))}var d=this;if(this.config=n,this.counter=i,this.isPlaying=!1,this.container=document.createElement("div"),this.container.style.width=t.barUnitWidth+"px",this.container.style.height=t.barHeight+"px",this.container.style.position="absolute",this.container.style.left="0px",this.container.style.bottom="0px",this.container.style.zIndex=1,this.container.style.backgroundColor="black",this.container.style.overflow="hidden",this.container.style.userSelect="none",this.container.style.msUserSelect="none",this.container.style.mozUserSelect="none",this.container.style.webkitUserSelect="none",this.eventWrapper=function(e,i){e.preventDefault(),t.config.adIsPlaying||i(e)},this.img=new Image(t.barUnitWidth,t.barHeight),this.img.src=e.bgImg,this.img.style.pointerEvents="none",this.img.addEventListener("error",function(){d.isImgError?d.img.parentNode.removeChild(d.img):(d.isImgError=!0,imgSrc=t.config.absolutePath+"/content/video/splayer/assets/bigPlayBtn.jpg",d.img.src=decodeURI(imgSrc))}),this.container.appendChild(this.img),t.barHeight>60&&e.duration){var c=s({height:"18px",left:"9.5px",bottom:"9.5px",fontSize:"11px",backgroundColor:"#000000",borderRadius:"5px",padding:"6px 9px 0px 9px"});c.innerText=SekindoUtils.secToHMS(e.duration),t.config.playerTemplateData.isShowPlaylistUnitDuration&&this.container.appendChild(c)}this.header=s({width:t.barUnitWidth-20+"px",height:"27px",left:"9.5px",top:"9.5px",fontSize:"12px"}),this.header.innerText=e.title,t.config.playerTemplateData.isShowPlaylistUnitTitle&&this.container.appendChild(this.header);var h=document.createElement("div");h.style.position="absolute",h.style.left=0,h.style.bottom=0,h.style.width="100%",h.style.height="10px",h.style.backgroundColor="transparent",h.style.borderBottom="4px solid "+t.config.playerTemplateData.designColor,h.style.zIndex=200;var u=s({width:"70px",textDecoration:"none",borderBottom:"3px solid "+t.config.playerTemplateData.designColor,left:"50%",top:"50%",transform:"translate(-50%, -50%)",fontSize:"12px",fontStyle:"italic",display:"none",fontWeight:900});u.innerText="Now playing",t.config.playerTemplateData.isShowPlaylistNowPlaying?this.container.appendChild(u):this.container.appendChild(h);var p=document.createElement("div");p.style.width=t.barUnitWidth,p.style.height=t.barHeight+"px",p.style.position="absolute",p.style.left="0px",p.style.bottom="0px",p.style.zIndex=1,p.style.backgroundColor="rgba(0,0,0,0.6",p.style.overflow="hidden",p.style.userSelect="none",p.style.msUserSelect="none",p.style.mozUserSelect="none",p.style.webkitUserSelect="none",p.style.display="none",t.config.playerTemplateData.isShowPlaylistNowPlaying||this.container.appendChild(p),this.setIsPlaying=function(e){e?(u.style.display="block",d.header.style.display="none",p.style.display="block",c&&(c.style.display="none"),h.style.display="block",this.isPlaying=!0):(u.style.display="none",d.header.style.display="block",p.style.display="none",c&&(c.style.display="block"),h.style.display="none",d.isPlaying=!1)},this.container.addEventListener("mouseenter",function(e){d.eventWrapper(e,o)}),this.container.addEventListener("mouseleave",function(e){d.eventWrapper(e,a)}),this.container.addEventListener("mousedown",function(e){d.eventWrapper(e,r)}),this.container.addEventListener("touchstart",function(e){d.eventWrapper(e,r)}),this.container.addEventListener("mouseup",function(e){d.eventWrapper(e,l)}),this.container.addEventListener("touchend",function(e){d.eventWrapper(e,l)});var g=document.createElement("div");return g.style.height="100%",g.style.width="100%",g.style.opacity="0.91",g.style.background="linear-gradient(180deg, #000000 0%, rgba(0,0,0,0.86) 47.99%, rgba(0,0,0,0) 100%)",g.style.position="absolute",g.style.left="0px",g.style.bottom="0px",g.style.zIndex=10,g.style.display="none",this.container.appendChild(g),t.slider.appendChild(this.container),this}function SlickPlaylist(e,t){function i(e){v.style.display="none"}function n(e){i(),clearTimeout(u.touchTimeout),u.touchTimeout=setTimeout(function(){e&&e.preventDefault(),v.style.display="block"},2e3)}function s(e){e&&e.preventDefault(),v.style.display="block",l(),u.dragIt=!1}function o(e){SekindoUtils.stopAnimateUnit(u.slider.style,"left"),u.movementXplorer=e.clientX,u.dragIt=!0}function a(e){l(),u.dragIt=!1}function r(e){if(u.dragIt){void 0!=e.movementX&&NaN!=e.movementX||(e.movementX=(e.clientX||e.touches[0].clientX)-u.movementXplorer,u.movementXplorer=e.clientX||e.touches[0].clientX),e.movementX&&(u.isDragged=e.movementX);var t=parseInt(u.slider.style.left);t+=e.movementX,u.slider.style.left=t+"px",d()}}function l(){if(u.isDragged){var e=parseInt(u.slider.style.left);e+=10*u.isDragged;var t=-1*(parseInt(u.slider.scrollWidth)-parseInt(u.container.offsetWidth));e=Math.min(0,Math.max(t,e)),SekindoUtils.animateTo(u.slider.style,"left",e+"px",.6,"easeOut",null,d)}u.isDragged=0,u.dragIt=!1}function d(){for(var e=parseInt(u.slider.style.left),t=u.container.offsetWidth,i=0;i<u.unitsArray.length;i++){var n=u.unitsArray[i].container,s=parseInt(n.style.left);s+e+u.barUnitWidth>0&&s+e<t?n.style.display="block":n.style.display="none"}}function c(e){u.isDragged=10,"rightArrow"==e.currentTarget.id&&(u.isDragged=-10),u.arrowInterval=setInterval(function(){u.slider.style.left=parseInt(u.slider.style.left)+u.isDragged+"px",d()},20)}function h(e){clearInterval(u.arrowInterval),l(),u.isDragged=!1}var u=this;this.config=e,this.dragIt=!1,this.isDragged=0,this.unitsArray=[],this.barUnitWidth=180,this.barHeight=100;var p=document.getElementsByTagName("head")[0],g=document.createElement("link");g.rel="stylesheet",g.type="text/css",g.href="https://fonts.googleapis.com/css?family=Roboto",p.appendChild(g),this.container=document.createElement("div"),this.container.style.width="100%",this.container.style.height=this.barHeight+"px",this.container.style.position="relative",this.container.style.zIndex=1e4,this.container.style.backgroundColor="black",this.container.style.overflow="hidden",this.container.style.cursor="pointer",this.container.style.userSelect="none",this.container.style.msUserSelect="none",this.container.style.mozUserSelect="none",this.container.style.webkitUserSelect="none",this.container.style.marginLeft="auto",this.container.style.marginRight="auto",this.container.id="playlistSkinElement",this.config.playlistSkinElement=this.container,this.config.mainVideoDiv.parentNode.insertBefore(this.container,this.config.mainVideoDiv.nextSibling),this.slider=document.createElement("div"),this.slider.style.width="100%",this.slider.style.position="absolute",this.slider.style.left="0px",this.slider.style.bottom="0px",this.slider.style.zIndex=1,this.slider.style.userSelect="none",this.slider.style.msUserSelect="none",this.slider.style.mozUserSelect="none",this.slider.style.webkitUserSelect="none",this.container.appendChild(this.slider),this.selectedUnit=function(e){u.currPlaying=e;for(var t=0;t<u.unitsArray.length;t++){var i=u.unitsArray[t];i.setIsPlaying(e==i.counter)}if("none"==u.unitsArray[e].container.style.display){if(u.dragIt)return;u.container.offsetWidth;var n=-1*parseInt(u.unitsArray[e].container.style.left),s=-1*(parseInt(u.slider.scrollWidth)-parseInt(u.container.offsetWidth));n=Math.min(0,Math.max(s,n)),SekindoUtils.animateTo(u.slider.style,"left",n+"px",.6,"easeOut",null,d)}},this.config.bus.addCallBack("contentStarted",function(e){u.selectedUnit(e)}),this.config.bus.addCallBack("nextContentInited",function(e){u.selectedUnit(e)}),this.config.bus.addCallBack("onFlowStatusChange",function(e){setTimeout(d,1)}),this.container.addEventListener("mouseenter",function(e){u.eventWrapper(e,i)}),this.container.addEventListener("touchstart",function(e){u.eventWrapper(e,n)}),this.container.addEventListener("mouseleave",function(e){u.eventWrapper(e,s)}),this.container.addEventListener("mousedown",function(e){u.eventWrapper(e,o)}),this.container.addEventListener("touchstart",function(e){u.eventWrapper(e,o)}),this.container.addEventListener("mouseup",function(e){u.eventWrapper(e,a)}),this.container.addEventListener("touchend",function(e){u.eventWrapper(e,a)}),this.container.addEventListener("mousemove",function(e){u.eventWrapper(e,r)}),this.container.addEventListener("touchmove",function(e){u.eventWrapper(e,r)}),this.config.bus.addCallBack("adCompleted",function(){u.onAdEvent("adCompleted")}),this.config.bus.addCallBack("adStarted",function(){u.onAdEvent("adStarted")}),this.onResize=function(e){u.barUnitWidth=u.config.playlistUnitWidth,u.barHeight=u.config.playlistHeight;for(var t=0;t<u.unitsArray.length;t++){var i=u.unitsArray[t];i.container.style.left=t*(u.barUnitWidth+8)+"px",i.container.style.width=u.barUnitWidth+"px",i.container.style.height=u.barHeight+"px",i.img.style.width=u.barUnitWidth+"px",i.img.style.height=u.barHeight+"px",i.header.style.width=u.barUnitWidth-20+"px"}var n=parseInt(u.slider.style.width);u.slider.style.width=u.unitsArray.length*(u.barUnitWidth+8)+"px",u.slider.style.height=u.barHeight+"px",u.container.style.height=u.barHeight+"px",this.container.style.width=u.config.videoWidth+"px";var s=parseInt(u.slider.style.width)/n;u.slider.style.left=parseInt(u.slider.style.left)*s+"px",d()};for(var f=0;f<this.config.contentPlayList.length;f++){var m=new SlickPlaylistUnit(this.config.contentPlayList[f],this,f,this.config);m.container.style.left=f*(this.barUnitWidth+8)+"px",this.unitsArray.push(m)}this.slider.style.width=this.config.contentPlayList.length*(this.barUnitWidth+8)+"px";var v=document.createElement("div");v.innerHTML='<svg width="100%" height="100%" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">                    \x3c!-- Generator: Sketch 46.2 (44496) - https://www.bohemiancoding.com/sketch --\x3e            <title>Playlist Gradiant</title>            <desc>Created with Sketch.</desc>        <defs></defs>        <g id="behavior-copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0.389999986" opacity="0.600543478">        <g id="Full-screen-btn" fill="#000000">            <g id="Group">                <g id="Playlist-">                    <g>                        <rect id="Playlist-Gradiant" x="0" y="0" width="100%" height="100%"></rect>                    </g>                </g>            </g>        </g>        </g>        </svg>',v.style.width="100%",v.style.height="100%",v.style.position="absolute",v.style.left="0px",v.style.bottom="0px",v.style.zIndex=100,v.style.pointerEvents="none",this.container.appendChild(v);var y=t.addIcon("leftArrow",this.container,'<svg width="9px" height="16px" viewBox="0 0 9 16" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">                    \x3c!-- Generator: Sketch 46.2 (44496) - https://www.bohemiancoding.com/sketch --\x3e            <title>Arrow Left #1 Icon</title>            <desc>Created with Sketch.</desc>        <defs></defs>        <g id="behavior-copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="pause-movie" transform="translate(-571.000000, -831.000000)" fill="#FFFFFF">            <g id="Group" transform="translate(560.000000, 334.000000)">                <g transform="translate(-347.000000, -131.000000)" id="Playlist-">                    <g transform="translate(294.000000, 582.000000)">                        <g id="arrows" transform="translate(64.000000, 45.000000)">                            <path d="M0.442954136,10.0615 C0.157627823,9.7775 0,9.4025 0,9.0005 C0,8.5995 0.157627823,8.2225 0.442954136,7.9405 L7.27582098,1.2925 C7.67088818,0.9025 8.30938063,0.9025 8.70444783,1.2925 C9.09851739,1.6835 9.09851739,2.3165 8.70444783,2.7065 L2.22774006,9.0005 L8.70444783,15.2945 C9.09851739,15.6845 9.09851739,16.3175 8.70444783,16.7085 C8.30938063,17.0995 7.67088818,17.0995 7.27582098,16.7085 L0.442954136,10.0615 L0.442954136,10.0615 L0.442954136,10.0615 Z" id="Arrow-Left-#1-Icon"></path>                        </g>                    </g>                </g>            </g>        </g>        </g>        </svg>',{position:"absolute",zIndex:1111,left:"10px",top:"50%",transform:"translate(0%, -50%)",webkitTransform:"translate(0%, -50%)"}),b=t.addIcon("rightArrow",this.container,'<svg width="10px" height="16px" viewBox="0 0 10 16" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">                    \x3c!-- Generator: Sketch 46.2 (44496) - https://www.bohemiancoding.com/sketch --\x3e            <title>Arrow right #1 Icon</title>            <desc>Created with Sketch.</desc>        <defs></defs>        <g id="behavior-copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="pause-movie" transform="translate(-1335.000000, -830.000000)" fill="#FFFFFF">            <g id="Group" transform="translate(560.000000, 334.000000)">                <g transform="translate(-347.000000, -131.000000)" id="Playlist-">                    <g transform="translate(294.000000, 582.000000)">                        <g id="arrows" transform="translate(64.000000, 45.000000)">                            <path d="M764.5,8.0005 C764.5,7.5995 764.657628,7.2225 764.942954,6.9405 L771.775821,0.2925 C772.170888,-0.0975 772.809381,-0.0975 773.204448,0.2925 C773.598517,0.6835 773.598517,1.3165 773.204448,1.7065 L766.72774,8.0005 L773.204448,14.2945 C773.598517,14.6845 773.598517,15.3175 773.204448,15.7085 C772.809381,16.0995 772.170888,16.0995 771.775821,15.7085 L764.942954,9.0615 C764.657628,8.7775 764.5,8.4025 764.5,8.0005 Z" id="Arrow-right-#1-Icon" transform="translate(769.000000, 8.000875) scale(-1, 1) translate(-769.000000, -8.000875) "></path>                        </g>                    </g>                </g>            </g>        </g>        </g>        </svg>',{position:"absolute",zIndex:1111,right:"10px",top:"50%",transform:"translate(0%, -50%)",webkitTransform:"translate(0%, -50%)"});this.container.appendChild(y),this.container.appendChild(b);var k=document.createElement("div");k.style.width="40px",k.style.height="40px",k.style.position="absolute",k.style.left="-18px",k.style.top="-10px",y.appendChild(k);var S=document.createElement("div");return S.style.width="40px",S.style.height="40px",S.style.position="absolute",S.style.left="-12px",S.style.top="-10px",b.appendChild(S),b.addEventListener("mousedown",function(e){u.eventWrapper(e,c)}),b.addEventListener("touchstart",function(e){u.eventWrapper(e,c)}),b.addEventListener("mouseup",function(e){u.eventWrapper(e,h)}),b.addEventListener("touchend",function(e){u.eventWrapper(e,h)}),b.addEventListener("mouseleave",function(e){u.eventWrapper(e,h)}),y.addEventListener("mousedown",function(e){u.eventWrapper(e,c)}),y.addEventListener("touchstart",function(e){u.eventWrapper(e,c)}),y.addEventListener("mouseup",function(e){u.eventWrapper(e,h)}),y.addEventListener("touchend",function(e){u.eventWrapper(e,h)}),y.addEventListener("mouseleave",function(e){u.eventWrapper(e,h)}),this.eventWrapper=function(e,t){e.preventDefault(),this.config.adIsPlaying||t(e)},this}function SekindoFlowManager(e){this.config=e,this.capsulesStack={},this.setCapsulesData(),this.generateCapsule("initiation")}function SekindoFlowCapsule(e,t,i){this.config=e,this.dataObj=t,this.oner=i,this.id=this.dataObj.id,this.saveObj=[],this.setCallbacks(this.dataObj.when)}function FlowCapsuleCallback(e,t){this.execute=function(i){e.content&&JSON.stringify(e.content)!=JSON.stringify(i)||(this.content=e.content,t.save(e),t.then())}}function SekindoBus(){this.callbacksArray=new Array}function SekindoBusItm(){this.callbackID=null,this.callbackFunc=null}function SekindoBusNote(){this.callbackID=null,this.content=null}function SekindoAdsManager(e,t){var i=this;this.uniqueID=e,this.config=t,window.sekindoConfig=this.config,this.config.adsManager=this,this.config.lastImpViewableCompleteTime=0,this.config.isLastImpViewable=!1,this.timeOutObj=null,this.config.adsProcessPaused=!0,this.waterfallArray=[],this.cacheableAds=[],this.config.impressionTimeout=0,this.contentVidCurrTime=-1,this.leapRoundCounter=-1,this.config.blockAdRequestsNV=!1,this.config.blockAdRequests=!1,this.processorCounter=0,this.intentStatus=!1,this.config.adsProcessHalter=new AdsProcessHalter(this.config),this.destructOnFailAllowed=2!=this.config.isAutoPlay&&4!=this.config.isAutoPlay,this.config.requestLifetime&&this.config.requestLifetime>0&&(this.config.requestLifetimeTimeout=setTimeout(function(){i.config.blockAdRequests=!0,i.config.adsProcessPaused=!0},6e4*this.config.requestLifetime)),this.config.requestLifetimeNV&&this.config.requestLifetimeNV>0&&(this.config.requestLifetimeTimeoutNV=setTimeout(function(){i.config.blockAdRequestsNV=!0},6e4*this.config.requestLifetimeNV)),this.gdprIsRequired=this.config.gdprIsRequired,this.gdprRawConsent=this.config.gdprRawConsent,this.gdprIsWePass=this.gdprIsRequired?0:1,this.gdprIsRequired&&""==this.gdprRawConsent&&"function"==typeof SekindoClientDetections_GDPR?this.gdprHandler=new SekindoClientDetections_GDPR(this.config.debug,this.config.gdprDetTimeout,function(e,t){i.gdprRawConsent=e,i.gdprIsWePass=t?1:0,window.SKpbjs.setConfig({consentManagement:{cmpApi:"static",allowAuctionWithoutConsent:!0,consentData:{getConsentData:{gdprApplies:!0,hasGlobalScope:!1,consentData:e},getVendorConsents:{metadata:e,gdprApplies:!0}}}}),i.loadWaterfall()}):this.gdprHandler=null,this.destructProcessorOnFail=function(){i.currProcessor&&void 0!==i.currProcessor&&(i.currProcessor.destructOnFail=!0),clearTimeout(i.destructOnFailTimeout),i.destructOnFailTimeout=null},this.config.onViewabilityChange.addCallback(function(e){!1!==e||"flow"===i.config.playerMode||i.config.soundEnabledByUser||(i.config.playbackMethod="auto",i.config.bus.triggerNote("userIntentOff")),e&&i.config.hadImpression&&(i.config.isLastImpViewable=!0),i.config.adsProcessPaused||i.config.adsProcessHalter.shouldHalt()||(i.viewableWaterfallAvailable=!1,i.loadWaterfall()),!1===e&&null!=i.destructOnFailTimeout&&i.destructProcessorOnFail()}),this.config.waterFall&&0!=this.config.waterFall.length||this.config.bus.triggerNote("waterFallEmpty"),this.config.bus.addCallBack("onPlayerResize",function(e){i.onPlayerResize(e)}),this.config.bus.addCallBack("onVideoProgress",function(e){i.contentVidCurrTime=e.currTime,i.isPlayerSimulatorActive=e.isSimulator}),this.config.bus.addCallBack("pauseAdsSchedule",function(e){i.pauseAdsSchedule(e)}),this.config.bus.addCallBack("resumeAdsSchedule",function(e){i.resumeAdsSchedule(e)}),this.config.bus.addCallBack("resetAdsSchedule",function(e){i.resetAdsSchedule(e)}),this.config.bus.addCallBack("onUserEvent",function(e){i.onUserEvent(e)}),this.config.bus.addCallBack("intentOn",function(){i.onIntentOn()}),this.config.bus.addCallBack("intentOff",function(){i.onIntentOff()}),this.setAdsSchedule(),this.config.isDesktop||this.config.onVisibilityChange.addCallback(function(e){if(i.currAdUnit)if(e){if(i.config.isPlaying&&i.currAdUnit.videoElement&&i.currAdUnit.videoElement.paused&&"none"!=i.currAdUnit.videoElement.parentNode.style.display){var t=i.currAdUnit.videoElement.play();if(t)try{t.then(function(){}).catch(function(e){})}catch(e){}}}else i.currAdUnit.videoElement&&!i.currAdUnit.videoElement.paused&&i.currAdUnit.videoElement.pause()}),this.config.responsive||"slider"==this.config.playerMode||"inRead"==this.config.playerMode?this.config.bus.addCallBack("onPlayerResize",function(){i.config.bus.triggerNote("adsManagerInited")}):this.config.bus.triggerNote("adsManagerInited")}function SekindoOutboundLoader(e,t){var i=this;this.config=e,this.settings=t,this.outboundUrl=this.config.waterFall;var n=/[?|&](x=\d*)/.exec(this.outboundUrl),s=/[?|&](y=\d*)/.exec(this.outboundUrl),o=this.config.onViewabilityChange.getCurrState()?1:0,a=this.config.videoWidth||this.config.width,r=this.config.videoHeight||this.config.height;n&&n.length>1&&(this.outboundUrl=this.outboundUrl.replace(n[1],"x="+a)),s&&s.length>1&&(this.outboundUrl=this.outboundUrl.replace(s[1],"y="+r)),this.outboundUrl=this.outboundUrl.replace("${VP_VIEWABILITY_STATE}",o),this.outboundUrl=this.outboundUrl.replace("${VP_PLAYBACK_METHOD}",this.settings.playbackMethod),t.gdprIsRequired&&(this.outboundUrl=this.outboundUrl.replace("${GDPR_CONSENT}",encodeURIComponent(t.gdprRawConsent)),this.outboundUrl=this.outboundUrl.replace("${GDPR_WE_PASS}",t.gdprIsWePass)),this.sendRequest=function(){var e=(new Date).getTime().toString(),t=this.outboundUrl.replace("${CBUSTER}",e);this.adsXmlhttp.open("GET",t,!0),this.adsXmlhttp.withCredentials=!0,this.adsXmlhttp.send()},this.getOutbound=function(){this.adsXmlhttp=new XMLHttpRequest,this.adsXmlhttp.addEventListener("load",function(e){try{var t=JSON.parse(i.adsXmlhttp.responseText);i.adsProgram=t.ads||[],i.adsProgram.settings=i.settings,i.adsProgram.length}catch(e){i.adsProgram=[]}},!1),this.adsXmlhttp.addEventListener("error",function(e){},!1),this.adsXmlhttp.addEventListener("abort",function(e){},!1),this.sendRequest()},this.getOutbound()}function SekindoWaterfallLoader(e,t){var i=this;this.config=e,this.adsProgram={},this.settings=t,this.adsProgramLoaded=!1,this.waterfallUrl=this.config.waterFall;var n=/[?|&](x=\d*)/.exec(this.waterfallUrl),s=/[?|&](y=\d*)/.exec(this.waterfallUrl),o=this.config.onViewabilityChange.getCurrState(),a="cacheable"==this.settings.type?2:o?1:!1===o?0:-1,r=this.config.videoWidth||this.config.width,l=this.config.videoHeight||this.config.height;n&&n.length>1&&(this.waterfallUrl=this.waterfallUrl.replace(n[1],"x="+r)),s&&s.length>1&&(this.waterfallUrl=this.waterfallUrl.replace(s[1],"y="+l)),this.waterfallUrl=this.waterfallUrl.replace("${VP_VIEWABILITY_STATE}",a),this.waterfallUrl=this.waterfallUrl.replace("${VP_PLAYBACK_METHOD}",this.config.playbackMethod),t.gdprIsRequired&&(this.waterfallUrl=this.waterfallUrl.replace("${GDPR_CONSENT}",encodeURIComponent(t.gdprRawConsent)),this.waterfallUrl=this.waterfallUrl.replace("${GDPR_WE_PASS}",t.gdprIsWePass)),this.setWaterfall=function(){this.adsXmlhttp=new XMLHttpRequest,this.adsXmlhttp.addEventListener("load",function(e){i.adsProgramLoaded=!0;try{var t=JSON.parse(i.adsXmlhttp.responseText);i.wfGeneralParams=t,i.limitedImpressions=0,i.adsProgram=t.ads||[];for(var n=0;n<i.adsProgram.length;n++)i.adsProgram[n].impressionCount={val:0},parseInt(i.adsProgram[n].maxImpressions)>0&&i.limitedImpressions++;if(i.adsProgram.settings=i.settings,i.adsProgram.wfStartPixel=t.wfStartPixel,i.adsProgram.sspInfo=t.sspInfo,i.adsProgram.minAdsForMultiPrebidAuction=t.minAdsForMultiPrebidAuction,i.config.impressionTimeout=t.impressionTimeout?t.impressionTimeout:0,i.waterFallLifeTime=t.waterFallLifeTime?parseFloat(t.waterFallLifeTime):3e5,i.waterFallLifeTime>0&&(i.waterFallLifeTimeOut&&clearTimeout(i.waterFallLifeTimeOut),i.waterFallLifeTimeOut=setTimeout(function(){i.setWaterfall()},i.waterFallLifeTime)),t.initJs)for(var s in t.initJs){var o=t.initJs[s];SekindoUtils.loadExternalJs(o)}i.waterfallGap=t.adsSchedule,("slider"==i.config.playerMode||i.config.flowStatus)&&i.config.onViewabilityChange.getCurrState()&&(i.waterfallGap.attGap=Math.max(5,i.waterfallGap.attGap)),i.debugWFManagerId=t.debugWFManagerId,i.config.adsManager.currWaterfall==i?(i.adsProgram.length||setTimeout(function(){i.config.bus.triggerNote("waterFallEmpty")},3),i.config.adsManager.newAdsProgram=i.adsProgram,i.config.adsManager.waterfallGap=i.waterfallGap,i.config.onViewabilityChange.getCurrState()&&(i.config.adsManager.isPlayerSimulatorActive&&!i.config.playerTemplateData.isPauseNonViewable||i.config.forcePreroll||SekindoServices.fullscreen.isFullscreen)?(i.config.forcePreroll=!1,i.config.adsManager.setAdsSchedule(),i.config.adsManager.executeAdsSchedule()):i.config.adsManager.generateProcessor(i.settings.type)):"cacheable"==i.settings.type&&i.config.adsManager.generateProcessor(i.settings.type,{adsProgram:i.adsProgram,wfGeneralParams:i.wfGeneralParams})}catch(e){i.adsProgram=[],i.config.adsManager.currWaterfall==i&&i.config.bus.triggerNote("waterFallEmpty"),setTimeout(function(){i.setWaterfall()},3e5)}},!1),this.adsXmlhttp.addEventListener("error",function(e){i.config.adsManager.currWaterfall==i&&i.config.bus.triggerNote("waterFallEmpty"),i.config.adsProcessPaused||i.config.adsProcessHalter.shouldHalt()||i.setWaterfall()},!1),this.adsXmlhttp.addEventListener("abort",function(e){i.config.adsManager.currWaterfall==i&&i.config.bus.triggerNote("waterFallEmpty"),i.config.adsProcessPaused||i.config.adsProcessHalter.shouldHalt()||i.setWaterfall()},!1),this.sendRequest()},this.setWaterfall()}function SekindoWaterfallCacheableProcessor(e,t,i){var n=this;this.config=e,this.config.cacheableStarted=!0,this.config.cacheableAvailable=!1,this.parent=i,this.cacheableAds=[],this.updateAdsProgram(t),this.loadAds(),this.loadAdsInterval=setInterval(function(){n.loadAds()},this.cacheableAdsReloadTime)}function SekindoWaterfallLinearProcessor(e,t,i){var n=this;this.config=e,this.params=t,this.parent=i,this.adUnitsArray=[],this.index=-1,this.status="init",this.isMultiPrebidAuction=!1,this.debugId=this.parent.processorCounter++,this.init(),SekindoUtils.firePixel(this.params.waterfall.wfStartPixel,this.config.pixelDiv,this.config),this.processPrebid(function(){n.generateNextAd()})}function SekindoA9Bidder(e,t,i,n){if(this.params=t,this.config=e,this.adUnitCode=n,this.cbFunction=i,void 0==this.config.a9bidderInit){try{window.apstag.init({pubID:this.params.pubID,adServer:"googletag"})}catch(e){}this.config.a9bidderInit=!0}this.getBids=function(e){!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1}(e),this.cbFunction("amazon",{})},this.run=function(e){var t=this;try{window.apstag.fetchBids({slots:this.params.apstagSlots},function(e){t.getBids(e)})}catch(e){this.getBids([])}}}function SekindoAdUnit(e,t,i){var n=this;this.config=e,this.params=t,this.parent=i,this.reportsBlocker={},this.busItms=[],this.adProccessStatus="init",this.adType=null,this.videoEventCallback=this.onVideoEvent.bind(this),this.videoProgressEventCallback=this.onVideoProgressEvent.bind(this),this.parent.processPrebid(function(){n.run()})}function AdsProcessHalter(e){var t=this;this.config=e,this.isHalted=!1,this.isHaltConditionsMet=function(){return!1},this.resumeFromHalt=function(){return!(!t.isHalted||!1!==t.isHaltConditionsMet())&&(t.isHalted=!1,t.config.adsManager.resumeAdsSchedule(),!0)},this.shouldHalt=function(){return!1}}function SekindoVideoInterface(e){var t=this;this.videoDiv=e,this.audioObj=null,this.jpgSeqObj=null,this.videoObj=null,this.videoDiv.audioTracks=new AudioTrackList,this.videoDiv.buffered=new TimeRanges,this.videoDiv.controller=new MediaController,this.videoDiv.textTracks=new TextTrackList,this.videoDiv.videoTracks=new VideoTrackList,this.eventListeners=new Array,this._autoPlay=!0,this.videoDiv.__defineGetter__("autoplay",function(){return t._autoPlay}),this.videoDiv.__defineSetter__("autoplay",function(e){t._autoPlay=e,t.videoObj.autoplay=e}),this.videoDiv.__defineGetter__("buffered",function(){var e=new TimeRanges;return e.endTime=t.jpgSeqObj.buffered,e}),this.videoDiv.__defineGetter__("controls",function(){return!1}),this.videoDiv.__defineSetter__("controls",function(e){}),this.videoDiv.__defineGetter__("currentSrc",function(){return t.videoSrc||null}),this.videoDiv.__defineSetter__("currentSrc",function(e){}),this.videoDiv.__defineGetter__("currentTime",function(){return t.jpgSeqObj?Math.min(t.jpgSeqObj.currTime,t.jpgSeqObj.config.totalFrames/t.jpgSeqObj.config.frameRate):0}),this.videoDiv.__defineSetter__("currentTime",function(e){t.jpgSeqObj&&(t.jpgSeqObj.currentTime=e)}),this.videoDiv.__defineGetter__("defaultMuted",function(){return!0}),this.videoDiv.__defineSetter__("defaultMuted",function(e){}),this.videoDiv.__defineGetter__("defaultPlaybackRate",function(){return!0}),this.videoDiv.__defineSetter__("defaultPlaybackRate",function(e){}),this.videoDiv.__defineGetter__("duration",function(){return t.jpgSeqObj.config.totalFrames/t.jpgSeqObj.config.frameRate||"NaN"}),this.videoDiv.__defineGetter__("ended",function(){return!t.jpgSeqObj||t.jpgSeqObj.ended}),this.videoDiv.__defineGetter__("error",function(){return 1}),this.videoDiv.__defineGetter__("height",function(){return t.jpgSeqObj?t.jpgSeqObj.container.parentNode.offsetHeight:t.videoDiv.style.height}),this.videoDiv.__defineSetter__("height",function(e){t.jpgSeqObj&&(t.videoObj.config.height=e,t.videoObj.setDimentions())}),this.videoDiv.__defineGetter__("loop",function(){return!!t.jpgSeqObj&&t.jpgSeqObj.loop}),this.videoDiv.__defineSetter__("loop",function(e){t.jpgSeqObj&&(t.jpgSeqObj.loop=e)}),this.videoDiv.__defineGetter__("mediaGroup",function(){return"Media Group"}),this.videoDiv.__defineSetter__("mediaGroup",function(e){}),void 0===this.videoDiv.style.objectFit&&(this.objectFit=null,this.videoDiv.style.__defineGetter__("objectFit",function(){return t.objectFit}),this.videoDiv.style.__defineSetter__("objectFit",function(e){t.objectFit=e})),this.videoDiv.__defineGetter__("muted",function(){
return!t.jpgSeqObj||"none"==t.videoDiv.style.display||t.audioObj.audioElement.isMuted}),this.videoDiv.__defineSetter__("muted",function(e){if(t.audioObj&&(t.audioObj.muted=e),t.jpgSeqObj&&"none"!=t.videoDiv.style.display)if(t.audioObj.audioElement.muted=e,t.audioObj.audioElement.isMuted=e,e)t.jpgSeqObj.isPaused||t.audioObj.pause();else if(!t.jpgSeqObj.isPaused){if(!t.videoObj.config.soundEnabledByUser)return;t.audioObj.play()}}),this.videoDiv.__defineGetter__("networkState",function(){return 0}),this.videoDiv.__defineGetter__("paused",function(){return!t.jpgSeqObj||t.jpgSeqObj.isPaused}),this.videoDiv.__defineSetter__("paused",function(e){t.jpgSeqObj&&t.jpgSeqObj.pause()}),this.videoDiv.__defineGetter__("playbackRate",function(){return 1}),this.videoDiv.__defineSetter__("playbackRate",function(e){}),this.videoDiv.__defineGetter__("played",function(){return new TimeRanges}),this.videoDiv.__defineGetter__("poster",function(){return"poster url"}),this.videoDiv.__defineSetter__("poster",function(e){}),this.videoDiv.__defineGetter__("preload",function(){return"auto"}),this.videoDiv.__defineSetter__("preload",function(e){}),this.videoDiv.__defineGetter__("readyState",function(){return 4}),this.videoDiv.__defineGetter__("seekable",function(){return new TimeRanges}),this.videoDiv.__defineSetter__("seekable",function(e){}),this.videoDiv.__defineGetter__("seeking",function(){return!1}),this.videoDiv.__defineGetter__("src",function(){return t.videoSrc}),this.videoDiv.__defineSetter__("src",function(e){var i=e.toLowerCase();if(-1==i.indexOf(".mp4")||!SekindoUtils.validURL(i,!0)){var n=document.createEvent("Event");return n.initEvent("error",!1,!1),n.message="error",void t.videoDiv.dispatchEvent(n)}t.videoSrc=e,t.videoObj.loadSrc(e)}),this.videoDiv.__defineGetter__("startDate",function(){return 0}),this.videoDiv.__defineGetter__("volume",function(){return t.audioObj.audioElement.volume}),this.videoDiv.__defineSetter__("volume",function(e){if(t.jpgSeqObj&&!t.audioObj.audioLock){if(!t.jpgSeqObj.isPaused&&t.audioObj.muted){if(!t.videoObj.config.soundEnabledByUser)return;t.audioObj.play()}t.audioObj.muted=!1,t.audioObj.audioElement.muted=!1,t.audioObj.audioElement.isMuted=!1,t.audioObj.audioElement.volume=e}}),this.videoDiv.__defineGetter__("width",function(){return t.jpgSeqObj?t.jpgSeqObj.container.parentNode.offsetWidth:t.videoDiv.style.width}),this.videoDiv.__defineSetter__("width",function(e){t.jpgSeqObj&&(t.videoObj.config.width=e,t.videoObj.setDimentions())}),this.videoDiv.addTextTrack=function(e,t,i){var n=new TextTrack;return n.kind=e,n.label=t,n.language=i,this.textTracks.push(n),n},this.videoDiv.canPlayType=function(e){var t="",i=e.toLowerCase();return'video/mp4; codecs="avc1.4d401e, mp4a.40.2"'==i?t="probably":-1!=i.indexOf("video/mp4")&&(t="maybe"),t},this.videoDiv.load=function(){},this.videoDiv.play=function(){if(!t.jpgSeqObj)return!1;t.jpgSeqObj.play()},this.videoDiv.pause=function(){t.jpgSeqObj&&t.jpgSeqObj.pause()},SekindoUtils.implementEventListenersToObj(this.videoDiv),this.attributeSetted=!1,this.videoDiv.setAttribute=function(e,i){if("src"==e&&!t.attributeSetted){var n=i.toLowerCase();if(-1==n.indexOf(".mp4")||!SekindoUtils.validURL(n,!0)){var s=document.createEvent("Event");return s.initEvent("error",!1,!1),s.message="error",void t.videoDiv.dispatchEvent(s)}t.videoSrc=i,t.videoObj.loadSrc(i),t.attributeSetted=!0,setTimeout(function(){t.attributeSetted=!1},1e3)}},this.videoDiv.destruct=function(){t.videoObj&&t.videoObj.destruct()}}function AudioTrackList(){this.length=null}function AudioTrack(){}function TimeRanges(){this.length=1,this.endTime=0,this.start=function(e){return 0},this.end=function(e){return this.endTime}}function MediaController(){this.buffered,this.seekable,this.duration,this.currentTime,this.paused,this.played,this.defaultPlaybackRate,this.playbackRate,this.volume,this.muted}function SekindoFetchXML(e,t,i,n,s){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status)if(null!==o.responseXML)i(o.responseXML,t);else if(null!==o.responseText){var e=o.responseText,s=function(e){if(window.ActiveXObject)(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);else var t=(new DOMParser).parseFromString(e,"text/xml");return t}(e=e.trim());i(s,t)}else n(o,t);else n(o,t)};for(var a=!1,r=["storage.googleapis.com"],l=0;l<r.length;l++){var d=r[l];if(-1!=e.indexOf(d)){a=!0;break}}o.open("GET",e,!0),a||(o.withCredentials=!0),o.send(null)}function SekindoQueryVAST(e,t,i,n,s){void 0==s&&(s=0),s>=MAX_WRAPPER_DEPTH?t(null):SekindoFetchXML(e,null,function(o){try{new SekindoVASTAds(o,t,i,n,s,e)}catch(e){t(null)}},function(e){t(null)},n)}function SekindoTrackingEvents(e,t){if(this.events={},this.ad=t,null!==e){if("TrackingEvents"!==e.tagName){if(1!==(e=e.getElementsByTagName("TrackingEvents")).length)return;e=e.item(0)}for(var i=e.getElementsByTagName("Tracking"),n=0;n<i.length;n++){var s=i[n].getAttribute("event");if(s){var o=null;"progress"===s&&(s+="-"+(o=i[n].getAttribute("offset"))),this.events[s]=this.events[s]||[];var a={url:i[n].textContent.replace(/\s/g,""),offset:o,event:s};this.events[s].push(a)}}}}function SekindoVASTAds(e,t,i,n,s,o){function a(e){try{if(window.ActiveXObject){return e.xml}return(new XMLSerializer).serializeToString(e)}catch(e){return""}}this.onAdsAvailable=t;var r=e.getElementsByTagName("Ad");if(0!=r.length){this.ads||(this.ads=new Array);for(var l=0;l<r.length;l++){var d=new SekindoVASTAd(this,r.item(l),i||null);if(d.vastStr=a(e),!d.isEmpty()){if(n.demandDebug&&n.demandDebug.length>0)for(l=0;l<n.demandDebug.length;l++)try{if(d.vastStr&&-1!=d.vastStr.indexOf(n.demandDebug[l])||endoint&&-1!==o.indexOf(n.demandDebug[l])){var c="VAST keyword: "+n.demandDebug[l]+", VAST Url: "+String(o)+", VAST Response: "+String(d.vastStr);SekindoUtils.postLogMessage(c);break}}catch(e){}if(n.LogRest&&n.LogRest.performCall&&(d.reportDebugImpPixelId=Math.random(),d.debugWFManagerId=n.adsManager.currWaterfall.debugWFManagerId,n.LogRest.performCall("liveVideoWaterfall","AddVastData",[d.reportDebugImpPixelId,o,d.vastStr,"Vast-"+s.toString()],d.debugWFManagerId)),this.ads.push(d),!d.hasData()||d.hasSequence()&&!d.isNumber(1)){var h=r.item(l).getElementsByTagName("Wrapper").item(0),u=h.getElementsByTagName("VASTAdTagURI");if(0===u.length)continue;u=u.item(0).textContent.replace(/\s/g,"");var p;!function(e,t,i){p=function(n){if(e.onLoaded(n,t),i.onAdsAvailable){var s=i.onAdsAvailable;i.onAdsAvailable=null,s.call(i,i)}}}(d,"true"===h.getAttribute("allowMultipleAds"),this),SekindoQueryVAST(u,p,d,n,s+1)}else if(t){g=this.onAdsAvailable;this.onAdsAvailable=null,g.call(this,this)}}}}else if(t){var g=this.onAdsAvailable;this.onAdsAvailable=null,g.call(this,this)}}function SekindoVASTAd(e,t,i,n){this.vast=e,this.pod=e,this.parentAd=i,this.onAdAvailable=n,this.sequence=null,this.hasContent=!0,this.loaded=!0,this.linear=null,this.id=t.id,this.impressions=[],this.currentPodAd=this,this.sentImpression=!1,this.properties={};var s,o;if(null!==this.parentAd){var a=this.parentAd;this.linear=a.linear?a.linear.copy(this):null;for(o in a.properties)a.properties.hasOwnProperty(o)&&(this.properties[o]=a.properties[o])}t.hasAttribute("sequence")&&(this.sequence=parseInt(t.getAttribute("sequence"),10));var r=t.getElementsByTagName("InLine");if(0!==r.length||(this.loaded=!1,0!==(r=t.getElementsByTagName("Wrapper")).length)){for(var l=(r=r.item(0)).firstChild;null!==l;){if(1===l.nodeType)switch(l.tagName){case"Creatives":case"InLine":case"Wrapper":case"Impression":case"Extensions":case"VASTAdTagURI":case"Error":break;default:this.properties[l.tagName]=l.textContent.replace(/^\s*|\s*$/g,"")}l=l.nextSibling}var d=r.getElementsByTagName("Impression");for(s=0;s<d.length;s++)this.impressions.push(d.item(s).textContent.replace(/\s/g,""));var c=r.getElementsByTagName("Creatives");if(0!==c.length){for(c=c.item(0).getElementsByTagName("Creative"),s=0;s<c.length;s++){for(var h=c.item(s).firstChild;null!==h&&3===h.nodeType;)h=h.nextSibling;if(null!==h){var u;switch(h.tagName){case"Linear":u=new SekindoVASTLinear(this,h),this.linear?this.linear.augment(u):this.linear=u}}}this.linear&&(this.trackings=this.linear.tracking),this.parentAd&&this.parentAd.trackings&&(this.trackings?this.trackings.augment(this.parentAd.trackings):this.trackings=this.parentAd.trackings)}}else this.hasContent=!1}function SekindoVASTLinear(e,t){this.root=t,this.clickThrough=null,this.tracking=new SekindoTrackingEvents(t,e),this.mediaFiles=[],this.duration=null,this.adParameters=null;var i,n=t.getElementsByTagName("VideoClicks");if(n.length){var s=(n=n.item(0)).getElementsByTagName("ClickThrough");for(s.length&&(this.clickThrough=s.item(0).textContent.replace(/\s/g,"")),s=n.getElementsByTagName("ClickTracking"),i=0;i<s.length;i++)this.tracking.addClickTracking(s.item(i).textContent.replace(/\s/g,""))}var o=t.getElementsByTagName("Duration");o.length&&(this.duration=this.timecodeFromString(o.item(0).textContent.replace(/\s/g,"")));if(t.getElementsByTagName("AdParameters").length)try{string=[].map.call(t.getElementsByTagName("AdParameters"),function(e){return e.textContent||e.innerText||""}).join(""),this.adParameters=string}catch(e){this.adParameters=null}var a=t.getElementsByTagName("MediaFiles");if(a.length)for(a=a.item(0).getElementsByTagName("MediaFile"),i=0;i<a.length;i++){for(var r=a.item(i),l={},d=0;d<r.attributes.length;d++)l[r.attributes[d].name]=r.attributes[d].value;l.src=a.item(i).textContent.replace(/\s/g,""),this.mediaFiles.push(l)}}function SekindoPlaylistManager(e,t){var i=this;this.uniqueID=e,this.loaderTimeout=null,this.config=t,this.videoTitle="",this.contentPlayList=t.contentPlayList,this.index=0,this.config.fileId=this.contentPlayList[0]?this.contentPlayList[0].fileId:"0",this.config.playListId=this.contentPlayList[0]?this.contentPlayList[0].playListId:"0",this.playlistMultiplierIndex=0,this.failTimeout=null,this.accumulatedPausedTime=0,this.config.mobileVisibilityLock=!1,this.pauseInterval=null,this.contentPixelFiredMap=[],this.config.isFirstContent=!0,this.config.isFirstEngagementEvent=!0,this.generateVideoElement(),this.addViewabilityCallback(),this.config.isDesktop||(this.config.mobileVisibilityLock=!this.config.onVisibilityChange.getCurrState(),this.config.onVisibilityChange.addCallback(function(){i.config.onVisibilityChange.getCurrState()?(i.config.mobileVisibilityLock=!1,i.allowPlaying&&i.playerSimulator.paused&&i.playerSimulator.currDummyProgress>0?i.playerSimulator.play():i.allowPlaying&&i.videoElement&&i.videoElement.paused&&i.videoElement.play()):(i.config.mobileVisibilityLock=!0,i.playerSimulator.paused?i.videoElement.src&&3!=i.videoElement.networkState&&!i.videoElement.paused&&i.videoElement.pause():i.playerSimulator.pause())})),this.config.bus.addCallBack("fireContentPixel",function(e){i.fireContentPixel(e)}),this.config.bus.addCallBack("loadNextContentBG",function(e){i.loadNextContentBG(i.index)}),this.config.bus.addCallBack("loadSwitchedContentBG",function(){i.loadSwitchedContentBG()}),this.config.bus.triggerNote("playlistInited")}function SekindoPlayerSimulator(e,t){this.uniqueID=e,this.config=t,this.currDummyProgress=0,this.paused=!0,this.src="",this.networkState=0}function SekindoAudioObj(e,t){var i=this;this.uniqueID=e,this.config=t,this.muted=!0,this.audioSrc=null,this.jpgSeqObj=null,this.audioLock=!1,this.audioStatus="inited",this.audioElement=document.getElementById(e+"Audio"),this.audioElement.isMuted=!0,this.onErrorEvent=function(e){i.muted=!0,i.isPlayingAudio=!1,i.audioLock=!0},this.audioElement.addEventListener("error",this.onErrorEvent,!1),this.canplaythrough1=function(){if(i.audioSrc==i.audioElement.src&&"playing"!=i.audioStatus){i.audioStatus="canplaythrough",i.audioElement.currentTime=i.jpgSeqObj.currAnimTime;try{i.audioElement.play(),i.isPlayingAudio=!0,setTimeout(function(){try{i.audioElement.muted=!1}catch(e){}},500)}catch(e){console.log("rr"+e)}}},this.audioElement.addEventListener("canplaythrough",this.canplaythrough1,!1),this.playing1=function(){i.audioSrc==i.audioElement.src&&(i.isPlayingAudio||"playing"==i.audioStatus||(i.audioElement.currentTime=i.jpgSeqObj.currAnimTime,i.isPlayingAudio=!0,setTimeout(function(){try{i.audioElement.muted=!1}catch(e){}},500),i.dispatchEvent&&i.dispatchEvent("volumechange")),i.audioStatus="playing")},this.audioElement.addEventListener("playing",this.playing1,!1),this.pause1=function(){i.audioSrc==i.audioElement.src&&(i.audioStatus="pause",i.isPlayingAudio=!1,i.audioSrc==i.audioElement.src&&i.dispatchEvent&&i.dispatchEvent("volumechange"))},this.audioElement.addEventListener("pause",this.pause1,!1),this.ended1=function(){i.audioSrc==i.audioElement.src&&(i.audioStatus="ended",i.isPlayingAudio=!1,i.playRequest=!1)},this.audioElement.addEventListener("ended",this.ended1,!1),this.volumechange1=function(){i.audioSrc==i.audioElement.src&&i.dispatchEvent&&i.dispatchEvent("volumechange")},this.audioElement.addEventListener("volumechange",this.volumechange1,!1)}function SekindoVideoObj(e,t,i){return this.videoDiv=t.videoIFrameDoc.createElement("div"),this.uniqueID=e,this.vidUniqueID=e+Math.floor(1e5*Math.random()),this.config=t,this.audioObj=new SekindoAudioObj(this.uniqueID,this.config),this.mute=!0,this.eventListeners=new Array,this.interface=new SekindoVideoInterface(this.videoDiv),this.interface.audioObj=this.audioObj,this.interface.videoObj=this,this.autoplay=!0,this.videoDiv}function SekindoJpgSeqObj(e,t){this.uniqueID=e,this.config=t,this.W=this.config.videoWidth||this.config.width,this.H=this.config.videoHeight||this.config.height,this.dispatchEvent=null,this.audioSrc=this.config.dir+"/audio/audio.mp3",this.isPaused=!1,this.currDiv=null,this.nxtDiv=null,this.videoWidth=this.W,this.videoHeight=this.H,this.container=this.config.iframeDoc.createElement("div"),this.container.style.width=this.videoWidth+"px",this.container.style.height=this.videoHeight+"px",this.container.style.position="absolute",this.container.style.marginLeft="auto",this.container.style.marginRight="auto",this.container.style.textAlign="center",this.container.id="containerDiv",this.imagesLoaded=new Array,this.divsArray=new Array,this.totalDivs=2,this.buffer=3,this.buffered=0,this.audioObj=null,this.playingStatus="inited",this.progressStatus="inited",this.ended=!1,this.loop=!0,this.frameTimeStamp=null,this.pauseTimeStamp=null,this.currValidFrame=0,this.startTime=Date.now(),this.currTime=0,this.currFrame=0,this.currSequance=-1,this.currAnimTime=0}function SekindoDebugAgent(e,t){this.uniqueID=e,this.config=t,this.config.isTester=0,this.testsDashboardUrl="/debugTools/video/tests/dashboard.php",this.externalDebugWindowURL="/debugTools/video/onSiteDebugger/debugWindow.php",this.internalDebugWindowURL="/debugTools/video/onSiteDebugger/onSiteDebugger.js",this.configDebug=[],this.isDebuggerWindow=!1,this.isDebuggerWindowIn=!1,this.isDebuggerWindowConstructed=!1,this.msgQueue=[],this.testRunTime=30,this.testName="",this.earlyMessagesQ=[],window.primisLog=function(e){},this.setParamsFromWindow()}function SekindoUtils(){}function SekindoServices(){}function SekindoApi(e,t){var i=this,n={},s=-1,o=!1;this.callback=window.parent[e.vpApi].callback,e.bus.addCallBack("onApiEvent",function(e){"ready"==e&&setTimeout(function(){i.callback("ready",{player:n})},1)}),e.bus.addCallBack("adStarted",function(t){if("vpaid"==t.type)var o=setInterval(function(){var t=-1;if(e.adsManager&&e.adsManager.currAdUnit){var i=e.adsManager.currAdUnit;i.wrapper&&(t=i.wrapper.getAdRemainingTime())}t>1&&(s=t,clearInterval(o))},10);i.callback("impression",{player:n,revenue:t.rvn})}),e.bus.addCallBack("adCompleted",function(e){s=-1;var t=o?"skipped":"completed";i.callback(t,{player:n}),n.display(!1),o=!1}),e.bus.addCallBack("onVideoEvent",function(e){switch(e.type){case"volumechange":t.hadImpression&&"adUnit"==e.val.player&&i.callback("volumeChanged",{player:n,volume:e.val.volume,muted:e.val.muted});break;case"pause":i.callback("paused",{player:n});break;case"playing":"playing"==e.val&&i.callback("playing",{player:n})}}),e.bus.addCallBack("onVpaidEvent",function(e){switch(e.type){case"volumechange":t.hadImpression&&i.callback("volumeChanged",{player:n,volume:e.val.volume,muted:e.val.muted});break;case"paused":i.callback("paused",{player:n});break;case"playing":i.callback("playing",{player:n})}}),n.start=function(){e.bus.triggerNote("onApiEvent",{type:"start"})},n.stop=function(){e.bus.triggerNote("onApiEvent",{type:"stop"}),s=-1},n.pause=function(){e.bus.triggerNote("onApiEvent",{type:"pause"})},n.resume=function(){e.bus.triggerNote("onApiEvent",{type:"resume"})},n.skip=function(){o=!0,e.bus.triggerNote("onApiEvent",{type:"skip"}),s=-1},n.getCurrTime=function(){var t=-1;if(e.adsManager&&e.adsManager.currAdUnit){var i=e.adsManager.currAdUnit;i.wrapper&&s>-1?t=s-i.wrapper.getAdRemainingTime():i.videoElement&&(t=i.videoElement.currentTime)}return t},n.getDuration=function(){var t=-1;if(e.adsManager&&e.adsManager.currAdUnit){var i=e.adsManager.currAdUnit;i.wrapper&&s>-1?t=s:i.videoElement&&(t=i.videoElement.duration)}return t},n.setVolume=function(i){if(e.isMuted=i<=0,e.volume=Math.max(0,Math.min(1,i)),t.hadImpression&&e.adsManager&&e.adsManager.currAdUnit){var n=e.adsManager.currAdUnit;n.wrapper?(n.wrapper.setAdVolume(e.volume),n.videoElement&&(n.videoElement.muted=e.isMuted)):n.videoElement&&(n.videoElement.volume=e.volume,n.videoElement.muted=e.isMuted)}},n.display=function(e){e==t.isApiDisplay||e&&!t.hadImpression||(t.displayApi(e),i.callback("displayChange",{player:this,display:t.isApiDisplay}))}}function SekindoSPlayer(e,t){var i=this;if(this.config=e,this.config.sPlayer=this,this.uniqueID=t,this.config.uniqueID=t,this.adsManager=null,this.debugAgent=new SekindoDebugAgent(this.uniqueID,this.config),window.Sekindo&&window.Sekindo.LogRest&&(this.config.LogRest=window.Sekindo.LogRest),this.config.playbackMethod="auto",this.config.soundEnabledByUser=!1,this.config.isMuted=0!=parseInt(this.config.mute),this.config.isMuteControlled=!0,this.config.adIsPlaying=!1,this.config.isPlaying="0"!=this.config.isAutoPlay,this.config.flowWidth=this.config.flowWidth||310,this.config.flowHeight=this.config.flowHeight||260,"3"==this.config.isAutoPlay&&(this.config.hideBars=!0),this.config.pixelDivTimeout=6e4,this.config.dummyBaseHref="https://amli.sekindo.com/",this.config.ampView=window.ampView=-1,this.config.flowSkinWrap=!("flow"!=this.config.playerMode&&"sticky"!=this.config.playerMode||!this.config.flowSkinWrap||!this.config.flowSkinWrap.length)&&this.config.flowSkinWrap,this.config.prebidAdUnitCodes=[],window.isAmpProject=this.config.isAmpProject,this.config.enableSafeFrame="jpg"!=this.config.vidType&&(!!SekindoUtils.isFriendlyIframe()&&this.config.enableSafeFrame),this.config.responsive=this.config.responsive&&"sticky"!=this.config.playerMode&&"slider"!=this.config.playerMode&&"inRead"!=this.config.playerMode,this.config.nextContentIndex=0,this.config.isIvtHiddenPixelFired=!1,this.config.playerTemplateData.isLightBox=!(!this.config.playerTemplateData.isLightBox||"desktop"!=this.config.clientInfo.deviceType),this.config.flowZindex=this.config.playerTemplateData.isLightBox?2147483646:0,"inRead"!=this.config.playerMode&&"slider"!=this.config.playerMode||(this.config.playerTemplateData.hasPlaylist=!1),this.config.vpApi)var n=setInterval(function(){document&&document.readyState&&"complete"==document.readyState&&(i.constructIframes(),clearInterval(n))},100);else this.constructIframes()}SekindoSafeFrameWrapper=function(e,t,i){function n(e,t,i){if(o.safeFrame.contentWindow){var n={id:o.config.uniqueID,action:e,obj:t,params:i},s=JSON.stringify(n);o.safeFrame.contentWindow.postMessage(s,"*")}}function s(e){if(e.data&&e.data.indexOf&&-1!=e.data.indexOf(o.config.uniqueID)){var t=JSON.parse(e.data);if("get"==t.action){var i={};for(var s in t.params)i[t.params[s]]=o[t.obj][t.params[s]],n("set",t.obj,i)}else"func"==t.action&&o.parent[t.obj](t.params)}}var o=this;this.config=e,this.config.browser=this.config.clientInfo.extra.browser,this.params=t,this.parent=i,this.iFrameDoc=document,this.functionsList=["pauseAd","skipAd","stopAd","setAdVolume","startAd"],this.safeFrame=this.config.iframeDoc.createElement("iframe"),this.safeFrame.style.border="none",this.safeFrame.style.margin="0px",this.safeFrame.width=this.config.videoWidth,this.safeFrame.height=this.config.videoHeight,this.safeFrame.scrolling="no",this.safeFrame.id="sekindoVpaidSafeFrame",this.safeFrame.src=this.config.absolutePath+"/content/video/prob/safeFrame.php?uid="+this.config.uniqueID,this.params.environmentVars.slot.appendChild(this.safeFrame);for(var a=0;a<this.functionsList.length;a++)this[this.functionsList[a]]=function(){n("func",arguments.callee.id,arguments)},this[this.functionsList[a]].id=this.functionsList[a];this.resizeAd=function(e,t,i){this.safeFrame.width=e,this.safeFrame.height=t,n("func","resizeAd",arguments)},this.config.iframewindow.addEventListener("message",s),this.vp={},this.testInt=setInterval(function(){var e=SekindoUtils.getElementViewPct(o.config.windowsArray[0].frameElement,window.top);JSON.stringify(e)!=JSON.stringify(o.vp)&&(n("func","ViewPctChange",e),o.vp=e)},1e3),this.destruct=function(){clearInterval(o.testInt),n("func","destruct",""),o.config.iframewindow.removeEventListener("message",s),o.safeFrame&&o.safeFrame.parentNode&&o.safeFrame.parentNode.removeChild(o.safeFrame),SekindoUtils.deleteMe(o)}},SekindoVideoManager.prototype.generateVideoElement=function(){var e;if("jpg"==this.config.vidType)e=new SekindoVideoObj(this.config.uniqueID,this.config,this.config.audioObj),this.singleQualityPlayer=!0;else{e=this.config.videoIFrameDoc.createElement("video"),"iosWrapper"==this.config.vidType&&(this.iosVidWrapper=new SekindoServices.iosVidAutoplayWrapper(e));try{e.playsInline=!0}catch(e){}e.muted=!0,"Facebook"==this.config.clientInfo.extra.browser&&(e.poster="none",e.controls=!1)}return"desktop"==this.config.os&&"safari"!=this.config.clientInfo.browser||(this.singleQualityPlayer=!0),e},SekindoVideoManager.prototype.wrapVideoElement=function(){var e=this;this.videoElement.style.cssText=this.vidWrapper.style.cssText,this.vidWrapper.addEventListener=function(t,i){e.listenersArray.push({type:t,callback:i}),e.videoElement.addEventListener(t,i)},this.vidWrapper.removeEventListener=function(t,i){e.videoElement.removeEventListener(t,i)},this.vidWrapper.play=function(){var t=e.videoElement.play();if(t)try{t.then(function(){}).catch(function(e){})}catch(e){}},this.vidWrapper.pause=function(){e.videoElement.pause()}},SekindoVideoManager.prototype.setVideoSrc=function(e,t){if(this.isStreamingVideo=!(t.hlsUrl!=t.url),this.quality&&!this.isStreamingVideo||"hlsJs"!=this.config.hls&&"native"!=this.config.hls||!t.hlsUrl||!t.hlsUrl.length){this.config.debugHls&&window.primisLog&&window.primisLog("[Video] - Video type set to MP4. Reason: High Quality or no HLS url...");var i=t.url;this.quality&&-1!=i.indexOf("://"+this.config.videoDomain+"/uploads/")&&-1!=i.indexOf("/users/converted/")&&(i=i.replace("converted","origin")),e.src=i}else if("hlsJs"==this.config.hls)this.generateHlsSrcWrapper(e,t.hlsUrl,t.url);else{for(var n=e.getElementsByTagName("source");n.length>0;)e.removeChild(n[0]);var s=document.createElement("source");s.src=t.hlsUrl,s.type="application/x-mpegURL",e.appendChild(s),(s=document.createElement("source")).src=t.url,s.type="video/mp4",e.appendChild(s),e.load(),this.config.debugHls&&window.primisLog&&window.primisLog("[Video] - Video type set to HLS or MP4(Unknown...). Reason: Via native HLS/iOS")}},SekindoVideoManager.prototype.deleteHlsJs=function(){this.hlsJs.detachMedia(),this.hlsJs.destroy(),this.hlsJs.bufferTimer&&(clearInterval(this.hlsJs.bufferTimer),this.hlsJs.bufferTimer=void 0),delete this.hlsJs,this.hlsJs=null},SekindoVideoManager.prototype.removeNewVideoElement=function(){this.hlsJs&&this.hlsJs.media==this.newVideoElement&&this.deleteHlsJs(),this.newVideoElement.removeEventListener("timeupdate",this.syncPlayersTimeFunc),this.newVideoElement.pause(),this.newVideoElement.src="",this.newVideoElement.load(),this.vidWrapper.removeChild(this.newVideoElement),delete this.newVideoElement,this.newVideoElement=null},SekindoVideoManager.prototype.swapVideoElement=function(e){if(!this.singleQualityPlayer&&!this.isStreamingVideo&&this.quality!=e&&(this.quality=e,this.newVideoElement&&this.removeNewVideoElement(),this.runningQuality!=e&&this.vidSrc)){if(this.newVideoElement=this.generateVideoElement(),this.vidWrapper.appendChild(this.newVideoElement),this.quality){if(this.vidSrc.url.replace("converted","origin")==this.videoElement.src)return}this.vidWrapper.appendChild(this.newVideoElement),this.setVideoSrc(this.newVideoElement,this.vidSrc);var t=this.newVideoElement.play();if(t)try{t.then(function(){}).catch(function(e){})}catch(e){}this.newVideoElement.muted=!0;try{this.newVideoElement.currentTime=this.videoElement.currentTime+1}catch(e){}this.newVideoElement.addEventListener("timeupdate",this.syncPlayersTimeFunc)}},SekindoVideoManager.prototype.syncPlayersTime=function(){var e=this;if(this.newVideoElement){var t=this.videoElement.currentTime-this.newVideoElement.currentTime;if(Math.abs(t)>.5)try{this.newVideoElement.currentTime=this.videoElement.currentTime+t/2}catch(e){}else{this.newVideoElement.removeEventListener("timeupdate",this.syncPlayersTimeFunc);for(var i=0;i<this.listenersArray.length;i++){var n=this.listenersArray[i];this.videoElement.removeEventListener(n.type,n.callback)}this.videoElement.paused&&this.newVideoElement.pause(),this.newVideoElement.style.cssText=this.videoElement.style.cssText,this.newVideoElement.style.width="100%",this.newVideoElement.style.height="100%",this.newVideoElement.volume=this.videoElement.volume,this.newVideoElement.muted=this.videoElement.muted,setTimeout(function(){for(var t=0;t<e.listenersArray.length;t++){var i=e.listenersArray[t];e.videoElement.addEventListener(i.type,i.callback)}},1),this.videoElement.pause(),this.hlsJs&&this.hlsJs.media==this.videoElement&&this.deleteHlsJs(),this.vidWrapper.removeChild(this.videoElement),this.videoElement=this.newVideoElement,this.newVideoElement=null,this.wrapVideoElement(),this.runningQuality=this.quality}}},SekindoVideoManager.prototype.generateHlsSrcWrapper=function(e,t,i){var n=this;this.hlsJs&&this.deleteHlsJs();return this.hlsJs=new Hls({maxMaxBufferLength:30}),this.hlsJs.on(Hls.Events.ERROR,function(t,s){if(s.fatal)switch(s.type){case Hls.ErrorTypes.NETWORK_ERROR:n.hlsJs.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:n.hlsJs.recoverMediaError()}switch(s.details){case Hls.ErrorDetails.MANIFEST_LOAD_ERROR:case Hls.ErrorDetails.MANIFEST_LOAD_TIMEOUT:n.deleteHlsJs(),e.src=i,e.play(),n.config.debugHls&&window.primisLog&&window.primisLog("[Video] - Video type set to MP4. Reason: Fallback");s.response&&s.response.code+": "+s.response.text,SekindoUtils.firePixel(location.protocol+"//live.sekindo.com/live/liveView.php?hlsFb=1&vp_content="+encodeURIComponent(i))}}),this.hlsJs.attachMedia(e),this.hlsJs.loadSource(t),n.config.debugHls&&window.primisLog&&window.primisLog("[Video] - Video type set to HLS. Reason: Via HLS.js"),this.hlsJs},SekindoVideoManager.prototype.defineVidWrapperProperties=function(){var e=this;Object.defineProperty(this.vidWrapper,"width",{get:function(){return e.videoElement.width},set:function(t){e.videoElement.width=t}}),Object.defineProperty(this.vidWrapper,"height",{get:function(){return e.videoElement.height},set:function(t){e.videoElement.height=t}}),Object.defineProperty(this.vidWrapper,"src",{get:function(){return e.vidSrc},set:function(t){e.newVideoElement&&e.removeNewVideoElement(),e.vidSrc=t,e.setVideoSrc(e.videoElement,t)}}),Object.defineProperty(this.vidWrapper,"networkState",{get:function(){return e.videoElement.networkState}}),Object.defineProperty(this.vidWrapper,"paused",{get:function(){return e.videoElement.paused}}),Object.defineProperty(this.vidWrapper,"muted",{get:function(){return e.videoElement.muted},set:function(t){e.videoElement.muted=t}}),Object.defineProperty(this.vidWrapper,"volume",{get:function(){return e.videoElement.volume},set:function(t){e.videoElement.volume=t}}),Object.defineProperty(this.vidWrapper,"currentTime",{get:function(){return e.videoElement.currentTime},set:function(t){e.videoElement.currentTime=t}}),Object.defineProperty(this.vidWrapper,"duration",{get:function(){return e.videoElement.duration}}),Object.defineProperty(this.vidWrapper,"buffered",{get:function(){return e.videoElement.buffered}})},SlickSkin.prototype.constructView=function(){var e=this;this.videoDiv=this.config.videoIFrameDoc.createElement("div"),this.videoDiv.style.width="100%",this.videoDiv.style.height="100%",this.videoDiv.style.background="black",this.videoDiv.id="videoContainerDiv",this.videoDiv.style.position="relative",this.videoDiv.style.zIndex=1,this.config.videoIFrameDoc.body.appendChild(this.videoDiv),this.skinDiv=this.config.videoIFrameDoc.createElement("div"),this.skinDiv.style.width="100%",this.skinDiv.style.height="100%",this.skinDiv.style.position="absolute",this.skinDiv.style.display="inline-block",this.skinDiv.style.zIndex=2,this.skinDiv.style.top="0px",this.skinDiv.style.left="0px",this.skinDiv.id="skinContainerDiv",this.config.videoIFrameDoc.body.appendChild(this.skinDiv),this.adDiv=this.config.videoIFrameDoc.createElement("div"),this.adDiv.style.width="auto",this.adDiv.style.height="auto",this.adDiv.style.position="absolute",this.adDiv.style.marginLeft="auto",this.adDiv.style.marginRight="auto",this.adDiv.style.marginTop="auto",this.adDiv.style.marginBottom="auto",this.adDiv.style.display="block",this.adDiv.style.zIndex=3,this.adDiv.style.top="0px",this.adDiv.id="adContainerDiv",this.config.videoIFrameDoc.body.appendChild(this.adDiv),this.config.bus.addCallBack("addChild",function(t){e.addChilds(t)})},SlickSkin.prototype.addChilds=function(e){switch(e.destiny){case"video":this.videoDiv.appendChild(e.visual);break;case"skin":this.skinDiv.appendChild(e.visual);break;case"videoAd":this.adDiv.appendChild(e.visual)}},SlickSkin.prototype.removeChilds=function(e){var t;switch(e.destiny){case"video":t=this.videoDiv;break;case"skin":t=this.skinDiv;break;case"videoAd":t=this.adDiv}if(e.visual)try{t.removeChild(e.visual)}catch(e){}else try{for(;t.firstChild;)t.removeChild(t.firstChild)}catch(e){}},SlickSkin.prototype.constructSkin=function(){function e(e,t,i){if(e.data){var n=(n=e.data.replace('fill="'+t+'"','fill="'+i+'"')).replace('stroke="'+t+'"','stroke="'+i+'"');e.icon.innerHTML=n}}var t=this,i=this.skin.ownerDocument.getElementsByTagName("head")[0],n=this.skin.ownerDocument.createElement("link");n.rel="stylesheet",n.type="text/css",n.href="https://fonts.googleapis.com/css?family=Roboto",i.appendChild(n)
;var s='<svg version="1.1" id="Layer_2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"    width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path fill-rule="evenodd" clip-rule="evenodd" fill-opacity="0.5961" d="M23.5,6.5v11.1c0,3.934-1.967,5.9-5.9,5.9H6.5    c-3.967,0-5.95-1.967-5.95-5.9V6.5c0-3.967,1.983-5.95,5.95-5.95h11.1C21.533,0.55,23.5,2.533,23.5,6.5z M17.65,6.45l-5.601,5.6    l5.601,5.601L12.05,12.05L17.65,6.45z M6.45,17.65l5.6-5.601l-5.6-5.6l5.6,5.6L6.45,17.65z"/><path fill-rule="evenodd" clip-rule="evenodd" fill="none" id="closeBtnWhiteFrame" stroke="#FFFFFE" stroke-width="2" opacity="0" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="3" d="    M23.5,6.5c0-3.967-1.967-5.95-5.9-5.95H6.5c-3.967,0-5.95,1.983-5.95,5.95v11.1c0,3.934,1.983,5.9,5.95,5.9h11.1    c3.934,0,5.9-1.967,5.9-5.9V6.5z"/><path fill-rule="evenodd" clip-rule="evenodd" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="3" d="    M17.65,6.45l-5.601,5.6l5.601,5.601 M6.45,17.65l5.6-5.601l-5.6-5.6"/></svg>',o='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t width="100px" height="18px" viewBox="0 0 100 18" enable-background="new 0 0 100 18" xml:space="preserve"><g id="Play--Copy" transform="translate(-'+(-1!=this.config.os.indexOf("ios")?30:36)+', -4.400000) scale(1.2)"><path fill-rule="evenodd" clip-rule="evenodd" fill="'+this.designColor.toUpperCase()+'" d="M103.611,9.386c-0.14-0.136-0.21-0.3-0.211-0.494\tc0.001-0.193,0.071-0.357,0.211-0.494c0.136-0.139,0.301-0.209,0.494-0.211c0.192,0.002,0.357,0.072,0.493,0.211L108.3,12.1\tc0.139,0.138,0.209,0.302,0.212,0.494c0.004,0.191-0.062,0.355-0.194,0.493l-3.701,3.702c-0.142,0.138-0.312,0.209-0.511,0.211\tc-0.192,0.005-0.356-0.06-0.494-0.194c-0.139-0.141-0.21-0.312-0.211-0.511c-0.005-0.191,0.06-0.355,0.193-0.493l3.226-3.208\tL103.611,9.386z"/></g><text><tspan x="0" y="15" style="-moz-user-select: none; -webkit-user-select: none; -ms-user-select:none; user-select:none;-o-user-select:none;" fill="'+this.designColor.toUpperCase()+'" font-family="Roboto" font-size="12" font-weight="bold">'+this.config.playerTemplateData.goToArticleText.toUpperCase()+"</tspan></text></svg>",a='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t width="200px" height="18px" viewBox="0 0 200 18" enable-background="new 0 0 200 18" xml:space="preserve"><text><tspan x="0" y="15" style="-moz-user-select: none; -webkit-user-select: none; -ms-user-select:none; user-select:none;-o-user-select:none;" fill="'+this.designColor.toUpperCase()+'" font-family="Roboto" font-size="12" font-weight="bold">'+this.config.playerTemplateData.goToArticleText.toUpperCase()+"</tspan></text></svg>";this.gradiantBg=document.createElement("div"),this.gradiantBg.style.width="100%",this.gradiantBg.style.height="100%",this.gradiantBg.style.background="-webkit-linear-gradient(rgba(0,0,0,1), rgba(0,0,0,0))",this.gradiantBg.style.background="-o-linear-gradient( rgba(0,0,0,1), rgba(0,0,0,0))",this.gradiantBg.style.background="-moz-linear-gradient( rgba(0,0,0,1), rgba(0,0,0,0))",this.gradiantBg.style.background="linear-gradient( rgba(0,0,0,1), rgba(0,0,0,0))",this.gradiantBg.style.opacity=this.opacityInit,this.gradiantBg.style.visibility="visible",this.gradiantBg.active=!0,"0"==this.opacityInit&&"desktop"!=this.config.os&&(this.gradiantBg.style.display="none"),this.config.playerTemplateData.goToArticleText&&"GO TO ARTICLE"!=this.config.playerTemplateData.goToArticleText.toUpperCase()&&(o=a),this.gradiantBg.style.cursor="pointer",this.skin.appendChild(this.gradiantBg),this.addIcon=function(i,n,s,o){var a,r=document.createElement("div");r.id=i,r.style.cursor="pointer",r.style.visibility="visible";for(var l in o)r.style[l]=o[l];return a=document.createElement("div"),a.innerHTML=s,a.style.pointerEvents="none",r.data=s,r.icon=a,r.active=-1!=t.activeButtons.indexOf(i),r.addEventListener("mouseover",function(i){i.preventDefault(),"muteIcon"!=this.id&&"volumeIcon"!=this.id&&"primisLogo"!=this.id&&e(this,"#FFFFFF",t.designColor),"volume"==this.id&&(t.volumeScrabber.style.display="block")}),r.addEventListener("mouseout",function(i){i.preventDefault(),"muteIcon"!=this.id&&"volumeIcon"!=this.id&&"primisLogo"!=this.id&&e(this,t.designColor,"#FFFFFF"),"volume"==this.id&&(t.volumeScrabber.style.display="none")}),r.appendChild(a),(r.active||"pauseBtn"==i||"playBtn"==i)&&n.appendChild(r),r},this.closeBtn=this.addIcon("closeBtn",this.config.mainVideoDiv,s,{opacity:this.opacityInit,display:"block",position:"absolute",zIndex:11,right:this.rightMerge,top:this.iconsTop+this.iconsTopGap+"px"}),this.lightBoxCloseBtn=this.addIcon("lightBoxCloseBtn",this.config.mainVideoDiv,s,{opacity:this.opacityInit,display:"block",position:"absolute",zIndex:11,right:this.rightMerge,top:this.iconsTop+this.iconsTopGap+"px"}),this.primisLogo=this.addIcon("primisLogo",this.skin,'<div id="pl1" style=" height: 15px; width: 6px;  position:absolute; top:0; left:0; "><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t viewBox="0 0 121.4 228.7" style="enable-background:new 0 0 121.4 228.7;" xml:space="preserve"><style type="text/css">\t.stlp0{fill:#FF3E5F;}</style><path class="stlp0" d="M81.9,195L75,228.8H0L46.5,0h74.9l-6.9,33.8H77.3L44.6,195H81.9z"/></svg></div><div id="primisLogoTxt" style="overflow:hidden; margin-right: 5px; position: relative; height:15px;"><div id="pl2" style=" height: 15px; width: 37px;  position:absolute; top:0; left:0;"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t viewBox="0 0 762.6 228.7" style="enable-background:new 0 0 762.6 228.7;" xml:space="preserve"><style type="text/css">\t.st1{fill:#fffffe;}</style><path class="st1" d="M154.2,195H115l29.8-146.3H184l-2.4,11.5c5.4-7.8,16-12.8,29-12.8c24,0,47.4,18.8,47.4,49.4\tc0,34.9-30.8,62.4-61.9,62.4c-16.5,0-29.5-5-32-12.8L154.2,195z M192.2,124.1c13.6,0,24.5-10.8,24.5-22.7c0-11-8.5-18.8-20.6-18.8\tc-14.3,0-24.7,11-24.7,22.5C171.4,116,179.9,124.1,192.2,124.1L192.2,124.1z"/><path class="st1" d="M280.2,48.7h40.1l-2.8,13.4c8.7-12.1,18.2-16,29.9-16c4.4,0,8.9,0.4,13.2,1.2L353.4,83\tc-4.7-0.8-9.5-1.1-14.3-1.1c-17.3,0-27.9,12.6-32.3,33.1l-8.9,42.7h-40.1L280.2,48.7z"/><path class="st1" d="M374.9,48.7H415l-22.3,109.1h-40.1L374.9,48.7z M377.7,24c0-12.6,10.8-24,24.5-24c12.1,0,20.6,8.5,20.6,19.9\tc0,12.1-10.4,23.8-24.5,23.8C386.1,43.7,377.7,35.5,377.7,24L377.7,24z"/><path class="st1" d="M430.8,48.7h40.1l-2.8,13.4c8-12.1,17.1-16,27.9-16c14.3,0,24.9,6.3,29.2,16.9c9.3-11,23.1-17.2,37.4-16.9\tc21.4,0,33.6,14.1,33.6,36.2c0,3.6-0.4,7.3-1.1,10.8l-13.4,64.8h-40.1l12.3-61.1c0.2-1.4,0.4-2.9,0.4-4.3c0-7.6-3.7-12.1-10.6-12.1\tc-8.7,0-14.3,7.4-16.5,18L514.9,158H475l12.3-61.1c0.2-1.4,0.4-2.9,0.4-4.3c0-7.6-3.7-12.1-10.6-12.1c-8.7,0-14.3,6.9-16.5,17.5\tl-12.1,60h-40.1L430.8,48.7z"/><path class="st1" d="M619.7,48.7h40.1l-22.3,109.2h-40.1L619.7,48.7z M622.5,24c0-12.6,10.8-24,24.5-24c12.1,0,20.6,8.5,20.6,19.9\tc0,12.1-10.4,23.8-24.5,23.8C631,43.7,622.5,35.5,622.5,24z"/><path class="st1" d="M676.1,116.7c7.4,8.7,18.4,10.8,29.9,10.8c9.5,0,12.8-2.4,12.8-5.2c0-4.8-18.4-3.9-32.9-11\tc-11.5-5.6-17.5-14.5-17.5-26.9c0-21,20.6-39,48.9-39c16.6-0.1,32.7,5.8,45.3,16.7l-20.1,25.3c-7.4-6.7-17.1-10.4-27.1-10.4\tc-7.6,0-10.4,2.8-10.4,5.6c0,5.2,15.2,4.8,33.3,11.9c14.3,5.6,18,16.2,18,27.1c0,24.5-18.8,39.4-54.6,39.4\tc-22.7,0-40.1-7.4-50.7-19.7L676.1,116.7z"/></svg></div></div><div id="pl3" style=" height: 15px; width: 6px;  position:absolute; top:0; right:0; "><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t viewBox="0 0 121.5 228.7" style="enable-background:new 0 0 121.5 228.7;" xml:space="preserve"><style type="text/css">\t.st2{fill:#FF3E5F;}</style><path class="st2" d="M39.6,33.7L46.5,0h74.9L75,228.7H0L7,195h37.3L76.9,33.8L39.6,33.7z"/></svg></div>',{height:"15px",width:"12px",overflow:"hidden",opacity:1,display:"block",position:"absolute",zIndex:11,right:this.rightMerge,top:this.iconsTop+this.iconsTopGap+"px"}),this.infoBtn=this.addIcon("infoBtn",this.skin,'<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"> \x3c!-- Generator: Sketch 46.2 (44496) - https://www.bohemiancoding.com/sketch --\x3e<title>Info</title> <desc>Created with Sketch.</desc> <defs></defs> <g id="behavior" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Play-" transform="translate(-1324.000000, -354.000000)" fill="#FFFFFF"><g id="Group" transform="translate(560.000000, 334.000000)"><g transform="translate(-767.000000, -24.000000)" id="Icons"><g transform="translate(1531.000000, 44.000000)"><path d="M12,22 C6.478,22 2,17.523 2,12 C2,6.478 6.478,2 12,2 C17.522,2 22,6.478 22,12 C22,17.523 17.522,22 12,22 Z M12,0 C5.373,0 0,5.373 0,12 C0,18.627 5.373,24 12,24 C18.627,24 24,18.627 24,12 C24,5.373 18.627,0 12,0 Z M12,6 L12,6 L12,6 C12.8284271,6 13.5,6.67157288 13.5,7.5 L13.5,7.5 L13.5,7.5 C13.5,8.32842712 12.8284271,9 12,9 L12,9 L12,9 C11.1715729,9 10.5,8.32842712 10.5,7.5 L10.5,7.5 L10.5,7.5 C10.5,6.67157288 11.1715729,6 12,6 Z M12,10 L12,10 L12,10 C12.5522847,10 13,10.4477153 13,11 L13,18 L13,18 C13,18.5522847 12.5522847,19 12,19 L12,19 L12,19 C11.4477153,19 11,18.5522847 11,18 L11,11 L11,11 C11,10.4477153 11.4477153,10 12,10 Z" id="Info"></path></g></g></g></g> </g> </svg>',{opacity:this.opacityInit,position:"absolute",zIndex:1,right:this.rightMerge,top:this.iconsTop+this.iconsTopGap+"px"}),this.shareBtn=this.addIcon("shareBtn",this.skin,'<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">        \x3c!-- Generator: Sketch 46.2 (44496) - https://www.bohemiancoding.com/sketch --\x3e<title>Share</title><desc>Created with Sketch.</desc><defs></defs><g id="behavior" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Play-" transform="translate(-1324.000000, -398.000000)" fill="#FFFFFF">    <g id="Group" transform="translate(560.000000, 334.000000)">        <g transform="translate(-767.000000, -24.000000)" id="Icons">            <g transform="translate(1531.000000, 44.000000)">                <path d="M20,66 C18.896,66 18,65.105 18,64 C18,62.896 18.896,62 20,62 C21.104,62 22,62.896 22,64 C22,65.105 21.104,66 20,66 Z M4,58 C2.896,58 2,57.105 2,56 C2,54.896 2.896,54 4,54 C5.104,54 6,54.896 6,56 C6,57.105 5.104,58 4,58 Z M20,46 C21.104,46 22,46.896 22,48 C22,49.105 21.104,50 20,50 C18.896,50 18,49.105 18,48 C18,46.896 18.896,46 20,46 Z M20,60 C18.798,60 17.731,60.542 16.999,61.381 L7.909,56.837 C7.967,56.567 8,56.287 8,56 C8,55.713 7.967,55.434 7.909,55.163 L16.999,50.62 C17.731,51.458 18.798,52 20,52 C22.209,52 24,50.209 24,48 C24,45.791 22.209,44 20,44 C17.791,44 16,45.791 16,48 C16,48.287 16.033,48.567 16.091,48.837 L7.001,53.381 C6.269,52.541 5.202,52 4,52 C1.791,52 0,53.791 0,56 C0,58.209 1.791,60 4,60 C5.202,60 6.269,59.458 7.001,58.62 L16.091,63.163 C16.033,63.434 16,63.713 16,64 C16,66.209 17.791,68 20,68 C22.209,68 24,66.209 24,64 C24,61.791 22.209,60 20,60 L20,60 Z" id="Share"></path>            </g>        </g>    </g></g></g></svg>',{opacity:this.opacityInit,position:"absolute",zIndex:1,right:this.rightMerge,top:this.iconsTop+this.iconsTopGap+"px"}),this.playlistBtn=this.addIcon("playlistBtn",this.skin,'<svg width="24px" height="22px" viewBox="0 0 24 22" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">        \x3c!-- Generator: Sketch 46.2 (44496) - https://www.bohemiancoding.com/sketch --\x3e<title>Playlist</title><desc>Created with Sketch.</desc><defs></defs><g id="behavior" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="pause-movie" transform="translate(-1324.000000, -443.000000)" fill="#FFFFFF">    <g id="Group" transform="translate(560.000000, 334.000000)">        <g transform="translate(-347.000000, -131.000000)" id="Icons">            <g transform="translate(1111.000000, 151.000000)">                <path d="M23,89 L1,89 C0.447,89 0,89.447 0,90 C0,90.553 0.447,91 1,91 L23,91 C23.553,91 24,90.553 24,90 C24,89.447 23.553,89 23,89 Z M19,109 L17,109 C16.447,109 16,108.553 16,108 C16,107.447 16.447,107 17,107 L19,107 C19.553,107 20,107.447 20,108 C20,108.553 19.553,109 19,109 Z M21,93 C20.447,93 20,93.447 20,94 L20,105.184 C19.686,105.072 19.353,105 19,105 L17,105 C15.343,105 14,106.343 14,108 C14,109.657 15.343,111 17,111 L19,111 C20.657,111 22,109.657 22,108 L22,94 C22,93.447 21.553,93 21,93 Z M1,103 L17,103 C17.553,103 18,102.553 18,102 C18,101.447 17.553,101 17,101 L1,101 C0.447,101 0,101.447 0,102 C0,102.553 0.447,103 1,103 Z M11,107 L1,107 C0.447,107 0,107.447 0,108 C0,108.553 0.447,109 1,109 L11,109 C11.553,109 12,108.553 12,108 C12,107.447 11.553,107 11,107 Z M1,97 L17,97 C17.553,97 18,96.553 18,96 C18,95.447 17.553,95 17,95 L1,95 C0.447,95 0,95.447 0,96 C0,96.553 0.447,97 1,97 L1,97 Z" id="Playlist"></path>            </g>        </g>    </g></g></g></svg>',{opacity:this.opacityInit,position:"absolute",zIndex:1,right:this.rightMerge,top:this.iconsTop+this.iconsTopGap+"px"}),this.volumeIcon=this.addIcon("volumeIcon",this.skin,'<svg width="24px" height="18px" viewBox="0 0 24 18" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">        \x3c!-- Generator: Sketch 46.2 (44496) - https://www.bohemiancoding.com/sketch --\x3e<title>Volume</title><desc>Created with Sketch.</desc><defs></defs><g id="behavior" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Play-" transform="translate(-1325.000000, -492.000000)" fill="#FFFFFF">    <g id="Group" transform="translate(560.000000, 334.000000)">        <g transform="translate(-767.000000, -24.000000)" id="Icons">            <g transform="translate(1531.000000, 44.000000)">                <path d="M21.704,138.265 L21.688,138.28 C21.509,138.108 21.268,138 21,138 C20.447,138 20,138.447 20,139 C20,139.3 20.138,139.561 20.347,139.743 C22.116,141.554 23,144.27 23,147 C23,149.762 22.1,152.48 20.29,154.29 L20.293,154.293 C20.112,154.474 20,154.724 20,155 C20,155.553 20.447,156 21,156 C21.288,156 21.543,155.875 21.726,155.68 C23.882,153.509 25,150.302 25,147 C25,143.687 23.876,140.437 21.704,138.265 Z M18.73,141.328 C18.548,141.129 18.291,141 18,141 C17.447,141 17,141.447 17,142 C17,142.268 17.108,142.509 17.28,142.688 L17.273,142.695 C18.359,143.78 19,145.343 19,147 C19,148.657 18.359,150.188 17.273,151.273 L17.293,151.293 C17.112,151.474 17,151.724 17,152 C17,152.553 17.447,153 18,153 C18.345,153 18.633,152.814 18.813,152.55 C20.183,151.112 21,149.143 21,147 C21,144.813 20.151,142.773 18.73,141.328 Z M15.729,144.325 C15.547,144.128 15.29,144 15,144 C14.447,144 14,144.447 14,145 C14,145.276 14.112,145.526 14.293,145.707 L14.289,145.711 C14.651,146.072 15,146.447 15,147 C15,147.553 14.651,147.928 14.289,148.289 L14.293,148.293 C14.112,148.474 14,148.724 14,149 C14,149.553 14.447,150 15,150 C15.29,150 15.547,149.872 15.729,149.675 C16.439,148.956 17,148.091 17,147 C17,145.909 16.439,145.044 15.729,144.325 Z M10,151.233 L6.515,149.143 L6.506,149.157 C6.355,149.066 6.188,149 6,149 L3,149 L3,145 L6,145 C6.188,145 6.355,144.934 6.506,144.843 L6.515,144.857 L10,142.767 L10,151.233 Z M11,140 C10.812,140 10.645,140.066 10.494,140.157 L10.485,140.143 L5.723,143 L2,143 C1.447,143 1,143.447 1,144 L1,150 C1,150.553 1.447,151 2,151 L5.723,151 L10.485,153.857 L10.494,153.843 C10.645,153.934 10.812,154 11,154 C11.553,154 12,153.553 12,153 L12,141 C12,140.447 11.553,140 11,140 L11,140 Z" id="Volume"></path>            </g>        </g>    </g></g></g></svg>',{display:this.config.isMuted?"none":"block",position:"absolute",zIndex:11,right:"0px",top:"2px"}),this.muteIcon=this.addIcon("muteIcon",this.skin,'<svg width="23px" height="14px" viewBox="0 0 23 14" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">                 \x3c!-- Generator: Sketch 46.2 (44496) - https://www.bohemiancoding.com/sketch --\x3e        <title>Mute</title>        <desc>Created with Sketch.</desc>        <defs></defs>        <g id="behavior" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="click-on-a-timline-spot-copy" transform="translate(-1325.000000, -494.000000)" fill="#FFFFFF">            <g id="Group" transform="translate(560.000000, 334.000000)">                <g transform="translate(-347.000000, -131.000000)" id="Icons">                    <g transform="translate(1111.000000, 151.000000)">                        <path d="M10,151.233 L6.515,149.143 L6.506,149.157 C6.355,149.066 6.188,149 6,149 L3,149 L3,145 L6,145 C6.188,145 6.355,144.934 6.506,144.843 L6.515,144.857 L10,142.767 L10,151.233 Z M19.0201259,145.578797 L16.6329584,143.191629 L16.6329584,143.191629 C16.2424341,142.801105 15.6092691,142.801105 15.2187448,143.191629 L15.2187448,143.191629 L15.2187448,143.191629 C14.8282205,143.582153 14.8282205,144.215318 15.2187448,144.605843 L17.6059123,146.99301 L15.2187448,149.380178 C14.8282205,149.770702 14.8282205,150.403867 15.2187448,150.794391 C15.6092691,151.184915 16.2424341,151.184915 16.6329584,150.794391 L19.0201259,148.407224 L21.4072933,150.794391 C21.7978176,151.184915 22.4309826,151.184915 22.8215069,150.794391 C23.2120312,150.403867 23.2120312,149.770702 22.8215069,149.380178 L20.4343394,146.99301 L22.8215069,144.605843 C23.2120312,144.215318 23.2120312,143.582153 22.8215069,143.191629 C22.4309826,142.801105 21.7978176,142.801105 21.4072933,143.191629 L19.0201259,145.578797 Z M11,140 C11.553,140 12,140.447 12,141 L12,153 C12,153.553 11.553,154 11,154 C10.812,154 10.645,153.934 10.494,153.843 L10.485,153.857 L5.723,151 L2,151 C1.447,151 1,150.553 1,150 L1,144 C1,143.447 1.447,143 2,143 L5.723,143 L10.485,140.143 L10.494,140.157 C10.645,140.066 10.812,140 11,140 Z" id="Mute"></path>                    </g>                </g>            </g>        </g>        </g>        </svg>',{display:this.config.isMuted?"block":"none",position:"absolute",zIndex:11,right:"1px",top:"2px"}),this.pauseBtn=this.addIcon("pauseBtn",this.skin,'<svg version="1.1" id="Layer_1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink" x="0px" y="0px"    width="79px" height="79px" viewBox="0 0 79 79" enable-background="new 0 0 79 79" xml:space="preserve"><title>Set1_Pause_small_Hover</title><desc>Created with Sketch.</desc><g id="Fragments" opacity="0.8" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Style-Guide" transform="translate(-515.000000, -269.000000)"><g id="Icons" transform="translate(289.000000, 163.000000)"><g id="Icons_Set1_Hover" transform="translate(0.000000, 89.000000)"><path id="Set1_Pause_small_Hover" fill="#FFFFFF" d="M285.25,56.5c0,10.908-8.842,19.75-19.75,19.75s-19.75-8.842-19.75-19.75    s8.842-19.75,19.75-19.75S285.25,45.592,285.25,56.5z M262.944,61.702h-1.449c-0.798,0-1.45-0.652-1.45-1.45v-8.701    c0-0.797,0.652-1.449,1.45-1.449h1.449c0.798,0,1.451,0.652,1.451,1.449v8.701C264.396,61.05,263.742,61.702,262.944,61.702z    M269.505,61.702h-1.449c-0.798,0-1.451-0.652-1.451-1.45v-8.701c0-0.797,0.653-1.449,1.451-1.449h1.449    c0.798,0,1.45,0.652,1.45,1.449v8.701C270.955,61.05,270.303,61.702,269.505,61.702z"/></g></g></g></g></svg>',{opacity:this.opacityInit,display:"none",position:"absolute",zIndex:11,left:"50%",top:"50%",transform:"translate(-50%, -50%)",webkitTransform:"translate(-50%, -50%)"}),this.playBtn=this.addIcon("playBtn",this.skin,'<svg version="1.1" id="Layer_1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink" x="0px" y="0px"    width="79px" height="79px" viewBox="0 0 79 79" enable-background="new 0 0 79 79" xml:space="preserve"><title>Play</title><desc>Created with Sketch.</desc><g id="behavior" opacity="0.8"><g id="Play--Copy" transform="translate(-921.000000, -473.000000)"><g id="Group" transform="translate(560.000000, 286.000000)"><g id="Play" transform="translate(361.000000, 187.000000)" fill="#FFFFFF"><path id="Combined-Shape" d="M59.25,39.5c0,10.908-8.842,19.75-19.75,19.75S19.75,50.408,19.75,39.5s8.842-19.75,19.75-19.75    S59.25,28.592,59.25,39.5z M45.577,39.5l-9.116-6.077v12.154L45.577,39.5z"/></g></g></g></g></svg>',{opacity:this.opacityInit,display:"1"==this.config.isAutoPlay?"none":"block",position:"absolute",zIndex:11,left:"50%",top:"50%",transform:"translate(-50%, -50%)",webkitTransform:"translate(-50%, -50%)"}),this.nextBtn=this.addIcon("nextBtn",this.skin,'<svg  xmlns="http://www.w3.org/2000/svg" width="25" height="26" viewBox="0 0 25 26"><g opacity="0.8" fill="none" fill-rule="evenodd" transform="translate(0 .527)"><ellipse cx="12.5" cy="12.545" fill="#FFFFFF" fill-rule="nonzero" rx="12.5" ry="12.545"/><path stroke="#000" stroke-linecap="round" d="M10 8.029l5.455 5.018L10 18.065"/></g></svg>',{opacity:this.opacityInit,display:"block",position:"absolute",zIndex:11,left:"calc(50% + 40px)",top:"50%",transform:"translate(-50%, -50%)",webkitTransform:"translate(-50%, -50%)"}),this.backBtn=this.addIcon("backBtn",this.skin,'<svg  xmlns="http://www.w3.org/2000/svg" width="25" height="26" viewBox="0 0 25 26"><g opacity="0.8" fill="none" fill-rule="evenodd" transform="matrix(-1 0 0 1 25 .527)"><ellipse cx="12.5" cy="12.545" fill="#FFFFFF" fill-rule="nonzero" rx="12.5" ry="12.545"/><path stroke="#000" stroke-linecap="round" d="M11 8.029l5.455 5.018L11 18.065"/></g></svg>',{opacity:this.opacityInit,display:"block",position:"absolute",zIndex:11,left:"calc(50% - 40px)",top:"50%",transform:"translate(-50%, -50%)",webkitTransform:"translate(-50%, -50%)"}),this.fullScreenBtn=this.addIcon("fullScreenBtn",this.skin,'<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"> \x3c!-- Generator: Sketch 46.2 (44496) - https://www.bohemiancoding.com/sketch --\x3e<title>Full screen</title> <desc>Created with Sketch.</desc> <defs></defs> <g id="behavior" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Play-" transform="translate(-1324.000000, -735.000000)" fill="#FFFFFF"><g id="Group" transform="translate(560.000000, 334.000000)"><g transform="translate(-767.000000, -24.000000)" id="Icons"><g transform="translate(1531.000000, 44.000000)"><path d="M23,381 L17,381 C16.447,381 16,381.447 16,382 C16,382.553 16.447,383 17,383 L22,383 L22,388 C22,388.553 22.447,389 23,389 C23.553,389 24,388.553 24,388 L24,382 C24,381.447 23.553,381 23,381 Z M23,397 C22.447,397 22,397.447 22,398 L22,403 L17,403 C16.447,403 16,403.447 16,404 C16,404.553 16.447,405 17,405 L23,405 C23.553,405 24,404.553 24,404 L24,398 C24,397.447 23.553,397 23,397 Z M7,403 L2,403 L2,398 C2,397.447 1.553,397 1,397 C0.447,397 0,397.447 0,398 L0,404 C0,404.553 0.447,405 1,405 L7,405 C7.553,405 8,404.553 8,404 C8,403.447 7.553,403 7,403 Z M7,381 L1,381 C0.447,381 0,381.447 0,382 L0,388 C0,388.553 0.447,389 1,389 C1.553,389 2,388.553 2,388 L2,383 L7,383 C7.553,383 8,382.553 8,382 C8,381.447 7.553,381 7,381 L7,381 Z" id="Full-screen"></path></g></g></g></g> </g> </svg>',{opacity:this.opacityInit,display:"block",position:"absolute",zIndex:11,right:this.rightMerge,bottom:this.bottomMerge}),this.lightBoxBtn=this.addIcon("lightBoxBtn",this.skin,'<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"> \x3c!-- Generator: Sketch 46.2 (44496) - https://www.bohemiancoding.com/sketch --\x3e<title>Light box</title> <desc>Created with Sketch.</desc> <defs></defs> <g id="behavior" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Play-" transform="translate(-1324.000000, -735.000000)" fill="#FFFFFF"><g id="Group" transform="translate(560.000000, 334.000000)"><g transform="translate(-767.000000, -24.000000)" id="Icons"><g transform="translate(1531.000000, 44.000000)"><path d="M23,381 L17,381 C16.447,381 16,381.447 16,382 C16,382.553 16.447,383 17,383 L22,383 L22,388 C22,388.553 22.447,389 23,389 C23.553,389 24,388.553 24,388 L24,382 C24,381.447 23.553,381 23,381 Z M23,397 C22.447,397 22,397.447 22,398 L22,403 L17,403 C16.447,403 16,403.447 16,404 C16,404.553 16.447,405 17,405 L23,405 C23.553,405 24,404.553 24,404 L24,398 C24,397.447 23.553,397 23,397 Z M7,403 L2,403 L2,398 C2,397.447 1.553,397 1,397 C0.447,397 0,397.447 0,398 L0,404 C0,404.553 0.447,405 1,405 L7,405 C7.553,405 8,404.553 8,404 C8,403.447 7.553,403 7,403 Z M7,381 L1,381 C0.447,381 0,381.447 0,382 L0,388 C0,388.553 0.447,389 1,389 C1.553,389 2,388.553 2,388 L2,383 L7,383 C7.553,383 8,382.553 8,382 C8,381.447 7.553,381 7,381 L7,381 Z" id="Full-screen"></path></g></g></g></g> </g> </svg>',{opacity:this.opacityInit,display:"block",position:"absolute",zIndex:11,right:this.rightMerge,bottom:this.bottomMerge}),this.normalScreenBtn=this.addIcon("normalScreenBtn",this.skin,'<svg width="24px" height="24px" viewBox="0 0 35 35" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">                \x3c!-- Generator: Sketch 46.2 (44496) - https://www.bohemiancoding.com/sketch --\x3e        <title>Set1_Minimize_Hover</title>        <desc>Created with Sketch.</desc>        <defs></defs>        <g id="Fragments" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g id="Style-Guide" transform="translate(-1622.000000, -268.000000)" fill="#FFFFFF">            <g id="Icons" transform="translate(289.000000, 163.000000)">                <g id="Icons_Set1_Hover" transform="translate(0.000000, 89.000000)">                    <path d="M1357.3,27.7 L1365.7,27.7 C1366.4742,27.7 1367.1,27.0742 1367.1,26.3 C1367.1,25.5258 1366.4742,24.9 1365.7,24.9 L1358.7,24.9 L1358.7,17.9 C1358.7,17.1258 1358.0742,16.5 1357.3,16.5 C1356.5258,16.5 1355.9,17.1258 1355.9,17.9 L1355.9,26.3 C1355.9,27.0742 1356.5258,27.7 1357.3,27.7 Z M1357.3,50.1 C1358.0742,50.1 1358.7,49.4742 1358.7,48.7 L1358.7,41.7 L1365.7,41.7 C1366.4742,41.7 1367.1,41.0742 1367.1,40.3 C1367.1,39.5258 1366.4742,38.9 1365.7,38.9 L1357.3,38.9 C1356.5258,38.9 1355.9,39.5258 1355.9,40.3 L1355.9,48.7 C1355.9,49.4742 1356.5258,50.1 1357.3,50.1 Z M1334.9,41.7 L1341.9,41.7 L1341.9,48.7 C1341.9,49.4742 1342.5258,50.1 1343.3,50.1 C1344.0742,50.1 1344.7,49.4742 1344.7,48.7 L1344.7,40.3 C1344.7,39.5258 1344.0742,38.9 1343.3,38.9 L1334.9,38.9 C1334.1258,38.9 1333.5,39.5258 1333.5,40.3 C1333.5,41.0742 1334.1258,41.7 1334.9,41.7 Z M1334.9,27.7 L1343.3,27.7 C1344.0742,27.7 1344.7,27.0742 1344.7,26.3 L1344.7,17.9 C1344.7,17.1258 1344.0742,16.5 1343.3,16.5 C1342.5258,16.5 1341.9,17.1258 1341.9,17.9 L1341.9,24.9 L1334.9,24.9 C1334.1258,24.9 1333.5,25.5258 1333.5,26.3 C1333.5,27.0742 1334.1258,27.7 1334.9,27.7 L1334.9,27.7 Z" id="Set1_Minimize_Hover"></path>                </g>            </g>        </g>        </g>        </svg>',{opacity:this.opacityInit,display:"none",position:"absolute",zIndex:11,right:this.rightMerge,bottom:this.bottomMerge}),this.preloader=this.addIcon("preloader",this.skin,'<svg height="50" width="50"> <circle cx="25" cy="25" r="20"></circle> </svg>',{opacity:"1",display:"none",position:"absolute",zIndex:111,left:"50%",top:"50%",transform:"translate(-50%, -50%)",webkitTransform:"translate(-50%, -50%)"}),this.goToArticleBtn=this.addIcon("goToArticleBtn",this.skin,o,{opacity:this.opacityInit,display:"none",position:"absolute",zIndex:1,left:this.leftMerge,top:this.topMerge}),this.goToArticleBtn.style.display="none",this.goToArticleBtn.active=!1,this.primisLogo.active&&(this.primisLogo.innerTxt=this.skin.ownerDocument.getElementById("primisLogoTxt"),this.primisLogo.innerTxt.style.display=" none");for(var r=[this.closeBtn,this.infoBtn,this.shareBtn,this.playlistBtn,this.fullScreenBtn,this.lightBoxBtn,this.normalScreenBtn,this.volumeIcon,this.muteIcon],l=0;l<r.length;l++){var d=document.createElement("div");d.style.width="44px",d.style.height="44px",d.style.position="absolute",d.style.top="-10px",d.style.left="-10px",r[l].appendChild(d)}this.scaleBtnsArray=[this.closeBtn,this.infoBtn,this.shareBtn,this.playlistBtn,this.fullScreenBtn,this.lightBoxBtn,this.normalScreenBtn];for(var c=0;c<this.scaleBtnsArray.length;c++){var h=this.scaleBtnsArray[c];h&&(h.style.transform="scale(0.8)")}this.lightBoxCloseBtn.style.transform="scale(1.4)",this.lightBoxCloseBtn.style.top="-28px",this.lightBoxCloseBtn.style.right="-28px",this.lightBoxCloseBtn.style.opacity=1,this.lightBoxCloseBtn.style.display="none",this.normalScreenBtn.style.display="none",this.normalScreenBtn.active=!1,this.closeBtnFrame=document.getElementById("closeBtnWhiteFrame"),this.preloader.style.fill="none",this.preloader.style.stroke="white",this.preloader.style.strokeWidth="4",this.preloader.style.strokeDasharray="120",this.preloader.style.strokeDashoffset="0",this.preloader.active=!0,this.skin.appendChild(this.preloader);var u=0;setInterval(function(){u+=-1.5,t.preloader.style.strokeDashoffset=u,t.preloader.style.transform="translate(-50%, -50%) rotate("+-2*u+"deg)"},10);var p=new Image;p.src=this.config.playerTemplateData.logoUrl,p.style.position="absolute",p.style.zIndex=1,p.style.left=this.leftMerge,"topLeft"==this.config.playerTemplateData.logoPosition?p.style.top=this.config.playerTemplateData.showTitle?this.logoTopMerge:this.topMerge:p.style.bottom=this.bottomMerge,p.style.userSelect="none",p.style.msUserSelect="none",p.style.mozUserSelect="none",p.style.webkitUserSelect="none",p.style.opacity=this.opacityInit,p.style.paddingBottom="3px",p.style.visibility="hidden",p.active=!0,p.onload=function(e){var t=p.width/p.height;p.width<100&&p.height<60||(t>100/60?(p.width=100,p.height=100/t):(p.height=60,p.width=60*t)),p.style.visibility="visible"},p.onerror=function(){try{t.skin.removeChild(p)}catch(e){}},this.skin.appendChild(p),this.logo=p,this.header=new function(){var e=document.createElement("div");return e.style.width="calc(100% - 80px)",e.style.height="27px",e.style.position="absolute",e.style.zIndex=100,e.style.left=t.leftMerge,e.style.top=parseInt(t.topMerge)+(t.config.clkUrl||t.config.contentClickUrl?20:0)+"px",e.style.pointerEvents="none",e.style.color="#FFFFFF",e.style.fontFamily="Roboto",e.style.fontSize="16px",e.style.textOverflow="ellipsis",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.style.userSelect="none",e.style.msUserSelect="none",e.style.mozUserSelect="none",e.style.webkitUserSelect="none",e.style.visibility="visible",e.style.opacity=t.opacityInit,e.active=t.config.playerTemplateData.showTitle,t.skin.appendChild(e),e},this.timeScrabber=new function(e){var t=this;return this.dragging=!1,this.adPlayStatus=!1,this.container=document.createElement("div"),this.container.style.textAlign="left",this.container.style.direction="ltr",this.container.style.backgroundColor="rgba("+e.rgbColor+",0.35)",this.container.style.width="100%",this.container.style.height="9px",this.container.style.position="absolute",this.container.style.left="0px",this.container.style.bottom="1"==e.opacityInit?"0px":"-10px",this.container.style.cursor="pointer",this.container.style.visibility="visible",this.hitArea=document.createElement("div"),this.hitArea.style.width="100%",this.hitArea.style.height="19px",this.hitArea.style.position="absolute",this.hitArea.style.left="0px",this.hitArea.style.bottom="0px",this.hitArea.style.zIndex=1,this.container.appendChild(this.hitArea),this.loadBar=document.createElement("div"),this.loadBar.style.textAlign="left",this.loadBar.style.direction="ltr",this.loadBar.style.backgroundColor=e.designColor,this.loadBar.style.opacity=.21,this.loadBar.style.width="0%",this.loadBar.style.height="9px",this.loadBar.style.position="absolute",this.loadBar.style.left="0px",this.loadBar.style.bottom="0px",this.loadBar.style.zIndex=1,this.loadBar.style.pointerEvents="none",this.container.appendChild(this.loadBar),this.timeBar=document.createElement("div"),this.timeBar.style.textAlign="left",this.timeBar.style.direction="ltr",this.timeBar.style.backgroundColor=e.designColor,this.timeBar.style.width="0%",this.timeBar.style.height="9px",this.timeBar.style.position="absolute",this.timeBar.style.left="0px",this.timeBar.style.bottom="0px",this.timeBar.style.zIndex=2,this.timeBar.style.pointerEvents="none",this.container.appendChild(this.timeBar),this.container.addEventListener("mouseenter",function(e){e.preventDefault(),SekindoUtils.isMobile.any()||(g.style.display="block")}),
this.container.addEventListener("mouseleave",function(e){e.preventDefault(),g.style.display="none"}),this.container.addEventListener("mousemove",function(e){e.preventDefault();var i=g.offsetWidth/2;g.style.left=Math.min(t.container.offsetWidth-2*i-6,Math.max(i/2,e.offsetX-i))+"px";var n=e.offsetX/t.container.offsetWidth;g.updateTime(n)}),this.container.addEventListener("click",function(i){var n=i.offsetX/t.container.offsetWidth;SekindoUtils.animateTo(t.timeBar.style,"width",100*n+"%",.3,"easeOut");var s=Math.min(1,Math.max(0,n));e.config.bus.triggerNote("fireContentPixel",{contentPixelName:"contentScrubberPixel"}),e.config.bus.triggerNote("onUserEvent",{type:"timeScrabber",value:s})}),this.container.onTimeEvent=function(i){e.duration=i.duration,t.loadBar.style.width=i.loaded/i.duration*100+"%",t.dragging||(t.timeBar.style.width=i.currTime/i.duration*100+"%")},e.skin.appendChild(this.container),this.container.active=!0,this.container}(this),this.timeText=new function(e){var i=document.createElement("text");return i.style.position="absolute",i.style.zIndex=1,i.style.right="60px",i.style.bottom="20px",i.style.pointerEvents="none",i.style.color="#FFFFFF",i.style.fontFamily="Roboto",i.style.fontSize="12px",i.style.userSelect="none",i.style.msUserSelect="none",i.style.mozUserSelect="none",i.style.webkitUserSelect="none",i.style.opacity=e.opacityInit,i.style.visibility="visible",i.style.direction="rtl",i.innerHTML="",t.skin.appendChild(i),i.active=!0,i}(this);var g=new function(e){var i=document.createElement("text");return i.style.position="absolute",i.style.zIndex=1,i.style.left="160px",i.style.bottom="8px",i.style.pointerEvents="none",i.style.height="15px",i.style.color="#FFFFFF",i.style.fontFamily="Roboto",i.style.fontSize="12px",i.style.display="none",i.style.userSelect="none",i.style.msUserSelect="none",i.style.mozUserSelect="none",i.style.webkitUserSelect="none",i.style.visibility="visible",i.updateTime=function(e){i.innerHTML=t.duration?SekindoUtils.secToHMS(e*t.duration):""},t.skin.appendChild(i),i}(this);this.volumeScrabber=new function(t){function i(i){i.preventDefault(),s.volumeBar.style.display="block",s.volumeBG.style.display="block",s.volumeBGHit.style.display="block",e(t.volumeIcon,"#FFFFFF",t.designColor),e(t.muteIcon,"#FFFFFF",t.designColor)}function n(i){i&&i.preventDefault(),s.volumeBar.style.display="none",s.volumeBG.style.display="none",s.volumeBGHit.style.display="none",e(t.volumeIcon,t.designColor,"#FFFFFF"),e(t.muteIcon,t.designColor,"#FFFFFF")}var s=this;return this.container=document.createElement("div"),this.container.style.textAlign="left",this.container.style.backgroundColor="rgba("+t.rgbColor+",0)",this.container.style.width="21px",this.container.style.position="absolute",this.container.style.right=t.rightMerge,this.container.style.top="26px",this.container.style.zIndex=11,this.container.style.opacity=t.opacityInit,this.container.style.transform="scale(0.8)",this.container.style.visibility="visible",this.container.style.zIndex=11111,this.volumeBGHit=document.createElement("div"),this.volumeBGHit.style.textAlign="left",this.volumeBGHit.style.backgroundColor="rgba("+t.rgbColor+",0)",this.volumeBGHit.style.width="20px",this.volumeBGHit.style.height="108px",this.volumeBGHit.style.position="absolute",this.volumeBGHit.style.right="1px",this.volumeBGHit.style.top="12px",this.volumeBGHit.style.cursor="pointer",this.volumeBGHit.style.display="none",this.volumeBG=document.createElement("div"),this.volumeBG.style.textAlign="left",this.volumeBG.style.backgroundColor="rgba("+t.rgbColor+",0.35)",this.volumeBG.style.width="5px",this.volumeBG.style.height="92px",this.volumeBG.style.position="absolute",this.volumeBG.style.left="8px",this.volumeBG.style.top="26px",this.volumeBG.style.pointerEvents="none",this.volumeBG.style.borderRadius="100px",this.volumeBG.style.display="none",this.volumeBar=document.createElement("div"),this.volumeBar.style.textAlign="left",this.volumeBar.style.direction="ltr",this.volumeBar.style.backgroundColor="#ffffff",this.volumeBar.style.width="5px",this.volumeBar.style.height="50px",this.volumeBar.style.position="absolute",this.volumeBar.style.left="8px",this.volumeBar.style.bottom="-118px",this.volumeBar.style.zIndex=2,this.volumeBar.style.pointerEvents="none",this.volumeBar.style.borderRadius="0px 0px 5px 5px",this.volumeBar.style.display="none",t.volumeBar=this.volumeBar,"ios"!=t.config.clientInfo.os&&(this.container.appendChild(this.volumeBG),this.container.appendChild(this.volumeBar),this.container.appendChild(this.volumeBGHit)),this.container.addEventListener("mousedown",function(e){i(e),clearTimeout(s.touchTimeOut),s.touchTimeOut=setTimeout(n,4e3)}),this.container.addEventListener("mouseenter",i),this.container.addEventListener("mouseleave",n),this.volumeBGHit.addEventListener("click",function(e){e&&e.preventDefault();var i=92*(108-e.offsetY)/100;SekindoUtils.animateTo(s.volumeBar.style,"height",i+"px",.3,"easeOut");var n=Math.min(1,Math.max(0,i/92));t.config.soundEnabledByUser=!0,t.config.bus.triggerNote("fireContentPixel",{contentPixelName:"contentVolChangePixel"}),t.config.bus.triggerNote("onUserEvent",{type:"onVolumeScrabber",value:n}),t.isPlaying&&(t.config.intentInitiator="volumeScrabber",t.config.bus.triggerNote("userIntentOn"))}),t.volumeIcon.addEventListener("mousedown",function(e){t.config.soundEnabledByUser=!1,t.config.bus.triggerNote("fireContentPixel",{contentPixelName:"contentVolChangePixel"}),t.config.bus.triggerNote("onUserEvent",{type:"onMute",value:!0}),t.isPlaying&&t.config.bus.triggerNote("userIntentOff")}),t.muteIcon.addEventListener("mousedown",function(e){t.config.soundEnabledByUser=!0,t.config.bus.triggerNote("fireContentPixel",{contentPixelName:"contentVolChangePixel"}),t.config.bus.triggerNote("onUserEvent",{type:"onMute",value:!1}),t.isPlaying&&(t.config.intentInitiator="unmute",t.config.bus.triggerNote("userIntentOn"))}),this.container.appendChild(t.volumeIcon),this.container.appendChild(t.muteIcon),t.skin.appendChild(this.container),this.container.active=!0,this.container}(this),this.playlist=new SlickPlaylist(this.config,this),this.topRightBtnsArray=[this.closeBtn,this.primisLogo,this.infoBtn,this.shareBtn,this.playlistBtn]},SlickSkin.prototype.addFunctionality=function(){var e=this;SekindoUtils.isMobile.any()&&this.skin.addEventListener("mousedown",function(){e.mouseIsOn||(e.exposeSkin(),e.skin.style.visibility="hidden"),e.mouseOnTimeout=setTimeout(function(){e.mouseIsOn=!0},1e3),clearTimeout(e.mobileShowSkinTimeout),e.mobileShowSkinTimeout=setTimeout(function(){e.mouseIsOn&&(clearTimeout(e.mouseOnTimeout),e.mouseIsOn=!1,e.hideSkin()),e.skin.style.visibility="visible"},4e3)}),SekindoUtils.isMobile.any()||(this.config.videoIFrameDoc.body.onmousemove=function(){e.mouseIsOn||(e.mouseIsOn=!0,e.config.videoIFrameDoc.body.style.cursor="auto",e.exposeSkin(),clearTimeout(e.hideSkinTimeout),e.hideSkinTimeout=setTimeout(function(){e.mouseIsOn&&(e.hideSkin(),e.mouseIsOn=!1,e.config.fullScreenOn&&(e.config.videoIFrameDoc.body.style.cursor="none"))},1200))}),this.exposeSkin=function(t){if(t&&t.preventDefault(),e.closeBtn.active&&(e.closeBtnFrame=document.getElementById("closeBtnWhiteFrame"),e.closeBtnFrame.active=!0,e.closeBtnFrame.style.opacity="0"),e.primisLogo.active&&(e.primisLogo.innerTxt.style.display="block"),this.exposeParams=[[e.primisLogo,"width","42px",.3,"easeIn",function(){}],[e.closeBtnFrame,"opacity","1",.3,"easeIn",function(){}],[e.playlistBtn,"opacity","1",.3,"easeIn"],[e.shareBtn,"opacity","1",.3,"easeIn"],[e.infoBtn,"opacity","1",.3,"easeIn"],[e.closeBtn,"opacity","1",.3,"easeIn"],[e.nextBtn,"opacity","1",.3,"easeIn"],[e.backBtn,"opacity","1",.3,"easeIn"],[e.pauseBtn,"opacity","1",.3,"easeIn"],[e.playBtn,"opacity","1",.3,"easeIn"],[e.header,"opacity","1",.3,"easeIn"],[e.goToArticleBtn,"opacity","1",.3,"easeIn"],[e.volumeScrabber,"opacity","1",.3,"easeIn"],[e.fullScreenBtn,"opacity","1",.2,"easeIn"],[e.lightBoxBtn,"opacity","1",.2,"easeIn"],[e.normalScreenBtn,"opacity","1",.2,"easeIn"],[e.timeText,"opacity","1",.2,"easeIn"],[e.logo,"opacity","1",.3,"easeIn"],[e.gradiantBg,"opacity","0.9",.3,"easeIn"],[e.timeScrabber,"bottom","0px",.2,"easeIn"],[e.fullScreenBtn,"bottom",e.bottomMerge,.2,"easeIn"],[e.lightBoxBtn,"bottom",e.bottomMerge,.2,"easeIn"],[e.normalScreenBtn,"bottom",e.bottomMerge,.2,"easeIn"],[e.timeText,"bottom",e.bottomMerge,.2,"easeIn"]],"bottomLeft"==e.config.playerTemplateData.logoPosition)this.exposeParams.push([e.logo,"bottom",e.bottomMerge,.2,"easeIn"]);else if("topLeft"==e.config.playerTemplateData.logoPosition&&e.header.active||e.goToArticleBtn.active){var i=parseInt(e.logoTopMerge)+(e.header.active&&e.goToArticleBtn.active?20:0)+"px";this.exposeParams.push([e.logo,"top",i,.2,"easeIn"])}for(var n=0;n<this.exposeParams.length;n++){var s=this.exposeParams[n];try{s[0].active&&(s[0].style.display="block",SekindoUtils.animateTo(s[0].style,s[1],s[2],s[3],s[4]))}catch(e){}}},this.hideSkin=function(t,i){t&&t.preventDefault(),e.closeBtn.active&&(e.closeBtnFrame=document.getElementById("closeBtnWhiteFrame"),e.closeBtnFrame.active=!0,e.closeBtnFrame.style.opacity="1");var n=e.isPlaying?"0":"0.4";this.hideParams=[[e.primisLogo,"width","12px",i||.3,"easeIn",function(){e.primisLogo.active&&(e.primisLogo.innerTxt.style.display="none")}],[e.closeBtnFrame,"opacity","0",i||.3,"easeIn",function(){}],[e.playlistBtn,"opacity",n,i||.3,"easeIn",function(){e.isPlaying&&(e.playlistBtn.style.display="none")}],[e.shareBtn,"opacity",n,i||.3,"easeIn",function(){e.isPlaying&&(e.shareBtn.style.display="none")}],[e.infoBtn,"opacity",n,i||.3,"easeIn",function(){e.isPlaying&&(e.infoBtn.style.display="none")}],[e.backBtn,"opacity",n,i||.3,"easeIn",function(){e.isPlaying&&(e.backBtn.style.display="none")}],[e.nextBtn,"opacity",n,i||.3,"easeIn",function(){e.isPlaying&&(e.nextBtn.style.display="none")}],[e.pauseBtn,"opacity",n,i||.3,"easeIn",function(){e.isPlaying&&(e.pauseBtn.style.display="none")}],[e.playBtn,"opacity",n,i||.3,"easeIn",function(){e.isPlaying&&(e.playBtn.style.display="none")}],[e.header,"opacity",n,i||.3,"easeIn"],[e.goToArticleBtn,"opacity",n,i||.3,"easeIn"],[e.volumeScrabber,"opacity",n,i||.3,"easeIn",function(){e.isPlaying&&(e.volumeScrabber.style.display="none")}],[e.goToArticleXBtn,"opacity",n,i||.3,"easeIn",function(){e.isPlaying&&(e.goToArticleXBtn.style.display="none")}],[e.fullScreenBtn,"opacity",n,i||.3,"easeIn",function(){e.isPlaying&&(e.fullScreenBtn.style.display="none")}],[e.lightBoxBtn,"opacity",n,i||.3,"easeIn",function(){e.isPlaying&&(e.lightBoxBtn.style.display="none")}],[e.normalScreenBtn,"opacity",n,i||.3,"easeIn",function(){e.isPlaying&&(e.normalScreenBtn.style.display="none")}],[e.timeText,"opacity",n,i||.3,"easeIn"],[e.timeScrabber,"bottom","-10px",i||.2,"easeIn"],[e.gradiantBg,"opacity","0",i||.3,"easeIn",function(){"desktop"!=e.config.os&&(e.gradiantBg.style.display="none")}],[e.logo,"opacity","0.4",i||.3,"easeIn"],[e.fullScreenBtn,"bottom","14px",i||.2,"easeIn"],[e.lightBoxBtn,"bottom","14px",i||.2,"easeIn"],[e.normalScreenBtn,"bottom","14px",i||.2,"easeIn"],[e.timeText,"bottom","14px",i||.2,"easeIn"]],"bottomLeft"==e.config.playerTemplateData.logoPosition?this.hideParams.push([e.logo,"bottom","14px",i||.2,"easeIn"]):"topLeft"==e.config.playerTemplateData.logoPosition&&(e.header.active||e.goToArticleBtn.active)&&e.isPlaying&&this.hideParams.push([e.logo,"top",e.topMerge,i||.2,"easeIn"]);for(var s=0;s<this.hideParams.length;s++){var o=this.hideParams[s];o[0]&&o[0].active&&!o[0].locked&&SekindoUtils.animateTo(o[0].style,o[1],o[2],o[3],o[4],o[5])}},this.closeBtn.onclick=function(){e.config.bus.triggerNote("onUserEvent",{type:"onCloseBtnClick"}),"slider"!=e.config.playerMode&&"inRead"!=e.config.playerMode&&SekindoUtils.firePixel(e.config.closeFloatPixel)},this.primisLogo.onclick=function(){window.top.open("https://www.primis.tech?utm_source="+e.config.domain+"&utm_medium="+(e.config.nativeSkinType||"classic")+"&utm_campaign=logo","_blank")},this.gradiantBg.addEventListener("click",function(){(e.mouseIsOn||"desktop"==e.config.os)&&(e.config.bus.triggerNote("fireContentPixel",{contentPixelName:"contentVoidClickPixel"}),e.reportFs=-1,e.clickForFullScreen())}),this.pauseBtn.addEventListener("mousedown",function(){e.config.bus.triggerNote("fireContentPixel",{contentPixelName:"contentPausePixel"}),e.config.bus.triggerNote("onUserEvent",{type:"onPause"})}),this.playBtn.addEventListener("mousedown",function(){e.config.isPlaying=!0,e.config.intentInitiator="play",e.config.bus.triggerNote("onUserEvent",{type:"onPlay"}),e.config.bus.triggerNote("userIntentOn"),e.config.bus.triggerNote("fireContentPixel",{contentPixelName:"contentPausePixel"})}),this.nextBtn.addEventListener("mousedown",function(){e.config.nextContentIndex=(e.config.currContentIndex+1)%e.config.contentPlayList.length||0,e.config.intentInitiator="userSwitchContent",e.config.bus.triggerNote("userIntentOn"),e.config.bus.triggerNote("onUserEvent",{type:"onPlay"}),e.config.bus.triggerNote("userSwitchContent",e.config.nextContentIndex)}),this.backBtn.addEventListener("mousedown",function(){e.config.nextContentIndex=(e.config.currContentIndex+e.config.contentPlayList.length-1)%e.config.contentPlayList.length||e.config.contentPlayList.length-1,e.config.intentInitiator="userSwitchContent",e.config.bus.triggerNote("userIntentOn"),e.config.bus.triggerNote("onUserEvent",{type:"onPlay"}),e.config.bus.triggerNote("userSwitchContent",e.config.nextContentIndex)}),this.goToArticleBtn.addEventListener("mousedown",function(){e.openContent()}),this.openContent=function(t,i){var n=t||e.config.clkUrl||e.config.contentClickUrl;if(n=n.replace("${DOMAIN_MACRO}",e.config.domain),SekindoUtils.validURL(n)){window.open(n,"_blank"),e.config.bus.triggerNote("fireContentPixel",{contentPixelName:"contentClickPixel",fileId:i||(e.config.fileId?e.config.fileId:null)});var s=e.config.reportClickUrl;s&&SekindoUtils.validURL(s)&&SekindoUtils.firePixel(s,e.config.pixelDiv)}};var t=!1;try{t=Boolean(screen.orientation)}catch(e){}var i=t?window.orientation:window.innerHeight<window.innerWidth?90:0;this.onFullscreenBtnClick=function(){var t=document.body;if("macosx"==e.config.clientInfo.os&&!SekindoServices.fullscreen.isFullscreen)return SekindoServices.fullscreen.toggle(t),void s(!0);SekindoServices.fullscreen.toggle(t)},this.fullScreenBtn.onclick=this.onFullscreenBtnClick,this.normalScreenBtn.onclick=this.onFullscreenBtnClick,this.lightBoxBtn.onclick=this.onFullscreenBtnClick,this.lightBoxCloseBtn.onclick=this.onFullscreenBtnClick,this.config.playerTemplateData.isLightBox&&this.config.windowsArray[0].document.body.addEventListener("click",function(t){e.config.fullScreenOn&&t.target==t.currentTarget&&e.onFullscreenBtnClick()}),SekindoServices.fullscreen.onchange(function(i){e.config.fullScreenOn=SekindoServices.fullscreen.isFullscreen,e.fullScreenBtn.style.display=e.config.fullScreenOn?"none":"block",e.fullScreenBtn.active=!e.config.fullScreenOn,e.lightBoxBtn.style.display=e.config.fullScreenOn?"none":"block",e.lightBoxBtn.active=!e.config.fullScreenOn,e.normalScreenBtn.style.display=e.config.fullScreenOn?"block":"none",e.normalScreenBtn.active=e.config.fullScreenOn,e.lightBoxCloseBtn.style.display=e.config.fullScreenOn&&e.config.playerTemplateData.isLightBox?"block":"none",clearTimeout(e.fsTimeout),e.config.enableIntentActions||!e.config.soundOnFS||e.config.soundEnabledByUser||e.config.bus.triggerNote("onUserEvent",{type:"onMute",value:!SekindoServices.fullscreen.isFullscreen}),e.config.enableIntentActions&&SekindoServices.fullscreen.isFullscreen?(e.config.playbackMethod="click",e.config.intentInitiator="fullscreen",e.config.bus.triggerNote("userIntentOn")):e.config.enableIntentActions&&!e.config.soundEnabledByUser&&e.config.bus.triggerNote("userIntentOff"),SekindoServices.fullscreen.isFullscreen?(e.goToArticleBtn.style.transform="scale(1.2) translate(8px,-2px)",e.header.style.fontSize="20px",e.header.active=!0,e.header.style.display="block"):(e.goToArticleBtn.style.transform="scale(1)",e.header.style.fontSize="16px",e.header.active=e.config.playerTemplateData.showTitle,e.config.playerTemplateData.showTitle||(e.header.style.display="none")),s(t&&e.config.fullScreenOn&&"desktop"!=e.config.os),e.hideSkin(null,.01),e.config.fullScreenOn?(e.mouseIsOn&&(e.cursorStyle=e.config.videoIFrameDoc.body.style.cursor,e.config.videoIFrameDoc.body.style.cursor="none",setTimeout(function(){clearTimeout(e.mouseOnTimeout),e.mouseIsOn=!1,SekindoUtils.isMobile.any()&&(e.skin.style.visibility="visible")},500)),-1!=e.reportFs&&(e.fsTimeout=setTimeout(function(){e.config.bus.triggerNote("fireContentPixel",{contentPixelName:"contentFullScreenPixel"})},e.reportFs))):(clearTimeout(e.mouseOnTimeout),e.mouseIsOn=!1,SekindoUtils.isMobile.any()&&(e.skin.style.visibility="visible")),e.config.bus.triggerNote("onFullScreen",{type:e.config.fullScreenOn}),e.reportFs=1});var n=function(){if(e.config.fullScreenOn){var n=t?window.orientation:window.innerHeight<window.innerWidth?90:0;n!==i&&(i=n,s(t))}},s=function(t){e.blockOnResize=!0,setTimeout(function(){if(e.config.fullScreenOn)if(e.config.playerTemplateData.isLightBox)i=.65*window.frameElement.offsetWidth,n=.65*window.frameElement.offsetHeight;else if(t)i=screen.width,n=screen.height;else i=window.frameElement.offsetWidth,n=window.frameElement.offsetHeight;else var i=null,n=null;var s={reason:"onFullScreen"+(e.config.fullScreenOn?"On":"Off"),width:i,height:n};e.config.bus.triggerNote("requestSkinResize",s)},1)};if(this.config.responsive){function o(t){if(!e.blockOnResize&&!e.config.flowStatus&&!SekindoServices.fullscreen.isFullscreen){e.config.videoWidth=t.width;t={reason:"onResizeObj",responsive:!0,width:t.width,height:t.height};e.config.bus.triggerNote("requestSkinResize",t)}}var a=this.config.windowsArray[0].frameElement.parentNode;this.config.windowsArray[0]&&-1!=this.config.windowsArray[0].frameElement.id.indexOf("google_ads_iframe_")&&(this.config.windowsArray[0].frameElement.parentNode.parentNode.style.width="100%",this.config.windowsArray[0].frameElement.parentNode.parentNode.style.height="100%"),setTimeout(function(){e.reziseChecker=new SekindoServices.resizeChecker(a,o,e.config)},1),this.config.bus.addCallBack("onFlowStatusChange",function(t){t||e.reziseChecker.checkResize(!0)}),"visible"!==SekindoUtils.visibilityState()&&setTimeout(function(){e.reziseChecker.checkResize(!0)},3e3)}else this.config.windowsArray[0]&&-1!=this.config.windowsArray[0].frameElement.id.indexOf("google_ads_iframe_")&&(this.config.windowsArray[0].frameElement.parentNode.parentNode.style.width="max-content",this.config.windowsArray[0].frameElement.parentNode.parentNode.style.height="null");window.addEventListener("orientationchange",n,!1),window.addEventListener("resize",n,!1),this.config.bus.addCallBack("changeTitle",function(t){e.header.innerText=t}),this.config.bus.addCallBack("hideTimeBar",function(t){e.timeScrabber.style.display="none"}),this.config.bus.addCallBack("onVideoEvent",function(t){e.onVideoEvent(t)}),this.config.bus.addCallBack("contentStarted",function(t){e.onVideoEvent({type:"contentStarted",val:t})}),this.config.bus.addCallBack("contentEnded",function(t){e.onVideoEvent({type:"contentEnded",val:t})}),this.config.bus.addCallBack("onVideoProgress",function(t){e.onVideoEvent({type:"onVideoProgress",val:t})}),this.config.bus.addCallBack("adCompleted",function(){e.onAdEvent(!1)}),this.config.bus.addCallBack("adStarted",function(t){e.onAdEvent(!0,t)}),this.config.bus.addCallBack("onUserEvent",function(t){e.onUserEvent(t)}),this.config.bus.addCallBack("intentOn",function(){e.onIntentOn()}),this.config.bus.addCallBack("intentOff",function(){e.onIntentOff()}),this.config.bus.addCallBack("onSwitchContent",function(){e.onSwitchContent()}),this.config.bus.addCallBack("requestSkinResize",function(t){e.playerResize(t||{})}),this.config.bus.addCallBack("setPreloader",function(t){e.setPreloader(t)}),this.config.bus.addCallBack("userSwitchContent",function(){e.pauseBtn.style.display="none",e.pauseBtn.active=!1,e.playBtn.style.display="none",e.playBtn.active=!1}),this.config.bus.addCallBack("swapBGimage",function(t){"inRead"!=e.config.playerMode&&"slider"!=e.config.playerMode&&(-1==t?e.videoDiv.style.backgroundImage="none":void 0!==configPlayer.contentPlayList&&void 0!==configPlayer.contentPlayList[t]&&configPlayer.contentPlayList[t].bgImg&&(e.videoDiv.style.backgroundRepeat="no-repeat",e.videoDiv.style.backgroundSize="100% 100%",e.videoDiv.style.backgroundImage="url('"+configPlayer.contentPlayList[t].bgImg+"')"))}),this.config.bus.triggerNote("swapBGimage",0)},SlickSkin.prototype.clickForFullScreen=function(){function e(){i.config.allowFullScreen&&!SekindoServices.fullscreen.isFullscreen&&i.onFullscreenBtnClick()}var t,i=this,n=0,s=(new Date).getTime();s-n<300&&(clearTimeout(t),e()),n=s,t=setTimeout(e,350)},SlickSkin.prototype.playerResize=function(e){var t=this;this.blockOnResize=!0,setTimeout(function(){t.blockOnResize=!1},20);var i=!(!e||"onFullScreenOn"!=e.reason&&!e.centeredVideo),n=!(!this.config.flowStatus||this.config.fullScreenOn),s=e&&e.responsive&&!this.config.flowStatus;this.closeBtn.locked=!1,t.config.isCloseBtn&&(n||"slider"==this.config.playerMode||"inRead"==this.config.playerMode)?(e.closeBtnLocked&&(this.closeBtn.locked=!0),this.closeBtn.active=!0,this.closeBtn.style.display="block",this.closeBtn.style.opacity=1,this.primisLogo.active=!1,this.primisLogo.style.display="none"):(this.closeBtn.active=!1,this.closeBtn.style.display="none",this.config.playerTemplateData.isPrimisLogo&&(this.primisLogo.active=!0,this.primisLogo.style.display="block"));var o=e&&e.width?e.width:this.config.flowStatus?this.config.flowWidth:this.config.width,a=e&&e.height?e.height:this.config.flowStatus?this.config.flowHeight:this.config.height;e&&s&&(a=5*o/4);var r=a/o,l=(u=o*Math.min(9/16,r))+(c=66+34*((Math.max(300,Math.min(500,u))-300)/200)),d=!!(this.config.playerTemplateData.isLightBox&&this.config.fullScreenOn||t.config.playerTemplateData.hasPlaylist&&a-c>=this.config.minOptimalHeight&&(!this.config.flowStatus||this.config.flowPlaylist)&&!this.config.fullScreenOn);if(this.config.playlistSkinElement&&(this.config.playlistSkinElement.style.display=d?"block":"none"),d||(c=0),l>a&&d)var c,h=66/366+(Math.max(300,Math.min(500,a))-300)/200*(100/600-66/366),u=a-(c=Math.max(66,Math.min(100,a*h)));var p=Math.round(c/9*16),g=Math.round(u/9*16);c=Math.round(c),u=Math.round(u),this.config.minOptimalHeight<=a&&(u=Math.max(this.config.minOptimalHeight,u));var f={};f.type="slickSkin",this.config.playerWidth=f.playerWidth=g,this.config.playerHeight=f.playerHeight=u+c,this.config.videoWidth=f.videoWidth=g,this.config.videoHeight=f.videoHeight=u,this.config.playlistUnitWidth=f.playlistUnitWidth=p,this.config.playlistHeight=f.playlistHeight=c,this.config.videoIFrame.style.width=this.config.videoWidth+"px",this.config.videoIFrame.style.height=this.config.videoHeight+"px",t.playlist&&t.playlist.onResize(),this.timeText.style.right=this.fullScreenBtn.active||this.lightBoxBtn.active||this.normalScreenBtn.active?"40px":t.rightMerge;for(var m=this.iconsTop,v=0;v<this.topRightBtnsArray.length;v++){var y=this.topRightBtnsArray[v];y.active&&(y.style.top=(m+=this.iconsTopGap)+"px")}this.closeBtn.active?this.volumeScrabber.style.top="34px":this.primisLogo.active?this.volumeScrabber.style.top="22px":this.volumeScrabber.style.top="8px",i?(this.config.mainPlayerDiv.style.top="50%",this.config.mainPlayerDiv.style.left="50%",this.config.mainPlayerDiv.style.position="absolute",this.config.mainPlayerDiv.style.transform="translate(-50%, -50%)"):(this.config.mainPlayerDiv.style.top="auto",this.config.mainPlayerDiv.style.left="auto",this.config.mainPlayerDiv.style.position="static",this.config.mainPlayerDiv.style.transform="none"),this.config.isAmpProject&&(this.config.windowsArray[0].frameElement.parentNode.parentNode.style.position="absolute",this.config.windowsArray[0].frameElement.parentNode.parentNode.style.top="0",this.config.windowsArray[0].frameElement.parentNode.parentNode.style.left="0",this.config.windowsArray[0].frameElement.parentNode.parentNode.style.bottom="0",this.config.windowsArray[0].frameElement.parentNode.parentNode.style.right="0");var b,k;this.flowSkinDisplay&&(this.flowSkinDisplay(n),n&&(b=t.config.flowSkinWrapper.offsetWidth,k=t.config.flowSkinWrapper.offsetHeight));for(var S=0;S<this.config.windowsArray.length;S++)SekindoServices.fullscreen.isFullscreen||(this.config.windowsArray[S].frameElement.style.width=((e?e.extFrameWidth:null)||b||this.config.playerWidth)+"px",this.config.windowsArray[S].frameElement.style.height=((e?e.extFrameHeight:null)||k||this.config.playerHeight)+"px");e.source&&SekindoUtils.applyExternalRules(this.config,"style",e.source),this.config.bus.triggerNote("onPlayerResize",f)},SlickSkin.prototype.flowSkinWrapper=function(e){var t=[],i=[];!function(e,n){function s(e,i,n){for(var r=e.childNodes,l=0;l<r.length;l++)r[l].id&&-1!=r[l].id.indexOf(i)?(o=n,a=r[l]):"SCRIPT"!=r[l].tagName&&r[l].style&&"none"!=r[l].style.display&&(t.push({obj:r[l],display:r[l].style.display}),s(r[l],i,++n))}var o=0,a=null;s(e,n,-1);for(var r=0;r<o;r++){var l=(a=a.parentNode).style.cssText;i.push({obj:a,style:l});var d=t.map(function(e){return e.obj}).indexOf(a);d>-1&&t.splice(d,1)}}(e.contentDocument.body,"Player-Div"),this.flowSkinDisplay=function(e){for(var n=0;n<t.length;n++){var s=t[n].obj;try{s.style.display=e?t[n].display:"none"}catch(e){}}for(n=0;n<i.length-1;n++){s=i[n];try{s.obj.style.cssText=e?s.style:""}catch(e){}}}},SlickSkin.prototype.setPreloader=function(e){this.preloader.style.display=e?"block":"none"},SlickSkin.prototype.onVideoEvent=function(e){switch(e.type){case"volumechange":e.val.muted?(this.muteIcon.style.display="block",this.volumeIcon.style.display="none"):(this.muteIcon.style.display="none",this.volumeIcon.style.display="block");var t=92*e.val.volume;SekindoUtils.animateTo(this.volumeBar.style,"height",t+"px",.3,"easeOut");break;case"playing":this.pauseBtn.style.display="block",this.pauseBtn.active=!0,this.playBtn.style.display="none",this.playBtn.active=!1,this.isPlaying=!0,this.setPreloader(!1),this.config.bus.triggerNote("swapBGimage",-1),this.hideSkin(),clearTimeout(this.mouseOnTimeout),this.mouseIsOn=!1,SekindoUtils.isMobile.any()&&(this.skin.style.visibility="visible");break;case"pause":this.pauseBtn.style.display="none",this.pauseBtn.active=!1,this.adPlayStatus||(this.playBtn.style.display="block"),this.playBtn.active=!0,this.isPlaying=!1;break;case"onVideoProgress":if(e.val.isSimulator||this.adPlayStatus)return;this.timeScrabber.onTimeEvent(e.val);var i=SekindoUtils.secToHMS(e.val.currTime)+"/"+SekindoUtils.secToHMS(e.val.duration);this.timeText.innerHTML=i;break;case"contentStarted":if(-1!=this.activeButtons.indexOf("goToArticleBtn")&&(this.config.clkUrl||this.config.contentClickUrl)){if(this.header.style.top=parseInt(this.topMerge)+20+"px",this.goToArticleBtn.style.display="block",this.goToArticleBtn.active=!0,1==this.header.style.opacity&&(this.goToArticleBtn.style.opacity=1),"topLeft"==this.config.playerTemplateData.logoPosition){var n=parseInt(this.logoTopMerge)+(this.header.active?20:0)+"px";this.logo.style.top=n}}else{if("topLeft"==this.config.playerTemplateData.logoPosition){n=this.header.active?this.logoTopMerge:this.topMerge;this.logo.style.top=n}this.header.style.top=this.topMerge,this.goToArticleBtn.style.display="none",this.goToArticleBtn.style.opacity=0,this.goToArticleBtn.active=!1}break;case"contentEnded":e.val||(this.playBtn.style.display="none",this.playBtn.active=!1,this.isPlaying=!1),!1===this.config.onViewabilityChange.getCurrState()&&this.config.soundEnabledByUser&&(this.config.soundEnabledByUser=!1,this.config.bus.triggerNote("onUserEvent",{type:"onMute",value:!0}),this.config.bus.triggerNote("userIntentOff"))}},SlickSkin.prototype.onSwitchContent=function(){this.config.enableIntentActions&&this.config.allowFullScreen&&!SekindoServices.fullscreen.isFullscreen&&"userSwitchContentFS"===this.config.intentInitiator&&(this.reportFs=-1,this.onFullscreenBtnClick())},SlickSkin.prototype.onIntentOn=function(){var e=this;!0!==this.intentStatus&&setTimeout(function(){e.config.bus.triggerNote("onUserEvent",{type:"onMute",value:!1})},10),this.intentStatus=!0},SlickSkin.prototype.onIntentOff=function(){!1!==this.intentStatus&&(this.config.bus.triggerNote("onUserEvent",{type:"onMute",value:!0}),this.intentStatus=!1)},SlickSkin.prototype.onUserEvent=function(e){switch(e.type){case"onPlay":"3"!=this.config.isAutoPlay&&(this.playBtn.style.display="none");break;case"openContent":this.openContent(e.value,e.fileId);break;case"clickForFullScreen":this.clickForFullScreen()}},SlickSkin.prototype.onAdEvent=function(e,t){var i=this;e?(this.adPlayStatus=!0,this.setPreloader(!1),this.logo.style.display="none",this.logo.active=!1,this.header.style.top=this.topMerge,this.goToArticleBtn.style.display="none",this.goToArticleBtn.style.opacity=0,this.goToArticleBtn.active=!1,t.skipTime&&(this.addSkipAdTimeout=setTimeout(function(){i.addAdSkipBtn(t.skipTime)},2e3))):(this.adPlayStatus=!1,this.logo.style.display="block",this.logo.active=!0,-1!=this.activeButtons.indexOf("goToArticleBtn")&&(this.config.clkUrl||this.config.contentClickUrl)?(this.header.style.top=parseInt(this.topMerge)+20+"px",this.goToArticleBtn.style.display="block",this.goToArticleBtn.active=!0,1==this.header.style.opacity&&(this.goToArticleBtn.style.opacity=1)):(this.header.style.top=this.topMerge,this.goToArticleBtn.style.display="none",this.goToArticleBtn.style.opacity=0,this.goToArticleBtn.active=!1),this.removeChilds({destiny:"videoAd"}),this.skipAdTimeout&&clearTimeout(this.skipAdTimeout),this.addSkipAdTimeout&&clearTimeout(this.addSkipAdTimeout),this.skipAdInterval&&clearInterval(this.skipAdInterval))},SlickSkin.prototype.addAdSkipBtn=function(e){var t=this,i=this.config.videoIFrameDoc.createElement("div");i.id="skipBtn",i.style.position="fixed",i.style.bottom="40px",i.style.right="-90px",i.style.zIndex="1000000",i.style.backgroundColor="rgba(0,0,0,0.8)",i.style.color="white",i.style.display="inline-block",i.style.border="1px solid rgba(255,255,255,0.8)",i.style.borderRight=0,i.style.padding="4px 6px 4px 10px",i.style.fontFamily="Roboto",i.style.width="58px",i.style.fontSize="12px",i.style.transform="scale(1.2)translate(-6px,0)",i.style.cursor="default";var n=document.createElement("span");i.appendChild(n),SekindoUtils.animateTo(i.style,"right","-60px",.4,"easeIn");var s=1;this.skipAdTimeout&&clearTimeout(this.skipAdTimeout),this.skipAdInterval&&clearInterval(this.skipAdInterval),this.skipAdTimeout=setTimeout(function(){clearInterval(t.skipAdInterval),i.innerHTML='<div id="ad-text:n" style="display: inline-block; padding-right: 4px;">Skip Ad</div><svg height="12px" version="1.1" viewBox="12 12 12 12" width="12px" fill="#FFFFFF" transform="scale(.8) translate(0,2)"><use  xlink:href="#ytp-id-34"></use><path  d="M 12,24 20.5,18 12,12 V 24 z M 22,12 v 12 h 2 V 12 h -2 z" id="ytp-id-34"></path></svg>',i.style.cursor="pointer",i.onclick=function(){t.config.bus.triggerNote("onUserEvent",{type:"skipAd"})},SekindoUtils.animateTo(i.style,"right","0px",.6,"easeIn")},5600),this.skipAdInterval=setInterval(function(){s-=100/5600;var e=Math.round(5.6*s);n.innerText=e,s<=0&&clearInterval(t.skipAdInterval)},100),this.config.bus.triggerNote("addChild",{visual:i,destiny:"videoAd"})},SlickSkin.prototype.destruct=function(){this.mobileShowSkinTimeout&&clearTimeout(this.mobileShowSkinTimeout),this.touchTimeOut&&clearTimeout(this.touchTimeOut),this.config.playerTemplateData.hasPlaylist&&this.playlist.destruct()},SlickPlaylistUnit.prototype.destruct=function(){},SlickPlaylist.prototype.onAdEvent=function(e){"adStarted"==e?this.container.style.opacity=.3:"adCompleted"==e&&(this.container.style.opacity=1)},SlickPlaylist.prototype.destruct=function(){for(this.arrowInterval&&clearInterval(this.arrowInterval),this.touchTimeout&&clearTimeout(this.touchTimeout),i=0;i<this.unitsArray.length;i++)this.unitsArray[i].destruct()},SekindoFlowManager.prototype.generateCapsule=function(e){this.capsulesStack[e]&&this.capsuleId!=e&&(this.capsuleId=e,this.currCapsule=new SekindoFlowCapsule(this.config,this.capsulesStack[e],this))},SekindoFlowManager.prototype.setCapsulesData=function(){(e={}).id="initiation",e.when=[{callbackID:"adsManagerInited",save:[{id:"adsManagerInited",val:!0},{id:"isAutoPlay",val:"config.isAutoPlay"},{id:"isPreroll",val:"config.isPreroll"},{id:"vpApi",val:"config.vpApi"}]},{callbackID:"playlistInited",save:{id:"playlistInited",val:!0}}],e.then=[{if:{and:[{id:"adsManagerInited",val:!0},{id:"playlistInited",val:!0},{id:"isPreroll",val:!0}]},do:[{func:"triggerNote",params:{callbackID:"loadNextContentBG",content:!0}}]},{if:{and:[{id:"adsManagerInited",val:!0},{
id:"playlistInited",val:!0},{not:{id:"isAutoPlay",val:"0"}},{id:"vpApi",val:!1}]},do:[{func:"triggerNote",params:{callbackID:"resumeAdsSchedule",content:!0}}]},{if:{and:[{id:"adsManagerInited",val:!0},{id:"playlistInited",val:!0},{id:"isAutoPlay",val:"1"},{not:{id:"isPreroll",val:!0}}]},do:[{func:"triggerNote",params:{callbackID:"resumePlaylist",content:!1}}]},{if:{and:[{id:"adsManagerInited",val:!0},{id:"playlistInited",val:!0},{id:"isAutoPlay",val:"1"}]},do:[{func:"destructCurrCapsule"},{func:"triggerNote",params:{callbackID:"setPreloader",content:!0}},{func:"resetSaveObj"},{func:"nextCapsule",params:"syncAdsToPlaylist"}]},{if:{and:[{id:"adsManagerInited",val:!0},{id:"playlistInited",val:!0},{id:"isAutoPlay",val:"0"}]},do:[{func:"triggerNote",params:{callbackID:"loadNextContentBG",content:!0}},{func:"destructCurrCapsule"},{func:"resetSaveObj"},{func:"nextCapsule",params:"waitForUser"}]},{if:{and:[{id:"adsManagerInited",val:!0},{id:"playlistInited",val:!0},{id:"isAutoPlay",val:"2"}]},do:[{func:"triggerNote",params:{callbackID:"loadNextContentBG",content:!0}},{func:"destructCurrCapsule"},{func:"resetSaveObj"},{func:"triggerNote",params:{callbackID:"resumePlaylist",content:!0}},{func:"nextCapsule",params:"simulateAndwaitForUser"}]},{if:{and:[{id:"adsManagerInited",val:!0},{id:"playlistInited",val:!0},{id:"isAutoPlay",val:"3"},{id:"vpApi",val:!1}]},do:[{func:"triggerNote",params:{callbackID:"loadNextContentBG",content:!0}},{func:"destructCurrCapsule"},{func:"resetSaveObj"},{func:"triggerNote",params:{callbackID:"resumePlaylist",content:!0}},{func:"nextCapsule",params:"simulatePlaylist"}]},{if:{and:[{id:"adsManagerInited",val:!0},{id:"playlistInited",val:!0},{id:"isAutoPlay",val:"4"}]},do:[{func:"triggerNote",params:{callbackID:"loadNextContentBG",content:!0}},{func:"destructCurrCapsule"},{func:"resetSaveObj"},{func:"triggerNote",params:{callbackID:"resumePlaylist",content:!0}},{func:"nextCapsule",params:"simulateAndwaitForUserOrImpression"}]},{if:{and:[{id:"adsManagerInited",val:!0},{id:"playlistInited",val:!0},{id:"isAutoPlay",val:"3"},{not:{id:"vpApi",val:!1}}]},do:[{func:"triggerNote",params:{callbackID:"loadNextContentBG",content:!0}},{func:"destructCurrCapsule"},{func:"resetSaveObj"},{func:"nextCapsule",params:"vpApiFlow"}]}],this.capsulesStack[e.id]=e;(e={}).id="syncAdsToPlaylist",e.when=[{callbackID:"adStarted",save:[{id:"callbackID",val:"adStarted"},{id:"adRunning",val:!0}]},{callbackID:"adCompleted",save:[{id:"callbackID",val:"adCompleted"},{id:"adRunning",val:!1},{id:"isPreroll",val:"config.isPreroll"}]},{callbackID:"waterFallEmpty",save:[{id:"callbackID",val:"waterFallEmpty"},{id:"isPreroll",val:"config.isPreroll"}]},{callbackID:"contentEnded",save:[{id:"callbackID",val:"contentEnded"},{id:"contentEnded",val:!0}]},{callbackID:"userSwitchContent",save:[{id:"callbackID",val:"userSwitchContent"}]},{callbackID:"playlistEnded",save:[{id:"callbackID",val:"playlistEnded"},{id:"playlistEnded",val:!0}]},{callbackID:"onUserEvent",content:{type:"onPlay"},save:[{id:"callbackID",val:"onPlay"},{id:"isPreroll",val:"config.isPreroll"}]},{callbackID:"onUserEvent",content:{type:"onPause"},save:[{id:"callbackID",val:"onPause"},{id:"isPreroll",val:"config.isPreroll"}]},{callbackID:"userIntentOn",save:[{id:"callbackID",val:"userIntentOn"},{id:"enableIntentActions",val:"config.enableIntentActions"}]},{callbackID:"userIntentOff",save:[{id:"callbackID",val:"userIntentOff"},{id:"enableIntentActions",val:"config.enableIntentActions"}]}],e.then=[{if:{and:[{id:"callbackID",val:"userIntentOn"},{id:"enableIntentActions",val:!0}]},do:[{func:"triggerNote",params:{callbackID:"intentOn"}},{func:"triggerNote",params:{callbackID:"resetAdsSchedule"}},{func:"triggerNote",params:{callbackID:"resumeAdsSchedule",content:!0}},{func:"triggerNote",params:{callbackID:"resumePlaylist"}}]},{if:{and:[{id:"callbackID",val:"userIntentOff"},{id:"enableIntentActions",val:!0}]},do:[{func:"triggerNote",params:{callbackID:"intentOff"}}]},{if:{and:[{id:"adRunning",val:!0},{id:"callbackID",val:"onPlay"}]},do:[{func:"triggerNote",params:{callbackID:"resumeAdsSchedule"}}]},{if:{and:[{not:{id:"adRunning",val:!0}},{id:"callbackID",val:"onPlay"}]},do:[{func:"triggerNote",params:{callbackID:"resumePlaylist"}},{func:"triggerNote",params:{callbackID:"resumeAdsSchedule"}}]},{if:{id:"callbackID",val:"onPause"},do:[{func:"triggerNote",params:{callbackID:"pausePlaylist"}},{func:"triggerNote",params:{callbackID:"pauseAdsSchedule"}}]},{if:{id:"callbackID",val:"adStarted"},do:[{func:"triggerNote",params:{callbackID:"pausePlaylist"}}]},{if:{or:[{id:"callbackID",val:"adCompleted"},{and:[{id:"callbackID",val:"waterFallEmpty"},{id:"isPreroll",val:!0}]}]},do:[{func:"triggerNote",params:{callbackID:"resumePlaylist"}}]},{if:{id:"callbackID",val:"contentEnded"},do:[{func:"destructCurrCapsule"},{func:"triggerNote",params:{callbackID:"pauseAdsSchedule"}},{func:"resetSaveObj"},{func:"nextCapsule",params:"onContentEnded"}]},{if:{id:"callbackID",val:"userSwitchContent"},do:[{func:"triggerNote",params:{callbackID:"setPreloader",content:!0}},{func:"destructCurrCapsule"},{func:"triggerNote",params:{callbackID:"pauseAdsSchedule"}},{func:"resetSaveObj"},{func:"nextCapsule",params:"onSwitchContent"}]},{if:{id:"callbackID",val:"playlistEnded"},do:[{func:"destructCurrCapsule"},{func:"triggerNote",params:{callbackID:"pauseAdsSchedule"}},{func:"triggerNote",params:{callbackID:"loadNextContentBG",content:!0}},{func:"resetSaveObj"},{func:"nextCapsule",params:"waitForUser"}]}],this.capsulesStack[e.id]=e;(e={}).id="onSwitchContent",e.when=[{onInit:!0,save:[{id:"isPreroll",val:"config.isPreroll"},{id:"nextContentIndex",val:"config.nextContentIndex"},{id:"isInit",val:!0}]},{callbackID:"adCompleted",save:[{id:"callbackID",val:"adCompleted"},{id:"adRunning",val:!1},{id:"isInit",val:!1}]},{callbackID:"waterFallEmpty",save:[{id:"callbackID",val:"waterFallEmpty"},{id:"isPreroll",val:"config.isPreroll"},{id:"isInit",val:!1}]},{callbackID:"userSwitchContent",save:[{id:"callbackID",val:"userSwitchContent"},{id:"isInit",val:!1}]},{callbackID:"userIntentOn",save:[{id:"callbackID",val:"userIntentOn"},{id:"enableIntentActions",val:"config.enableIntentActions"}]},{callbackID:"userIntentOff",save:[{id:"callbackID",val:"userIntentOff"},{id:"enableIntentActions",val:"config.enableIntentActions"}]}],e.then=[{if:{and:[{id:"isPreroll",val:!1},{id:"isInit",val:!0}]},do:[{func:"triggerNote",params:{callbackID:"onSwitchContent"}},{func:"destructCurrCapsule"},{func:"triggerNote",params:{callbackID:"resetAdsSchedule"}},{func:"triggerNote",params:{callbackID:"resumeAdsSchedule",content:!0}},{func:"resetSaveObj"},{func:"nextCapsule",params:"syncAdsToPlaylist"}]},{if:{and:[{id:"isPreroll",val:!0},{id:"isInit",val:!0}]},do:[{func:"triggerNote",params:{callbackID:"loadSwitchedContentBG"}},{func:"triggerNote",params:{callbackID:"prepareNextContent"}},{func:"triggerNote",params:{callbackID:"resetAdsSchedule"}},{func:"triggerNote",params:{callbackID:"resumeAdsSchedule",content:!1}}]},{if:{and:[{id:"callbackID",val:"userIntentOff"},{id:"enableIntentActions",val:!0}]},do:[{func:"triggerNote",params:{callbackID:"intentOff"}}]},{if:{and:[{id:"isPreroll",val:!0},{or:[{id:"callbackID",val:"adCompleted"},{id:"callbackID",val:"waterFallEmpty"}]}]},do:[{func:"triggerNote",params:{callbackID:"onSwitchContent"}},{func:"destructCurrCapsule"},{func:"resetSaveObj"},{func:"nextCapsule",params:"syncAdsToPlaylist"}]},{if:{and:[{id:"callbackID",val:"userSwitchContent"},{id:"isPreroll",val:!0}]},do:[{func:"triggerNote",params:{callbackID:"loadSwitchedContentBG"}}]}],this.capsulesStack[e.id]=e;(e={}).id="onContentEnded",e.when=[{onInit:!0,save:[{id:"isPreroll",val:"config.isPreroll"}]}],e.then=[{if:{id:"isPreroll",val:!0},do:[{func:"triggerNote",params:{callbackID:"setPreloader",content:!0}},{func:"triggerNote",params:{callbackID:"loadNextContentBG",content:!0}}]},{if:{not:{id:"isPreroll",val:!0}},do:[{func:"triggerNote",params:{callbackID:"resumePlaylist"}}]},{do:[{func:"destructCurrCapsule"},{func:"triggerNote",params:{callbackID:"resetAdsSchedule"}},{func:"triggerNote",params:{callbackID:"resumeAdsSchedule",content:!0}},{func:"resetSaveObj"},{func:"nextCapsule",params:"syncAdsToPlaylist"}]}],this.capsulesStack[e.id]=e;(e={}).id="waitForUser",e.when=[{callbackID:"onUserEvent",content:{type:"onPlay"},save:[{id:"callbackID",val:"onPlay"},{id:"isPreroll",val:"config.isPreroll"}]}],e.then=[{if:{not:{id:"isPreroll",val:!0}},do:[{func:"triggerNote",params:{callbackID:"resumePlaylist"}}]},{do:[{func:"triggerNote",params:{callbackID:"setPreloader",content:!0}},{func:"destructCurrCapsule"},{func:"triggerNote",params:{callbackID:"resetAdsSchedule"}},{func:"triggerNote",params:{callbackID:"resumeAdsSchedule",content:!0}},{func:"resetSaveObj"},{func:"nextCapsule",params:"syncAdsToPlaylist"}]}],this.capsulesStack[e.id]=e;(e={}).id="simulatePlaylist",e.when=[{callbackID:"adStarted",save:[{id:"callbackID",val:"adStarted"},{id:"adRunning",val:!0}]},{callbackID:"adCompleted",save:[{id:"callbackID",val:"adCompleted"},{id:"adRunning",val:!1}]},{callbackID:"waterFallEmpty",save:[{id:"callbackID",val:"waterFallEmpty"}]},{callbackID:"contentEnded",save:[{id:"callbackID",val:"contentEnded"},{id:"contentEnded",val:!0}]},{callbackID:"onUserEvent",content:{type:"onPlay"},save:[{id:"callbackID",val:"onPlay"}]},{callbackID:"onUserEvent",content:{type:"onPause"},save:[{id:"callbackID",val:"onPause"}]}],e.then=[{if:{and:[{id:"adRunning",val:!0},{id:"callbackID",val:"onPlay"}]},do:[{func:"triggerNote",params:{callbackID:"resumeAdsSchedule"}}]},{if:{and:[{not:{id:"adRunning",val:!0}},{id:"callbackID",val:"onPlay"}]},do:[{func:"triggerNote",params:{callbackID:"resumePlaylist",content:!0}},{func:"triggerNote",params:{callbackID:"resumeAdsSchedule"}}]},{if:{id:"callbackID",val:"onPause"},do:[{func:"triggerNote",params:{callbackID:"pausePlaylist"}},{func:"triggerNote",params:{callbackID:"pauseAdsSchedule"}}]},{if:{id:"callbackID",val:"adStarted"},do:[{func:"triggerNote",params:{callbackID:"pausePlaylist",content:!0}}]},{if:{or:[{id:"callbackID",val:"adCompleted"},{id:"callbackID",val:"waterFallEmpty"}]},do:[{func:"triggerNote",params:{callbackID:"resumePlaylist",content:!0}}]},{if:{id:"callbackID",val:"contentEnded"},do:[{func:"triggerNote",params:{callbackID:"resetAdsSchedule"}},{func:"triggerNote",params:{callbackID:"resumeAdsSchedule",content:!0}}]}],this.capsulesStack[e.id]=e;(e={}).id="simulateAndwaitForUser",e.when=[{callbackID:"onUserEvent",content:{type:"onPlay"},save:[{id:"callbackID",val:"onPlay"},{id:"isPreroll",val:"config.isPreroll"}]},{callbackID:"onUserEvent",content:{type:"onPause"},save:[{id:"callbackID",val:"onPause"},{id:"isPreroll",val:"config.isPreroll"}]},{callbackID:"adStarted",save:[{id:"callbackID",val:"adStarted"},{id:"adRunning",val:!0}]},{callbackID:"adCompleted",save:[{id:"callbackID",val:"adCompleted"},{id:"adRunning",val:!1}]},{callbackID:"waterFallEmpty",save:[{id:"callbackID",val:"waterFallEmpty"},{id:"isPreroll",val:"config.isPreroll"}]},{callbackID:"contentEnded",save:[{id:"callbackID",val:"contentEnded"},{id:"contentEnded",val:!0}]}],e.then=[{if:{id:"callbackID",val:"onPause"},do:[{func:"triggerNote",params:{callbackID:"pauseAdsSchedule"}}]},{if:{and:[{id:"adRunning",val:!0},{id:"callbackID",val:"onPlay"}]},do:[{func:"triggerNote",params:{callbackID:"resumeAdsSchedule"}}]},{if:{and:[{not:{id:"isPreroll",val:!0}},{not:{id:"adRunning",val:!0}},{id:"callbackID",val:"onPlay"}]},do:[{func:"triggerNote",params:{callbackID:"stopSimulator",content:!0}},{func:"triggerNote",params:{callbackID:"resumePlaylist",content:!1}}]},{if:{and:[{not:{id:"adRunning",val:!0}},{id:"callbackID",val:"onPlay"}]},do:[{func:"triggerNote",params:{callbackID:"setPreloader",content:!0}},{func:"destructCurrCapsule"},{func:"triggerNote",params:{callbackID:"stopSimulator",content:!0}},{func:"triggerNote",params:{callbackID:"resetAdsSchedule"}},{func:"triggerNote",params:{callbackID:"resumeAdsSchedule",content:!0}},{func:"resetSaveObj"},{func:"nextCapsule",params:"syncAdsToPlaylist"}]},{if:{id:"callbackID",val:"adStarted"},do:[{func:"triggerNote",params:{callbackID:"pausePlaylist",content:!0}}]},{if:{or:[{id:"callbackID",val:"adCompleted"},{and:[{id:"callbackID",val:"waterFallEmpty"},{id:"isPreroll",val:!0}]}]},do:[{func:"triggerNote",params:{callbackID:"resumePlaylist",content:!0}}]},{if:{id:"callbackID",val:"contentEnded"},do:[{func:"triggerNote",params:{callbackID:"resetAdsSchedule"}},{func:"triggerNote",params:{callbackID:"resumeAdsSchedule",content:!0}}]}],this.capsulesStack[e.id]=e;(e={}).id="simulateAndwaitForUserOrImpression",e.when=[{callbackID:"onUserEvent",content:{type:"onPlay"},save:[{id:"callbackID",val:"onPlay"},{id:"isPreroll",val:"config.isPreroll"}]},{callbackID:"onUserEvent",content:{type:"onPause"},save:[{id:"callbackID",val:"onPause"}]},{callbackID:"adStarted",save:[{id:"callbackID",val:"adStarted"},{id:"adRunning",val:!0}]},{callbackID:"adCompleted",save:[{id:"callbackID",val:"adCompleted"},{id:"adRunning",val:!1},{id:"isPreroll",val:"config.isPreroll"}]},{callbackID:"waterFallEmpty",save:[{id:"callbackID",val:"waterFallEmpty"}]}],e.then=[{if:{id:"callbackID",val:"onPause"},do:[{func:"triggerNote",params:{callbackID:"pauseAdsSchedule"}}]},{if:{and:[{id:"adRunning",val:!0},{id:"callbackID",val:"onPlay"}]},do:[{func:"triggerNote",params:{callbackID:"resumeAdsSchedule"}}]},{if:{and:[{or:[{id:"callbackID",val:"adCompleted"},{and:[{not:{id:"adRunning",val:!0}},{id:"callbackID",val:"onPlay"}]}]},{not:{id:"isPreroll",val:!0}}]},do:[{func:"triggerNote",params:{callbackID:"setPreloader",content:!0}},{func:"destructCurrCapsule"},{func:"triggerNote",params:{callbackID:"stopSimulator",content:!0}},{func:"triggerNote",params:{callbackID:"resetAdsSchedule"}},{func:"triggerNote",params:{callbackID:"resumePlaylist"}},{func:"triggerNote",params:{callbackID:"resumeAdsSchedule",content:!0}},{func:"resetSaveObj"},{func:"nextCapsule",params:"syncAdsToPlaylist"}]},{if:{and:[{or:[{id:"callbackID",val:"adCompleted"},{and:[{not:{id:"adRunning",val:!0}},{id:"callbackID",val:"onPlay"}]}]},{id:"isPreroll",val:!0}]},do:[{func:"triggerNote",params:{callbackID:"setPreloader",content:!0}},{func:"destructCurrCapsule"},{func:"triggerNote",params:{callbackID:"stopSimulator",content:!0}},{func:"triggerNote",params:{callbackID:"resetAdsSchedule"}},{func:"triggerNote",params:{callbackID:"resumeAdsSchedule",content:!0}},{func:"resetSaveObj"},{func:"nextCapsule",params:"syncAdsToPlaylist"}]},{if:{id:"callbackID",val:"adStarted"},do:[{func:"triggerNote",params:{callbackID:"pausePlaylist",content:!0}}]},{if:{id:"callbackID",val:"waterFallEmpty"},do:[{func:"triggerNote",params:{callbackID:"resumePlaylist",content:!0}}]}],this.capsulesStack[e.id]=e;var e;(e={}).id="vpApiFlow",e.when=[{onInit:!0,save:[{id:"apiEvent",val:"ready"}]},{callbackID:"adStarted",save:[{id:"apiEvent",val:"adStarted"},{id:"adRunning",val:!0}]},{callbackID:"adCompleted",save:[{id:"apiEvent",val:"adCompleted"},{id:"adRunning",val:!1}]},{callbackID:"waterFallEmpty",save:[{id:"apiEvent",val:"waterFallEmpty"},{id:"isPreroll",val:"config.isPreroll"}]},{callbackID:"onApiEvent",content:{type:"start"},save:[{id:"apiEvent",val:"start"}]},{callbackID:"onApiEvent",content:{type:"stop"},save:[{id:"apiEvent",val:"stop"}]},{callbackID:"onApiEvent",content:{type:"resume"},save:[{id:"apiEvent",val:"resume"}]},{callbackID:"onApiEvent",content:{type:"pause"},save:[{id:"apiEvent",val:"pause"}]},{callbackID:"onApiEvent",content:{type:"skip"},save:[{id:"apiEvent",val:"skip"}]},{callbackID:"onApiEvent",content:{type:"display"},save:[{id:"apiEvent",val:"display"}]},{callbackID:"onApiEvent",content:{type:"hide"},save:[{id:"apiEvent",val:"hide"}]},{callbackID:"onUserEvent",content:{type:"onPlay"},save:[{id:"apiEvent",val:"onPlay"}]},{callbackID:"onUserEvent",content:{type:"onPause"},save:[{id:"apiEvent",val:"onPause"}]}],e.then=[{if:{id:"apiEvent",val:"ready"},do:[{func:"triggerNote",params:{callbackID:"onApiEvent",content:"ready"}}]},{if:{and:[{id:"apiEvent",val:"start"},{not:{id:"adRunning",val:!0}}]},do:[{func:"triggerNote",params:{callbackID:"resetAdsSchedule"}},{func:"triggerNote",params:{callbackID:"resumePlaylist",content:!0}},{func:"triggerNote",params:{callbackID:"resumeAdsSchedule"}}]},{if:{or:[{id:"apiEvent",val:"stop"},{id:"apiEvent",val:"skip"}]},do:[{func:"triggerNote",params:{callbackID:"pausePlaylist"}},{func:"triggerNote",params:{callbackID:"pauseAdsSchedule",content:"skipAd"}}]},{if:{and:[{or:[{id:"apiEvent",val:"pause"},{id:"apiEvent",val:"onPause"}]},{id:"adRunning",val:!0}]},do:[{func:"triggerNote",params:{callbackID:"pauseAdsSchedule",content:"pauseAd"}}]},{if:{and:[{or:[{id:"apiEvent",val:"resume"},{id:"apiEvent",val:"onPlay"}]},{id:"adRunning",val:!0}]},do:[{func:"triggerNote",params:{callbackID:"resumeAdsSchedule"}}]},{if:{id:"apiEvent",val:"adStarted"},do:[{func:"triggerNote",params:{callbackID:"pausePlaylist",content:!0}}]},{if:{and:[{id:"apiEvent",val:"waterFallEmpty"},{id:"isPreroll",val:!0}]},do:[{func:"triggerNote",params:{callbackID:"resumePlaylist",content:!0}}]},{if:{id:"apiEvent",val:"adCompleted"},do:[{func:"triggerNote",params:{callbackID:"pausePlaylist"}},{func:"triggerNote",params:{callbackID:"pauseAdsSchedule"}}]}],this.capsulesStack[e.id]=e},SekindoFlowCapsule.prototype.save=function(e){var t=e.save;e.save.id&&(t=[e.save]);for(var i=0;i<t.length;i++){var n=t[i].val,s=t[i].id;if("callbackContent"==s&&(n=e.content),-1!=String(n).indexOf("config.")){var o=n.replace("config.","");n=this.config[o]}this.saveObj[s]=n}},SekindoFlowCapsule.prototype.then=function(){if(this.dataObj.then)for(var e=0;e<this.dataObj.then.length;e++)if(this.dataObj.then[e].if){if(this.dataObj.then[e].if.or){var t=this.dataObj.then[e].if.or,i=this.saveObj;this.gateOr(t,i)&&this.do(this.dataObj.then[e].do)}else if(this.dataObj.then[e].if.and){t=this.dataObj.then[e].if.and,i=this.saveObj;this.gateAnd(t,i)&&this.do(this.dataObj.then[e].do)}else if(this.dataObj.then[e].if.not){t=this.dataObj.then[e].if.not,i=this.saveObj;this.gateNot(t,i)&&this.do(this.dataObj.then[e].do)}else if(this.dataObj.then[e].if){var n=this.dataObj.then[e].if;this.saveObj[n.id]==n.val&&this.do(this.dataObj.then[e].do)}}else this.do(this.dataObj.then[e].do)},SekindoFlowCapsule.prototype.do=function(e){for(var t=this,i=0;i<e.length;i++){var n=e[i];switch(n.func){case"triggerNote":this.config.bus.triggerNote(n.params.callbackID,n.params.content);break;case"updateSaveObj":this.saveObj[n.params.id]=n.params.val;break;case"resetSaveObj":this.saveObj=[];break;case"nextCapsule":if(this.nextC)return;this.nextC=!0,window.primisLog("[Flow Manager] - Next Capsule: "+n.params),setTimeout(function(){t.oner.generateCapsule(n.params)},1);break;case"destructCurrCapsule":this.destruct()}}},SekindoFlowCapsule.prototype.setCallbacks=function(){var e=this.dataObj.when;this.busItems=[];for(var t=0;t<e.length;t++)if(e[t].onInit)this.save(e[t]),this.then();else{var i=e[t].capsuleCallback=new FlowCapsuleCallback(e[t],this),n=this.config.bus.addCallBack(e[t].callbackID,i.execute);this.busItems.push(n)}},SekindoFlowCapsule.prototype.destruct=function(){for(var e=0;e<this.busItems.length;e++)this.config.bus.removeBusItm(this.busItems[e])},SekindoFlowCapsule.prototype.gateAnd=function(e,t){for(var i=!0,n=0;n<e.length;n++){var s=e[n];if(s.or){if(!this.gateOr(s.or,t)){i=!1;break}}else if(s.and){if(!this.gateAnd(s.and,t)){i=!1;break}}else if(s.not){if(!this.gateNot(s.not,t)){i=!1;break}}else if(t[s.id]!=s.val){i=!1;break}}return i},SekindoFlowCapsule.prototype.gateOr=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.or){if(this.gateOr(n.or,t))return!0}else if(n.and){if(this.gateAnd(n.and,t))return!0}else if(n.not){if(this.gateNot(n.not,t))return!0}else if(t[n.id]==n.val)return!0}return!1},SekindoFlowCapsule.prototype.gateNot=function(e,t){var i=e;return i.or?!this.gateOr(i.or,t):i.and?!this.gateAnd(i.and,t):i.not?!this.gateNot(i.not,t):t[i.id]!=i.val},SekindoBus.prototype.callback=function(e){for(var t=0;t<this.callbacksArray.length;t++)if(e.callbackID==this.callbacksArray[t].callbackID&&e.callbackFunc==this.callbacksArray[t].callbackFunc)return;this.callbacksArray.push(e)},SekindoBus.prototype.trigger=function(e){for(var t=0;t<this.callbacksArray.length;t++)e.callbackID==this.callbacksArray[t].callbackID&&this.callbacksArray[t].callbackFunc(e.content)},SekindoBus.prototype.triggerNote=function(e,t){var i=new SekindoBusNote;i.callbackID=e,i.content=t,this.trigger(i)},SekindoBus.prototype.addCallBack=function(e,t){var i=new SekindoBusItm;return i.callbackID=e,i.callbackFunc=t,this.callback(i),i},SekindoBus.prototype.removeCallBack=function(e,t){for(var i=0;i<this.callbacksArray.length;i++)e==this.callbacksArray[i].callbackID&&t==this.callbacksArray[i].callbackFunc&&this.callbacksArray.splice(i,1)},SekindoBus.prototype.removeBusItm=function(e){for(var t=0;t<this.callbacksArray.length;t++)e==this.callbacksArray[t]&&this.callbacksArray.splice(t,1)},SekindoAdsManager.prototype.onIntentOn=function(){this.config.playbackMethod="click",!1===this.intentStatus&&"fullscreen"!==this.config.intentInitiator&&this.loadWaterfall(),this.intentStatus=!0},SekindoAdsManager.prototype.onIntentOff=function(){this.config.playbackMethod="auto",!0===this.intentStatus&&this.loadWaterfall(),this.intentStatus=!1},SekindoAdsManager.prototype.onPlayerResize=function(e,t){if(this.currAdUnit){var i=e.videoWidth||e.width,n=e.videoHeight||e.height;this.currAdUnit.videoElement&&(this.currAdUnit.videoElement.width=i,this.currAdUnit.videoElement.height=n),this.currAdUnit.vpaidSlot&&(this.currAdUnit.vpaidSlot.style.width=i,this.currAdUnit.vpaidSlot.style.height=n),this.currAdUnit.wrapper&&this.currAdUnit.wrapper.resizeAd(i,n,"normal")}this.config.adsProcessPaused||t||this.config.adsProcessHalter.shouldHalt()||this.loadWaterfall()},SekindoAdsManager.prototype.setAdsSchedule=function(){this.currAdSchedule=[],this.nextAd=null;var e=!1;for(var t in this.config.adsSchedule)if("pre_roll"==t&&1==this.config.adsSchedule[t])this.config.isPreroll=this.config.realPrerollTimeout>0,this.currAdSchedule.unshift({format:"pre_roll"});else if("mid_roll"==t)for(var i=this.config.adsSchedule[t],n=0;n<i.length;n++)this.currAdSchedule.push({format:"mid_roll",val:i[n]});else"gap"==t&&(e={format:"gap",val:this.config.adsSchedule[t]});e&&this.currAdSchedule.push(e)},SekindoAdsManager.prototype.pauseAdsSchedule=function(e){if(this.config.adsProcessPaused=!0,this.currAdUnit)if(e&&"skipAd"==e)this.stopAd();else if(this.currAdUnit.wrapper)if(e&&"pauseAd"==e)try{this.currAdUnit.wrapper.pauseAd()}catch(e){}else{try{this.currAdUnit.wrapper.skipAd()}catch(e){}try{this.currAdUnit.wrapper.stopAd()}catch(e){}}else this.currAdUnit.videoElement&&!this.currAdUnit.videoElement.paused&&this.currAdUnit.videoElement.pause()},SekindoAdsManager.prototype.resumeAdsSchedule=function(e){if(this.config.blockAdRequests||(this.config.adsProcessPaused=!1),this.config.isPlaying&&this.currAdUnit&&this.currAdUnit.videoElement&&this.currAdUnit.videoElement.paused&&"none"!=this.currAdUnit.videoElement.parentNode.style.display){var t=this.currAdUnit.videoElement.play();if(t)try{t.then(function(){}).catch(function(e){})}catch(e){}}else this.executeAdsSchedule(e)},SekindoAdsManager.prototype.resetAdsSchedule=function(){this.setAdsSchedule()},SekindoAdsManager.prototype.calcViewableImpGapTimeDiff=function(){var e=0;if(this.config.lastImpViewableCompleteTime>0){var t=new Date;e=Math.max(0,this.config.lastImpViewableCompleteTime+1e3*this.config.adsSchedule.gap.impGap-t.getTime()),0==(e/=1e3)&&(this.config.lastImpViewableCompleteTime=0)}return e},SekindoAdsManager.prototype.executeAdsSchedule=function(e){function t(){i.checkMaxImps()?i.currWaterfall?i.currWaterfall.setWaterfall():i.loadWaterfall():(i.leapRoundCounter++,i.generateProcessor())}var i=this;if(!(this.config.adsProcessPaused||this.config.adsProcessHalter.shouldHalt()||(this.config.pixelDivConstructor&&this.config.pixelDivConstructor.reConstructPixelDiv(),this.currAdSchedule.length<=0||this.nextAd&&this.nextAd==this.currAdSchedule[0]&&"gap"!=this.nextAd.format))){this.nextAd=this.currAdSchedule[0],s&&i.config.bus.removeBusItm(s);var n=this.calcViewableImpGapTimeDiff();if("pre_roll"==this.nextAd.format)this.currAdSchedule.shift(),0==n?t():this.executeAdsSchedule();else if("mid_roll"==this.nextAd.format)if(this.contentVidCurrTime<=this.nextAd.val)var s=this.config.bus.addCallBack("onVideoProgress",function(e){!function(e){e.currTime>=i.nextAd.val&&(i.config.bus.removeBusItm(s),i.currAdSchedule.shift(),t())}(e)});else this.currAdSchedule.shift(),this.executeAdsSchedule();else if("gap"==this.nextAd.format){var o;o=n>0?n:this.config.hadImpression?2:this.nextAd.val.attGap||(this.waterfallGap?this.waterfallGap.attGap:15),this.config.hadImpression=!1,this.timeOutObj&&clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(function(){i.timeOutObj=null,t()},1e3*o)}}},SekindoAdsManager.prototype.onUserEvent=function(e){switch(e.type){case"onPlay":this.destructOnFailAllowed=!0}},SekindoAdsManager.prototype.loadWaterfall=function(e){function t(e,t){for(var i in e)for(var n in t)if(i==n&&e[i]!=t[n])return!1;return!0}var i=this,n=this.config.onViewabilityChange.getCurrState();if(!this.config.flowStatus||"cacheable"!=e){var s={width:this.config.videoWidth||this.config.width,height:this.config.videoHeight||this.config.height,viewable:n,type:e||"normal",gdprIsRequired:this.gdprIsRequired,gdprRawConsent:this.gdprRawConsent,gdprIsWePass:this.gdprIsWePass,playbackMethod:this.config.playbackMethod};if(this.currWaterfall&&t(this.currWaterfall.settings,s))return window.primisLog("[Ads Manager][Waterfall loaded] - same as current wf: {width:"+s.width+", height:"+s.height+", viewable:"+s.viewable+", playbackMethod:"+s.playbackMethod+"}"),void(!this.currWaterfall.adsProgram.length&&this.currWaterfall.adsProgramLoaded&&setTimeout(function(){i.config.bus.triggerNote("waterFallEmpty")},10));for(var o=0;o<this.waterfallArray.length;o++)if(t(this.waterfallArray[o].settings,s)){if(window.primisLog("[Ads Manager][Waterfall loaded] - same as previous wf: {width:"+s.width+", height:"+s.height+", viewable:"+s.viewable+", playbackMethod:"+s.playbackMethod+"}"),"cacheable"!=e&&(this.currWaterfall=this.waterfallArray[o],this.limitedImpressions=0,this.currWaterfall.adsProgramLoaded)){this.newAdsProgram=this.currWaterfall.adsProgram,this.waterfallGap=this.currWaterfall.waterfallGap;this.config.onViewabilityChange.getCurrState()&&(this.isPlayerSimulatorActive&&!this.config.playerTemplateData.isPauseNonViewable||this.config.forcePreroll||SekindoServices.fullscreen.isFullscreen)?(this.config.forcePreroll=!1,this.setAdsSchedule(),this.executeAdsSchedule()):(this.viewableWaterfallAvailable=!0,this.generateProcessor(e))}return}if("cacheable"==e){var a=new SekindoWaterfallLoader(this.config,s);this.waterfallArray.push(a)}else if(!this.config.adsProcessPaused&&!this.config.adsProcessHalter.shouldHalt()){window.primisLog("[Ads Manager][Waterfall loaded] - new wf: {width:"+s.width+", height:"+s.height+", viewable:"+s.viewable+", playbackMethod:"+s.playbackMethod+"}");a=new SekindoWaterfallLoader(this.config,s);this.waterfallArray.push(a),this.currWaterfall=a}}},SekindoAdsManager.prototype.checkMaxImps=function(){if(this.newAdsProgram&&this.newAdsProgram.length){if(this.newAdsProgram.length==this.currWaterfall.limitedImpressions){for(var e=0,t=0;t<this.newAdsProgram.length;t++)this.newAdsProgram[t].impressionCount.val>=this.newAdsProgram[t].maxImpressions&&e++;if(e==this.newAdsProgram.length)return!0}return!1}return!this.currWaterfall},SekindoAdsManager.prototype.stopAd=function(e){this.config.adsProcessPaused=!0,this.currAdUnit&&this.currAdUnit.stopAd(e)},SekindoAdsManager.prototype.generateProcessor=function(e,t){var i=this,n=SekindoUtils.isIvtHidden(this.config.mainVideoDiv,window,this.config.clientInfo,this.config.isAmpProject);if("ok"==n||this.config.vpApi){if((0!=this.config.onViewabilityChange.getCurrState()||!this.config.blockAdRequestsNV&&"inRead"!=this.config.playerMode)&&!(this.config.adsProcessPaused||this.config.adsProcessHalter.shouldHalt()||this.currProcessor&&"started"==this.currProcessor.status)){if(this.currProcessor&&"processing"==this.currProcessor.status&&this.currProcessor.params.waterfall.settings&&!1===this.currProcessor.params.waterfall.settings.viewable&&this.config.onViewabilityChange.getCurrState()&&this.cacheableAds.length&&this.cacheableAds[0].adUnit&&this.cacheableAds[0].adUnit.params)this.currProcessor.destruct();else if(this.currProcessor&&"processing"==this.currProcessor.status)return this.currProcessor.regenerateOnFail=!0,void("click"!=this.config.playbackMethod||this.config.hadImpression||this.currAdUnit&&this.currAdUnit.wrapper&&this.currAdUnit.wrapper.onAdError("killTimeOut"));var s=this.newAdsProgram;if("linearCached"==e&&(s=t),s&&s.length){t={waterfall:s,scheduleAdFormat:this.nextAd.format,leapRoundCounter:this.leapRoundCounter};this.currProcessor=new SekindoWaterfallLinearProcessor(this.config,t,this),clearTimeout(this.destructOnFailTimeout),this.destructOnFailTimeout=null,this.config.realPrerollTimeout&&"pre_roll"===this.nextAd.format&&i.destructOnFailAllowed&&1==this.config.onViewabilityChange.getCurrState()&&(this.destructOnFailTimeout=setTimeout(this.destructProcessorOnFail,1e3*i.config.realPrerollTimeout))}else this.config.realPrerollTimeout&&"pre_roll"===this.nextAd.format&&setTimeout(function(){i.config.bus.triggerNote("adCompleted")},5)}}else if(!this.config.isIvtHiddenPixelFired){var o=this.config.ivtHiddenPixel+"&ivtReason="+n;SekindoUtils.firePixel(o),this.config.isIvtHiddenPixelFired=!0}},SekindoAdsManager.prototype.destruct=function(){if(this.config.adsProcessPaused=!0,this.timeOutObj&&clearTimeout(this.timeOutObj),this.currAdUnit&&this.currAdUnit.destruct(),this.waterfallArray)for(var e=0;e<this.waterfallArray.length;e++)this.waterfallArray[e].destruct();this.currProcessor&&this.currProcessor.destruct(),this.cacheableProcessor&&this.cacheableProcessor.destruct(),SekindoUtils.deleteMe(this)},SekindoWaterfallLoader.prototype.sendRequest=function(){var e=(new Date).getTime().toString(),t=this.waterfallUrl.replace("${CBUSTER}",e);this.adsXmlhttp.open("GET",t,!0),this.adsXmlhttp.withCredentials=!0,this.adsXmlhttp.send()},SekindoWaterfallLoader.prototype.destruct=function(){this.waterFallLifeTimeOut&&clearTimeout(this.waterFallLifeTimeOut),this.waterFallLifeTime=0},SekindoWaterfallCacheableProcessor.prototype.loadAds=function(){if(!(this.roundsCounter++>=this.cacheableMaxRounds||this.cacheableAds.length>=this.cacheableMaxAds)){if(!1===this.config.onViewabilityChange.getCurrState())for(var e=0;e<this.adsProgram.length;e++){var t=this.adsProgram[e];if(!t.adUnit||t.adUnit&&(!t.adUnit.adProccessStatus||"fail"==t.adUnit.adProccessStatus||"complete"==t.adUnit.adProccessStatus)){t.cacheable=!0,t.index=e;var i=new SekindoAdUnit(this.config,t,this);t.adUnit=i}}}},SekindoWaterfallCacheableProcessor.prototype.loadSpecificAd=function(e){if(!1===this.config.onViewabilityChange.getCurrState()){e.cacheable=!0;var t=new SekindoAdUnit(this.config,e,this);e.adUnit=t}},SekindoWaterfallCacheableProcessor.prototype.updateAdsProgram=function(e){this.adsProgram=e.adsProgram,this.cacheableAdsLifeTime=1e3*(e.wfGeneralParams.cacheableAdsLifeTime||60),this.cacheableAdsReloadTime=1e3*(e.wfGeneralParams.cacheableAdsReloadTime||10),this.cacheableMaxAds=e.wfGeneralParams.cacheableMaxAds||3,this.cacheableMaxRounds=e.wfGeneralParams.cacheableMaxRounds||3,this.roundsCounter=0},SekindoWaterfallCacheableProcessor.prototype.adUnitReport=function(e){var t=e.val;switch(e.type){case"fail":t.adProccessStatus="fail";break;case"timedOut":var i=t.originParams;t.adProccessStatus="fail",t.destruct(),this.updateCacheableAds(),this.loadSpecificAd(i);break;case"ready":i=t.params;t.adProccessStatus="ready",this.updateCacheableAds(i)}},SekindoWaterfallCacheableProcessor.prototype.updateCacheableAds=function(e){for(var t=this.cacheableAds.length-1;t>=0;t--){var i=this.cacheableAds[t];if(!i.adUnit||!i.adUnit.params){var n=this.cacheableAds.indexOf(i);this.cacheableAds.splice(n,1)}}e&&this.cacheableAds.push(e),this.cacheableAds.sort(function(e,t){return e.adUnit.params.index-t.adUnit.params.index}),this.parent.cacheableAds=this.cacheableAds.slice(0,this.cacheableMaxAds),this.config.cacheableAvailable=Boolean(this.parent.cacheableAds.length&&this.parent.cacheableAds[0].adUnit&&this.parent.cacheableAds[0].adUnit.params)},SekindoWaterfallCacheableProcessor.prototype.destruct=function(e){for(var t=0;t<this.cacheableAds.length;t++)this.cacheableAds[t].adUnit&&this.cacheableAds[t].adUnit.destruct();this.loadAdsInterval&&clearInterval(this.loadAdsInterval),SekindoUtils.deleteMe(this)},
SekindoWaterfallLinearProcessor.prototype.init=function(){var e=0;for(this.params.waterfall.sort(function(e,t){return e.optimizedOrder-t.optimizedOrder}),i=0;i<this.params.waterfall.length;i++){var t=this.params.waterfall[i];t.isSkipAd=!1,t.isSkipAttemptTracking=!1,t.trackingEvents.extraImpTrackers=[],!SekindoUtils.adInspection(t,this.config,this.params.scheduleAdFormat,this.params.leapRoundCounter,this.parent.processorCounter)||void 0===window.SKpbjs&&("prebidVideo"==t.serveType||"sspVideo"==t.serveType)||this.parent.calcViewableImpGapTimeDiff()>0?t.isSkipAd=!0:"prebidVideo"!=t.serveType&&"sspVideo"!=t.serveType||e++}-1==this.params.waterfall.minAdsForMultiPrebidAuction?this.isMultiPrebidAuction=!1:this.isMultiPrebidAuction=e>=this.params.waterfall.minAdsForMultiPrebidAuction},SekindoWaterfallLinearProcessor.prototype.processPrebid=function(e){function t(e,t){var i=s.params.waterfall[e],n=parseInt(1e3*t.cpm*(i.rvnPct||1));if(i.rvn=n,void 0!==t.sspPixelData&&(n=n+"&"+t.sspPixelData),void 0!==t.sspImpTrackers&&(i.trackingEvents.extraImpTrackers=t.sspImpTrackers),i.macro={str:"${VP_RVN_MACRO}",repTo:n},t.vastXml){var o=t.vastXml;if("string"==typeof o){if(window.ActiveXObject){(a=new ActiveXObject("Microsoft.XMLDOM")).async="false",a.loadXML(o)}else var a=(new DOMParser).parseFromString(o,"text/xml");o=a}i.vastURL=null,i.vastXml=o}else i.vastURL=t.vastUrl,i.vastXml=null}function n(n,a){var l="prebid"==n?"amazon":"prebid";r[n].response=a,r[n].status="ready","wait"!=r[l].status&&function(){var n=r.prebid.response;for(i=0;i<s.params.waterfall.length;i++)if(s.isMultiPrebidAuction||o==i){var a=s.params.waterfall[i];if("prebidVideo"==a.serveType||"sspVideo"==a.serveType){var l="prebidVideo"==a.serveType?"adUnit_"+i:"adUnit_ssp";n.hasOwnProperty(l)&&n[l].bids[0].cpm>0&&("prebidVideo"==a.serveType||n[l].bids[0].referenceId==i)&&(n[l].bids[0].vastUrl||n[l].bids[0].vastXml)?t(i,n[l].bids[0]):a.isSkipAd=!0}}s.isMultiPrebidAuction&&s.params.waterfall.sort(function(e,t){var i="prebidVideo"==e.serveType||"sspVideo"==e.serveType,n="prebidVideo"==t.serveType||"sspVideo"==t.serveType;if(i&&!n)return-1;if(!i&&n)return 1;if(i&&n)return-1*(e.rvn-t.rvn);if(!i&&!n)return e.optimizedOrder-t.optimizedOrder});e()}()}var s=this,o=(e=e,this.index),a=[],r={prebid:{status:"inactive",response:{}},amazon:{status:"inactive",response:{}}};if(!this.isMultiPrebidAuction&&-1==o||this.isMultiPrebidAuction&&-1!=o)e();else{for(this.config.prebidAdUnitCodes.forEach(function(e){window.SKpbjs.removeAdUnit(e)}),this.config.prebidAdUnitCodes=[],this.a9Bidder=null,i=0;i<this.params.waterfall.length;i++){var l=this.params.waterfall[i];if((this.isMultiPrebidAuction||o==i)&&!l.isSkipAd)if("prebidVideo"==l.serveType){if("a9Custom"==l.preBidData.params.bidder){if(this.a9Bidder)continue;this.a9Bidder=new SekindoA9Bidder(this.config,l.preBidData.params.params,n,"adUnit_"+i)}else{var d="instream";-1!=["districtm","appnexus","pubmatic"].indexOf(l.preBidData.params.bidder)||"slider"!=this.config.playerMode&&"inRead"!=this.config.playerMode||(d="outstream");var c={code:"adUnit_"+i,bids:[l.preBidData.params],sizes:[this.config.videoWidth,this.config.videoHeight],mediaTypes:{video:{context:d,playerSize:[this.config.videoWidth,this.config.videoHeight]}}};window.SKpbjs.addAdUnits(c),this.config.prebidAdUnitCodes.push(c.code)}l.isSkipAttemptTracking=!0,SekindoUtils.trackSekindoAdEvents("onAttempt",null,l,this.config)}else"sspVideo"==l.serveType&&(l.preBidData.params.referenceId=i,a.push(l.preBidData.params),l.isSkipAttemptTracking=!0,SekindoUtils.trackSekindoAdEvents("onAttempt",null,l,this.config))}if(a.length>0){var h={bidder:"sekindoInternal",params:{data:this.params.waterfall.sspInfo}};h.params.data.campaigns={},a.forEach(function(e){h.params.data.campaigns[e.campaignId]=e});c={code:"adUnit_ssp",bids:[h],sizes:[this.config.videoWidth,this.config.videoHeight],mediaTypes:{video:{context:"instream",playerSize:[this.config.videoWidth,this.config.videoHeight]}}};window.SKpbjs.addAdUnits(c),this.config.prebidAdUnitCodes.push(c.code)}this.config.prebidAdUnitCodes.length>0||this.a9Bidder?(this.config.prebidAdUnitCodes.length>0&&(r.prebid.status="wait",window.SKpbjs.requestBids({timeout:3e3,bidsBackHandler:function(e){n("prebid",e)},adUnitCodes:this.config.prebidAdUnitCodes})),this.a9Bidder&&(r.amazon.status="wait",this.a9Bidder.run()),this.status="processing"):e()}},SekindoWaterfallLinearProcessor.prototype.generateNextAd=function(){if(this.status="init",this.config.adsProcessPaused||this.config.adsProcessHalter.shouldHalt())this.status="paused";else{if(!this.params.waterfall||!this.params.waterfall.length)return this.status=null,this.parent.executeAdsSchedule(),void this.destruct();if(!this.parent.nextAd)return this.status=null,this.parent.executeAdsSchedule(),void this.destruct();if(!this.currAdUnit||"started"!=this.currAdUnit.adProccessStatus){if(!this.params.waterfall.settings)return this.config.bus.triggerNote("waterFallEmpty"),this.status=null,this.parent.executeAdsSchedule(),void this.destruct();if(this.params.waterfall.settings.viewable&&!this.config.flowStatus&&this.parent.cacheableAds.length&&this.parent.cacheableAds[0].adUnit&&this.parent.cacheableAds[0].adUnit.params)var e=this.parent.cacheableAds.splice(0,1)[0];else{if(this.index++,this.params.waterfall.length<=this.index)return this.config.bus.triggerNote("waterFallEmpty"),this.status=null,this.parent.executeAdsSchedule(),void this.destruct();(e=this.params.waterfall[this.index]).adUnit=null}if(!e)return this.config.bus.triggerNote("waterFallEmpty"),this.status=null,this.parent.executeAdsSchedule(),void this.destruct();if(e.scheduleAdFormat=this.params.scheduleAdFormat,e.leapRoundCounter=this.params.leapRoundCounter,this.status="processing",e.adUnit){if((t=e.adUnit).parent=this,t.params.cacheable=!1,t.cacheableAdLifeTime(!1),!SekindoUtils.adInspection(t.params,t.config,this.params.scheduleAdFormat,this.params.leapRoundCounter,this.parent.processorCounter))return void this.adUnitReport({type:"fail",val:t});t.runFunc(t.runSrc)}else{e.cacheable=!1;var t=new SekindoAdUnit(this.config,e,this);e.adUnit=t}this.adUnitsArray&&this.adUnitsArray.push(t)}}},SekindoWaterfallLinearProcessor.prototype.adUnitReport=function(e){function t(e){i.config.adIsPlaying=!1;var t=e.val;if(t.adProccessStatus="complete",t.params&&(t.params.adUnit=null),t.destruct(),i.currAdUnit=i.parent.currAdUnit=null,i.status="complete",i.status=null,i.config.isLastImpViewable){var n=new Date;i.config.lastImpViewableCompleteTime=n.getTime()}i.parent.executeAdsSchedule(),i.destruct()}var i=this;switch(e.type){case"startingAd":this.status="started";break;case"started":this.config.adIsPlaying=!0;(n=e.val).adProccessStatus="started",this.currAdUnit=this.parent.currAdUnit=n,this.status="started",this.config.hadImpression=!0,this.config.isLastImpViewable=!0,!this.currAdUnit.videoElement||this.currAdUnit.videoElement.width==this.config.videoWidth&&this.currAdUnit.videoElement.height==this.config.videoHeight||this.parent.onPlayerResize({videoWidth:this.config.videoWidth,videoHeight:this.config.videoHeight},!0);break;case"fail":if(this.config.adIsPlaying){e.type="complete",t(e);break}this.config.adIsPlaying=!1;var n;(n=e.val).adProccessStatus="fail",n.params.adUnit=null,n.params=null,n.destruct(),this.currAdUnit=this.parent.currAdUnit=null,this.destructOnFail?(this.status="complete",this.config.bus.triggerNote("waterFallEmpty"),this.destruct()):this.regenerateOnFail?(this.status="complete",this.parent.generateProcessor(),this.destruct()):this.generateNextAd();break;case"complete":t(e)}},SekindoWaterfallLinearProcessor.prototype.destruct=function(){if(this.adUnitsArray)for(var e=0;e<this.adUnitsArray.length;e++)this.adUnitsArray[e].destruct();this.parent&&this.parent.cacheableProcessor&&this.parent.cacheableProcessor.updateCacheableAds(),this.parent&&this.parent.currProcessor==this&&(this.parent.currProcessor=null),SekindoUtils.deleteMe(this)},SekindoAdUnit.prototype.run=function(){var e=this;if(this.params.isSkipAd)this.parent.adUnitReport({type:"fail",val:this});else{this.busItms.push(this.config.bus.addCallBack("onUserEvent",function(t){e.onUserEvent(t)})),this.checkAdViewability=new SekindoServices.checkAdViewability(this.config,function(){SekindoUtils.trackSekindoAdEvents("viewable",null,e.params,e.config)}).execute;var t=this.params.vastURL;if(this.rvn=this.params.rvn,null!=t){var i=(new Date).getTime().toString();SekindoQueryVAST(t=(t=t.replace("[timestamp]",i)).replace("[CACHEBUSTING]",i),function(t){e.adsLoaded(t)},null,this.config)}else new SekindoVASTAds(this.params.vastXml,function(t){e.adsLoaded(t)},null,this.config);this.params.isSkipAttemptTracking||SekindoUtils.trackSekindoAdEvents("onAttempt",null,this.params,this.config)}},SekindoAdUnit.prototype.cacheableAdLifeTime=function(e){var t=this;e?this.lifeTimeout=setTimeout(function(){t.parent.adUnitReport({type:"timedOut",val:t})},this.parent.cacheableAdsLifeTime):this.lifeTimeout&&clearTimeout(this.lifeTimeout)},SekindoAdUnit.prototype.adsLoaded=function(e){if(this.params&&!this.params.linear){if(this.adProccessStatus="loaded",(this.config.adsProcessPaused||this.config.adsProcessHalter.shouldHalt())&&!this.params.cacheable)return this.adProccessStatus="complete",void this.parent.adUnitReport({type:"fail",val:this});if(null!=e){this.originParams=this.params;var t=e.getAd(!1,!0);if(t){if(this.config.blockVpaidjs&&t.vastStr){var i=t.vastStr.indexOf("vpaidjs-2018");if(-1!=i&&parseInt(t.vastStr.substr(i+12,2))>5)return void this.parent.adUnitReport({type:"fail",val:this})}if(this.params=function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}(t,this.params),this.params.linear){this.params.sentImpression=!1,this.progressArray=new Array;for(var n=0;n<this.params.getTrackingPoints().length;n++){var s=this.params.getTrackingPoints()[n];-1!=s.event.indexOf("progress")&&this.progressArray.push(s)}var o=this.params.linear.getAllMedias();if(o.length&&0!=o.length){var a=SekindoUtils.detectMediaType(o);if(this.config.isDesktop&&a.linear)this.runFunc=this.loadLinearContent,this.runSrc=a.linear.src;else if(!this.config.isDesktop&&a.mobileLinear)this.runFunc=this.loadLinearContent,this.runSrc=a.mobileLinear.src;else{if(!a.jsVpaid)return void this.parent.adUnitReport({type:"fail",val:this});this.params.reportDebugImpPixelId&&this.params.debugWFManagerId&&this.config.LogRest.performCall("liveVideoWaterfall","SetVastStatus",[this.params.reportDebugImpPixelId,"VPAID proccessed"],this.params.debugWFManagerId),this.runFunc=this.loadVPAIDContent,this.runSrc=a.jsVpaid.src}SekindoUtils.trackSekindoAdEvents("response",null,this.params,this.config),this.params.cacheable?(this.cacheableAdLifeTime(!0),this.parent.adUnitReport({type:"ready",val:this})):this.runFunc(this.runSrc)}else this.parent.adUnitReport({type:"fail",val:this})}else this.parent.adUnitReport({type:"fail",val:this})}else this.parent.adUnitReport({type:"fail",val:this})}else this.parent.adUnitReport({type:"fail",val:this})}},SekindoAdUnit.prototype.loadVPAIDContent=function(e){this.wrapper&&this.destructVpaidWrapper(),this.adType="vpaid";var t=this.params.linear.adParameters,i=[];this.generateVpaidSlot(),i.slot=this.vpaidSlot,this.config.enableSafeFrame||(this.config.videoSlot?this.videoElement=this.config.videoSlot:this.generateVideoElement(),this.addVideoListeners(),i.videoSlot=this.videoElement),this.params.VPAIDUrl=e,this.params.creativeData=t,this.params.environmentVars=i,this.config.enableSafeFrame?this.wrapper=new SekindoSafeFrameWrapper(this.config,this.params,this):this.wrapper=new SekindoVPAIDWrapper(this.config,this.params,this)},SekindoAdUnit.prototype.destructVpaidWrapper=function(){this.wrapper&&(this.wrapper.destruct(),this.wrapper=null)},SekindoAdUnit.prototype.loadLinearContent=function(e){if(this.config.adsProcessPaused||this.config.adsProcessHalter.shouldHalt())this.parent.adUnitReport({type:"fail",val:this});else{this.adType="linear",this.currSrc=decodeURI(e),this.generateVpaidSlot(),this.config.videoSlot?this.videoElement=this.config.videoSlot:this.generateVideoElement(),this.addVideoListeners(),this.addLinearListeners(),this.videoElement.src=this.currSrc;var t=this.videoElement.play();if(t)try{t.then(function(){}).catch(function(e){})}catch(e){}}},SekindoAdUnit.prototype.generateVpaidSlot=function(){var e=this.config.videoWidth||this.config.width,t=this.config.videoHeight||this.config.height;this.vpaidSlot&&this.vpaidSlot.parentNode&&this.disposeVpaidSlot(),this.vpaidSlot=this.config.videoIFrameDoc.createElement("div"),this.vpaidSlot.style.width=e+"px",this.vpaidSlot.style.height=t+"px",this.vpaidSlot.style.marginLeft="auto",this.vpaidSlot.style.marginRight="auto",this.vpaidSlot.style.zIndex=-3,this.vpaidSlot.style.position="absolute",this.vpaidSlot.style.left="-3000px",this.vpaidSlot.style.top="0px",this.vpaidSlot.style.overflow="hidden",this.vpaidSlot.id="slotContainer",this.config.bus.triggerNote("addChild",{visual:this.vpaidSlot,destiny:"videoAd"})},SekindoAdUnit.prototype.generateVideoElement=function(){var e=this.config.videoWidth||this.config.width,t=this.config.videoHeight||this.config.height;this.videoElement&&this.videoElement.parentNode&&this.disposeVideoElement(),this.config.isDesktop||"jpg"!=this.config.vidType?(this.videoElement=this.config.videoIFrameDoc.createElement("video"),"Facebook"==this.config.clientInfo.extra.browser&&(this.videoElement.poster="none",this.videoElement.controls=!1)):this.videoElement=new SekindoVideoObj(this.config.uniqueID,this.config,this.config.audioObj),this.videoElement.width=e,this.videoElement.height=t,this.videoElement.style.top="0px",this.videoElement.muted=this.config.isMuted,this.videoElement.volume=this.config.volume,this.videoElement.id="adVideoElement",this.videoElement.playsInline=!0,this.videoElement.autoplay=!0,this.vpaidSlot.appendChild(this.videoElement),this.params.bgColor&&(this.videoElement.style.backgroundColor=this.params.bgColor,this.videoElement.parentNode.style.background=this.params.bgColor),"jpg"!=this.config.vidType&&-1!=this.config.os.indexOf("ios")&&(this.iosVidWrapper=new SekindoServices.iosVidAutoplayWrapper(this.videoElement))},SekindoAdUnit.prototype.disposeVpaidSlot=function(){this.vpaidSlot&&(this.vpaidSlot.parentNode&&this.vpaidSlot.parentNode.removeChild(this.vpaidSlot),this.vpaidSlot=null)},SekindoAdUnit.prototype.disposeVideoElement=function(){this.videoElement&&(this.iosVidWrapper&&this.iosVidWrapper.destruct(),delete this.iosVidWrapper,this.removeListeners(),this.videoElement.parentNode&&this.videoElement.parentNode.removeChild(this.videoElement),this.videoElement.destruct&&this.videoElement.destruct(),delete this.videoElement,this.videoElement=null)},SekindoAdUnit.prototype.addVideoListeners=function(){this.videoElement.addEventListener("volumechange",this.videoEventCallback),this.videoElement.addEventListener("pause",this.videoEventCallback)},SekindoAdUnit.prototype.addLinearListeners=function(){this.videoElement.addEventListener("playing",this.videoEventCallback),this.videoElement.addEventListener("play",this.videoEventCallback),this.videoElement.addEventListener("ended",this.videoEventCallback),this.videoElement.addEventListener("click",this.videoEventCallback),this.videoElement.addEventListener("error",this.videoEventCallback)},SekindoAdUnit.prototype.removeListeners=function(){this.videoElement&&(this.videoElement.removeEventListener("timeupdate",this.videoProgressEventCallback),this.videoElement.removeEventListener("playing",this.videoEventCallback),this.videoElement.removeEventListener("play",this.videoEventCallback),this.videoElement.removeEventListener("ended",this.videoEventCallback),this.videoElement.removeEventListener("click",this.videoEventCallback),this.videoElement.removeEventListener("volumechange",this.videoEventCallback),this.videoElement.removeEventListener("pause",this.videoEventCallback),this.videoElement.removeEventListener("error",this.videoEventCallback),this.checkAdViewability(!1))},SekindoAdUnit.prototype.stopAd=function(e){if(e&&this.removeListeners(),"start"==this.adVideoStatus)if(this.wrapper)this.wrapper.stopAd();else{var t=document.createEvent("Event");t.initEvent("ended",!0,!1),this.videoElement.dispatchEvent(t)}},SekindoAdUnit.prototype.onVideoEvent=function(e){if("vpaid"!=this.adType)switch(e.type){case"play":case"playing":if(this.config.adsProcessPaused||this.config.adsProcessHalter.shouldHalt())return this.videoElement&&this.videoElement.parentNode&&(this.videoElement.parentNode.style.display="none"),this.adVideoStatus="null",this.adProccessStatus="complete",this.disposeVideoElement(),this.params.adUnit=null,this.params=null,void this.parent.adUnitReport({type:"complete",val:this});"start"!=this.adVideoStatus&&(this.config.bus.triggerNote("changeTitle","Ad by Primis"),this.config.bus.triggerNote("adStarted",{type:"linear",rvn:this.rvn,skipTime:this.params.skipTime}),this.params.track("creativeView",null,null,this.config.pixelDiv,this.config),this.params.track("start",null,null,this.config.pixelDiv,this.config),SekindoUtils.trackSekindoAdEvents("adStart",null,this.params,this.config),SekindoUtils.trackSekindoAdEvents("impression",null,this.params,this.config),SekindoUtils.trackSekindoAdEvents("extraImpTrackers",null,this.params,this.config),this.parent.adUnitReport({type:"started",val:this}),this.checkAdViewability(!0),this.params.impressionCount.val+=1,this.constructProgressEvents(),this.adVideoStatus="start",this.progressStatus="start"),this.videoElement&&this.videoElement.parentNode&&(this.videoElement.parentNode.style.display="block"),this.vpaidSlot.style.zIndex=3,this.vpaidSlot.style.left="0px",this.params.reportDebugImpPixelId&&this.params.debugWFManagerId&&this.config.LogRest.performCall("liveVideoWaterfall","SetVastStatus",[this.params.reportDebugImpPixelId,"Impression (from VAST)"],this.params.debugWFManagerId),this.config.bus.triggerNote("onVideoEvent",{type:"playing",val:e.type});break;case"ended":this.videoElement&&this.videoElement.parentNode&&(this.videoElement.parentNode.style.display="none"),this.config.bus.triggerNote("adCompleted"),"start"==this.adVideoStatus&&(this.params.track("complete",null,null,this.config.pixelDiv,this.config),this.checkAdViewability(!1),SekindoUtils.trackSekindoAdEvents("complete",null,this.params,this.config)),this.adVideoStatus="null",this.adProccessStatus="complete",this.disposeVideoElement(),this.params.adUnit=null,this.params=null,this.parent.adUnitReport({type:"complete",val:this});break;case"error":this.videoElement&&this.videoElement.parentNode&&(this.videoElement.parentNode.style.display="none"),"start"==this.adVideoStatus&&this.config.bus.triggerNote("adCompleted"),"start"==this.adVideoStatus&&this.checkAdViewability(!1),this.adVideoStatus="null",this.adProccessStatus="complete",this.disposeVideoElement(),this.parent.adUnitReport({type:"fail",val:this});break;case"click":this.params.track("click",null,null,this.config.pixelDiv,this.config),SekindoUtils.trackSekindoAdEvents("clickThrough",null,this.params,this.config);var t=this.params.linear.getClickThrough();window.open(t,"_blank");break;case"volumechange":var i=!this.videoElement||this.videoElement.muted,n=this.videoElement?this.videoElement.volume:-1;this.config.bus.triggerNote("onVideoEvent",{type:"volumechange",val:{muted:i,volume:n,player:"adUnit"}});break;case"pause":this.config.bus.triggerNote("onVideoEvent",{type:"pause",val:""})}},SekindoAdUnit.prototype.onVpaidEvent=function(e){var t=this;switch("string"==typeof e?e:e.type){case"onAdLoaded":for(var i=this.wrapper.iFrameDoc.getElementsByTagName("script"),n=0;n<i.length;n++)if(-1!=i[n].src.indexOf("bundle.clearstream.tv/bundle")){this.wrapper.doNotUseSetAdVolume=!0;break}this.config.adsProcessPaused||this.config.adsProcessHalter.shouldHalt()?(this.disposeVideoElement(),this.disposeVpaidSlot(),this.parent.adUnitReport({type:"fail",val:this})):(this.config.isMuted&&(this.wrapper.setAdVolume(0),this.videoElement&&(this.videoElement.muted=!0)),this.parent.adUnitReport({type:"startingAd",val:this}),this.wrapper.startAd(),this.reportsBlocker={},this.config.isMuted&&(this.wrapper.setAdVolume(0),this.videoElement&&(this.videoElement.muted=!0)));break;case"onAdPaused":this.config.bus.triggerNote("onVpaidEvent",{type:"paused",val:""});break;case"onAdPlaying":this.config.bus.triggerNote("onVpaidEvent",{type:"playing",val:""});break;case"onAdUserAcceptInvitation":case"onAdUserMinimize":break;case"onAdUserClose":if(this.reportsBlocker.onAdUserClose)break;this.reportsBlocker.onAdUserClose=!0,this.onAdComplete(e.params);break;case"onAdError":this.forceSkipAdTimeout&&clearTimeout(this.forceSkipAdTimeout),this.disposeVideoElement(),this.disposeVpaidSlot(),this.reportsBlocker.onAdImpression&&this.config.bus.triggerNote("adCompleted"),this.parent.adUnitReport({type:"fail",val:this});break;case"onAdSkippableStateChange":case"onAdExpandedChange":case"onAdSizeChange":case"onAdDurationChange":case"onAdRemainingTimeChange":break;case"onAdImpression":if(this.reportsBlocker.onAdImpression)break;this.reportsBlocker.onAdImpression=!0,this.destructOnFailAllowed=2!==this.config.isAutoPlay,this.adVideoStatus="start",this.params.track("creativeView",null,null,this.config.pixelDiv,this.config),SekindoUtils.trackSekindoAdEvents("impression",e.macro||null,this.params,this.config),SekindoUtils.trackSekindoAdEvents("extraImpTrackers",null,this.params,this.config),this.checkAdViewability(!0),this.config.bus.triggerNote("changeTitle",""),this.params.impressionCount.val+=1,this.videoElement&&this.videoElement.parentNode&&(this.videoElement.parentNode.style.display="block"),this.vpaidSlot.style.zIndex=SekindoUtils.getHighestZIndex(this.config.videoIFrameWindow,"div")+1,this.vpaidSlot.style.left="0px",this.config.isMuted?(this.wrapper.setAdVolume(0),this.videoElement&&(this.videoElement.muted=!0)):(this.wrapper.setAdVolume(this.config.volume),this.videoElement&&(this.videoElement.muted=!1)),this.videoElement&&this.params.bgColor&&(this.videoElement.style.backgroundColor=this.params.bgColor,this.videoElement.parentNode.style.background=this.params.bgColor);break;case"onAdClickThru":this.params.track("click",null,null,this.config.pixelDiv,this.config),SekindoUtils.trackSekindoAdEvents("clickThrough",null,this.params,this.config);break;case"onAdInteraction":break;case"onAdVideoStart":if(this.reportsBlocker.onAdVideoStart)break;this.reportsBlocker.onAdVideoStart=!0,this.adVideoStatus="start",this.params.track("start",null,null,this.config.pixelDiv,this.config),SekindoUtils.trackSekindoAdEvents("adStart",null,this.params,this.config),this.videoElement&&this.videoElement.parentNode&&(this.videoElement.parentNode.style.display="block"),this.config.bus.triggerNote("adStarted",{type:"vpaid",rvn:this.rvn,skipTime:this.params.skipTime}),this.parent.adUnitReport({type:"started",val:this});break;case"onAdVideoFirstQuartile":if(this.reportsBlocker.onAdVideoFirstQuartile)break;this.reportsBlocker.onAdVideoFirstQuartile=!0,this.params.track("firstQuartile",null,null,this.config.pixelDiv,this.config);break;case"onAdVideoMidpoint":if(this.reportsBlocker.onAdVideoMidpoint)break;this.reportsBlocker.onAdVideoMidpoint=!0,this.params.track("midpoint",null,null,this.config.pixelDiv,this.config);break;case"onAdVideoThirdQuartile":if(this.reportsBlocker.onAdVideoThirdQuartile)break;this.reportsBlocker.onAdVideoThirdQuartile=!0,this.params.track("thirdQuartile",null,null,this.config.pixelDiv,this.config);break;case"onAdVideoComplete":if(this.reportsBlocker.onAdVideoComplete)break;this.reportsBlocker.onAdVideoComplete=!0,this.params.track("complete",null,null,this.config.pixelDiv,this.config),"start"==this.adVideoStatus&&(this.videoCompleteTimeout&&clearTimeout(this.videoCompleteTimeout),this.videoCompleteTimeout=setTimeout(function(){"start"==t.adVideoStatus&&(t.reportsBlocker.onStopAd||(t.reportsBlocker.onStopAd=!0,SekindoUtils.trackSekindoAdEvents("complete",null,t.params,t.config),t.onAdComplete(e.params)))},1e3)),this.adVideoStatus="null";break;case"onAdLinearChange":break;case"onStartAd":if(this.reportsBlocker.onStartAd)break;this.reportsBlocker.onStartAd=!0,this.config.isMuted&&this.videoElement&&!this.videoElement.muted&&(this.videoElement.muted=!0);break;case"onStopAd":if(this.reportsBlocker.onStopAd)break;this.reportsBlocker.onStopAd=!0,SekindoUtils.trackSekindoAdEvents("complete",null,this.params,this.config),this.videoCompleteTimeout&&clearTimeout(this.videoCompleteTimeout),this.onAdComplete(e.params);break;case"onSkipAd":if(this.reportsBlocker.onSkipAd)break;this.reportsBlocker.onSkipAd=!0,this.onAdComplete(e.params);break;case"onAdVolumeChange":0==e.val?this.params.track("mute",null,null,this.config.pixelDiv,this.config):this.params.track("unmute",null,null,this.config.pixelDiv,this.config);var s=0==e.val,o=e.val;this.config.bus.triggerNote("onVpaidEvent",{type:"volumechange",val:{muted:s,volume:o}})}},SekindoAdUnit.prototype.onAdComplete=function(e){this.forceSkipAdTimeout&&clearTimeout(this.forceSkipAdTimeout),"complete"!=this.adProccessStatus&&(this.checkAdViewability(!1),this.disposeVideoElement(),this.disposeVpaidSlot(),this.adVideoStatus="null",this.adProccessStatus="complete",this.params.adUnit=null,this.params=null,this.config.bus.triggerNote("adCompleted"),this.wrapper&&this.destructVpaidWrapper(),this.config.isMuted&&this.videoElement&&(this.videoElement.muted=!0),this.parent.adUnitReport({type:"complete",val:this}))},SekindoAdUnit.prototype.onUserEvent=function(e){var t=this;if(this.parent.currAdUnit==this)switch(e.type){case"onVolumeScrabber":this.videoElement&&(this.videoElement.volume=e.value,this.videoElement.muted=!1);break;case"onMute":e.value?(this.videoElement&&(this.videoElement.muted=!0),this.config.isMuted=!0):(this.videoElement&&(this.videoElement.muted=!1),this.config.isMuted=!1),this.params&&"start"==this.adVideoStatus&&(e.value?this.params.track("mute",null,null,this.config.pixelDiv,this.config):this.params.track("unmute",null,null,this.config.pixelDiv,this.config));break;case"skipAd":if(this.wrapper){try{this.wrapper.skipAd()}catch(e){}try{this.wrapper.stopAd()}catch(e){}this.forceSkipAdTimeout=setTimeout(function(){t.wrapper.onAdError("forceSkipAdTimeout")},200)}else if(this.videoElement&&!this.videoElement.paused){var i=document.createEvent("Event");i.initEvent("ended",!0,!1),this.videoElement.dispatchEvent(i)}}},SekindoAdUnit.prototype.constructProgressEvents=function(){if(this.videoElement.addEventListener("timeupdate",this.videoProgressEventCallback),0!=this.progressArray.length)for(var e=0;e<this.progressArray.length;e++){var t=this.progressArray[e].event,i=null;if(-1!=t.indexOf("%")){var n=t.substr(9);n=Number(n.substr(0,n.length-1)),i=this.videoElement.duration*n/100}else{var s=t.substr(9).split(":");i=60*Number(s[0])*60+60*Number(s[1])+Number(s[2])}this.progressArray[e].eventTime=i}},SekindoAdUnit.prototype.onVideoProgressEvent=function(e){if(this.videoElement&&this.videoElement.src==this.currSrc){var t=Math.round(this.videoElement.duration)-Math.round(this.videoElement.currentTime)||"";this.config.bus.triggerNote("changeTitle","Ad by Primis "+t);for(var i=0;i<this.progressArray.length;i++)this.progressArray[i].eventTime&&this.progressArray[i].eventTime<this.videoElement.currentTime&&(this.progressArray[i].eventTime=null,this.params.track(this.progressArray[i].event,null,null,this.config.pixelDiv,this.config));this.reportProgressStatus()}},SekindoAdUnit.prototype.reportProgressStatus=function(){switch(this.progressStatus){case"inited":break;case"start":this.videoElement.currentTime>this.videoElement.duration/4&&(this.progressStatus="firstQuartile",this.params.track("firstQuartile",null,null,this.config.pixelDiv,this.config),this.config.bus.triggerNote("videoAdEvent",{type:"firstQuartile"}));break;case"firstQuartile":this.videoElement.currentTime>this.videoElement.duration/2&&(this.progressStatus="midpoint",this.params.track("midpoint",null,null,this.config.pixelDiv,this.config),this.config.bus.triggerNote("videoAdEvent",{type:"midpoint"}));break;case"midpoint":this.videoElement.currentTime>this.videoElement.duration/4*3&&(this.progressStatus="thirdQuartile",this.params.track("thirdQuartile",null,null,this.config.pixelDiv,this.config),this.config.bus.triggerNote("videoAdEvent",{type:"thirdQuartile"}));break;case"thirdQuartile":this.videoElement.currentTime>this.videoElement.duration&&(this.progressStatus="complete",this.config.bus.triggerNote("videoAdEvent",{type:"complete"}))}},SekindoAdUnit.prototype.destruct=function(){if(this.params&&(this.params.adUnit=null),this.removeListeners(),this.busItms)for(var e=0;e<this.busItms.length;e++)this.config.bus.removeBusItm(this.busItms[e]);this.videoCompleteTimeout&&clearTimeout(this.videoCompleteTimeout),this.wrapper&&(this.wrapper.destruct(),delete this.wrapper),this.lifeTimeout&&clearTimeout(this.lifeTimeout),this.disposeVideoElement(),this.checkAdViewability&&this.checkAdViewability(!1),this.disposeVpaidSlot(),SekindoUtils.deleteMe(this)},AudioTrackList.prototype.getTrackById=function(e){},TimeRanges.prototype.start=function(e){},TimeRanges.prototype.end=function(e){},MediaController.prototype.play=function(){this.jpgSeqObj.play()},MediaController.prototype.pause=function(){this.jpgSeqObj.pause()},TextTrackList=Array,TextTrack=function(){this.kind,this.label,this.language,this.mode,this.cues,this.activeCues,this.addCue=function(e){},this.removeCue=function(e){}},VideoTrackList=Array,VideoTrackList.prototype.getTrackById=function(e){return new VideoTrack},VideoTrack=function(){this.id,this.kind,this.label,this.language,this.selected};var VASTAds,VASTAd,VASTLinear,MAX_WRAPPER_DEPTH=5;SekindoTrackingEvents.prototype.copy=function(e){var t=Object.create(SekindoTrackingEvents.prototype);t.events={};for(var i in this.events)this.events.hasOwnProperty(i)&&(t.events[i]=[].concat(this.events[i]));return t.ad=e,t},SekindoTrackingEvents.prototype.finger=function(e){var t=new XMLHttpRequest;t.open("get",e,!0),t.send()},SekindoTrackingEvents.prototype.augment=function(e){for(var t in e.events)e.events.hasOwnProperty(t)&&(this.events[t]?this.events[t]=this.events[t].concat(e.events[t]):this.events[t]=e.events[t])},SekindoTrackingEvents.prototype.addClickTracking=function(e){var t={url:e,event:"click",offset:null};this.events.click?this.events.click.push(t):this.events.click=[t]},SekindoTrackingEvents.prototype.getEventsOfTypes=function(e){var t=[],i=e.indexOf("progress")>-1;for(var n in this.events)this.events.hasOwnProperty(n)&&(e.indexOf(n)>-1||i&&0===n.indexOf("progress-"))&&(t=t.concat(this.events[n]));return t},SekindoTrackingEvents.prototype.track=function(e,t,i,n){if(this.events[e]&&0!==this.events[e].length||"creativeView"!==!e){var s,o=[].concat(this.events[e]);for(var a in t)t.hasOwnProperty(a)&&(t["["+a+"]"]=encodeURIComponent(t[a]),delete t[a]);if("creativeView"===e)for(var r=this.ad;null!==r&&!r.hasSentImpression();){for(r.impressionSent(),s=0;s<r.impressions.length;s++)o.push({url:r.impressions[s]});r=r.parentAd}var l=[];for(s=0;s<o.length;s++){for(var d=o[s],c=!1,h=d?d.url:"",u=0;u<l.length;u++)if(h==l[u]){c=!0;break}if(!c){l.push(h);for(var p=""+parseInt(99999999*Math.random(),10);8!==p.length;)p="0"+p;t["[CACHEBUSTING]"]=p;for(a in t)t.hasOwnProperty(a)&&(h=h.replace(a,t[a]));SekindoUtils.firePixel(h,i,n,!0)}}}},SekindoVASTAds.prototype.getAd=function(e,t){var i=null;if(e&&(i=this.getAdWithSequence(1))&&!i.current().isEmpty())return i.current();for(var n=0;n<this.ads.length;n++)if(!this.ads[n].hasSequence())if(t){if(!this.ads[n].current().isEmpty()&&this.ads[n].currentPodAd&&this.ads[n].currentPodAd.linear&&this.ads[n].currentPodAd.linear.mediaFiles&&this.ads[n].currentPodAd.linear.mediaFiles.length)return this.ads[n].current()}else if(!this.ads[n].current().isEmpty())return this.ads[n].current()},SekindoVASTAds.prototype.getAdWithSequence=function(e){for(var t=0;t<this.ads.length;t++)if(this.ads[t].isNumber(e))return this.ads[t];return null},SekindoVASTAd.prototype.getTag=function(e,t){return this.properties.hasOwnProperty(e)?this.properties[e]:t},SekindoVASTAd.prototype.onLoaded=function(e,t){e?(this.pod=e,this.currentPodAd=e.getAd(t),this.currentPodAd.isEmpty()||(this.loaded=!0,this.onAdAvailable&&this.onAdAvailable.call(this,this))):(this.loaded=!0,this.onAdAvailable&&this.onAdAvailable.call(this,this))},SekindoVASTAd.prototype.hasSentImpression=function(){return this.sentImpression},SekindoVASTAd.prototype.impressionSent=function(){this.sentImpression=!0},SekindoVASTAd.prototype.current=function(){return this.currentPodAd},SekindoVASTAd.prototype.isNumber=function(e){return this.sequence===e},SekindoVASTAd.prototype.hasSequence=function(){return null!==this.sequence},SekindoVASTAd.prototype.isEmpty=function(){return!this.hasContent},
SekindoVASTAd.prototype.hasData=function(){return this.loaded},SekindoVASTAd.prototype.getNextAd=function(){return this.vast!==this.pod&&(this.currentPodAd=this.currentPodAd.getNextAd(),null!==this.currentPod)?this.currentPodAd.current():this.hasSequence()?this.vast.getAdWithSequence(this.sequence+1).current():null},SekindoVASTAd.prototype.getLinear=function(){return this.linear},SekindoVASTAd.prototype.track=function(e,t,i,n,s){this.trackings.track(e,{CONTENTPLAYHEAD:this.timecodeToString(t),ASSETURI:i},n,s)},SekindoVASTAd.prototype.getTrackingPoints=function(){for(var e=this.trackings?this.trackings.getEventsOfTypes(VAST_LINEAR_TRACKING_POINTS):[],t=[],i=0;i<e.length;i++){var n={event:e[i].event,offset:null};switch(e[i].event){case"start":n.offset="start";break;case"firstQuartile":n.offset="25%";break;case"midpoint":n.offset="50%";break;case"thirdQuartile":n.offset="75%";break;case"complete":n.offset="end";break;default:var s=e[i].offset;if(!s)continue;n.offset=SekindoVASTLinear.prototype.timecodeFromString(s)}t.push(n)}return t},SekindoVASTAd.prototype.timecodeToString=function(e){return("0"+parseInt(e/3600,10)+":"+("0"+parseInt(e%3600/60,10))+":"+("0"+e%60)).replace(/(^|:|\.)0(\d{2})/g,"$1$2")},SekindoVASTLinear.prototype.track=function(e,t,i,n,s){this.tracking.track(e,{CONTENTPLAYHEAD:this.timecodeToString(t),ASSETURI:i},n,s)},SekindoVASTLinear.prototype.timecodeToString=function(e){return("0"+parseInt(e/3600,10)+":"+("0"+parseInt(e%3600/60,10))+":"+("0"+e%60)).replace(/(^|:|\.)0(\d{2})/g,"$1$2")},SekindoVASTLinear.prototype.timecodeFromString=function(e){return-1===e.indexOf(":")?e:3600*parseInt(e.substr(0,2),10)+60*parseInt(e.substr(3,2),10)+parseInt(e.substr(6,2),10)},SekindoVASTLinear.prototype.getClickThrough=function(){return this.clickThrough},SekindoVASTLinear.prototype.attribute=function(e,t){if(!this.root.hasAttribute(e))return t;var i=this.root.getAttribute(e);switch(e){case"skipoffset":case"duration":case"offset":case"minSuggestedDuration":i=this.timecodeFromString(i)}return i},SekindoVASTLinear.prototype.getDuration=function(){return this.duration},SekindoVASTLinear.prototype.copy=function(e){return new SekindoVASTLinear(e,this.root)},SekindoVASTLinear.prototype.augment=function(e){this.duration=e.duration||this.duration,this.mediaFiles=e.mediaFiles.slice(0)||this.mediaFiles.slice(0),this.tracking.augment(e.tracking),this.clickThrough=e.clickThrough||this.clickThrough,this.adParameters=e.adParameters||this.adParameters},SekindoVASTLinear.prototype.getAllMedias=function(){return this.mediaFiles},SekindoVASTLinear.prototype.getBestMedia=function(e){for(var t=Number.POSITIVE_INFINITY,i=-1,n=0;n<this.mediaFiles.length;n++){var s=this.mediaFiles[n],o=Math.sqrt(Math.pow(e.width-s.width,2)+Math.pow(e.height-s.height,2));if(o<t)t=o,i=n;else if(o===t){var a=this.mediaFiles[i],r=a.bitrate||a.maxBitrate,l=s.bitrate||s.maxBitrate;l&&!r?i=n:e.bitrate&&r&&l?Math.abs(l-e.bitrate)<Math.abs(r-e.bitrate)&&(i=n):l>r&&(i=n)}}return-1===i?null:this.mediaFiles[i]};var VAST_LINEAR_TRACKING_POINTS=["start","firstQuartile","midpoint","thirdQuartile","complete","progress"];SekindoVASTLinear.prototype.getTrackingPoints=function(){for(var e=this.tracking?this.tracking.getEventsOfTypes(VAST_LINEAR_TRACKING_POINTS):[],t=[],i=0;i<e.length;i++){var n={event:e[i].event,offset:null};switch(e[i].event){case"start":n.offset="start";break;case"firstQuartile":n.offset="25%";break;case"midpoint":n.offset="50%";break;case"thirdQuartile":n.offset="75%";break;case"complete":n.offset="end";break;default:var s=e[i].offset;if(!s)continue;n.offset=SekindoVASTLinear.prototype.timecodeFromString(s)}t.push(n)}return t};var MIN_PAUSED_TIME_FOR_PREROLL=30;SekindoPlaylistManager.prototype.removeViewabilityCallback=function(){this.config.onViewabilityChange.removeCallback(this.viewabilityCallbackId)},SekindoPlaylistManager.prototype.addViewabilityCallback=function(){var e=this;this.viewabilityCallbackId=this.config.onViewabilityChange.addCallback(function(t){e.config.playerTemplateData.isPauseNonViewable&&!1===t&&e.allowPlaying&&!e.config.soundEnabledByUser?(e.pausePlayingContent(!0),e.playerSimulator.play(),clearInterval(e.pauseInterval),e.pauseInterval=setInterval(function(){e.handlePauseInterval()},1e3)):(e.config.playerTemplateData.isPauseNonViewable||e.config.soundEnabledByUser)&&!0===t?(e.playerSimulator.paused||"3"==e.config.isAutoPlay||"4"==e.config.isAutoPlay||e.playerSimulator.stop(),clearInterval(e.pauseInterval),e.allowPlaying&&e.resumePlayingContent(this.forceSimulator)):!t&&void 0!==t||"2"==e.config.isAutoPlay||"3"==e.config.isAutoPlay||"4"==e.config.isAutoPlay||(e.playerSimulator.stop(),e.allowPlaying&&e.resumePlaylist())})},SekindoPlaylistManager.prototype.fireContentPixel=function(e){if(!this.config.adIsPlaying){if(void 0===this.contentPixelFiredMap[this.index]||"contentStartPixel"==e.contentPixelName)this.contentPixelFiredMap[this.index]={};else if(void 0!==this.contentPixelFiredMap[this.index][e.contentPixelName+(e.fileId?e.fileId:"")])return;this.contentPixelFiredMap[this.index][e.contentPixelName+(e.fileId?e.fileId:"")]=!0;var t=this.config[e.contentPixelName];if(t&&SekindoUtils.validURL(t)){var i=this.config.videoWidth||this.config.width,n=this.config.videoHeight||this.config.height,s=-1!=["contentClickPixel","contentFullScreenPixel","contentPlaylistClicksPixel","contentScrubberPixel","contentVolChangePixel"].indexOf(e.contentPixelName);t=(t=(t=(t=t.replace(/&x=([0-9]+)/g,"&x="+i)).replace(/&y=([0-9]+)/g,"&y="+n)).replace(/&mediaPlayListId=0/g,"&mediaPlayListId="+(this.config.playListId||"0"))).replace(/&contentFileId=0/g,"&contentFileId="+(e.fileId||this.config.fileId||"0")),t+="&playerVer="+this.config.playerVer,t+="&isExcludeFromOpt="+(!0===this.config.isFirstContent?"0":"1"),s&&this.config.isFirstEngagementEvent?(this.config.isFirstEngagementEvent=!1,t+="&contentEventType=player"):s&&void 0===this.contentPixelFiredMap[this.index]._contentEngagementUniqPixel&&(this.contentPixelFiredMap[this.index]._contentEngagementUniqPixel=!0,t+="&contentEventType=content"),SekindoUtils.firePixel(t)}}},SekindoPlaylistManager.prototype.handlePauseInterval=function(){this.config.forcePreroll||(this.accumulatedPausedTime++,this.accumulatedPausedTime>=MIN_PAUSED_TIME_FOR_PREROLL&&(this.accumulatedPausedTime=0,this.config.forcePreroll=!0,clearInterval(this.pauseInterval)))},SekindoPlaylistManager.prototype.generateVideoElement=function(){this.videoElement=new SekindoVideoManager(this.config),this.videoElement.muted=0!=parseInt(this.config.mute),this.videoElement.volume=this.config.volume,this.config.bus.triggerNote("addChild",{visual:this.videoElement,destiny:"video"}),this.addListeners(),this.playerSimulator||(this.playerSimulator=new SekindoPlayerSimulator(this.uniqueID,this.config))},SekindoPlaylistManager.prototype.loadNextContent=function(e){this.config.isFirstContent&&(this.config.isFirstContent=0==e),!this.contentPlayList||this.contentPlayList.length<=0||(!1!==this.config.onViewabilityChange.getCurrState()?(this.playerSimulator&&!this.playerSimulator.paused&&this.playerSimulator.stop(),this.allowPlaying&&(this.config.currContentIndex=e,this.initNextContent(e),this.isCurrentlyPlaying=!0,this.videoElement.play(),this.config.bus.triggerNote("contentStarted",e))):this.allowPlaying&&this.playerSimulator.play())},SekindoPlaylistManager.prototype.initNextContent=function(e){this.videoTitle=this.contentPlayList[e].title,this.currSrc=this.contentPlayList[e],this.videoElement.src!=this.currSrc&&(this.videoElement.src=this.currSrc),this.videoElement.videoTitle=this.contentPlayList[e].title,this.videoElement.style.display="block";var t=this.contentPlayList[e].clkUrl;if(this.config.fileId=this.contentPlayList[e].fileId,this.config.playListId=this.contentPlayList[e].playListId,t&&/^https?:/.test(t)?this.config.clkUrl=decodeURI(t):this.config.clkUrl=null,this.config.isNativeTemplate&&this.config.nativeTemplateElements){this.config.nativeTemplateElements.native_title&&(this.config.nativeTemplateElements.native_title.innerText=this.contentPlayList[e].title),this.config.nativeTemplateElements.native_desc&&(this.config.nativeTemplateElements.native_desc.innerText=this.contentPlayList[e].desc);for(var i=0;i<this.config.nativeTemplateElements.native_vid_link.length;i++){var n=this.config.nativeTemplateElements.native_vid_link[i];"A"==n.tagName&&(n.href=null!=this.config.clkUrl?this.config.clkUrl:""),n.getAttribute("title")&&n.setAttribute("title",this.contentPlayList[e].title)}}this.config.bus.triggerNote("onNextContentInited",{index:e,content:this.contentPlayList[e]})},SekindoPlayerSimulator.prototype.play=function(){var e=this;this.config.mobileVisibilityLock||(this.paused=!1,this.currDummyTime=Date.now()-this.currDummyProgress,this.simulatePlayingInterval&&clearInterval(this.simulatePlayingInterval),this.simulatePlayingInterval=setInterval(function(){e.currDummyProgress=Date.now()-e.currDummyTime;var t=e.currDummyProgress/1e3;if(t>60)return e.stop(),void e.config.bus.triggerNote("contentEnded",!0);e.config.bus.triggerNote("onVideoProgress",{currTime:t,duration:60,loaded:60,isSimulator:!0})},100))},SekindoPlayerSimulator.prototype.pause=function(){this.paused=!0,this.simulatePlayingInterval&&clearInterval(this.simulatePlayingInterval),this.simulatePlayingInterval=null},SekindoPlayerSimulator.prototype.stop=function(){this.paused=!0,this.simulatePlayingInterval&&clearInterval(this.simulatePlayingInterval),this.simulatePlayingInterval=null,this.currDummyProgress=0},SekindoPlaylistManager.prototype.loadSwitchedContentBG=function(){this.loadNextContentBG(this.config.nextContentIndex)},SekindoPlaylistManager.prototype.loadNextContentBG=function(e){var t=this;if(this.contentPlayList&&!(this.contentPlayList.length<=0)){this.bgImg&&this.bgImg.parentNode&&this.bgImg.parentNode.removeChild(this.bgImg);var i;i=this.contentPlayList[e].bgImg&&SekindoUtils.validURL(decodeURI(this.contentPlayList[e].bgImg))?this.contentPlayList[e].bgImg:this.config.absolutePath+"/content/video/splayer/assets/bigPlayBtn.jpg",this.bgImg=this.config.videoIFrameDoc.createElement("img"),this.bgImg.src=decodeURI(i);var n=this.contentPlayList[e].clkUrl;n&&/^https?:/.test(n)?this.config.clkUrl=decodeURI(n):this.config.clkUrl=null,this.bgImg.addEventListener("load",function(){!function(){var e=t.config.videoWidth||t.config.width,i=t.config.videoHeight||t.config.height;t.isImgError=!1;var n=Math.min(e/t.bgImg.width,i/t.bgImg.height);t.bgImg.style.transform="translate(-50%, -50%) scale("+n+","+n+")",t.bgImg.style.webkitTransform="translate(-50%, -50%) scale("+n+","+n+")",t.bgImg.style.position="absolute",t.bgImg.style.top="50%",t.bgImg.style.left="50%",t.bgImg.style.cursor="pointer",t.bgImg.style.zIndex=3}()}),this.bgImg.addEventListener("error",function(){t.isImgError?t.bgImg.parentNode.removeChild(t.bgImg):(t.isImgError=!0,i=t.config.absolutePath+"/content/video/splayer/assets/bigPlayBtn.jpg",t.bgImg.src=decodeURI(i))}),this.config.bus.triggerNote("changeTitle",this.contentPlayList[e].title),this.bgImg.addEventListener("click",function(e){!function(e){e.stopPropagation(),"3"!=t.config.isAutoPlay&&(t.config.isPlaying=!0,t.config.bus.triggerNote("onUserEvent",{type:"onPlay"}),t.bgImg&&(t.bgImg.style.display="none"))}(e)},!0,!1),this.config.bus.triggerNote("addChild",{visual:this.bgImg,destiny:"video"}),window.primisLog("[Playlist Manager] - Prepare next content background")}},SekindoPlaylistManager.prototype.addListeners=function(){var e=this;this.videoEventCallback=this.onVideoEvent.bind(this),this.videoElement.addEventListener("ended",this.videoEventCallback),this.videoElement.addEventListener("play",this.videoEventCallback),this.videoElement.addEventListener("click",this.videoEventCallback),this.videoElement.addEventListener("playing",this.videoEventCallback),this.videoElement.addEventListener("pause",this.videoEventCallback),this.videoElement.addEventListener("error",this.videoEventCallback),this.videoElement.addEventListener("progress",this.videoEventCallback),this.videoElement.addEventListener("timeupdate",this.videoEventCallback),this.videoElement.addEventListener("volumechange",this.videoEventCallback),this.config.bus.addCallBack("resumePlaylist",function(t){e.resumePlaylist(t)}),this.config.bus.addCallBack("pausePlaylist",function(t){e.pausePlaylist(t)}),this.config.bus.addCallBack("prepareNextContent",function(){e.prepareNextContent(e.config.nextContentIndex)}),this.config.bus.addCallBack("stopSimulator",function(){e.playerSimulator.stop()}),this.config.bus.addCallBack("userSwitchContent",function(){e.initNextContent(e.config.nextContentIndex),e.config.bus.triggerNote("nextContentInited",e.config.nextContentIndex),e.fireContentPixel({contentPixelName:"contentPlaylistClicksPixel"}),e.removeViewabilityCallback()}),this.config.bus.addCallBack("onSwitchContent",function(){e.index=e.config.nextContentIndex,e.loadNextContent(e.index),e.addViewabilityCallback()}),this.config.bus.addCallBack("onPlayerResize",function(t){e.onPlayerResize(t)}),this.config.bus.addCallBack("onUserEvent",function(t){e.onUserEvent(t)})},SekindoPlaylistManager.prototype.onPlayerResize=function(e){var t=e.videoWidth||e.width,i=e.videoHeight||e.height;if(this.bgImg){var n=Math.min(t/this.bgImg.width,i/this.bgImg.height);this.bgImg.style.transform="translate(-50%, -50%) scale("+n+","+n+")",this.bgImg.style.webkitTransform="translate(-50%, -50%) scale("+n+","+n+")"}},SekindoPlaylistManager.prototype.onTimeScrabber=function(e){"block"==this.videoElement.style.display&&(this.videoElement.currentTime=e*this.videoElement.duration)},SekindoPlaylistManager.prototype.pausePlaylist=function(e){this.allowPlaying=!1,e||this.playerSimulator&&!this.playerSimulator.paused?this.playerSimulator.pause():this.pausePlayingContent()},SekindoPlaylistManager.prototype.prepareNextContent=function(e){!this.playerSimulator||this.playerSimulator.paused?(this.pausePlayingContent(),this.initNextContent(e)):this.playerSimulator.pause()},SekindoPlaylistManager.prototype.pausePlayingContent=function(e){this.videoElement&&this.videoElement.src&&3!=this.videoElement.networkState&&!this.videoElement.paused&&(e&&(this.pausedOnNonView=!0),this.videoElement.pause()),this.bgImg&&(this.bgImg.style.display="none")},SekindoPlaylistManager.prototype.resumePlaylist=function(e){e||(this.allowPlaying=!0),this.config.isPlaying&&!this.config.mobileVisibilityLock&&(e||this.playerSimulator&&this.playerSimulator.paused&&(this.config.playerTemplateData.isPauseNonViewable?!1===this.config.onViewabilityChange.getCurrState()&&!this.config.soundEnabledByUser:this.playerSimulator.currDummyProgress>0)?this.playerSimulator.play():this.resumePlayingContent())},SekindoPlaylistManager.prototype.resumePlayingContent=function(){if(!this.config.playerTemplateData.isPauseNonViewable||!1!==this.config.onViewabilityChange.getCurrState()||this.config.soundEnabledByUser){this.allowPlaying=!0,this.isCurrentlyPlaying&&this.videoElement.src&&3!=this.videoElement.networkState?this.videoElement.play():this.loadNextContent(this.index,!0),this.videoElement.style.display="block",this.videoElement.videoTitle=this.videoTitle,this.config.bus.triggerNote("changeTitle",this.videoTitle),this.bgImg&&(this.bgImg.style.display="none"),window.primisLog("[Playlist Manager] - start playing content")}},SekindoPlaylistManager.prototype.onVideoEvent=function(e){var t=this;switch(e.type){case"error":if(this.currFileId=null,this.index++,this.isCurrentlyPlaying=!1,this.index>=this.contentPlayList.length){this.playlistMultiplierIndex++,this.playlistMultiplierIndex>=this.config.playlistMultiplier&&(this.playlistMultiplierIndex=0),this.index=0,this.config.fileId=this.contentPlayList[0]?this.contentPlayList[0].fileId:"0",this.onErrorTimeout=setTimeout(function(){t.loadNextContent(t.index)},3e3);break}this.loadNextContent(this.index);break;case"play":this.bgImg&&(this.bgImg.style.display="none"),this.videoElement.src==this.currSrc&&this.config.bus.triggerNote("changeTitle",this.videoTitle),this.config.bus.triggerNote("onVideoEvent",{type:"play",val:""});break;case"progress":case"timeupdate":try{this.config.bus.triggerNote("onVideoProgress",{currTime:this.videoElement.currentTime,duration:this.videoElement.duration,loaded:this.videoElement.buffered.end(this.videoElement.buffered.length-1)})}catch(e){}this.videoElement.currentTime>=30&&this.config.bus.triggerNote("fireContentPixel",{contentPixelName:"contentCompletePixel"});break;case"pause":this.pausedOnNonView||this.config.bus.triggerNote("onVideoEvent",{type:"pause",val:""}),this.pausedOnNonView=!1;break;case"playing":this.currFileId!=this.config.fileId&&(this.currFileId=this.config.fileId,this.config.bus.triggerNote("fireContentPixel",{contentPixelName:"contentStartPixel"}),window.primisLog("[Content Pixel] - 16. start playing content")),this.config.bus.triggerNote("changeTitle",this.videoTitle),this.config.bus.triggerNote("onVideoEvent",{type:"playing",val:""});break;case"ended":this.currFileId=null,this.config.bus.triggerNote("fireContentPixel",{contentPixelName:"contentCompletePixel"}),this.config.bus.triggerNote("fireContentPixel",{contentPixelName:"contentFullCompletePixel"}),this.isCurrentlyPlaying=!1,this.index++,this.index>=this.contentPlayList.length&&(this.playlistMultiplierIndex++,this.playlistMultiplierIndex>=this.config.playlistMultiplier&&(this.playlistMultiplierIndex=0),this.index=0),this.config.fileId=this.contentPlayList[this.index]?this.contentPlayList[this.index].fileId:"0",0==this.index&&0==this.playlistMultiplierIndex?(this.videoElement.style.display="none",this.allowPlaying=!1,this.config.bus.triggerNote("playlistEnded",!0)):(this.videoElement.style.display="none",this.config.bus.triggerNote("contentEnded"));break;case"volumechange":var i=!this.videoElement||this.videoElement.muted,n=this.videoElement?this.videoElement.volume:-1;t.config.bus.triggerNote("onVideoEvent",{type:"volumechange",val:{muted:i,volume:n,player:"playlistManager"}})}},SekindoPlaylistManager.prototype.onUserEvent=function(e){switch(e.type){case"onVolumeScrabber":this.videoElement.volume=e.value,this.videoElement.muted=!1,this.config.isMuted=!1,this.config.volume=e.value;break;case"onMute":e.value?(this.videoElement.muted=!0,this.config.isMuted=!0):(this.videoElement.muted=!1,this.config.isMuted=!1);break;case"timeScrabber":this.onTimeScrabber(e.value)}},SekindoPlaylistManager.prototype.destruct=function(){clearInterval(this.viwabilityInterval),clearInterval(this.jsActivityInterval),clearTimeout(this.onErrorTimeout),clearInterval(this.pauseInterval),this.videoElement.removeEventListener("ended",this.videoEventCallback),this.videoElement.removeEventListener("play",this.videoEventCallback),this.videoElement.removeEventListener("click",this.videoEventCallback),this.videoElement.removeEventListener("playing",this.videoEventCallback),this.videoElement.removeEventListener("pause",this.videoEventCallback),this.videoElement.removeEventListener("error",this.videoEventCallback),this.videoElement.removeEventListener("progress",this.videoEventCallback),this.videoElement.removeEventListener("timeupdate",this.videoEventCallback),this.videoElement.removeEventListener("volumechange",this.videoEventCallback),this.iosVidWrapper&&this.iosVidWrapper.destruct(),delete this.videoElement},SekindoAudioObj.prototype.play=function(){if(this.audioStatus="playRequested",this.muted=!1,this.audioSrc!=this.audioElement.src){this.audioLock=!1;try{this.audioElement.src=this.audioSrc,this.audioElement.currentTime=this.jpgSeqObj.currAnimTime}catch(e){console.log(e)}this.isPlayingAudio=!1,this.audioElement.muted=!1;try{this.audioElement.play()}catch(e){console.log(e)}}else{if(this.audioLock)return;try{this.audioElement.currentTime=this.jpgSeqObj.currAnimTime,this.audioElement.play(),this.audioElement.muted=!1,this.dispatchEvent&&this.dispatchEvent("volumechange")}catch(e){console.log(e)}}this.playRequest=!0},SekindoAudioObj.prototype.pause=function(){this.audioLock||(this.audioStatus="pauseRequested",this.audioSrc==this.audioElement.src&&(this.audioElement.pause(),this.playRequest=!1,this.muted=!0))},SekindoAudioObj.prototype.preloadSound=function(e){var t=this.config.videoIFrameDoc.createElement("audio"),i=this.config.videoIFrameDoc.createElement("source");i.type="audio/mpeg",i.src=e,t.appendChild(i),t.load()},SekindoAudioObj.prototype.removeListeners=function(){this.audioElement.removeEventListener("error",this.onErrorEvent,!1),this.audioElement.removeEventListener("canplaythrough",this.canplaythrough1,!1),this.audioElement.removeEventListener("playing",this.playing1,!1),this.audioElement.removeEventListener("pause",this.pause1,!1),this.audioElement.removeEventListener("ended",this.ended1,!1),this.audioElement.removeEventListener("volumechange",this.volumechange1,!1)},SekindoVideoObj.prototype.loadSrc=function(e){var t=this;if(this.failTimeout=null,e&&(this.src=e),this.src){this.xmlhttp=new XMLHttpRequest;var i=this.config.encoderUrl.replace("[TARGET]",encodeURIComponent(this.src));i&&(i=i.replace("[ORIGIN]","pl")),this.xmlhttp.addEventListener("load",function(e){try{if(/^-?[0-9]+$/.test(t.xmlhttp.responseText))t.failTimeout=setTimeout(function(){t.loadSrc()},4e3);else{var i=JSON.parse(t.xmlhttp.responseText);t.constructVideo(i),clearTimeout(t.loaderTimeout)}}catch(e){t.failTimeout||(t.failTimeout=setTimeout(function(){t.loadSrc()},4e3))}},!1),this.xmlhttp.addEventListener("error",function(e){t.failTimeout||(t.failTimeout=setTimeout(function(){t.loadSrc()},4e3))},!1),this.xmlhttp.addEventListener("abort",function(e){t.failTimeout||(t.failTimeout=setTimeout(function(){t.loadSrc()},4e3))},!1),this.xmlhttp.open("GET",i,!0),this.xmlhttp.setRequestHeader("Content-Type","application/xml"),this.xmlhttp.send()}},SekindoVideoObj.prototype.constructVideo=function(e){var t=this;e.iframeDoc=this.config.videoIFrameDoc,e.iframewindow=this.config.videoIFrameWindow,e.absolutePath=this.config.absolutePath,this.jpgSeqObj=new SekindoJpgSeqObj(this.vidUniqueID,e),this.audioObj.audioSrc=e.dir+"/audio/audio.mp3",this.jpgSeqObj.audioObj=this.audioObj,this.jpgSeqObj.videoObj=this,this.interface.jpgSeqObj=this.jpgSeqObj,this.audioObj.jpgSeqObj=this.jpgSeqObj,1==this.config.isHasAudio||"true"==this.config.isHasAudio?this.audioObj.preloadSound(this.jpgSeqObj.audioSrc):this.audioObj.isHasAudio=!1,this.videoDiv.appendChild(this.jpgSeqObj.container),this.jpgSeqObj.dispatchEvent=function(e,i){t.videoDiv.dispatchEvent(e,i)},this.audioObj.dispatchEvent=function(e,i){t.videoDiv.dispatchEvent(e,i)},this.jpgSeqObj.constructVideoDiv(),this.setDimentions(),this.busItms=new Array,this.busItms.push(this.config.bus.addCallBack("onUserEvent",function(e){t.onUserEvent(e)})),this.busItms.push(this.config.bus.addCallBack("skipAd",function(e){t.jpgSeqObj.syncAnimToSound()})),this.autoplay&&this.jpgSeqObj.play();new MutationObserver(function(e){e.forEach(function(e){for(var i=e.oldValue.replace(/ /g,"").split(";"),n={},s=0;s<i.length;s++){var o=String(i[s]).split(":");n[o[0]]=o[1]}n.width==e.target.style.width&&n.height==e.target.style.height||t.setDimentions()})}).observe(this.videoDiv,{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})},SekindoVideoObj.prototype.onUserEvent=function(e){switch(e.type){case"onMute":this.interface.muted=e.value}},SekindoVideoObj.prototype.setDimentions=function(){if(this.videoDiv&&this.jpgSeqObj){var e=this.config.videoWidth||this.config.width,t=this.config.videoHeight||this.config.height;if("fill"==this.videoDiv.style.objectFit){var i=e/Number(this.jpgSeqObj.container.offsetWidth),n=t/Number(this.jpgSeqObj.container.offsetHeight);this.jpgSeqObj.container.style.transform="translate(-50%, -50%) scale("+i+","+n+")",this.jpgSeqObj.container.style.mozTransform="translate(-50%, -50%) scale("+i+","+n+")",this.jpgSeqObj.container.style.webkitTransform="translate(-50%, -50%) scale("+i+","+n+")"}else{var s=Number(this.jpgSeqObj.container.offsetWidth)/Number(this.jpgSeqObj.container.offsetHeight),o=e/t,a=e/Number(this.jpgSeqObj.container.offsetWidth);if(s<o)a=t/Number(this.jpgSeqObj.container.offsetHeight);this.jpgSeqObj.container.style.transform="translate(-50%, -50%) scale("+a+","+a+")",this.jpgSeqObj.container.style.mozTransform="translate(-50%, -50%) scale("+a+","+a+")",this.jpgSeqObj.container.style.webkitTransform="translate(-50%, -50%) scale("+a+","+a+")"}this.jpgSeqObj.container.style.top="50%",this.jpgSeqObj.container.style.left="50%"}},SekindoVideoObj.prototype.show=function(){this.jpgSeqObj.container.style.zIndex=1,this.jpgSeqObj.container.style.display="block"},SekindoVideoObj.prototype.hide=function(){this.jpgSeqObj.container.style.zIndex=-1e3,this.jpgSeqObj.container.style.display="none"},SekindoVideoObj.prototype.destruct=function(){function e(t){if(t){var i,n,s,o=t.attributes;if(o)for(n=o.length,i=0;i<n;i+=1)"function"==typeof t[s=o[i].name]&&(t[s]=null);if(o=t.childNodes)for(n=o.length,i=0;i<n;i+=1)e(t.childNodes[i]),t.childNodes[i]&&t.removeChild(t.childNodes[i])}}if(this.audioObj.removeListeners(),this.failTimeout&&clearTimeout(this.failTimeout),this.jpgSeqObj&&this.jpgSeqObj.container&&e(this.jpgSeqObj.container),this.jpgSeqObj&&this.jpgSeqObj.destruct(),this.jpgSeqObj&&this.jpgSeqObj.container&&this.jpgSeqObj.container.parentNode&&this.jpgSeqObj.container.parentNode.removeChild(this.jpgSeqObj.container),this.busItms)for(var t=0;t<this.busItms.length;t++)this.config.bus.removeBusItm(this.busItms[t]);for(var i in this.interface)this.interface[i]=null;for(var i in this.audioObj)this.audioObj[i]=null;this.videoDiv&&this.videoDiv.parentNode&&this.videoDiv.parentNode.removeChild(this.videoDiv),delete this.jpgSeqObj,delete this.audioObj,delete this.interface,delete this.videoDiv;for(var i in this)this[i]=null},SekindoJpgSeqObj.prototype.bufferAnimation=function(){this.bufferDiv=this.config.iframeDoc.createElement("div"),this.bufferDiv.id="this.bufferDiv"+this.uniqueID,this.bufferDiv.style.position="absolute",this.bufferDiv.style.zIndex=10,this.bufferDiv.style.display="block",this.bufferDiv.style.width=this.videoWidth+"px",this.bufferDiv.style.height=this.videoHeight+"px",this.bufferDiv.style.overflow="hidden",this.bufferDiv.style.marginLeft="auto",this.bufferDiv.style.marginRight="auto",this.bufferDiv.style.textAlign="center",this.container.appendChild(this.bufferDiv),this.img=this.config.iframeDoc.createElement("img"),this.img.src=this.config.absolutePath+"/content/video/splayer/assets/bufferAnim.gif",this.img.width=80,this.img.height=80,this.img.style.marginTop=this.videoHeight/2-40+"px",this.bufferDiv.appendChild(this.img)},SekindoJpgSeqObj.prototype.constructVideoDiv=function(){var e=this;this.videoDiv=this.config.iframeDoc.createElement("div"),this.videoDiv.id="videoDiv"+this.uniqueID,this.container.appendChild(this.videoDiv);var t=this.constructDiv("poster");this.videoDiv.appendChild(t);for(var i=0;i<this.totalDivs;i++){t=this.constructDiv(i);this.videoDiv.appendChild(t),this.divsArray.push(t)}this.videoDiv.addEventListener("click",function(t){e.dispatchEvent("clickThrough"),e.dispatchEvent("click")}),this.loadImagesStock(0)},SekindoJpgSeqObj.prototype.constructDiv=function(e){var t="frame"+this.uniqueID+e,i=this.config.iframeDoc.createElement("div");return i.className=t,i.id=t,i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.width=this.videoWidth+"px",i.style.height=this.videoHeight+"px",i.style.webkitTransform="translate3d(1, 1, 1)","poster"==e?(i.style.background="url("+this.config.dir+"/framesSeq/poster.jpg)",i.style.zIndex=0,i.style.display="block"):(i.style.background="url("+this.config.dir+"/framesSeq/framesSeq"+e+".jpg)",i.style.zIndex=-1e3,i.style.display="none",i.setAttribute("data-frame",e)),i.style.backgroundColor="black",i},SekindoJpgSeqObj.prototype.onAnimationStart=function(){"inited"==this.playingStatus&&(this.dispatchEvent("start"),this.dispatchEvent("play"),this.dispatchEvent("playing"),this.playingStatus="playing",this.progressStatus="start",this.videoObj.setDimentions())},SekindoJpgSeqObj.prototype.isBuffering=function(){for(var e=Math.max(1,Math.floor(this.buffer*this.config.sequancesPerSec)),t=!0,i=0,n=0;n<e;n++)this.imagesLoaded[this.currSequance+n]?this.imagesLoaded[this.currSequance+n].result&&i++:i++;for(var s=0;this.imagesLoaded[s]&&this.imagesLoaded[s].result;)s++;return this.buffered=Math.min(s*this.config.framePerSequance/this.config.frameRate,this.config.totalFrames/this.config.frameRate),i==e&&(t=!1),t},SekindoJpgSeqObj.prototype.loadImagesStock=function(e){var t=this;this.i=e;var i=new SekindoImgLoaderObj(function(){t.i++,t.i<t.config.seqNum&&t.loadImagesStock(t.i)},this.config.dir+"/framesSeq/framesSeq"+e+".jpg",this.config,e);this.imagesLoaded[e]=i},SekindoImgLoaderObj=function(e,t,i,n){var s=this;this.result=!1;var o=i.iframeDoc.createElement("img");o.addEventListener("load",function(t){i.iframeDoc.body.removeChild(o),s.result=!0,e()}),o.src=t,o.style.width="1px",o.style.height="1px",i.iframeDoc.body.appendChild(o)},SekindoJpgSeqObj.prototype.setCurrTime=function(){if(!this.destructed){var e=this;switch(this.playingStatus){case"inited":this.currTime=0;break;case"playing":this.currTime=(Date.now()-this.startTime)/1e3;break;case"paused":case"buffer":this.startTime=Date.now()-1e3*this.currTime;break;case"complete":return}this.audioObj.muted||"playing"!=this.playingStatus||"inited"!=this.audioObj.audioStatus&&"pauseRequested"!=this.audioObj.audioStatus&&"pause"!=this.audioObj.audioStatus&&"ended"!=this.audioObj.audioStatus||this.audioObj.play(),this.audioObj.audioSrc==this.audioObj.audioElement.src&&"playing"==this.audioObj.audioStatus?(this.currAnimTime+=(this.audioObj.audioElement.currentTime+.2-this.currAnimTime)/10,this.currTime=Math.round(1e3*this.currAnimTime)/1e3):this.currAnimTime=Math.round(1e3*this.currTime)/1e3;var t=this.currSequance;this.currSequance=Math.floor(this.currTime*this.config.sequancesPerSec);var i=this.currTime-this.currSequance/this.config.sequancesPerSec;this.currFrame=Math.min(Math.round(i*this.config.frameRate),this.config.framePerSequance-1),t!=this.currSequance&&this.switchSequances(),"playing"==this.playingStatus&&this.switchFrames(),this.reportProgressStatus(),this.config.iframewindow.requestAnimationFrame(function(){try{e.setCurrTime()}catch(e){}})}},SekindoJpgSeqObj.prototype.switchFrames=function(){try{this.currDiv.style.backgroundPosition=this.currFrame*-this.W+"px",this.dispatchEvent("onProgress",this.currTime),this.dispatchEvent("timeupdate")}catch(e){}},SekindoJpgSeqObj.prototype.switchSequances=function(){var e=this;if(this.currSequance>=this.config.seqNum&&this.loop&&(this.currSequance=0,this.playingStatus="inited"),this.isBuffering())return setTimeout(function(){e.switchSequances()},1e3),this.bufferDiv.style.zIndex=10,this.bufferDiv.style.display="block",this.playingStatus="buffer",void(this.audioObj.muted||this.audioObj.audioSrc!=this.audioObj.audioElement.src||this.audioObj.pause(this));"buffer"==this.playingStatus&&(this.isPaused?this.playingStatus="paused":this.playingStatus="playing"),this.bufferDiv.style.display="none",this.dispatchEvent("loadstart"),this.dispatchEvent("progress"),this.dispatchEvent("durationchange"),this.dispatchEvent("loadedmetadata"),this.dispatchEvent("loadeddata"),this.dispatchEvent("canplay"),this.dispatchEvent("canplaythrough"),this.currDiv?(this.currDiv.style.zIndex=-1e3,this.currDiv=this.nxtDiv):(this.currTime=0,this.startTime=Date.now(),this.currDiv=this.divsArray[0],this.currDiv.style.background="url("+this.config.dir+"/framesSeq/framesSeq"+this.currSequance+".jpg)",this.playingStatus="inited",this.onAnimationStart()),this.currDiv.style.zIndex=1,this.currDiv.style.display="block",this.currSequance<this.config.seqNum-1?(this.nxtDiv=this.divsArray[(this.currSequance+1)%this.totalDivs],this.nxtDiv.style.background="url("+this.config.dir+"/framesSeq/framesSeq"+(this.currSequance+1)+".jpg)"):this.currSequance>this.config.seqNum-1&&(this.progressStatus="complete",this.ended=!0,this.playingStatus="complete",this.dispatchEvent("complete"),this.dispatchEvent("ended")),this.audioObj.isPlayingAudio||this.audioObj.audioElement.isMuted||this.audioObj.audioSrc!=this.audioObj.audioElement.src||"playing"!=this.playingStatus||this.audioObj.play(),this.config.iframewindow.requestAnimationFrame(function(){try{e.setCurrTime()}catch(e){}})},SekindoJpgSeqObj.prototype.reportProgressStatus=function(){switch(this.progressStatus){case"inited":break;case"start":this.currTime>this.config.totalFrames/this.config.frameRate/4&&(this.progressStatus="firstQuartile",this.dispatchEvent("firstQuartile"));break;case"firstQuartile":this.currTime>this.config.totalFrames/this.config.frameRate/2&&(this.progressStatus="midpoint",this.dispatchEvent("midpoint"));break;case"midpoint":
this.currTime>this.config.totalFrames/this.config.frameRate/4*3&&(this.progressStatus="thirdQuartile",this.dispatchEvent("thirdQuartile"));break;case"thirdQuartile":this.currTime>=this.config.totalFrames/this.config.frameRate&&(this.progressStatus="complete",this.ended=!0,this.playingStatus="complete",this.dispatchEvent("pause"),this.dispatchEvent("ended"))}},SekindoJpgSeqObj.prototype.play=function(){var e=this;this.pauseTimeStamp&&(this.frameTimeStamp=Date.now()-this.pauseTimeStamp),this.isPaused=!1,"paused"==this.playingStatus&&this.dispatchEvent("playing"),this.playingStatus="playing",this.bufferDiv||this.bufferAnimation(),this.config.iframewindow.requestAnimationFrame(function(){try{e.setCurrTime()}catch(e){}})},SekindoJpgSeqObj.prototype.pause=function(){this.ended||(this.isPaused=!0,this.playingStatus="paused",this.pauseTimeStamp=Date.now()-this.frameTimeStamp,this.audioObj.pause(),this.dispatchEvent("pause"))},SekindoJpgSeqObj.prototype.destruct=function(){this.destructed=!0;for(var e=0;e<this.divsArray.length;e++)this.divsArray[e].style.display="none",this.divsArray[e].className="";for(var t in this)this[t]=null},SekindoVPAIDWrapper=function(e,t,i){function n(){return!0}function s(){o.VPAIDCreative=a.getVPAIDAd,o.creative=o.VPAIDCreative();var e={};if(e.AdParameters=o.params.creativeData,o.params.creativeData=e,o.checkVPAIDInterface(o.creative)){o.setCallbacksForCreative(),o.config.blacklistIframe&&o.config.blacklistIframe.length&&(o.amazoneAdCheckInterval=setInterval(function(){for(var e=SekindoUtils.getElementsInObj(o.config.videoIFrame,["iframe"]),t=0;t<e.length;t++){for(var i=e[t],n=!1,s=0;s<o.config.blacklistIframe.length;s++)if(-1!=i.src.indexOf(o.config.blacklistIframe[s])){n=!0;break}if(i.src&&n)return clearInterval(o.amazoneAdCheckInterval),i.parentNode.removeChild(i),void o.onAdError("amazoneAd")}},100));var t=o.config.videoWidth||o.config.width,i=o.config.videoHeight||o.config.height;o.initAd(t,i,"normal",766,o.params.creativeData,o.params.environmentVars)}else o.onAdError("vpaidInterfaceNotConformed")}var o=this;this.config=e,this.params=t,this.parent=i,this.uniqueID=this.config.uniqueID,this.doNotUseSetAdVolume=!1,this.killTimeOut&&clearTimeout(this.killTimeOut),this.params.killTime&&this.params.killTime>0&&(this.killTimeOut=setTimeout(function(){o.onAdError("killTimeOut")},this.params.killTime)),this.iframe=this.config.videoIFrameDoc.createElement("iframe"),this.iframe.style.border="none",this.iframe.style.margin="0px",this.iframe.scrolling="no",this.iframe.id="sekindoVpaidIframe",this.VPAIDCreative=null,this.params.environmentVars.slot.appendChild(this.iframe);var a=this.iframe.contentWindow||this.iframe.contentDocument.defaultView;this.iFrameDoc=a.document||this.iframe.contentDocument,this.iFrameDoc.open(),this.iFrameDoc.close();var r=this.iFrameDoc.createElement("base");r.href=this.config.dummyBaseHref,this.iFrameDoc.head.appendChild(r),a.Element.prototype.scrollIntoView=function(){},a.onerror=n,a.console&&(a.console.error=n),this.readyStateCheckInterval&&clearInterval(this.readyStateCheckInterval),this.readyStateCheckInterval=setInterval(function(){"complete"===o.iFrameDoc.readyState&&(clearInterval(o.readyStateCheckInterval),function(){var e=o.iFrameDoc.getElementsByTagName("head")[0];o.script=o.iFrameDoc.createElement("script"),o.script.type="text/javascript",o.script.src=o.params.VPAIDUrl,o.script.onload=s,o.script.onreadystatechange=function(){"complete"==o.readyState&&s()},e.appendChild(o.script)}())},10)},SekindoVPAIDWrapper.prototype.checkVPAIDInterface=function(e){return!!(e&&e.initAd&&"function"==typeof e.initAd&&e.startAd&&"function"==typeof e.startAd&&e.stopAd&&"function"==typeof e.stopAd&&e.skipAd&&"function"==typeof e.skipAd&&e.resizeAd&&"function"==typeof e.resizeAd&&e.pauseAd&&"function"==typeof e.pauseAd&&e.resumeAd&&"function"==typeof e.resumeAd&&e.expandAd&&"function"==typeof e.expandAd&&e.collapseAd&&"function"==typeof e.collapseAd&&e.subscribe&&"function"==typeof e.subscribe&&e.unsubscribe&&"function"==typeof e.unsubscribe)},SekindoVPAIDWrapper.prototype.setCallbacksForCreative=function(){var e={AdStarted:this.onStartAd,AdStopped:this.onStopAd,AdSkipped:this.onSkipAd,AdLoaded:this.onAdLoaded,AdLinearChange:this.onAdLinearChange,AdSizeChange:this.onAdSizeChange,AdExpandedChange:this.onAdExpandedChange,AdSkippableStateChange:this.onAdSkippableStateChange,AdDurationChange:this.onAdDurationChange,AdRemainingTimeChange:this.onAdRemainingTimeChange,AdVolumeChange:this.onAdVolumeChange,AdImpression:this.onAdImpression,AdClickThru:this.onAdClickThru,AdInteraction:this.onAdInteraction,AdVideoStart:this.onAdVideoStart,AdVideoFirstQuartile:this.onAdVideoFirstQuartile,AdVideoMidpoint:this.onAdVideoMidpoint,AdVideoThirdQuartile:this.onAdVideoThirdQuartile,AdVideoComplete:this.onAdVideoComplete,AdUserAcceptInvitation:this.onAdUserAcceptInvitation,AdUserMinimize:this.onAdUserMinimize,AdUserClose:this.onAdUserClose,AdPaused:this.onAdPaused,AdPlaying:this.onAdPlaying,AdError:this.onAdError,AdLog:this.onAdLog};for(var t in e)this.creative.subscribe(e[t],String(t),this)},SekindoVPAIDWrapper.prototype.objSoundMonitor=function(e,t,i){var n=0,s=this;this.config=i,this.mediaObj=e,t.forceMute&&s.config.isMuted&&!s.config.isRolloverUnMuted&&(e.muted=!0),e.onvolumechange=function(){t.forceMute&&s.config.isMuted&&!s.config.isRolloverUnMuted&&(e.muted||(e.muted=!0,++n>3&&t.onStragle(e)))}},SekindoVPAIDWrapper.prototype.soundsController=function(e){function t(){for(var t=0;t<e.length;t++)for(var i=SekindoUtils.getElementsInObj(e[t],["video","audio"]),a=0;a<i.length;a++){for(var r=!0,l=0;l<o.length;l++)o[l].mediaObj==i[a]&&(r=!1);if(r){var d=new n.objSoundMonitor(i[a],s,n.config);o.push(d)}}}function i(){clearInterval(n.vidCollectInterval);for(var e in o){var t=o[e];t.mediaObj&&(t.mediaObj.onvolumechange=null),t=null}o=null,s=null}var n=this;if(e){var s={},o=[];s.forceMute=!0,s.onStragle=function(e){i(),n.onAdError("soundStragle")},t(),this.vidCollectInterval=setInterval(t,100)}else i()},SekindoVPAIDWrapper.prototype.initAd=function(e,t,i,n,s,o){if(-1!=this.params.properties.AdTitle.indexOf("EyeView")&&(this.doNotUseSetAdVolume=!0),this.config.isMuteControlled){var a=[this.config.videoIFrame];this.iframe&&a.push(this.iframe),this.soundsController(a)}o.videoSlotCanAutoPlay=!0,this.creative.initAd(e,t,i,n,s,o)},SekindoVPAIDWrapper.prototype.onAdPaused=function(){this.parent&&this.parent.onVpaidEvent("onAdPaused")},SekindoVPAIDWrapper.prototype.onAdPlaying=function(){this.parent&&this.parent.onVpaidEvent("onAdPlaying")},SekindoVPAIDWrapper.prototype.onAdError=function(e){try{if(-1!=e.indexOf("Event:AdImpression"))return}catch(e){}this.parent&&this.parent.onVpaidEvent({type:"onAdError"})},SekindoVPAIDWrapper.prototype.onAdLog=function(e){},SekindoVPAIDWrapper.prototype.onAdUserAcceptInvitation=function(){this.parent&&this.parent.onVpaidEvent("onAdUserAcceptInvitation")},SekindoVPAIDWrapper.prototype.onAdUserMinimize=function(){this.parent&&this.parent.onVpaidEvent("onAdUserMinimize")},SekindoVPAIDWrapper.prototype.onAdUserClose=function(){this.parent&&this.parent.onVpaidEvent({type:"onAdUserClose"})},SekindoVPAIDWrapper.prototype.onAdSkippableStateChange=function(){this.parent&&this.parent.onVpaidEvent({type:"onAdSkippableStateChange",val:this.creative.getAdSkippableState()})},SekindoVPAIDWrapper.prototype.onAdExpandedChange=function(){this.parent&&this.parent.onVpaidEvent({type:"onAdExpandedChange",val:this.creative.getAdExpanded()})},SekindoVPAIDWrapper.prototype.getAdExpanded=function(){return this.creative.getAdExpanded()},SekindoVPAIDWrapper.prototype.getAdSkippableState=function(){return this.creative.getAdSkippableState()},SekindoVPAIDWrapper.prototype.onAdSizeChange=function(){this.parent&&this.parent.onVpaidEvent({type:"onAdSizeChange",width:this.creative.getAdWidth(),height:this.creative.getAdHeight()})},SekindoVPAIDWrapper.prototype.onAdDurationChange=function(){this.parent&&this.parent.onVpaidEvent({type:"onAdDurationChange",val:this.creative.getAdDuration()})},SekindoVPAIDWrapper.prototype.onAdRemainingTimeChange=function(){this.parent&&this.parent.onVpaidEvent({type:"onAdRemainingTimeChange",val:this.creative.getAdRemainingTime()})},SekindoVPAIDWrapper.prototype.getAdRemainingTime=function(){return this.creative.getAdRemainingTime()},SekindoVPAIDWrapper.prototype.onAdImpression=function(e){var t=this;clearTimeout(this.killTimeOut),this.amazoneRemovalId=setTimeout(function(){t.amazoneAdCheckInterval&&clearInterval(t.amazoneAdCheckInterval)},1e3),this.hadImpression=!0,this.vidCollectInterval&&clearInterval(this.vidCollectInterval),this.parent&&this.parent.onVpaidEvent({type:"onAdImpression",macro:e}),this.impressionTimer&&clearTimeout(this.impressionTimer),this.config.impressionTimeout&&this.config.impressionTimeout>0&&(this.impressionTimer=setTimeout(function(){t.onAdError("impressionTimer")},this.config.impressionTimeout)),this.params.reportDebugImpPixelId&&this.params.debugWFManagerId&&this.config.LogRest.performCall("liveVideoWaterfall","SetVastStatus",[this.params.reportDebugImpPixelId,"Impression (from VPAID)"],this.params.debugWFManagerId)},SekindoVPAIDWrapper.prototype.onAdClickThru=function(e,t,i){this.parent&&this.parent.onVpaidEvent("onAdClickThru")},SekindoVPAIDWrapper.prototype.onAdInteraction=function(e){this.parent&&this.parent.onVpaidEvent("onAdInteraction")},SekindoVPAIDWrapper.prototype.onAdVideoStart=function(){var e=this;this.parent&&this.parent.onVpaidEvent("onAdVideoStart"),this.params.environmentVars.videoSlot.paused&&setTimeout(function(){var t=e.params.environmentVars.videoSlot.play();if(t)try{t.then(function(){}).catch(function(e){})}catch(e){}},200)},SekindoVPAIDWrapper.prototype.onAdVideoFirstQuartile=function(){this.parent&&this.parent.onVpaidEvent("onAdVideoFirstQuartile")},SekindoVPAIDWrapper.prototype.onAdVideoMidpoint=function(){this.parent&&this.parent.onVpaidEvent("onAdVideoMidpoint")},SekindoVPAIDWrapper.prototype.onAdVideoThirdQuartile=function(){this.parent&&this.parent.onVpaidEvent("onAdVideoThirdQuartile")},SekindoVPAIDWrapper.prototype.onAdVideoComplete=function(){this.parent&&this.parent.onVpaidEvent({type:"onAdVideoComplete"})},SekindoVPAIDWrapper.prototype.onAdLinearChange=function(){this.parent&&this.parent.onVpaidEvent("onAdLinearChange")},SekindoVPAIDWrapper.prototype.getAdLinear=function(){return this.creative.getAdLinear()},SekindoVPAIDWrapper.prototype.startAd=function(){this.creative.startAd()},SekindoVPAIDWrapper.prototype.onAdLoaded=function(){this.parent&&this.parent.onVpaidEvent("onAdLoaded")},SekindoVPAIDWrapper.prototype.onStartAd=function(){this.parent&&this.parent.onVpaidEvent("onStartAd")},SekindoVPAIDWrapper.prototype.stopAd=function(){this.creative.stopAd()},SekindoVPAIDWrapper.prototype.onStopAd=function(e){var t=this;this.hadImpression?this.onStopTimeout=setTimeout(function(e){t.parent&&t.parent.onVpaidEvent({type:"onStopAd"})},2):this.onAdError()},SekindoVPAIDWrapper.prototype.onSkipAd=function(e){this.parent&&this.parent.onVpaidEvent({type:"onSkipAd"})},SekindoVPAIDWrapper.prototype.setAdVolume=function(e){if(!this.doNotUseSetAdVolume)try{this.creative.setAdVolume(e)}catch(e){}},SekindoVPAIDWrapper.prototype.getAdVolume=function(){return this.creative.getAdVolume()},SekindoVPAIDWrapper.prototype.onAdVolumeChange=function(){this.hadImpression&&this.parent&&this.parent.onVpaidEvent({type:"onAdVolumeChange",val:this.creative.getAdVolume()})},SekindoVPAIDWrapper.prototype.resizeAd=function(e,t,i){this.creative&&this.creative.resizeAd(e,t,i)},SekindoVPAIDWrapper.prototype.pauseAd=function(){this.creative.pauseAd()},SekindoVPAIDWrapper.prototype.resumeAd=function(){this.creative.resumeAd()},SekindoVPAIDWrapper.prototype.expandAd=function(){this.creative.expandAd()},SekindoVPAIDWrapper.prototype.collapseAd=function(){this.creative.collapseAd()},SekindoVPAIDWrapper.prototype.destruct=function(e){this.soundsController(),this.killTimeOut&&clearTimeout(this.killTimeOut),this.impressionTimer&&clearTimeout(this.impressionTimer),this.onStopTimeout&&clearTimeout(this.onStopTimeout),this.amazoneAdCheckInterval&&clearInterval(this.amazoneAdCheckInterval),this.amazoneRemovalId&&clearTimeout(this.amazoneRemovalId),this.readyStateCheckInterval&&clearInterval(this.readyStateCheckInterval);var t=document.getElementById("sekindoVpaidIframe");t&&t.parentNode&&t.parentNode.removeChild(t),e||SekindoUtils.deleteMe(this)},SekindoDebugAgent.prototype.setParamsFromWindow=function(){var e=this,t=SekindoUtils.getTopWindow(window);if(t)try{var i=t.location.href.toLowerCase();-1!=i.indexOf("sekindodebugger")&&(this.isDebuggerWindow=!0,-1!=i.indexOf("sekindodebuggerin")&&(this.isDebuggerWindowIn=!0),-1!=i.indexOf("testsekindodebugger")&&(this.config.isTester=2),window.primisLog=function(t){e.earlyMessagesQ.push(t)},setTimeout(function(){for(var t=0;t<e.earlyMessagesQ.length;t+=1)window.primisLog(e.earlyMessagesQ[t]);e.earlyMessagesQ=[]},5e3)),this.configDebug=t.sekindoConfigDebug,this.configDebug&&(this.applyPlayerConfig(),this.config.isTester=1)}catch(e){}},SekindoDebugAgent.prototype.applyPlayerConfig=function(){for(var e in this.configDebug)if(-1!==e.indexOf(".")){var t=e.substring(0,e.indexOf(".")),i=e.substring(e.indexOf(".")+1,e.length);""!==this.configDebug[e]&&(this.config[t][i]=this.configDebug[e])}else""!==this.configDebug[e]&&(this.config[e]=this.configDebug[e])},SekindoDebugAgent.prototype.isActivateDebugWindow=function(){return(this.isDebuggerWindow||1==this.config.debug)&&!this.isDebuggerWindowConstructed},SekindoDebugAgent.prototype.activateDebugWindow=function(){function e(){var e=new FormData;e.append("action","compareReports"),e.append("reports",JSON.stringify(t.msgQueue)),e.append("testName",t.testName);var i=new XMLHttpRequest;i.onreadystatechange=function(){4==this.readyState&&200==this.status&&console.log("Test result: "+this.responseText)},i.withCredentials=!0,i.open("POST",t.config.absolutePath+t.testsDashboardUrl,!0),i.send(e)}var t=this;this.isDebuggerWindowConstructed=!0;try{2===this.config.isTester&&(window.location.search.match(/(\?|&)testName\=([^&]*)/)&&(this.testName=decodeURIComponent(window.location.search.match(/(\?|&)testName\=([^&]*)/)[2])),function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status)try{var e=JSON.parse(this.responseText);t.configDebug=e.playerConfig,t.testRunTime=e.testRunTime||t.testRunTime,console.log("player config: "+JSON.stringify(t.configDebug)),t.applyPlayerConfig()}catch(e){console.log("player config: failed parsing config of test '"+t.testName+"'")}},e.withCredentials=!0;var i=new FormData;i.append("testName",t.testName),i.append("action","getAutoTestConfig"),e.open("POST",t.config.absolutePath+t.testsDashboardUrl,!1),e.send(i)}());var i=this.isDebuggerWindowIn?null:window.open(this.config.absolutePath+this.externalDebugWindowURL);if(i)window.primisLog=function(e){try{2===t.config.isTester&&t.msgQueue.push(e),i.sendToDebugWindow(e)}catch(t){try{arguments.callee.caller.err=new Error("error");var n;try{n=arguments.callee.caller.err.stack.toString()}catch(e){n=e.stack.toString()}i.postMessage({val:e,stack:n},"*")}catch(e){}}},2===this.config.isTester&&setTimeout(e,1e3*t.testRunTime);else{var n=window.top.document;window.top.absolutePath=this.config.absolutePath;var s=n.createElement("script");s.language="javascript",s.type="text/javascript",s.src=this.config.absolutePath+this.internalDebugWindowURL,s.onload=function(){2===t.config.isTester?(window.primisLog=function(e,i){t.msgQueue.push(e),window.top.sendToDebugWindow(e,i)},setTimeout(e,1e3*t.testRunTime)):window.primisLog=function(e,t){window.top.sendToDebugWindow(e,t)},window.onerror=window.top.onerror},n.body.appendChild(s)}}catch(e){}},SekindoUtils.applyExternalRules=function(e,t,i){if(e.externRules.length)for(var n=e.externRules,s=0;s<n.length;s++){var o=n[s];if(("init"!=i||!o.dest)&&("init"==i||o.dest&&o.dest===i))if("number"==typeof o.element&&"style"==t){for(var a=e.windowsArray[0].frameElement,r=0;r<o.element;r++)a=a.parentNode;for(var l in o.style)a.style[l]=o.style[l]}else if("config"==o.element&&("config"==t||"function"==t))for(var d in o.params)e[d]=o.params[d]}},SekindoUtils.scriptOptimizer=function(){window.console||(Window.prototype.console={},Window.prototype.console.error=function(e){},Window.prototype.console.info=function(e){},Window.prototype.console.log=function(e){},Window.prototype.console.warn=function(e){}),Element.prototype.scrollIntoView=function(){},navigator.geolocation.getCurrentPosition=function(e,t){t({code:0})},navigator.geolocation.watchPosition=function(e,t){t({code:0})},function(){for(var e=0,t=["webkit","moz"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){var n=(new Date).getTime(),s=Math.max(0,16-(n-e)),o=window.setTimeout(function(){t(n+s)},s);return e=n+s,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}()},SekindoUtils.trackSekindoAdEvents=function(e,t,i,n){var s=i;if(s&&s.trackingEvents){s.macro&&(t=s.macro);var o=s.trackingEvents[e];if(o){var a=n.pixelDiv;"complete"==e&&(a=document),"string"==typeof o&&(o=[o]);for(var r=0;r<o.length;r++){var l=o[r];if(t&&(l=l.replace(t.str,t.repTo)),l+="&playerVer="+n.playerVer,"impression"==e&&(l=(l=l.replace(/&contentFileId=0/g,"&contentFileId="+(n.fileId||"0"))).replace(/&mediaPlayListId=0/g,"&mediaPlayListId="+(n.playListId||"0")),l+="&isExcludeFromOpt="+(!0===n.isFirstContent?"0":"1")),"onAttempt"==e){if(!(Math.random()*n.attemptMultiplier<1))continue;l=l.replace("${ATTEMPT_MULTIPLIER}",n.attemptMultiplier)}SekindoUtils.firePixel(l,a,n)}}}},SekindoUtils.adInspection=function(e,t,i,n,s){return!(!function(){if(t.isJsVpaid)return!0;var n=e.adFormat;switch(i){case"pre_roll":if(!n.pre_roll)return!1;break;case"mid_roll":case"gap":if(!n.mid_roll)return!1}return!0}()||-1!=e.maxImpressions&&e.impressionCount.val>=e.maxImpressions||!function(){if(t.isJsVpaid||!e.leap||"pre_roll"==i)return!0;var s=e.leap;return n%s==0}()||e.adFormat.once_roll&&1!=s)},SekindoUtils.getScrollState=function(){var e=0,t=this.orgWin;return"number"==typeof t.pageYOffset?e=t.pageYOffset:t.document.body&&t.document.body.scrollTop?e=t.document.body.scrollTop:t.document.documentElement&&t.document.documentElement.scrollTop&&(e=t.document.documentElement.scrollTop),e},SekindoUtils.getScrollPercentage=function(e){var t=e?e.defaultView||e.parentWindow:window,i=e||document;return((t.pageYOffset||i.body.scrollTop||i.documentElement.scrollTop||0)+(t.innerHeight||i.documentElement.clientHeight||i.body.clientHeight||0))/Math.max(i.body.scrollHeight||0,i.documentElement.scrollHeight||0,i.body.offsetHeight||0,i.documentElement.offsetHeight||0,i.body.clientHeight||0,i.documentElement.clientHeight||0)},SekindoUtils.getViewportSize=function(e){if(null!=(e=e||window).innerWidth)return{w:e.innerWidth,h:e.innerHeight};var t=e.document;return"CSS1Compat"==document.compatMode?{w:t.documentElement.clientWidth,h:t.documentElement.clientHeight}:{w:t.body.clientWidth,h:t.body.clientWidth}},SekindoUtils.isIvtHidden=function(e,t,i,n){function s(e,t){var n=!1,o=function(e){for(;e;){if(e.style){var s=t.getComputedStyle(e);if(s){if("0"==s.opacity)return"opacity";if("none"==s.display)return"display";if(!n&&"ios"!=i.os&&s.visibility&&(n=!0,"hidden"==s.visibility))return"visibility"}}e=e.parentNode}return"ok"}(e);if("ok"!=o)return o;try{if(t.parent!=t&&"ok"!=(o=s(t.frameElement,t.parent)))return o;var a=e.getBoundingClientRect(),r=SekindoUtils.getViewportSize(t);if(a.right<0||a.left>r.w)return"bounds"}catch(e){}return"ok"}return n?"ok":(t=t||window,s(e,t))},SekindoUtils.posObjArray=[],SekindoUtils.disablePositions=function(e,t){if(t){SekindoUtils.posObjArray=[];function i(e,t){!function(e){for(;e;){if(e.style){var i=t.getComputedStyle(e);i&&i.position&&"static"!=i.position&&(SekindoUtils.posObjArray.push({obj:e,pos:i.position}),e.style.position="static")}e=e.parentNode}}(e),t!=t.top&&i(t.frameElement,t.parent)}var n=e.ownerDocument;i(e,n.defaultView||n.parentWindow)}else setTimeout(function(){for(var e=0;e<SekindoUtils.posObjArray.length;e++)SekindoUtils.posObjArray[e].obj.style.position=SekindoUtils.posObjArray[e].pos},1)},SekindoUtils.getElementViewPct=function(e,t){if(window.isAmpProject)return{w:Number(window.ampView),h:+Number(window.ampView)};try{if("visible"!=(t.document.visibilityState||t.document.webkitVisibilityState||t.document.mozVisibilityState||t.document.msVisibilityState))return{w:0,h:0};var i=e.getBoundingClientRect(),n=i.height||i.bottom-i.top,s=i.width||i.right-i.left,o=SekindoUtils.getViewportSize(t),a=o.h-i.bottom,r=o.w-i.right,l=n+Math.min(0,i.top)+Math.min(0,a),d=Math.max(0,l/n),c=s+Math.min(0,i.left)+Math.min(0,r);return{w:Math.max(0,c/s),h:d}}catch(e){return{w:0,h:0}}},SekindoUtils.isElementInViewPort=function(e,t){function i(e,t){var s=!1;if(n.push(t),!1===function(e){for(;e;){if(e.hidden)return!1;if(e.style){var i=t.getComputedStyle(e);if(i){if("0"==i.opacity)return!1;if("none"==i.display)return!1;if(!s&&i.visibility&&(s=!0,"hidden"==i.visibility))return!1}}e=e.parentNode}}(e))return!1;try{if("visible"!=(t.document.visibilityState||t.document.webkitVisibilityState||t.document.mozVisibilityState||t.document.msVisibilityState))return!1;if(t.parent!=t){var o=i(t.frameElement,t.parent);if(!o)return o}var a=!0,r=e.getBoundingClientRect(),l=r.height||r.bottom-r.top,d=(r.width||(r.right,r.left),SekindoUtils.getViewportSize(t));return(d.h>l&&r.top>d.h+1-.5*l||r.bottom<.5*l)&&(a=!1),(r.right<0||r.left>d.w)&&(a=!1),a}catch(e){}try{for(var c=0;c<n.length;c++){var h=n[c];if(h.extern||h.$sf){return(h.extern||h.$sf.ext).inViewPercentage()>50}}}catch(e){return}}if(window.isAmpProject)return window.ampView;var n=[];return t=t||window,i(e,t)},SekindoUtils.visibilityState=function(){return document.visibilityState||document.webkitVisibilityState||"visible"},SekindoUtils.visibilityChange=function(e){void 0===this.lastId&&(this.lastId=-1),this._callbacks||(this._callbacks={});var t=this,i=document||{};!function(e){if(!i.visibilityState&&!i.webkitVisibilityState)return!1;t.lastId+=1;var n=t.lastId;t._callbacks[n]=e,function(){if(!t._init){var e="visibilitychange";i.webkitVisibilityState&&(e="webkit"+e);var n=function(){(function(e){var n=SekindoUtils.visibilityState();for(var s in t._callbacks)t._callbacks[s].call(i,n)}).apply(t,arguments)};i.addEventListener?i.addEventListener(e,n):i.attachEvent(e,n),t._init=!0}}()}(e)},SekindoUtils.postLogMessage=function(e){var t=new XMLHttpRequest;t.withCredentials=!1,t.open("POST","https://live.sekindo.com/live/liveTracker.php",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send("req=logMsg&dbg=1&msg="+encodeURIComponent(e))},SekindoUtils.firePixel=function(e,t,i,n){if(e&&""!=e)if(n||(e+="&cbuster="+(new Date).getTime().toString()),t)try{(o=t.ownerDocument.createElement("img")).setAttribute("src",e),o.setAttribute("height","0px"),o.setAttribute("width","0px"),o.style.display="none",t.appendChild(o)}catch(t){try{(o=document.createElement("img")).setAttribute("src",e),o.setAttribute("height","0px"),o.setAttribute("width","0px"),o.style.display="none",document.body.appendChild(o)}catch(t){var s='<img src="'+e+'" height="0px" width="0px" ></img>';document.write(s)}}else try{var o;(o=document.createElement("img")).setAttribute("src",e),o.setAttribute("height","0px"),o.setAttribute("width","0px"),o.style.display="none",document.body.appendChild(o)}catch(t){s='<img src="'+e+'" height="0px" width="0px" ></img>';document.write(s)}},SekindoUtils.getHighestZIndex=function(e,t){t||(t="*");for(var i,n,s=e||window,o=s.document.querySelectorAll(t),a=0,r=o.length,l=[];a<r;a+=1){try{i=s.getComputedStyle(o[a],null).zIndex||o[a].currentStyle.zIndex,n=s.getComputedStyle(o[a],null).position||o[a].currentStyle.position}catch(i){}if(i&&"static"!==n){var d=parseInt(i,10);d&&l.push(d)}}return l.length?Math.max.apply(null,l):0},SekindoUtils.getTopWindow=function(e){try{if(e.parent!=e)try{var t=SekindoUtils.getTopWindow(e.parent);if(!t)return!1;e=t}catch(e){return!1}}catch(e){return!1}return e},SekindoUtils.getBezierAnim=function(e,t){var i=function(e){return e*e*e},n=function(e){return 3*e*e*(1-e)},s=function(e){return 3*e*(1-e)*(1-e)},o=function(e){return(1-e)*(1-e)*(1-e)};return function(e,t){return t[0]*i(e)+t[1]*n(e)+t[2]*s(e)+t[3]*o(e)}(t,{easeIn:[1,0,0,0],easeOut:[1,1,1,0],easeInOut:[1,1,0,0]}[e])},SekindoUtils.animateTo=function(e,t,i,n,s,o,a){for(var r=0;r<this.animateArray.length;r++)this.animateArray[r].element==e&&this.animateArray[r].unit==t&&(clearTimeout(this.animateArray[r].animTimeOut),this.animateArray[r].blocked=!0);var l=new this.animateUnit(e,t,i,n,s,o,a);this.animateArray.push(l)},SekindoUtils.stopAnimateUnit=function(e,t){for(var i=0;i<this.animateArray.length;i++)this.animateArray[i].element==e&&this.animateArray[i].unit==t&&(clearTimeout(this.animateArray[i].animTimeOut),this.animateArray[i].blocked=!0)},SekindoUtils.animateArray=[],SekindoUtils.animateUnit=function(e,t,i,n,s,o,a){function r(){for(var e=0;e<SekindoUtils.animateArray.length;e++)SekindoUtils.animateArray[e]==d&&SekindoUtils.animateArray.splice(e);o&&!d.blocked&&o()}function l(){var o=(new Date).getTime();c=Math.min(1.1,(o-h)/1e3/n);var g=Math.min(1,SekindoUtils.getBezierAnim(s,c)),f="height"==t||"width"==t||"opacity"==t?0:-1/0,m=i;"function"==typeof i&&(m=i());var v=Number(/[+-]?([0-9]*[.])?[0-9]+/.exec(m)[0]),y=Math.max(Math.round(1e3*(g*(v-p)+p))/1e3,f);e[t]=m.replace(v,y),a&&!d.blocked&&a(),c>1||d.blocked?r():u.requestAnimationFrame(l)}var d=this,c=0,h=(new Date).getTime(),u=SekindoUtils.isFriendlyIframe()?window.top:window;this.blocked=!1,this.element=e,this.unit=t,this.animTimeOut=null;var p=parseFloat(/[+-]?([0-9]*[.])?[0-9]+/.exec(e[t])[0]);n?l():(e[t]=i,a&&!d.blocked&&a(),r())},SekindoUtils.resetAllAnimations=function(){for(var e=0;e<this.animateArray.length;e++)this.animateArray[e].blocked=!0;this.animateArray=[]},SekindoUtils.getCurrScript=function(e,t){var i=0;try{return this.currentScript=document.currentScript||n(e.mainPlayerDiv),this.currentScript;function n(e){if(t&&i++>=t)return null;var s=e.previousElementSibling;return-1!=s.src.indexOf("live/liveVi")?s:n(s)}}catch(e){return null}},SekindoUtils.getElementsInObj=function(e,t,i){var n=[];if(!e||!t)return[];if(!(u=e.document||e.contentDocument||e.contentWindow&&e.contentWindow.document))return[];for(var s=u.getElementsByTagName?u.getElementsByTagName("iframe"):[],o=0;o<s.length;o++)try{if(s[o]&&s[o].contentWindow){for(var a=0;a<t.length;a++)for(var r=s[o].contentWindow.document.getElementsByTagName(t[a]),l=0;l<r.length;l++)r[l]&&n.push(r[l]);for(var d=s[o],c=SekindoUtils.getElementsInObj(d,t,!0),h=0;h<c.length;h++)n.push(c[h])}}catch(e){}if(!i)try{for(a=0;a<t.length;a++){var u,p=t[a];for(r=(u=e.document||e.contentDocument||e.contentWindow.document).getElementsByTagName(p),l=0;l<r.length;l++)r[l]&&n.push(r[l])}}catch(e){}return n},SekindoUtils.getElementsInObjById=function(e,t,i){var n=[];if(!e||!t)return[];var s=e.document||e.contentDocument||e.contentWindow&&e.contentWindow.document;if(!s)return[];for(var o=s.getElementsByTagName?s.getElementsByTagName("iframe"):[],a=0;a<o.length;a++)try{if(o[a]&&o[a].contentWindow){for(var r=0;r<t.length;r++)-1!=o[a].frameElement.id.indexOf(t[r])&&n.push(o[a]);for(var l=o[a],d=SekindoUtils.getElementsInObjById(l,t,!0),c=0;c<d.length;c++)n.push(d[c])}}catch(e){}return n},SekindoUtils.implementEventListenersToObj=function(e){e.eventListeners=[],e.addEventListener=function(t,i){for(var n=0;n<e.eventListeners.length;n++)try{if(e.eventListeners[n].type==t&&e.eventListeners[n].callbackFunc==i)return}catch(e){}e.eventListeners.push({type:t,callbackFunc:i})},e.removeEventListener=function(t,i){if(e.eventListeners)for(var n=0;n<e.eventListeners.length;n++)try{e.eventListeners[n].type==t&&e.eventListeners[n].callbackFunc==i&&(e.eventListeners[n]=void 0)}catch(e){}},e.dispatchEvent=function(t,i){if("[object Event]"==String(t)&&(t=t.type),e.eventListeners)for(var n=e.eventListeners.length,s=0;s<n;s++)e.eventListeners&&e.eventListeners[s]&&e.eventListeners[s].type&&e.eventListeners[s].type==t&&e.eventListeners[s].callbackFunc({type:t,val:i})}},SekindoUtils.validURL=function(e,t){if(t)for(var i=["redirector.gvt1.com/videoplayback"],n=e.toLowerCase(),s=0;s<i.length;s++){var o=i[s];if(-1!=n.indexOf(o))return!1}return!!/^https?:/.test(e)},SekindoUtils.isSandboxedIframe=function(e){if(e.parent===e)return 0;try{var t=e.frameElement}catch(e){t=null}if(null===t)return-12;try{return t.hasAttribute("sandbox")?1:SekindoUtils.isSandboxedIframe(e.parent)}catch(e){return-11}},SekindoUtils.getDomain=function(){var e;try{var t=SekindoUtils.getTopWindow(window),i=t?t.location:"";e=encodeURI(i);var n=t?t.location.hostname:""}catch(t){e="",n=null}return{domainUrl:e,domainName:n}},SekindoUtils.isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return SekindoUtils.isMobile.Android()||SekindoUtils.isMobile.BlackBerry()||SekindoUtils.isMobile.iOS()||SekindoUtils.isMobile.Opera()||SekindoUtils.isMobile.Windows()}},SekindoUtils.loadExternalJs=function(e,t,i){if(SekindoUtils.validURL(e)){for(var n=t||document,s=n.getElementsByTagName("script"),o=0;o<s.length;o++)if(s[o].getAttribute("src")==e)return void(i&&i());var a=n.createElement("SCRIPT");a.src=e,a.onload=function(){i&&i()};n.getElementsByTagName("HEAD")[0].appendChild(a)}},SekindoUtils.secToHMS=function(e){var t=parseInt(e/3600)%24,i=("0"+parseInt(e/60)%60).slice(-2),n=("0"+parseInt(e%60)).slice(-2);return(t?t+":":"")+i+":"+n},SekindoUtils.detectMediaType=function(e){function t(t){for(var i=0;i<e.length;i++){if(-1!=e[i].type.toLowerCase().indexOf(t))if("video"==t){var n=!1,s=document.createElement("video").canPlayType(e[i].type);"probably"!=s&&"maybe"!=s||(n=!0);var o=e[i].src;if(n&&SekindoUtils.validURL(o))return e[i]}else{o=e[i].src;var a=Boolean("mp4"==t);if(SekindoUtils.validURL(o,a))return e[i]}}return!1}var i={};return i.linear=t("video"),i.mobileLinear=t("mp4"),i.jsVpaid=t("javascript"),i},SekindoUtils.htmlspecialchars=function(e){return e.replace(/[&<>"']/g,function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"}[e]})},SekindoUtils.htmlspecialchars_decode=function(e){return e.replace(/&(amp|lt|gt|quot|#039);/g,function(e,t,i,n){return{amp:"&",lt:"<",gt:">",quot:'"',"#039":"'"}[t]})},SekindoUtils.deleteMe=function(e){for(var t in e){e[t]=null;try{delete e[t]}catch(e){}}},SekindoUtils.isFriendlyIframe=function(){var e=!0;if(window!=window.top)try{window.top.location.toString()}catch(t){e=!1}return e},SekindoServices.viewableInIframe=function(){function e(){t.viewableTimeStamp=Date.now(),window.requestAnimationFrame(function(){e()})}var t=this,i=!1;if(this.viewableTimeStamp=Date.now(),window!=window.top)try{window.top.location.toString()}catch(e){i=!0}i&&e(),this.isViewable=function(){if(i)return Date.now()-t.viewableTimeStamp<500}},window.viewableInIframe=new SekindoServices.viewableInIframe,SekindoServices.iosVidAutoplayWrapper=function(e){var t=this,i=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(!(i&&parseInt(i[1],10)<10)&&e){var n=e.ownerDocument;this.win=n?n.defaultView||n.parentWindow:window,this.vid=e,this.timeStamp=Date.now(),this.isAudio=!1,this.autoplay=this.vid.autoplay,this.isPaused=!this.vid.autoplay,this.src=this.vid.src,this.ended=!1,this.animFrame,this.prevPos=0,this.fallBackTimeout,this.curr=0,this.audio=new Audio,this.audio.addEventListener("playing",function(){t.audio.currentTime=t.vid.currentTime+.3,t.isAudio=!0;var e=new Event("volumechange");t.vid.dispatchEvent(e)}),this.vid.autoplay=!1,this.vid.muted=!0,this.vid.playsInline=!0,this.vid.controls=!1,this.vid.pause=function(e){if(t.isPaused=!0,t.isAudio)try{t.audio.pause()}catch(e){}var i=new Event("pause");t.vid.dispatchEvent(i)},this.vid.play=function(){if(t.win.cancelAnimationFrame(t.animFrame),t.animFrame=t.win.requestAnimationFrame(function(){try{t.setCurrTime()}catch(e){}}),t.ended=!1,t.vid.duration==t.vid.currentTime&&(t.vid.currentTime=0),t.timeStamp=Date.now()-1e3*t.vid.currentTime,t.isPaused=!1,t.isAudio)try{t.audio.play()}catch(e){}var e=new Event("play");t.vid.dispatchEvent(e)
;e=new Event("playing");t.vid.dispatchEvent(e)},this.vid.__defineGetter__("paused",function(){return t.isPaused}),this.vid.__defineSetter__("paused",function(e){}),this.vid.__defineGetter__("muted",function(){return!t.isAudio}),this.vid.__defineSetter__("muted",function(e){if(t.vid&&t.vid.audioTracks&&!(t.vid.audioTracks.length<=0))if(e){try{t.audio.pause()}catch(e){}t.isAudio=!1;var i=new Event("volumechange");t.vid.dispatchEvent(i)}else if(!t.isPaused){t.audio.src&&t.audio.src==t.src||(t.audio.src=t.src);try{t.audio.play()}catch(e){}}}),this.vid.__defineGetter__("volume",function(){return t.vid&&t.vid.audioTracks&&t.vid.audioTracks.length>0?t.audio.volume:0}),this.vid.__defineSetter__("volume",function(e){if(t.vid&&t.vid.audioTracks&&t.vid.audioTracks.length>0){var i=parseInt(10*e)/10;t.audio.volume=i;var n=new Event("volumechange");t.vid.dispatchEvent(n)}}),this.vid.__defineGetter__("controls",function(){return!1}),this.vid.__defineSetter__("controls",function(e){}),this.vid.__defineGetter__("ended",function(){return t.ended}),this.vid.__defineSetter__("ended",function(e){}),this.vid.__defineGetter__("autoplay",function(){return t.autoplay}),this.vid.__defineSetter__("autoplay",function(e){}),this.observer=new MutationObserver(function(e){e.forEach(function(e){t.vid.load(),t.src=e.target.src;try{t.audio.src=t.src}catch(e){}t.autoplay&&(t.win.cancelAnimationFrame(t.animFrame),t.animFrame=t.win.requestAnimationFrame(function(){try{t.setCurrTime()}catch(e){}}))})});this.observer.observe(this.vid,{attributes:!0,attributeOldValue:!0,attributeFilter:["src"]}),this.loopStarted=!1,this.vid.addEventListener("canplay",function(e){t.loopStarted||(t.loopStarted=!0,t.timeStamp=Date.now(),t.win.cancelAnimationFrame(t.animFrame),t.animFrame=t.win.requestAnimationFrame(function(){try{t.setCurrTime()}catch(e){}}),setTimeout(function(){var e=new Event("play");t.vid.dispatchEvent(e);e=new Event("playing");t.vid.dispatchEvent(e)},1))}),this.vid.load(),this.eHandler=function(e){switch(e.type){case"seeking":case"seeked":case"ended":e.innerEvent||e.stopImmediatePropagation()}},this.vid.addEventListener("seeked",this.eHandler,!1),this.vid.addEventListener("seeking",this.eHandler,!1),this.vid.addEventListener("ended",this.eHandler,!1),this.setCurrTime=function(){if(t.animFrame&&t.win.cancelAnimationFrame(t.animFrame),t.animFrame=t.win.requestAnimationFrame(function(){try{t.setCurrTime()}catch(e){}}),t.win.clearTimeout(t.fallBackTimeout),t.fallBackTimeout=t.win.setTimeout(function(){t.setCurrTime()},60),!t.isPaused&&t.loopStarted&&(t.isAudio?t.curr=t.audio.currentTime+.2:(t.curr=Math.abs((Date.now()-t.timeStamp)/1e3),(t.curr-t.prevPos>2||t.vid.buffered.end(0)<t.curr+1&&t.curr<t.vid.duration-2)&&(t.timeStamp=Date.now()-1e3*t.vid.currentTime,t.curr=Math.abs((Date.now()-t.timeStamp)/1e3))),t.vid.currentTime=t.curr,t.prevPos=t.curr,t.curr>=t.vid.duration)){if(t.vid.loop){(e=new Event("seeking")).innerEvent=!0,t.vid.dispatchEvent(e);(e=new Event("seeked")).innerEvent=!0,t.vid.dispatchEvent(e)}else{t.isPaused=!0,t.ended=!0;var e=new Event("pause");t.vid.dispatchEvent(e),t.win.cancelAnimationFrame(t.animFrame),t.win.clearTimeout(t.fallBackTimeout),t.win.requestAnimationFrame(function(){try{t.reportEndedVid()}catch(e){}})}t.timeStamp=Date.now(),t.curr=0}},this.reportEndedVid=function(){var e=new Event("pause");t.vid.dispatchEvent(e);(e=new Event("ended")).innerEvent=!0,t.vid.dispatchEvent(e)},this.destruct=function(){function e(t){if(t){var i,n,s,o=t.attributes;if(o)for(n=o.length,i=0;i<n;i+=1)"function"==typeof t[s=o[i].name]&&(t[s]=null);if(o=t.childNodes)for(n=o.length,i=0;i<n;i+=1)e(t.childNodes[i]),t.childNodes[i]&&t.removeChild(t.childNodes[i])}}t.win.cancelAnimationFrame(t.animFrame),t.win.clearTimeout(t.fallBackTimeout),e(t)}}},SekindoServices.checkAdViewability=function(e,t){var i=this;e&&(this.config=e),t&&(this.callback=t),this.execute=function(e,t){function n(){var e=i.config.onViewabilityChange.getCurrState();e&&!i.inViewDurationTimeout?i.inViewDurationTimeout=setTimeout(s,1e3*o):!e&&i.inViewDurationTimeout&&(clearTimeout(i.inViewDurationTimeout),i.inViewDurationTimeout=null)}function s(){i.execute(!1),i.callback&&i.callback()}var o=t||i.config.inViewDuration;e&&!i.inViewDurationInterval?i.inViewDurationInterval=setInterval(n,100):e||(i.inViewDurationInterval&&(clearInterval(i.inViewDurationInterval),i.inViewDurationInterval=null),i.inViewDurationTimeout&&(clearTimeout(i.inViewDurationTimeout),i.inViewDurationTimeout=null))},this.destruct=function(){clearTimeout(this.inViewDurationTimeout),clearInterval(this.inViewDurationInterval),SekindoUtils.deleteMe(this)}},SekindoServices.onFullscreenChange=function(e){var t=this;this.currFsState=null,this.checkFullscreenInterval=setInterval(function(){t.currFsState=function(){if(!SekindoUtils.isFriendlyIframe())return null;if(SekindoServices.fullscreen.isFullscreen)return"curr";var e=SekindoUtils.getElementsInObj(window.top,["iframe"]);e.push(window.top);for(var t=0;t<e.length;t++)try{var i=e[t];if(i&&!i.src&&i.contentDocument&&i.contentDocument[SekindoServices.fullscreen.fs.fullscreenElement])return"other"}catch(e){}}()},200),this.getCurrState=function(){return this.currFsState},this.destruct=function(){clearInterval(this.checkFullscreenInterval),SekindoUtils.deleteMe(this)}},SekindoServices.onPageFsChange=new SekindoServices.onFullscreenChange,SekindoServices.onViewabilityChange=function(e){function t(){if(i.config.isAmpProject)n();else{var e=SekindoUtils.isElementInViewPort(i.config.mainVideoDiv,window);if((e="other"!=SekindoServices.onPageFsChange.getCurrState()&&e)!==i.currViewabilityState){i.currViewabilityState=e;for(var t=0;t<i.callbacksArray.length;t++)i.callbacksArray[t].callback(e)}}}var i=this;this.config=e,this.callbacksArray=[],this.callbackId=0,this.currViewabilityState=SekindoUtils.isElementInViewPort(i.config.mainVideoDiv,window),this.checkViewabilityInterval=setInterval(t,200);var n=function(){var t=function(t){var n=e.ampView;if(window.ampView=e.ampView=t[0].intersectionRect.height>e.height/2,n!==e.ampView){i.currViewabilityState=e.ampView;for(var s=0;s<i.callbacksArray.length;s++)i.callbacksArray[s].callback(e.ampView)}},n=window;do{try{if(void 0!==n.parent.context&&"sekindo"===n.parent.context.A){n.parent.window.context.observeIntersection(t);break}}catch(e){break}n=n.parent}while(n!=n.parent)};SekindoUtils.visibilityChange(t),this.addCallback=function(e){return this.callbacksArray.push({id:++this.callbackId,callback:e}),this.callbackId},this.removeCallback=function(e){for(var t=0;t<i.callbacksArray.length;t++)if(i.callbacksArray[t].id==e)return void i.callbacksArray.splice(t,1)},this.getCurrState=function(){return this.currViewabilityState},this.destruct=function(){clearInterval(this.checkViewabilityInterval),SekindoUtils.deleteMe(this)}},SekindoServices.onVisibilityChange=function(){var e=this;this.callbacksVisibilityArray=[],this.callbackVisibilityId=0,this.currVisibilityState="visible"===SekindoUtils.visibilityState(),SekindoUtils.visibilityChange(function(){var t="visible"===SekindoUtils.visibilityState();e.currVisibilityState=t;for(var i=0;i<e.callbacksVisibilityArray.length;i++)e.callbacksVisibilityArray[i].callback(t)}),this.addCallback=function(e){return this.callbacksVisibilityArray.push({id:++this.callbackVisibilityId,callback:e}),this.callbackVisibilityId},this.removeCallback=function(t){for(var i=0;i<e.callbacksVisibilityArray.length;i++)if(e.callbacksVisibilityArray[i].id==t)return void e.callbacksVisibilityArray.splice(i,1)},this.getCurrState=function(){return this.currVisibilityState},this.destruct=function(){SekindoUtils.deleteMe(this)}},SekindoServices.fullscreen=function(e){var t,i,n,s,o=this,a=window.frameElement,r=window.top,l=window.orientation,d=window.orientation,c=0,h=!1;this.config=e;var u=navigator.userAgent.match(/MSIE 10/i),p={requestFullscreen:"requestFS",exitFullscreen:"exitFS",fullscreenElement:"fsElement",fullscreenEnabled:"fsEnabled",fullscreenchange:"fsChange",fullscreenerror:"fsError"};if(this.fs=function(){if(o.config.playerTemplateData.isLightBox)return p;if(o.config.isAmpProject)return["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"];for(var e,t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i={},n=0;n<t.length;n++)if((e=t[n])&&e[1]in document){for(n=0;n<e.length;n++)i[t[0][n]]=e[n];return i}return p}(),"requestFS"==this.fs.requestFullscreen){var g=null;SekindoUtils.isFriendlyIframe()&&(document.fsEnabled=!0,g=window.top.document.documentElement.clientWidth/window.top.innerWidth);var f=function(){document.fsElement&&(l=window.orientation)!==d&&(d=l,h=!0,clearTimeout(s),s=setTimeout(function(){v(l)},100))},m=function(e){document.fsElement&&27==(e=e||window.event).keyCode&&o.exit()},v=function(e){var t=window.top.innerWidth,i=window.top.innerHeight;a.style.width=t+"px",a.style.height=i+"px",a.style.position="absolute",document.body.style.width=a.offsetWidth+"px",document.body.style.height=a.offsetHeight+"px",c=0,y(!0),g=window.top.document.documentElement.clientWidth/window.top.innerWidth,h=!1},y=function(e){a.style.top=o.config.playerTemplateData.isLightBox?"0px":(r.document.body.scrollTop||r.document.documentElement.scrollTop)+"px",a.style.left=o.config.playerTemplateData.isLightBox?"0px":(r.document.body.scrollLeft||r.document.documentElement.scrollLeft)+"px",!0!==e&&++c>1&&(c=0,o.exit())};window.addEventListener("orientationchange",f,!1),o.config.playerTemplateData.isLightBox&&(window.addEventListener("keydown",m,!1),this.config.videoIFrameWindow.addEventListener("keydown",m,!1))}this.request=function(e){var c,p=o.fs.requestFullscreen;if(d=l=window.orientation,e=e||document.documentElement,"requestFS"==p){if(clearInterval(t),clearInterval(i),clearInterval(n),clearTimeout(s),r.removeEventListener("scroll",y),c=!1,u)try{new ActiveXObject("WScript.Shell").SendKeys("{F11}"),c=!0}catch(e){}function f(){return window.outerWidth-screen.width==0&&window.outerHeight-screen.height==0}function m(){o.config.playerTemplateData.isLightBox||SekindoUtils.disablePositions(o.config.windowsArray[0].frameElement,!0);var e=window.top.innerWidth,n=window.top.innerHeight;o.setts={position:a.style.position,top:a.style.top,left:a.style.left,backgroundColor:a.style.backgroundColor,width:a.style.width,height:a.style.height},a.style.position=o.config.playerTemplateData.isLightBox?"fixed":"absolute",a.style.backgroundColor=o.config.playerTemplateData.isLightBox?"rgba(0,0,0,0.6":"black",a.style.zIndex=2147483647,a.style.width=o.config.playerTemplateData.isLightBox?"100%":e+"px",a.style.height=o.config.playerTemplateData.isLightBox?"100%":n+"px",document.body.style.width=a.offsetWidth+"px",document.body.style.height=a.offsetHeight+"px",o.config.playerTemplateData.isLightBox&&(o.config.mainPlayerDiv.style.top="50%",o.config.mainPlayerDiv.style.left="50%",o.config.mainPlayerDiv.style.position="absolute",o.config.mainPlayerDiv.style.transform="translate(-50%, -50%)"),y(!0),document.fsElement=!0;var s=document.createEvent("Event");s.initEvent("fsChange",!1,!1),s.message="fsChange",document.dispatchEvent(s),c&&(t=setInterval(function(){f()||(clearInterval(t),setTimeout(function(){o.exit(!0)},1))},10)),o.config.playerTemplateData.isLightBox||(r.addEventListener("scroll",y),g=window.top.document.documentElement.clientWidth/window.top.innerWidth,clearInterval(i),i=setInterval(function(){g!=window.top.document.documentElement.clientWidth/window.top.innerWidth&&(h||(o.exit(!0),clearInterval(i)))},10))}c?n=setInterval(function(){f()&&(clearInterval(n),setTimeout(function(){m()},1))},10):m()}else if(/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent))e[p]();else{var v="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element&&Element.ALLOW_KEYBOARD_INPUT;v?e[p](v):e[p]()}},this.exit=function(e){if("exitFS"==o.fs.exitFullscreen){if(clearInterval(t),clearInterval(i),clearInterval(n),clearTimeout(s),r.removeEventListener("scroll",y),h=!1,SekindoUtils.disablePositions(this.config.windowsArray[0].frameElement,!1),u&&!e)try{new ActiveXObject("WScript.Shell").SendKeys("{F11}")}catch(e){}a.style.position=o.setts.position,a.style.top=o.setts.top,a.style.left=o.setts.left,a.style.backgroundColor=o.setts.backgroundColor,a.style.width=o.setts.width,a.style.height=o.setts.height,document.body.style.width=a.offsetWidth+"px",document.body.style.height=a.offsetHeight+"px",document.fsElement=!1;var l=document.createEvent("Event");l.initEvent("fsChange",!1,!1),l.message="fsChange",document.dispatchEvent(l)}else document[o.fs.exitFullscreen]()},this.toggle=function(e){this.isFullscreen?this.exit():this.request(e)},this.onchange=function(e){document.addEventListener(o.fs.fullscreenchange,e,!1)},this.onerror=function(e){document.addEventListener(o.fs.fullscreenerror,e,!1)},Object.defineProperties(o,{isFullscreen:{get:function(){return Boolean(document[SekindoServices.fullscreen.fs.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[SekindoServices.fullscreen.fs.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(document[SekindoServices.fullscreen.fs.fullscreenEnabled])}}})},SekindoServices.resizeChecker=function(e,t,i){var n=this;this.config=i;var s=1;this.checkResize=function(i){var o=e.currentStyle||window.getComputedStyle(e),a=e.offsetWidth,r=parseFloat(o.marginLeft)+parseFloat(o.marginRight)+(parseFloat(o.paddingLeft)+parseFloat(o.paddingRight))+(parseFloat(o.borderLeftWidth)+parseFloat(o.borderRightWidth));r?a=e.parentNode.offsetWidth:r=0;var l=a-r;(i||s!=l||n.config.playerWidth!=l)&&t({width:s=l,height:1/0}),this.resizeObserver||i||window.requestAnimationFrame(function(){n.checkResize(!1)})},"function"==typeof ResizeObserver?this.resizeObserver=new ResizeObserver(function(){n.checkResize()}).observe(e):window.requestAnimationFrame(function(){n.checkResize(!1)})},SekindoServices.constructPixelDiv=function(e){var t=this;this.config=e,this.lockReconstruction=!1,this.reConstructPixelDiv=function(){if(!t.lockReconstruction){this.pixelDivTimeout&&clearTimeout(this.pixelDivTimeout),this.config.pixelDivTimeout&&(this.pixelDivTimeout=setTimeout(function(){t.lockReconstruction=!1},t.config.pixelDivTimeout)),this.config.pixelDiv&&this.config.pixelDiv.parentNode&&this.config.pixelDiv.parentNode.removeChild(this.config.pixelDiv);var e=document.createElement("div");e.id="pixelsDiv",e.style.width="0px",e.style.height="0px",this.config.mainVideoDiv.appendChild(e),this.config.pixelDiv=e,t.lockReconstruction=!0}},this.reConstructPixelDiv()},SekindoOutStream=function(e,t){function i(){function e(){o.display="none",n.config.sPlayer.destructPlayer()}if("flow"==n.config.playerMode)return n.scrollCheckIntentOnly=!0,void w();if(n.config.adsProcessPaused=!0,n.config.isPlaying=!1,n.config.isAutoPlay="0",!n.config.outStreamRemovalTimeout||n.hadImpression)if(n.adsManager.stopAd(!0),n.hadImpression=!1,n.userClosed=!0,"slider"==n.config.playerMode||"sticky"==n.config.playerMode){var t=n.config.videoWidth||n.config.width;SekindoUtils.animateTo(o,s.side,-1*t-100+"px",.8,"easeIn",e)}else"inRead"==n.config.playerMode&&SekindoUtils.animateTo(o,"height","1px",.8,"easeIn",e);else e()}var n=this,s={};this.config=e;var o=this.config.windowsArray[0].frameElement.style;if(this.uniqueID=t,"flow"!=this.config.playerMode&&"sticky"!=this.config.playerMode&&(this.config.isAutoPlay="3"),this.hadImpression=!1,this.userClosed=!1,this.scrollCheckIntentOnly=!1,this.config.bus.addCallBack("adCompleted",function(){n.onAdEvent("adCompleted")}),this.config.bus.addCallBack("adStarted",function(){n.onAdEvent("adStarted")}),this.config.bus.addCallBack("onUserEvent",function(e){!function(e){switch(e.type){case"onCloseBtnClick":i()}}(e)}),this.config.outStreamRemovalTimeout&&setTimeout(i,6e4*this.config.outStreamRemovalTimeout),this.setSize=function(e,t,i){n.config.bus.triggerNote("requestSkinResize",t)},this.config.vpApi){var a=n.config.videoWidth||n.config.width,r=n.config.videoHeight||n.config.height;this.config.iFrame.style.display="none",this.config.mainVideoDiv.style.height="1px",this.config.windowsArray[0].frameElement.style.display="none",this.isApiDisplay=!1,this.displayApi=function(e){if(e&&!n.isApiDisplay&&n.hadImpression){n.isApiDisplay=!0,n.config.iFrame.style.display="block";e={width:v,height:y};n.config.bus.triggerNote("requestSkinResize",e),o.height=n.config.height+"px"}else!e&&n.isApiDisplay&&(n.isApiDisplay=!1,o.height="1px",n.config.iFrame.style.display="none")};var l={width:v,height:y};setTimeout(function(){n.config.bus.triggerNote("requestSkinResize",l)},1),SekindoApi(this.config,this)}else if("slider"==this.config.playerMode){o.position="fixed",o.boxShadow=null,o.bottom="0px",o.zIndex=SekindoUtils.getHighestZIndex(this.config.windowsArray[0],"div")+1;var d=!1;"br"==this.config.sliderDir?s.side="right":"bl"==this.config.sliderDir&&(s.side="left");function c(){function e(){o.bottom="0px",o[s.side]="0px",o.boxShadow=null;n.config.bus.triggerNote("requestSkinResize",{extFrameWidth:1,extFrameHeight:1}),n.userClosed&&n.config.sPlayer.destructPlayer()}var t=n.config.videoWidth||n.config.width,i=n.config.videoHeight||n.config.height;if(!d&&n.hadImpression){d=!0,"1px"==o.height&&(o[s.side]=-1*t-100+"px",o.bottom=n.config.sliderOffset+"px",o.zIndex=SekindoUtils.getHighestZIndex(n.config.windowsArray[0],"div")+1),o.boxShadow="1px 1px 6px 3px rgba(0, 0, 0, 0.4)",o.borderRadius="1px",SekindoUtils.animateTo(o,s.side,"10px",.8,"easeOut");var a={extFrameWidth:t,extFrameHeight:i};n.config.bus.triggerNote("requestSkinResize",a)}else d&&!n.hadImpression&&(d=!1,n.config.isKeptOpen&&!n.userClosed||SekindoUtils.animateTo(o,s.side,-1*t-100+"px",.8,"easeIn",e))}this.showMeInterval&&clearInterval(this.showMeInterval),this.showMeInterval=setInterval(c,100);l={extFrameWidth:1,extFrameHeight:1};setTimeout(function(){n.config.bus.triggerNote("requestSkinResize",l)},1)}else if("inRead"==this.config.playerMode){a=n.config.videoWidth||n.config.width,r=n.config.videoHeight||n.config.height;this.config.videoIFrame.style.opacity=0;var h=!1;function u(){function e(){o.height="1px",n.config.videoIFrame.style.opacity=0,n.userClosed&&n.config.sPlayer.destructPlayer()}var t=n.config.videoWidth||n.config.width,i=n.config.videoHeight||n.config.height;if(SekindoUtils.isElementInViewPort(n.config.mainVideoDiv,window)||n.avoidViewPortCheck?n.config.outViewPause&&n.hadImpression&&!n.config.isPlaying&&(n.config.isPlaying=!0,n.config.bus.triggerNote("onUserEvent",{type:"onPlay"})):n.config.outViewPause&&n.hadImpression&&n.config.isPlaying&&(n.config.isPlaying=!1,n.config.bus.triggerNote("onUserEvent",{type:"onPause"})),!h&&n.hadImpression){h=!0,n.config.videoIFrame.style.opacity=1;var s={extFrameWidth:t,extFrameHeight:1};n.config.bus.triggerNote("requestSkinResize",s),SekindoUtils.animateTo(o,"height",i+"px",.8,"easeOut")}else h&&!n.hadImpression&&(h=!1,n.config.isKeptOpen&&!n.userClosed||SekindoUtils.animateTo(o,"height","1px",.8,"easeIn",e))}this.showMeInterval&&clearInterval(this.showMeInterval),this.showMeInterval=setInterval(u,100);l={width:a,height:r,extFrameWidth:a,extFrameHeight:1};setTimeout(function(){n.config.bus.triggerNote("requestSkinResize",l)},1)}else if("flow"==this.config.playerMode){this.config.flowStatus=!1;var p,g=this.config.flowWidth,f=this.config.flowHeight,m=this.config.windowsArray[0]?this.config.windowsArray[0].frameElement:this.config.mainVideoDiv,v=this.config.width,y=this.config.height,b=this.config.sliderSideOffset+("string"==typeof this.config.sliderSideOffset?"":"px");this.config.isNativeTemplate&&(o=window.frameElement.style,m=window.frameElement);try{if(window.top.sekindoFlowingPlayerOn&&1!==this.config.isTester)return;window.top.sekindoFlowingPlayerOn=!0}catch(e){}(p=document.createElement("div")).id="placeHolder",p.style.position="relative",p.style.overflow="hidden";var k=document.createElement("img");k.src=this.config.absolutePath+"/content/video/splayer/assets/placeHolder.png",k.style.position="absolute",k.style.top="50%",k.style.left="50%",k.style.transform="translate(-50%, -50%)",k.style.mozTransform="translate(-50%, -50%)",k.style.webkitTransform="translate(-50%, -50%)",k.style.width="auto",k.style.height="auto",p.appendChild(k),m.parentNode.insertBefore(p,m);var S=this.config.sliderDir.split("");s.side="r"==S[1]?"right":"left",s.botTop="b"==S[0]?"bottom":"top","m"==S[1]&&(b="calc(50% - "+g/2+"px)"),o[s.botTop]="0px";function w(){o.position="fixed",o.boxShadow="0px 0px 0px 0px rgba(0, 0, 0, 0)",o.borderRadius="0px",n.config.flowStatus=!1,n.config.bus.triggerNote("onFlowStatusChange",!1),p.style.width="0px",p.style.height="0px",o.position="relative",o.boxShadow=null,o[s.side]=null,o[s.botTop]=null,o.zIndex=0,n.config.responsive||n.setSize(m,{source:"doUnFlow"},!0)}function A(){if(n.scrollCheckIntentOnly)"click"!=n.config.playbackMethod||0!=n.config.onViewabilityChange.getCurrState()||n.config.soundEnabledByUser||(n.config.playbackMethod="auto",n.config.bus.triggerNote("userIntentOff"));else if(n.config.fullScreenOn)"Internet Explorer"==n.config.clientInfo.extra.browser&&(n.ie11Delay=!0,setTimeout(function(){n.ie11Delay=!1},1e3));else if(!n.ie11Delay){var e="both"===n.config.flowMode||"above"===n.config.flowMode,t="both"===n.config.flowMode||"below"===n.config.flowMode,i=p.getBoundingClientRect().bottom;n.config.flowStatus||"visible"!==SekindoUtils.visibilityState()||SekindoUtils.isElementInViewPort(n.config.mainVideoDiv,window)?n.config.flowStatus&&e&&t&&i>y/2&&i<window.top.innerHeight+y/2?w():n.config.flowStatus&&(i>y/2&&t&&!e||i<window.top.innerHeight+y/2&&e&&!t)&&w():i>window.top.innerHeight-y/2&&e||i<-y/2&&t?(n.config.flowStatus=!0,function(){v=n.config.playerWidth||n.config.width,y=n.config.playerHeight||n.config.height;var e=v>y?"height":"width";k.style[e]="100%",n.config.flowStatus=!0,n.config.bus.triggerNote("onFlowStatusChange",!0),o.boxShadow="1px 1px 6px 3px rgba(0, 0, 0, 0.4)",o.borderRadius="1px",m.getBoundingClientRect(),window.top.innerHeight,window.top.innerWidth,o.position="fixed",o.zIndex=n.config.flowZindex||SekindoUtils.getHighestZIndex(n.config.windowsArray[0],"div")+1,p.style.width=n.config.playerWidth+"px",p.style.height=n.config.playerHeight+"px",n.setSize(m,{source:"doFlow",width:g,height:f}),o[s.side]=b,o[s.botTop]=n.config.sliderOffset+"px"}()):"click"!=n.config.playbackMethod||0!=n.config.onViewabilityChange.getCurrState()||n.config.soundEnabledByUser||(n.config.playbackMethod="auto",n.config.bus.triggerNote("userIntentOff"))}}this.scrollCheckInterval=setInterval(function(){A()},200)}else"sticky"===this.config.playerMode&&(this.config.flowStatus=!0,m=this.config.windowsArray[0]?this.config.windowsArray[0].frameElement:this.config.mainVideoDiv,v=this.config.flowWidth,b=this.config.sliderSideOffset+("string"==typeof this.config.sliderSideOffset?"":"px"),S=this.config.sliderDir.split(""),s.side="r"===S[1]?"right":"left",s.botTop="b"===S[0]?"bottom":"top","m"===S[1]&&(b="calc(50% - "+v/2+"px)"),o.boxShadow="1px 1px 6px 3px rgba(0, 0, 0, 0.4)",o.borderRadius="1px",o.position="fixed",o.zIndex=this.config.flowZindex||SekindoUtils.getHighestZIndex(this.config.windowsArray[0],"div")+1,o[s.side]=b,o[s.botTop]=this.config.sliderOffset+"px")},SekindoOutStream.prototype.onAdEvent=function(e){"adStarted"==e?this.hadImpression=!0:"adCompleted"==e&&(this.hadImpression=!1)},SekindoOutStream.prototype.destruct=function(){this.showMeInterval&&clearInterval(this.showMeInterval)},SekindoSPlayer.prototype.constructIframes=function(){var e=this,t=this.config.isDesktop;if(this.config.vpApi||document&&document.readyState&&"complete"==document.readyState){this.currentScript=document.currentScript||function(){var e=document.getElementsByTagName("script");return e[e.length-1]}();var i=document.createElement("div");i.id="Player-Div-"+this.uniqueID,i.style.width="max-content",i.style.height="max-content";var n=document.createElement("div");n.id="Video-Div-"+this.uniqueID,n.style.position="relative";var s=document.createElement("iframe");if(s.id="Video-iFrame-"+this.uniqueID,t&&(s.sandbox="allow-same-origin allow-scripts allow-popups allow-forms"),s.marginWidth="0",s.marginHeight="0",s.hSpace="0",s.vSpace="0",s.frameBorder="0",s.scrolling="no",n.appendChild(s),i.appendChild(n),this.config.vpApi){var o=window.parent[this.config.vpApi];window.parent.document.getElementById(o.containerDivId).appendChild(n),this.config.mainVideoDiv=n}else this.currentScript&&this.currentScript.parentNode?(this.currentScript.parentNode.insertBefore(i,this.currentScript),this.parentNode=this.currentScript.parentNode):document.body.appendChild(i);if(!this.config.isDesktop){var a=document.createElement("AUDIO");a.id=this.uniqueID+"Audio",document.body.appendChild(a)}this.constructContainer(s)}else{var r='<div id="Player-Div-'+this.uniqueID+'" style="width: max-content; height: max-content;"><div id="Video-Div-'+this.uniqueID+'" style="position:relative;"><iframe src="about:blank" '+(t?'sandbox="allow-same-origin allow-scripts allow-popups allow-forms"':"")+' height="0" marginwidth="0" marginheight="0" hspace="0" vspace="0" frameborder="0" scrolling="no" id="Video-iFrame-'+this.uniqueID+'"></iframe></div></div>';if(this.config.flowSkinWrap&&(r='<div id="flowSkinWrapper" style="display: none">'+this.config.flowSkinWrap.replace("${VIDEO_PLAYER}",'<div id="flowSkinPlayer" style="display: inline-block;position: relative">'+r+"</div>")+"</div>"),document.write(r),!this.config.isDesktop){r='<audio id="'+this.uniqueID+'Audio"></audio>';document.write(r)}this.readyStateInterval=setInterval(function(){e.constructContainer()},100)}},SekindoSPlayer.prototype.constructContainer=function(e){if(!this.constructed){this.constructed=!0;try{SekindoUtils.scriptOptimizer()}catch(e){return void(this.constructed=!1)}if(this.videoIFrame=e||document.getElementById("Video-iFrame-"+this.uniqueID),this.videoIFrame){try{this.videoIFrameWindow=this.videoIFrame.contentWindow||this.videoIFrame.contentDocument.defaultView,this.videoIFrameDoc=this.videoIFrameWindow.document||this.videoIFrame.contentDocument}catch(e){return void(this.constructed=!1)}try{this.videoIFrameDoc.open(),this.videoIFrameDoc.close()}catch(e){return void(this.constructed=!1)}var t=this.videoIFrameDoc.readyState;if("complete"==t||"interactive"==t){if(this.readyStateInterval&&clearInterval(this.readyStateInterval),this.config.isNativeTemplate){this.config.nativeTemplateElements=[];try{var i=window.frameElement;this.config.nativeTemplateElements.native_title=i.ownerDocument.getElementById("native_title"+this.uniqueID),this.config.nativeTemplateElements.native_desc=i.ownerDocument.getElementById("native_desc"+this.uniqueID),this.config.nativeTemplateElements.native_vid_link=i.ownerDocument.getElementsByClassName("native_vid_link"+this.uniqueID)}catch(e){}}this.debugAgent.isActivateDebugWindow()&&this.debugAgent.activateDebugWindow(),this.constructIntainer()}else this.constructed=!1}else this.constructed=!1}},SekindoSPlayer.prototype.constructIntainer=function(){function e(e){try{window.primisLog(e)}catch(e){}return!0}this.videoIFrame.frameBorder="0",this.videoIFrame.scrolling="no";var t=this.videoIFrameDoc.createElement("base");t.href=this.config.dummyBaseHref,this.videoIFrameDoc.head.appendChild(t),this.configDebug||(this.videoIFrameWindow.onerror=e,this.videoIFrameWindow.console&&(this.videoIFrameWindow.console.error=e)),this.config.videoIFrame=this.videoIFrame,this.config.videoIFrameWindow=this.videoIFrameWindow,this.config.videoIFrameDoc=this.videoIFrameDoc,this.config.videoIFrameWindow.Element.prototype.scrollIntoView=function(){},this.config.mainVideoDiv||(this.config.mainVideoDiv=document.getElementById("Video-Div-"+this.uniqueID)),this.config.mainPlayerDiv||(this.config.mainPlayerDiv=document.getElementById("Player-Div-"+this.uniqueID)),this.config.currScript=SekindoUtils.getCurrScript(this.config,3),window["sekindoBus"+this.uniqueID]=new SekindoBus,this.config.bus=window["sekindoBus"+this.uniqueID],"1"!=this.config.isAutoPlay||"string"==typeof this.config.contentPlayList||this.config.isDesktop||"jpg"!=this.config.vidType||(this.config.isAutoPlay="4"),this.config.pixelDivConstructor=new SekindoServices.constructPixelDiv(this.config),SekindoServices.fullscreen=new SekindoServices.fullscreen(this.config),this.config.flowSkinWrap&&(this.config.flowSkinWrapper=document.getElementById("flowSkinWrapper"),this.config.flowSkinWrapper.style.display="inline-block"),this.flowManager=new SekindoFlowManager(this.config),(this.config.vpApi||this.config.playerMode&&"normal"!=this.config.playerMode)&&(this.outStream=new SekindoOutStream(this.config,this.uniqueID)),this.config.cacheableAvailable=!1,this.config.nativeSkinIframe&&this.config.isPrimisNativeSkin&&(this.nativeSkinApi=new this.config.nativeSkinIframe.SekindoNativeSkinApi(this.config)),this.constructPlayer()},SekindoSPlayer.prototype.constructPlayer=function(){var e=this;SekindoUtils.applyExternalRules(this.config,"config","init"),this.controllBar=new SlickSkin(this.config),SekindoUtils.applyExternalRules(this.config,"style","init"),this.config.onViewabilityChange=new SekindoServices.onViewabilityChange(this.config),this.config.onVisibilityChange=new SekindoServices.onVisibilityChange,this.adsManager=new SekindoAdsManager(this.uniqueID,this.config),this.outStream&&(this.outStream.adsManager=this.adsManager,"flow"!=this.config.playerMode&&"sticky"!=this.config.playerMode&&(this.config.contentPlayList=[],this.config.bus.triggerNote("hideTimeBar"))),this.playlistManager=new SekindoPlaylistManager(this.uniqueID,this.config),this.audioElement=document.getElementById(this.uniqueID+"Audio"),this.checkPlayerViewability=new SekindoServices.checkAdViewability(this.config,function(){SekindoUtils.firePixel(e.config.viewableImpPixel)}).execute,"slider"!=this.config.playerMode&&"inRead"!=this.config.playerMode&&this.checkPlayerViewability(!0),this.config.durPeriodsPixelInterval=setInterval(function(){SekindoUtils.firePixel(e.config.playerDurPeriodsPixel)},1e4),setTimeout(function(){clearInterval(e.config.durPeriodsPixelInterval)},72e5)},SekindoSPlayer.prototype.destructPlayer=function(){this.config.bus.callbacksArray=[],this.config.durPeriodsPixelInterval&&clearInterval(this.config.durPeriodsPixelInterval),this.playlistManager&&(this.playlistManager.destruct(),delete this.playlistManager),this.debugger&&(this.debugger.destruct(),delete this.debugger),this.outStream&&(this.outStream.destruct(),delete this.outStream),this.adsManager&&(this.adsManager.destruct(),delete this.adsManager),this.config.onViewabilityChange.destruct(),this.config.onVisibilityChange.destruct(),SekindoUtils.resetAllAnimations(),this.config.currScript&&this.config.currScript.parentNode&&this.config.currScript.parentNode.removeChild(this.config.currScript),this.config.mainVideoDiv&&this.config.mainVideoDiv.parentNode&&this.config.mainVideoDiv.parentNode.removeChild(this.config.mainVideoDiv)};/**
 * Created by tamirg on 10/04/2018.
 */
// <script type="text/javascript">

var supportDesktop = !!"1";
var detectAndroidVersion = (!!"")?10:false;
var detectChromeVersion = (!!"1")?72:false;
var detectIosVersion = (!!"")?10:false;
var detectPinterest = (!!"")?true:false;
var forceMP4 = false;

var supportHTML5Video = (function()
{
    try
    {
        return (typeof(document.createElement('video').canPlayType) != 'undefined');
    }
    catch(e)
    {
        return undefined;
    }
}());

/**
 * Whether the browser has built-in HLS support.
 */
var supportsNativeHls = (function()
{
    // native HLS is definitely not supported if HTML5 video isn't
    //returns false or undefined
    if(!supportHTML5Video)return supportHTML5Video;

    /*
     Android 2.3 (Gingerbread)
     No Support, despite being the most popular version of Android
     Android 3.0 (Honeycomb)
     Streams cause tablet devices to crash
     Android 4.0 (Ice Cream Sandwich)
     VOD streams do not seek
     Aspect ratios are not detected and cause image deformation
     Fullscreen causes videos to restart from the beginning
     Android 4.1+ (Jelly Bean)
     Aspect ratio issue is fixed, but seek is still unavailable
     Chrome does not understand HLS leading to broken mimetype detection
     Taking video fullscreen causes devices to throw an error and stop.
    */
	if(detectAndroidVersion)return false;//if(detectAndroidVersion && detectAndroidVersion < 5 )return false;
	/*
	 Android 6 has problems with seeking on hls causing black screen untill next keyfame loaded - so for now we avoid native hls on android.
	*/
	//if(detectAndroidVersion)return false;

    //Android Chrome version is smaller then 53 - therefore autoplay is not supported.
    if(detectChromeVersion && detectChromeVersion < 53)return false;

    /*
    IOS versions lower then 10.3 block multiple players from running at the same time on the same page
    IOS versions lower then 9 do not support autoplay and playinline
     */
    if(detectIosVersion && detectIosVersion < 10.3 )return false;

    // HLS manifests can go by many mime-types
    var canPlay = [
        // Apple santioned
        'application/vnd.apple.mpegurl',
        // Apple sanctioned for backwards compatibility
        'audio/mpegurl',
        // Very common
        'audio/x-mpegurl',
        // Very common
        'application/x-mpegurl',
        // Included for completeness
        'video/x-mpegurl',
        'video/mpegurl',
        'application/mpegurl'
    ];

    try{
        var video = document.createElement('video');
        return canPlay.some(function(canItPlay) {
            return (/maybe|probably/i).test(video.canPlayType(canItPlay));
        });
    }
    catch(e)
    {
        return undefined;
    }
}());

var supportsHlsJs = (function()
{
    if(!(!!window.Hls))return false;
    try
    {
        var mediaSource = window.MediaSource || window.WebKitMediaSource;
        var sourceBuffer = window.SourceBuffer || window.WebKitSourceBuffer;
        var isTypeSupported = mediaSource && typeof mediaSource.isTypeSupported === 'function' && mediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"');

        // if SourceBuffer is exposed ensure its API is valid
        // safari and old version of Chrome doe not expose SourceBuffer globally so checking SourceBuffer.prototype is impossible
        var sourceBufferValidAPI = !sourceBuffer || sourceBuffer.prototype && typeof sourceBuffer.prototype.appendBuffer === 'function' && typeof sourceBuffer.prototype.remove === 'function';
        return !!isTypeSupported && !!sourceBufferValidAPI;
    }
    catch(e)
    {
        return undefined;
    }

}());

var supportHls = (supportsNativeHls === undefined)? '-1': supportsNativeHls? (forceMP4? '0' : 'native') : supportsHlsJs? 'hlsJs': '0';
var os = supportDesktop?'desktop':detectAndroidVersion?'android'+detectAndroidVersion:detectIosVersion?'ios'+detectIosVersion:'-1';
var vidType = (detectIosVersion !== false && (detectIosVersion < 10.3 || detectPinterest) && detectIosVersion > 9 )?'iosWrapper':(!supportDesktop && ((detectChromeVersion && detectChromeVersion < 53) || (detectIosVersion !== false && detectIosVersion <= 9 )))?'jpg':'native';
// <script type="text/javascript">

	///for IE and prebid
	if(typeof String.prototype.includes != 'function')
	{
		String.prototype.includes = function(str) {
			return (this.indexOf(str)!=-1);
		}
	}
	if (typeof SKpbjs != "undefined")
	{
		SKpbjs.setConfig(
			{
				pageUrl: "https://www.investing.com/equities/tanzania",
				cache: {url: "https://prebid.adnxs.com/pbc/v1/cache"},
				userSync: {
					filterSettings: {
						iframe: {
							bidders: ['openx', 'pubmatic', 'rubicon'],
							filter: 'include'
						},
						image: {
							bidders: '*',
							filter: 'include'
						}
					}
				}
			});
	}

    // Amazon A9
    !function(a9,a,p,s,t,A,g){if(a[a9])return;function q(c,r){a[a9]._Q.push([c,r])}a[a9]={init:function(){q("i",arguments)},fetchBids:function(){q("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};A=p.createElement(s);A.async=!0;A.src=t;g=p.getElementsByTagName(s)[0];g.parentNode.insertBefore(A,g)}("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js");

	// Player Config
    // ----------------
	var configPlayer = new Object();
	configPlayer.playerVer = '2.2.5';
	// pixels
	configPlayer.ivtHiddenPixel = 'https://live.sekindo.com/live/liveView.php?njs=1&ito=1&vid_event=24&serverTime=1554993002&s=95286&sta=0&x=650&y=443&vid_passDomain=www.investing.com&subId=www.investing.com&debugInformation=&gdpr=0&gdprConsent=&isWePassGdpr=1&userIpAddr=192.126.123.118&userUA=Mozilla%2F5.0%20%28Windows%20NT%2010.0%3B%20WOW64%29%20AppleWebKit%2F537.36%20%28KHTML%2C%20like%20Gecko%29%20Chrome%2F72.0.3626.121%20Safari%2F537.36&csuuid=5cabfea475b62&contentFileId=0&mediaPlayListId=0';
	configPlayer.playerDurPeriodsPixel = 'https://live.sekindo.com/live/liveView.php?njs=1&ito=1&vid_event=25&serverTime=1554993002&s=95286&sta=0&x=650&y=443&vid_passDomain=www.investing.com&subId=www.investing.com&debugInformation=&gdpr=0&gdprConsent=&isWePassGdpr=1&userIpAddr=192.126.123.118&userUA=Mozilla%2F5.0%20%28Windows%20NT%2010.0%3B%20WOW64%29%20AppleWebKit%2F537.36%20%28KHTML%2C%20like%20Gecko%29%20Chrome%2F72.0.3626.121%20Safari%2F537.36&csuuid=5cabfea475b62&contentFileId=0&mediaPlayListId=0';
	configPlayer.closeFloatPixel = 'https://live.sekindo.com/live/liveView.php?njs=1&ito=1&vid_event=35&serverTime=1554993002&s=95286&sta=0&x=650&y=443&vid_passDomain=www.investing.com&subId=www.investing.com&debugInformation=&gdpr=0&gdprConsent=&isWePassGdpr=1&userIpAddr=192.126.123.118&userUA=Mozilla%2F5.0%20%28Windows%20NT%2010.0%3B%20WOW64%29%20AppleWebKit%2F537.36%20%28KHTML%2C%20like%20Gecko%29%20Chrome%2F72.0.3626.121%20Safari%2F537.36&csuuid=5cabfea475b62&contentFileId=0&mediaPlayListId=0';
	configPlayer.viewableImpPixel = 'https://live.sekindo.com/live/liveView.php?njs=1&ito=1&vid_event=36&serverTime=1554993002&s=95286&sta=0&x=650&y=443&vid_passDomain=www.investing.com&subId=www.investing.com&debugInformation=&gdpr=0&gdprConsent=&isWePassGdpr=1&userIpAddr=192.126.123.118&userUA=Mozilla%2F5.0%20%28Windows%20NT%2010.0%3B%20WOW64%29%20AppleWebKit%2F537.36%20%28KHTML%2C%20like%20Gecko%29%20Chrome%2F72.0.3626.121%20Safari%2F537.36&csuuid=5cabfea475b62&contentFileId=0&mediaPlayListId=0';
	configPlayer.contentStartPixel = 'https://live.sekindo.com/live/liveView.php?njs=1&ito=1&vid_event=16&serverTime=1554993002&s=0&sta=10002085&x=650&y=443&vid_passDomain=www.investing.com&subId=www.investing.com&debugInformation=&gdpr=0&gdprConsent=&isWePassGdpr=1&userIpAddr=192.126.123.118&userUA=Mozilla%2F5.0%20%28Windows%20NT%2010.0%3B%20WOW64%29%20AppleWebKit%2F537.36%20%28KHTML%2C%20like%20Gecko%29%20Chrome%2F72.0.3626.121%20Safari%2F537.36&csuuid=5cabfea475b62&contentFileId=0&mediaPlayListId=0';
	configPlayer.contentCompletePixel = 'https://live.sekindo.com/live/liveView.php?njs=1&ito=1&vid_event=18&serverTime=1554993002&s=0&sta=10002085&x=650&y=443&vid_passDomain=www.investing.com&subId=www.investing.com&debugInformation=&gdpr=0&gdprConsent=&isWePassGdpr=1&userIpAddr=192.126.123.118&userUA=Mozilla%2F5.0%20%28Windows%20NT%2010.0%3B%20WOW64%29%20AppleWebKit%2F537.36%20%28KHTML%2C%20like%20Gecko%29%20Chrome%2F72.0.3626.121%20Safari%2F537.36&csuuid=5cabfea475b62&contentFileId=0&mediaPlayListId=0';
	configPlayer.contentClickPixel = 'https://live.sekindo.com/live/liveView.php?njs=1&ito=1&vid_event=17&serverTime=1554993002&s=0&sta=10002085&x=650&y=443&vid_passDomain=www.investing.com&subId=www.investing.com&debugInformation=&gdpr=0&gdprConsent=&isWePassGdpr=1&userIpAddr=192.126.123.118&userUA=Mozilla%2F5.0%20%28Windows%20NT%2010.0%3B%20WOW64%29%20AppleWebKit%2F537.36%20%28KHTML%2C%20like%20Gecko%29%20Chrome%2F72.0.3626.121%20Safari%2F537.36&csuuid=5cabfea475b62&contentFileId=0&mediaPlayListId=0';
	configPlayer.contentFullScreenPixel = 'https://live.sekindo.com/live/liveView.php?njs=1&ito=1&vid_event=20&serverTime=1554993002&s=0&sta=10002085&x=650&y=443&vid_passDomain=www.investing.com&subId=www.investing.com&debugInformation=&gdpr=0&gdprConsent=&isWePassGdpr=1&userIpAddr=192.126.123.118&userUA=Mozilla%2F5.0%20%28Windows%20NT%2010.0%3B%20WOW64%29%20AppleWebKit%2F537.36%20%28KHTML%2C%20like%20Gecko%29%20Chrome%2F72.0.3626.121%20Safari%2F537.36&csuuid=5cabfea475b62&contentFileId=0&mediaPlayListId=0';
	configPlayer.contentVolChangePixel = 'https://live.sekindo.com/live/liveView.php?njs=1&ito=1&vid_event=21&serverTime=1554993002&s=0&sta=10002085&x=650&y=443&vid_passDomain=www.investing.com&subId=www.investing.com&debugInformation=&gdpr=0&gdprConsent=&isWePassGdpr=1&userIpAddr=192.126.123.118&userUA=Mozilla%2F5.0%20%28Windows%20NT%2010.0%3B%20WOW64%29%20AppleWebKit%2F537.36%20%28KHTML%2C%20like%20Gecko%29%20Chrome%2F72.0.3626.121%20Safari%2F537.36&csuuid=5cabfea475b62&contentFileId=0&mediaPlayListId=0';
	configPlayer.contentPlaylistClicksPixel = 'https://live.sekindo.com/live/liveView.php?njs=1&ito=1&vid_event=22&serverTime=1554993002&s=0&sta=10002085&x=650&y=443&vid_passDomain=www.investing.com&subId=www.investing.com&debugInformation=&gdpr=0&gdprConsent=&isWePassGdpr=1&userIpAddr=192.126.123.118&userUA=Mozilla%2F5.0%20%28Windows%20NT%2010.0%3B%20WOW64%29%20AppleWebKit%2F537.36%20%28KHTML%2C%20like%20Gecko%29%20Chrome%2F72.0.3626.121%20Safari%2F537.36&csuuid=5cabfea475b62&contentFileId=0&mediaPlayListId=0';
	configPlayer.contentScrubberPixel = 'https://live.sekindo.com/live/liveView.php?njs=1&ito=1&vid_event=23&serverTime=1554993002&s=0&sta=10002085&x=650&y=443&vid_passDomain=www.investing.com&subId=www.investing.com&debugInformation=&gdpr=0&gdprConsent=&isWePassGdpr=1&userIpAddr=192.126.123.118&userUA=Mozilla%2F5.0%20%28Windows%20NT%2010.0%3B%20WOW64%29%20AppleWebKit%2F537.36%20%28KHTML%2C%20like%20Gecko%29%20Chrome%2F72.0.3626.121%20Safari%2F537.36&csuuid=5cabfea475b62&contentFileId=0&mediaPlayListId=0';
	configPlayer.contentFullCompletePixel = 'https://live.sekindo.com/live/liveView.php?njs=1&ito=1&vid_event=29&serverTime=1554993002&s=0&sta=10002085&x=650&y=443&vid_passDomain=www.investing.com&subId=www.investing.com&debugInformation=&gdpr=0&gdprConsent=&isWePassGdpr=1&userIpAddr=192.126.123.118&userUA=Mozilla%2F5.0%20%28Windows%20NT%2010.0%3B%20WOW64%29%20AppleWebKit%2F537.36%20%28KHTML%2C%20like%20Gecko%29%20Chrome%2F72.0.3626.121%20Safari%2F537.36&csuuid=5cabfea475b62&contentFileId=0&mediaPlayListId=0';
	configPlayer.contentVoidClickPixel = 'https://live.sekindo.com/live/liveView.php?njs=1&ito=1&vid_event=31&serverTime=1554993002&s=0&sta=10002085&x=650&y=443&vid_passDomain=www.investing.com&subId=www.investing.com&debugInformation=&gdpr=0&gdprConsent=&isWePassGdpr=1&userIpAddr=192.126.123.118&userUA=Mozilla%2F5.0%20%28Windows%20NT%2010.0%3B%20WOW64%29%20AppleWebKit%2F537.36%20%28KHTML%2C%20like%20Gecko%29%20Chrome%2F72.0.3626.121%20Safari%2F537.36&csuuid=5cabfea475b62&contentFileId=0&mediaPlayListId=0';
	configPlayer.contentPausePixel = 'https://live.sekindo.com/live/liveView.php?njs=1&ito=1&vid_event=32&serverTime=1554993002&s=0&sta=10002085&x=650&y=443&vid_passDomain=www.investing.com&subId=www.investing.com&debugInformation=&gdpr=0&gdprConsent=&isWePassGdpr=1&userIpAddr=192.126.123.118&userUA=Mozilla%2F5.0%20%28Windows%20NT%2010.0%3B%20WOW64%29%20AppleWebKit%2F537.36%20%28KHTML%2C%20like%20Gecko%29%20Chrome%2F72.0.3626.121%20Safari%2F537.36&csuuid=5cabfea475b62&contentFileId=0&mediaPlayListId=0';
	configPlayer.attemptMultiplier =  10;
	//player configs
	configPlayer.volume = ".2"; // Number(0 ...1)
	configPlayer.inViewDuration = 2; // in seconds - the viewability duration for reporting "viewable" pixel.
	configPlayer.requestLifetime = 360; //minutes
	configPlayer.requestLifetimeNV = 160;
	configPlayer.flowPlaylist = false;
	configPlayer.soundOnFS = true;
	configPlayer.width = 650;
	configPlayer.height = 443;
	configPlayer.forceWidth = 0;
	configPlayer.forceHeight = 0;
	configPlayer.logoClickUrl = 'https://www.primis.tech';
	configPlayer.logoType = 'sekindo';
	configPlayer.logoPath = '/content/video/splayer/assets/sekindoLogo.png';
	configPlayer.showLogo = 'false';
	configPlayer.isAutoPlay = '1';//0 - no autoplay, 1 - autoplay, 2 - autoplay ads only, 3 - autoplay ads without content at all.
	configPlayer.mute = "1"; //0:sound, 1:mute+3sec rollover, 2:mute - no rollover
	configPlayer.adsSchedule = {"pre_roll":1,"mid_roll":[],"gap":{"attGap":0,"impGap":25}};
	configPlayer.waterFall = 'https://live.sekindo.com/live/liveView.php?s=58057&vid_vastTimeout=-1&vid_vastType=3&vid_playerVer=2.2.5&vid_viewabilityState=${VP_VIEWABILITY_STATE}&vid_playbackMethod=${VP_PLAYBACK_METHOD}&vid_content_url=https%3A%2F%2Fvideo.sekindo.com%2Fuploads%2Fcn5%2Fvideo%2Fusers%2Forigin%2F24485%2Fvideo_5b4c8dbbc9a66557872002%2Fvid5caef34703a4a191743483.mp4&vid_content_id=340373&vid_content_desc=Amazon+Global+Team+Listens+to+Recordings+of+Alexa+Conversations&vid_content_title=Amazon+Global+Team+Listens+to+Recordings+of+Alexa+Conversations&vid_content_duration=98&x=650&y=443&pubUrl=https%3A%2F%2Fwww.investing.com%2Fequities%2Ftanzania&ri=6C69766553746174737C736B317B54307D7B64323031392D30342D31315F31377D7B7331303030323038357D7B4333307D7B53643364334C6D6C75646D567A64476C755A79356A6232303D7D7B626368726F6D657D7B716465736B746F707D7B6F77696E646F77737D7B583635307D7B593434337D7B66367D7B4C333335397DFEFE&geoLati=33.98540115356445&geoLong=-117.89720153808594&userIpAddr=192.126.123.118&userUA=Mozilla%2F5.0+%28Windows+NT+10.0%3B+WOW64%29+AppleWebKit%2F537.36+%28KHTML%2C+like+Gecko%29+Chrome%2F72.0.3626.121+Safari%2F537.36&debugInformation=&gdpr=0&csuuid=5cabfea475b62&cbuster=${CBUSTER}';
	configPlayer.playlistMultiplier = Infinity; // (0 ...Infinity) - int
	configPlayer.contentClickUrl = '';
	configPlayer.reportClickUrl = '';
	configPlayer.cachedKeywords = '';
	configPlayer.contentPlayList = [			{
				"fileId": "340373",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn5/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5caef34703a4a191743483.mp4",
				"title": "Amazon Global Team Listens to Recordings of Alexa Conversations",
				"desc": "Apr.10 -- Amazon may be listening in to you as customers talk to Alexa. Sources say the company has a team that monitors voice recordings captured in Echo owner’s homes as well as their offices. Bloomberg’s Matt Day reports on “Bloomberg Daybreak: Asia.”",
				"duration": "98",
				"bgImg": "https://video.sekindo.com/uploads/cn5/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5caef34703a4a191743483.jpg?cbuster=1554969415",
				"clkUrl": "",
				"hlsUrl": "https://video.sekindo.com/uploads/cn5/video/users/hls/24485/video_5b4c8dbbc9a66557872002/vid5caef34703a4a191743483.mp4/chunklist_1280.m3u8",
				"keywords": "technology,markets,company news,business news,Alexa,amazon.com inc.,economic news,Bloomberg.com Web Submit,Audio/Video,Digi Video; Multi Biz Vert,BIntent Inform,Bloomberg Vid; Asia TV Source,Syndication Top Asia Feed,Digi Video; Industries; B.com,Bloomberg News Staff,Daybreak Asia,Ramy Inocencio,amzn:US,Haidi Stroud-Watts,Matt Day,Cyberspying,voice recording,VideoElephant"
			},			{
				"fileId": "340158",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn5/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5caeaac1ae6ba430064245.mp4",
				"title": "Why Steve Eisman Is Shorting Canadian Banks",
				"desc": "Apr.10 -- Neuberger Berman's Steve Eisman, the money manager made famous by the book 'The Big Short', joins BNN Bloomberg Television to discuss why he's short Canadian banks.",
				"duration": "1126",
				"bgImg": "https://video.sekindo.com/uploads/cn5/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5caeaac1ae6ba430064245.jpg?cbuster=1554950852",
				"clkUrl": "",
				"hlsUrl": "https://video.sekindo.com/uploads/cn5/video/users/hls/24485/video_5b4c8dbbc9a66557872002/vid5caeaac1ae6ba430064245.mp4/chunklist_1280.m3u8",
				"keywords": "interviews,The Big Short,Canadá,money managers,Canadian banks,Bloomberg.com Web Submit,Audio/Video,Digi Video; Multi Biz Vert,Bloomberg Vid; U.S. TV Source,BTV Youtube Video,Syndication Top US Feed,Digi Video; Multi Markets Vert,1031231Z:US,Neuberger Berman,Steve Eisman,short-selling,VideoElephant"
			},			{
				"fileId": "339851",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn5/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5cae2953109d0793800851.mp4",
				"title": "Pelosi Says Becoming Speaker Helped Break a 'Marble Ceiling' in Our Country",
				"desc": "Apr.10 -- House Speaker Nancy Pelosi, a Democrat from California, talks about her first meeting in the Oval Office as leader of her caucus. She speaks on the latest episode of “The David Rubenstein Show: Peer-to-Peer Conversations.” The interview took place March 8 in Washington.",
				"duration": "132",
				"bgImg": "https://video.sekindo.com/uploads/cn5/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5cae2953109d0793800851.jpg?cbuster=1554917716",
				"clkUrl": "",
				"hlsUrl": "https://video.sekindo.com/uploads/cn5/video/users/hls/24485/video_5b4c8dbbc9a66557872002/vid5cae2953109d0793800851.mp4/chunklist_1280.m3u8",
				"keywords": "interviews,politics,Top News,Democratic National Committee,u.s. house of representatives,David Rubenstein,U.S. Democratic Party,government news,Rep. Nancy Pelosi,editors&#039; picks,Bloomberg.com Web Submit,Audio/Video,Syndication Business Package,BIntent Inform,Women in the News,Top BTV Interviews,Workplace Gender Equality,BTV Youtube Video,Syndication Top US Feed,Congress; U.S.,MultiMedia Politics Vertical,Peer To Peer TV Show,VideoElephant"
			},			{
				"fileId": "340550",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn7/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5caf37938e805091869970.mp4",
				"title": "China’s Recovery Momentum Has Started to Come Back, Says ANZ’s Wang",
				"desc": "Apr.10 -- Betty Wang, senior economist at ANZ, discusses China’s March CPI and PPI data and what it means for the economy. She speaks on “Bloomberg Markets: China Open.”",
				"duration": "196",
				"bgImg": "https://video.sekindo.com/uploads/cn7/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5caf37938e805091869970.jpg?cbuster=1554986900",
				"clkUrl": "",
				"hlsUrl": "",
				"keywords": "interviews,women,markets,china,china economy,business news,Inflation,economic news,economic data,Bloomberg.com Web Submit,Audio/Video,Digi Video; Multi Biz Vert,BIntent Inform,Bloomberg Vid; Asia TV Source,Syndication Top Asia Feed,Women in the News,Bloomberg Markets,Digi Video; World; B.com,Yvonne Man,David Ingles,Tom Mackenzie,China Survey-CPI,China PPI,China CPI,Betty Wang,VideoElephant"
			},			{
				"fileId": "340160",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn5/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5caeaac6833ab502563087.mp4",
				"title": "Bloomberg Market Wrap 4/10: Amerisource, Macy's, Health Care",
				"desc": "Apr.10 -- Bloomberg market reporters take a deep dive into all of today's action.",
				"duration": "168",
				"bgImg": "https://video.sekindo.com/uploads/cn5/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5caeaac6833ab502563087.jpg?cbuster=1554950855",
				"clkUrl": "",
				"hlsUrl": "https://video.sekindo.com/uploads/cn5/video/users/hls/24485/video_5b4c8dbbc9a66557872002/vid5caeaac6833ab502563087.mp4/chunklist_1280.m3u8",
				"keywords": "markets,Top News,business news,U.S. economy,economic news,Macy&#039;s Inc.,Bloomberg.com Web Submit,Audio/Video,Syndication Investing,Digi Video; Multi Biz Vert,BIntent Inform,Bloomberg Vid; U.S. TV Source,Abigail Doolittle,M:US,Emma Chandra,Romaine Bostick,BBG Markets The Close Show,ABC:US,AmerisourceBergen Corp.,VideoElephant"
			},			{
				"fileId": "340161",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn5/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5caeaac82d2f7552324380.mp4",
				"title": "Occidental CEO on Permian, M&A, Competition",
				"desc": "Apr.10 -- Occidental Petroleum Corp. President and Chief Executive Officer Vickie Hollub discusses Permian Basin oil production and expansion plans, acquisition strategy, and competition. She speaks with Bloomberg's Alix Steel on 'Bloomberg Markets: The Close.'",
				"duration": "655",
				"bgImg": "https://video.sekindo.com/uploads/cn5/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5caeaac82d2f7552324380.jpg?cbuster=1554950858",
				"clkUrl": "",
				"hlsUrl": "https://video.sekindo.com/uploads/cn5/video/users/hls/24485/video_5b4c8dbbc9a66557872002/vid5caeaac82d2f7552324380.mp4/chunklist_1280.m3u8",
				"keywords": "markets,Top News,business news,Oil Pipeline,natural gas,Crude,U.S. economy,economic news,Permian Basin,Occidental Petroleum,Bloomberg.com Web Submit,Audio/Video,Syndication Investing,Digi Video; Multi Biz Vert,BIntent Inform,Full Length Interview,Oil Shale,Bloomberg Vid; U.S. TV Source,Alix Steel,BBG Markets The Close Show,OXY:US,Vickie Hollub,VideoElephant"
			},			{
				"fileId": "339850",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn5/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5cae294fe26c2439469735.mp4",
				"title": "ECB's Draghi on Negative Rates, Downside Risks: Opening Statement",
				"desc": "Apr.10 -- European Central Bank President Mario Draghi speaks about 'downside' risks still facing the euro-area economy and the ECB's willingness to consider if negative rates need mitigating. This is the opening statement of the ECB's news conference in Frankfurt.",
				"duration": "630",
				"bgImg": "https://video.sekindo.com/uploads/cn5/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5cae294fe26c2439469735.jpg?cbuster=1554917713",
				"clkUrl": "",
				"hlsUrl": "https://video.sekindo.com/uploads/cn5/video/users/hls/24485/video_5b4c8dbbc9a66557872002/vid5cae294fe26c2439469735.mp4/chunklist_1280.m3u8",
				"keywords": "markets,Monetary Policy,European Central Bank,Central Banks,business news,ECB,Mario Draghi,economic news,Bloomberg.com Web Submit,Audio/Video,Syndication Business Package,Digi Video; Multi Biz Vert,BIntent Inform,Bloomberg Daybreak: Americas,Bloomberg Vid; U.S. TV Source,BTV Youtube Video,Syndication Top US Feed,Digi Video; Multi Markets Vert,negative interest rates,Downside risk,VideoElephant"
			},			{
				"fileId": "339845",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn5/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5cae2944f04c8226315703.mp4",
				"title": "ECB Holding TLTROs for Real Signs of a Downturn, Economist Greene Says",
				"desc": "Apr.10 -- Megan Greene, chief economist at Manulife Asset Management, examines the European Central Bank's interest rate decision. She speaks on 'Bloomberg Daybreak: Americas.'",
				"duration": "64",
				"bgImg": "https://video.sekindo.com/uploads/cn5/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5cae2944f04c8226315703.jpg?cbuster=1554917701",
				"clkUrl": "",
				"hlsUrl": "https://video.sekindo.com/uploads/cn5/video/users/hls/24485/video_5b4c8dbbc9a66557872002/vid5cae2944f04c8226315703.mp4/chunklist_1280.m3u8",
				"keywords": "interviews,markets,banks,Monetary Policy,European Central Bank,Central Banks,business news,ECB,banking,Megan Greene,Mario Draghi,David Westin,economic news,Bloomberg.com Web Submit,Audio/Video,Syndication Business Package,Digi Video; Multi Biz Vert,BIntent Inform,Bloomberg Daybreak: Americas,Top BTV Interviews,Bloomberg Vid; U.S. TV Source,BTV Youtube Video,Syndication Top US Feed,Digi Video; Multi Markets Vert,Alix Steel,7589323Z CN:US,Manulife Asset Management Ltd,TLTRO,VideoElephant"
			},			{
				"fileId": "339842",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn5/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5cae293e6b51a046251219.mp4",
				"title": "Rate Cut One of Few Fed Options on Inflation, BTIG's Emanuel Says",
				"desc": "Apr.10 -- Julian Emanuel, chief equity and derivatives strategist at BTIG, and Julia Coronado, founder at Macropolicy Perspectives, discuss the prospect of interest rate cuts for the Federal Reserve and European Central Bank. They speak on 'Bloomberg Surveillance.'",
				"duration": "130",
				"bgImg": "https://video.sekindo.com/uploads/cn5/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5cae293e6b51a046251219.jpg?cbuster=1554917695",
				"clkUrl": "",
				"hlsUrl": "https://video.sekindo.com/uploads/cn5/video/users/hls/24485/video_5b4c8dbbc9a66557872002/vid5cae293e6b51a046251219.mp4/chunklist_1280.m3u8",
				"keywords": "interviews,markets,Federal Reserve,Monetary Policy,European Central Bank,Interest Rates,Central Banks,business news,Inflation,economic news,Francine Lacqua,Bloomberg.com Web Submit,Audio/Video,Syndication Business Package,Digi Video; Multi Biz Vert,BIntent Inform,Top BTV Interviews,Bloomberg Vid; U.S. TV Source,BTV Youtube Video,Syndication Top US Feed,Digi Video; Multi Markets Vert,Surveillance Midday with TK,Tom Keene,2803687Z US:US,BTIG LLC,Julian Emanuel,Julia Coronado,interest rate cut,VideoElephant"
			},			{
				"fileId": "340370",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn5/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5caef340d4f88709535761.mp4",
				"title": "EU's Dombrovskis on Italy, Banks, Trade",
				"desc": "Apr.10 -- European Commission Vice President Valdis Dombrovskis discusses the health of European Union member state's economies,  European bank regulation, and the impact of Brexit and U.S. trade tensions on the bloc. He speaks on 'What'd You Miss?'",
				"duration": "557",
				"bgImg": "https://video.sekindo.com/uploads/cn5/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5caef340d4f88709535761.jpg?cbuster=1554969410",
				"clkUrl": "",
				"hlsUrl": "https://video.sekindo.com/uploads/cn5/video/users/hls/24485/video_5b4c8dbbc9a66557872002/vid5caef340d4f88709535761.mp4/chunklist_1280.m3u8",
				"keywords": "politics,markets,eu,European commission,brexit,Trade,Valdis Dombrovskis,Bank Regulation,Bloomberg.com Web Submit,Audio/Video,Digi Video; Multi Biz Vert,BIntent Inform,Bloomberg Vid; U.S. TV Source,What&#039;d You Miss TV,MultiMedia Politics Vertical,0629846D:BB,VideoElephant"
			},			{
				"fileId": "340371",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn5/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5caef34320f55314367095.mp4",
				"title": "How Google Is Looking to Monetize Maps",
				"desc": "Apr.10 -- Google is turning to its popular web service Google Maps into a major cash machine. Bloomberg's Gerrit De Vynck reports on 'Bloomberg Technology.'",
				"duration": "159",
				"bgImg": "https://video.sekindo.com/uploads/cn5/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5caef34320f55314367095.jpg?cbuster=1554969412",
				"clkUrl": "",
				"hlsUrl": "https://video.sekindo.com/uploads/cn5/video/users/hls/24485/video_5b4c8dbbc9a66557872002/vid5caef34320f55314367095.mp4/chunklist_1280.m3u8",
				"keywords": "technology,interviews,Google Maps,business news,Web Services,Industries,Digital Advertising,Emily Chang,Bloomberg.com Web Submit,Audio/Video,Digi Video; Multi Biz Vert,BIntent Inform,Full Length Interview,Bloomberg Vid; U.S. TV Source,Bloomberg Technology,BTV YouTube Technology,Gerrit De Vynck,Google Inc.,GOOG:US,monetize maps,VideoElephant"
			},			{
				"fileId": "340049",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn5/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5cae6b9f0484b881826220.mp4",
				"title": "Speaker Pelosi Says You Have to Be Prepared to 'Throw a Punch' in Politics",
				"desc": "Apr.10 -- House Speaker Nancy Pelosi, a Democrat from California, talks about why so many negative ads are cast against her. Pelosi speaks on the latest episode of “The David Rubenstein Show: Peer-to-Peer Conversations.” The interview took place March 8 in Washington.",
				"duration": "141",
				"bgImg": "https://video.sekindo.com/uploads/cn5/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5cae6b9f0484b881826220.jpg?cbuster=1554934688",
				"clkUrl": "",
				"hlsUrl": "https://video.sekindo.com/uploads/cn5/video/users/hls/24485/video_5b4c8dbbc9a66557872002/vid5cae6b9f0484b881826220.mp4/chunklist_1280.m3u8",
				"keywords": "interviews,politics,elections,united states,Califórnia,David Rubenstein,government news,Rep. Nancy Pelosi,editors&#039; picks,Bloomberg.com Web Submit,Audio/Video,Syndication Business Package,BIntent Inform,Women in the News,Top BTV Interviews,Workplace Gender Equality,BTV Youtube Video,Syndication Top US Feed,Congress; U.S.,MultiMedia Politics Vertical,Peer To Peer TV Show,VideoElephant"
			},			{
				"fileId": "340551",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn7/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5caf379560312574002018.mp4",
				"title": "China Sees Surge of Stock Buybacks",
				"desc": "Apr.10 -- The world-beating equity rally in China could be getting an extra boost now from the recent jump when it comes to stock buybacks. About 150 firms announced buybacks in the first week of this month alone, and with more coming since Beijing relaxed rules in November, investors have more reason to feel positive about this rally. Bloomberg’s Sofia Horta e Costa reports on “Bloomberg Markets: China Open.”",
				"duration": "119",
				"bgImg": "https://video.sekindo.com/uploads/cn7/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5caf379560312574002018.jpg?cbuster=1554986902",
				"clkUrl": "",
				"hlsUrl": "",
				"keywords": "markets,china,business news,Buybacks,economic news,Bloomberg.com Web Submit,Audio/Video,Digi Video; Multi Biz Vert,Bloomberg Vid; Asia TV Source,Syndication Top Asia Feed,Bloomberg Markets,Bloomberg News Staff,Yvonne Man,Tom Mackenzie,Sofia Horta e Costa,stock buybacks,VideoElephant"
			},			{
				"fileId": "340051",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn5/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5cae6ba37c7bf427372526.mp4",
				"title": "Rep. Green Points Out Lack of Diversity on Bank CEO Panel",
				"desc": "Apr.10 -- Rep. Al Green, a Democrat from Texas, questions bank CEOs about diversity before the House Financial Services Committee.",
				"duration": "34",
				"bgImg": "https://video.sekindo.com/uploads/cn5/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5cae6ba37c7bf427372526.jpg?cbuster=1554934692",
				"clkUrl": "",
				"hlsUrl": "https://video.sekindo.com/uploads/cn5/video/users/hls/24485/video_5b4c8dbbc9a66557872002/vid5cae6ba37c7bf427372526.mp4/chunklist_1280.m3u8",
				"keywords": "banks,ceo,Top News,Financial Services,company news,united states,business news,banking,income inequality,U.S. Congress,Al Green,economic news,editors&#039; picks,Bloomberg.com Web Submit,Audio/Video,Syndication Business Package,Digi Video; Multi Biz Vert,BIntent Inform,Women in the News,Bloomberg Markets,Bloomberg Vid; U.S. TV Source,Workplace Gender Equality,BTV Youtube Video,Syndication Top US Feed,Congress; U.S.,BTV YouTube Politics,BTV YouTube Breaking,VideoElephant"
			},			{
				"fileId": "340557",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn7/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5caf379ea4dda456959120.mp4",
				"title": "Twilight of Combustion Engine Comes for Germany",
				"desc": "Apr.11 -- We may be witnessing the end of the internal combustion engine. As more and more consumers and investors make the shift to electric vehicles, will Germany’s auto makers be able to adapt in time? BMW and Volkswagen are among those actively looking to expand their offering of electric vehicles. Bloomberg’s Elisabeth Behrmann reports on “Bloomberg Markets: European Open.”",
				"duration": "150",
				"bgImg": "https://video.sekindo.com/uploads/cn7/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5caf379ea4dda456959120.jpg?cbuster=1554986911",
				"clkUrl": "",
				"hlsUrl": "",
				"keywords": "markets,engine,germany,company news,business news,Elisabeth Behrmann,automobiles,BMW AG,volkswagen ag,automobile manufacturing,economic news,Matt Miller,Bloomberg Vid; U.K. TV Source,Bloomberg.com Web Submit,Audio/Video,Syndication Top Europe Feed,Digi Video; Multi Biz Vert,BIntent Inform,Anna Edwards,Bloomberg Markets,Digi Video; Industries; B.com,Bloomberg News Staff,Plug-in Electric Vehicles,BMW:GR,VOW:GR,BR Automotive Mfg,VideoElephant"
			},			{
				"fileId": "340368",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn5/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5caef339f2592732636584.mp4",
				"title": "EVgo CEO Zoi on EV Industry, Fast Chargers",
				"desc": "Apr.10 -- EVgo CEO Cathy Zoi discusses fast charging technology and tax incentives for buying electric vehicles. She speaks with Bloomberg’s Alix Steel at the Columbia Global Energy Summit in New York.",
				"duration": "565",
				"bgImg": "https://video.sekindo.com/uploads/cn5/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5caef339f2592732636584.jpg?cbuster=1554969404",
				"clkUrl": "",
				"hlsUrl": "https://video.sekindo.com/uploads/cn5/video/users/hls/24485/video_5b4c8dbbc9a66557872002/vid5caef339f2592732636584.mp4/chunklist_1280.m3u8",
				"keywords": "technology,interviews,Electric Vehicles,EVs,Digi Video; Multi Biz Vert,Women in the News,Full Length Interview,Bloomberg Vid; U.S. TV Source,Plug-in Electric Vehicles,CEO Interviews,Alix Steel,Catherine Zoi,EVgo,fast charger,VideoElephant"
			},			{
				"fileId": "339556",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn6/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5cade3cf09d75259862748.mp4",
				"title": "Natixis’s Raby on Consolidation, Growth in China, M&A, Fees, Pricing Power",
				"desc": "Apr.10 -- Jean Raby, chief executive officer at Natixis Investment Managers, discusses if Natixis would be a consolidator in asset management, what he wants to buy, growth in China and APAC region, M&A, fees and pricing power. He speaks on “Bloomberg Markets: European Open” from the sidelines of the Bloomberg Invest Abu Dhabi forum.",
				"duration": "472",
				"bgImg": "https://video.sekindo.com/uploads/cn6/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5cade3cf09d75259862748.jpg?cbuster=1554899921",
				"clkUrl": "",
				"hlsUrl": "https://video.sekindo.com/uploads/cn6/video/users/hls/24485/video_5b4c8dbbc9a66557872002/vid5cade3cf09d75259862748.mp4/chunklist_1280.m3u8",
				"keywords": "interviews,markets,china,company news,business news,Mergers And Acquisitions,banking,APAC,consolidation,Investment Banking Fees,economic news,Bloomberg Vid; U.K. TV Source,Bloomberg.com Web Submit,Audio/Video,Syndication Top Europe Feed,Digi Video; Multi Biz Vert,BIntent Inform,Bloomberg Markets,Top BTV Interviews,Full Length Interview,Digi Video; Industries; B.com,Mergers &amp; Acquisitions,BTV Youtube Video,CEO Interviews,Erik Schatzker,kn:fp,Natixis SA,Jean Raby,pricing power,VideoElephant"
			},			{
				"fileId": "340372",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn5/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5caef344e4704256314405.mp4",
				"title": "Macquarie’s Lakos Expects a Better Picture for Markets in 2H",
				"desc": "Apr.10 -- Martin Lakos, division director at Macquarie Wealth Management, discusses his outlook for global markets and where he’s finding opportunity. He speaks on “Bloomberg Daybreak: Asia.”",
				"duration": "135",
				"bgImg": "https://video.sekindo.com/uploads/cn5/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5caef344e4704256314405.jpg?cbuster=1554969413",
				"clkUrl": "",
				"hlsUrl": "https://video.sekindo.com/uploads/cn5/video/users/hls/24485/video_5b4c8dbbc9a66557872002/vid5caef344e4704256314405.mp4/chunklist_1280.m3u8",
				"keywords": "interviews,markets,u.s.,australia,china,united states,business news,global markets,equities,economic news,Bloomberg.com Web Submit,Audio/Video,Digi Video; Multi Biz Vert,BIntent Inform,Bloomberg Vid; Asia TV Source,Syndication Top Asia Feed,Daybreak Asia,Martin Lakos,Haidi Stroud-Watts,VideoElephant"
			},			{
				"fileId": "339849",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn5/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5cae294d04740604760805.mp4",
				"title": "Speaker Pelosi Says She Has a 'Courteous' Relationship With President Trump",
				"desc": "Apr.10 -- House Speaker Nancy Pelosi talks about her relationship with President Donald Trump. She speaks on the latest episode of “The David Rubenstein Show: Peer-to-Peer Conversations.” The interview took place March 8 in Washington.",
				"duration": "188",
				"bgImg": "https://video.sekindo.com/uploads/cn5/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5cae294d04740604760805.jpg?cbuster=1554917710",
				"clkUrl": "",
				"hlsUrl": "https://video.sekindo.com/uploads/cn5/video/users/hls/24485/video_5b4c8dbbc9a66557872002/vid5cae294d04740604760805.mp4/chunklist_1280.m3u8",
				"keywords": "interviews,politics,David Rubenstein,government news,Rep. Nancy Pelosi,editors&#039; picks,Bloomberg.com Web Submit,Audio/Video,Syndication Business Package,BIntent Inform,Top BTV Interviews,BTV Youtube Video,Syndication Top US Feed,Congress; U.S.,MultiMedia Politics Vertical,Peer To Peer TV Show,VideoElephant"
			},			{
				"fileId": "340162",
				"playListId": "2971",
				"url": "https://video.sekindo.com/uploads/cn5/video/users/origin/24485/video_5b4c8dbbc9a66557872002/vid5caeaacb52adb219889199.mp4",
				"title": "Why the U.S. Labeled Iran's Guard Corps as Terrorists",
				"desc": "Apr.10 -- Brian Hook, U.S. State Department special representative for Iran, discusses the Trump administration's designation of Iran's Islamic Revolutionary Guard Corps as a foreign terrorist organization. He speaks with Bloomberg's Kevin Cirilli on 'What'd You Miss?'",
				"duration": "209",
				"bgImg": "https://video.sekindo.com/uploads/cn5/video/users/converted/24485/video_5b4c8dbbc9a66557872002/vid5caeaacb52adb219889199.jpg?cbuster=1554950860",
				"clkUrl": "",
				"hlsUrl": "https://video.sekindo.com/uploads/cn5/video/users/hls/24485/video_5b4c8dbbc9a66557872002/vid5caeaacb52adb219889199.mp4/chunklist_1280.m3u8",
				"keywords": "politics,markets,terrorism,Donald Trump,Islamic Republic Of Iran,Kevin Cirilli,Brian Hook,Bloomberg.com Web Submit,Audio/Video,Digi Video; Multi Biz Vert,BIntent Inform,Bloomberg Vid; U.S. TV Source,What&#039;d You Miss TV,MultiMedia Politics Vertical,1002Z:US,VideoElephant"
			}];
	configPlayer.encoderUrl = 'https://live.sekindo.com/live/liveJsonVid.php?vidUrl=[TARGET]&origin=[ORIGIN]';
	configPlayer.absolutePath = 'https://live.sekindo.com';
	configPlayer.adImpTimeout = '0';
	configPlayer.domain = 'www.investing.com';
	configPlayer.videoDomain = 'video.sekindo.com';
	configPlayer.hideBars = false;
	configPlayer.isNoAds = false;
	configPlayer.isAmpProject = false;
	configPlayer.vpApi = false; //false; //'PrimisConfig';
	configPlayer.windowsArray = wArray;
	configPlayer.realPrerollTimeout = configPlayer.isAutoPlay !== 3 ? 0 : 0;
	configPlayer.playerMode = 'normal';
	// outstream/flow/sticky configs
	configPlayer.flowMode = 'below';
	configPlayer.flowWidth = 310;
	configPlayer.flowHeight = 260;
	configPlayer.outViewPause = false;
	configPlayer.isKeptOpen = false;
	configPlayer.sliderDir = 'bl'; // br(bottom-right), bl(bottom-left)
	configPlayer.outStreamRemovalTimeout = 0; //in minutes - Number
	configPlayer.sliderOffset = 100;
	configPlayer.sliderSideOffset = 10;
	configPlayer.isCloseBtn = false;
	//template and skin configs
	configPlayer.skin = 'slickSkin';
	configPlayer.allowFullScreen = true;
	configPlayer.minOptimalHeight = 168;
	configPlayer.playerTemplateData = {"isLightBox":1,"isPrimisLogo":1,"isNextBackBtns":1,"goToArticleText":"Go To Article","isResponsive":1,"designColor":"#222","quality":720,"hasPlaylist":1,"isShowPlaylistUnitDuration":0,"isShowPlaylistUnitTitle":1,"isShowPlaylistNowPlaying":1,"isPauseNonViewable":true,"showTitle":1,"logoUrl":"https:\/\/video.sekindo.com\/uploads\/video\/users\/logo\/17520\/logo_3359.png?cbuster=1531729955","logoPosition":"topLeft"};
	configPlayer.useMarginTop = true;
	configPlayer.responsive =  true;
	configPlayer.externRules = [];
	configPlayer.flowSkinWrap = '';
	configPlayer.isNativeTemplate = false;
	configPlayer.isPrimisNativeSkin = false;
	configPlayer.primisSkinParams = [];
	configPlayer.nativeSkinIframe = window.parent.nativeSkinIframe;
	// vpaid behavior
	configPlayer.enableIntentActions = true;
	configPlayer.enableSafeFrame = false;
	configPlayer.blacklistIframe = ["ct.tubemogul.com","s0.2mdn.net\/ads\/richmedia","serving-sys.com\/BurstingRes\/Site-8983\/WSFolders\/112","viewbix.com\/frame\/"];
	configPlayer.blockVpaidjs = false;
	//Debug params
	configPlayer.debug = '';
	configPlayer.debugHls = '';
	configPlayer.demandDebug = [];
	//Client side detected configs
	configPlayer.isDesktop = isDesktop;
	configPlayer.clientInfo = {"extra":{"schemaVer":"10","os":"Windows","osVersion":"10","osVersionMajor":"10","osVersionMinor":"0","deviceManufacturer":"","deviceModel":"","deviceCodeName":"","deviceType":"desktop","browser":"Chrome","browserType":"browser","browserVersion":"72.0.3626.121","browserVersionMajor":"72","browserVersionMinor":"0"},"browser":"chrome","os":"windows","osVer":"","deviceType":"desktop"};
	configPlayer.hls = supportHls; //native, hlsjs or null.
	configPlayer.os = os; //desktop, android5.2 etc...
	configPlayer.vidType = vidType; //native, ioswrapper or jpg
	//GDPR
	configPlayer.gdprIsRequired = 0;
	configPlayer.gdprRawConsent = '';
	configPlayer.gdprDetTimeout = 60000;
	if (false) { console.log("Cached Keywords: " + ''); }

	var randName = 'SekindoSPlayer5caf4f6a3bbd9';
	window[randName] = new SekindoSPlayer(configPlayer, randName);
			})();
