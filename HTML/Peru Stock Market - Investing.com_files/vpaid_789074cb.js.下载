/*
 Chen, Yi-Cyuan 2014-2017
 @license MIT
*/
var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},$jscomp.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:"undefined"!=typeof global&&null!=global?global:t},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(t,e,n,i){if(e){for(n=$jscomp.global,t=t.split("."),i=0;i<t.length-1;i++){var r=t[i];r in n||(n[r]={}),n=n[r]}(e=e(i=n[t=t[t.length-1]]))!=i&&null!=e&&$jscomp.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("Object.is",function(t){return t||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},"es6","es3"),$jscomp.polyfill("Array.prototype.includes",function(t){return t||function(t,e){var n=this;n instanceof String&&(n=String(n));var i=n.length;for(0>(e=e||0)&&(e=Math.max(e+i,0));e<i;e++){var r=n[e];if(r===t||Object.is(r,t))return!0}return!1}},"es7","es3"),$jscomp.checkStringArgs=function(t,e,n){if(null==t)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return t+""},$jscomp.polyfill("String.prototype.includes",function(t){return t||function(t,e){return-1!==$jscomp.checkStringArgs(this,t,"includes").indexOf(t,e||0)}},"es6","es3"),$jscomp.arrayIteratorImpl=function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}},$jscomp.arrayIterator=function(t){return{next:$jscomp.arrayIteratorImpl(t)}},$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.Symbol=function(){var t=0;return function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+t++}}(),$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var t=$jscomp.global.Symbol.iterator;t||(t=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&$jscomp.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}}),$jscomp.initSymbolIterator=function(){}},$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var t=$jscomp.global.Symbol.asyncIterator;t||(t=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator")),$jscomp.initSymbolAsyncIterator=function(){}},$jscomp.iteratorPrototype=function(t){return $jscomp.initSymbolIterator(),(t={next:t})[$jscomp.global.Symbol.iterator]=function(){return this},t},$jscomp.iteratorFromArray=function(t,e){$jscomp.initSymbolIterator(),t instanceof String&&(t+="");var n=0,i={next:function(){if(n<t.length){var r=n++;return{value:e(r,t[r]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i},$jscomp.polyfill("Array.prototype.keys",function(t){return t||function(){return $jscomp.iteratorFromArray(this,function(t){return t})}},"es6","es3"),$jscomp.polyfill("Array.from",function(t){return t||function(t,e,n){e=null!=e?e:function(t){return t};var i=[],r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];if("function"==typeof r){t=r.call(t);for(var o=0;!(r=t.next()).done;)i.push(e.call(n,r.value,o++))}else for(r=t.length,o=0;o<r;o++)i.push(e.call(n,t[o],o));return i}},"es6","es3"),$jscomp.polyfill("Object.getOwnPropertySymbols",function(t){return t||function(){return[]}},"es6","es5"),$jscomp.makeIterator=function(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):$jscomp.arrayIterator(t)},$jscomp.FORCE_POLYFILL_PROMISE=!1,$jscomp.polyfill("Promise",function(t){function e(){this.batch_=null}function n(t){return t instanceof r?t:new r(function(e,n){e(t)})}if(t&&!$jscomp.FORCE_POLYFILL_PROMISE)return t;e.prototype.asyncExecute=function(t){if(null==this.batch_){this.batch_=[];var e=this;this.asyncExecuteFunction(function(){e.executeBatch_()})}this.batch_.push(t)};var i=$jscomp.global.setTimeout;e.prototype.asyncExecuteFunction=function(t){i(t,0)},e.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var t=this.batch_;this.batch_=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.asyncThrow_(t)}}}this.batch_=null},e.prototype.asyncThrow_=function(t){this.asyncExecuteFunction(function(){throw t})};var r=function(t){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[];var e=this.createResolveAndReject_();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}};r.prototype.createResolveAndReject_=function(){function t(t){return function(i){n||(n=!0,t.call(e,i))}}var e=this,n=!1;return{resolve:t(this.resolveTo_),reject:t(this.reject_)}},r.prototype.resolveTo_=function(t){if(t===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof r)this.settleSameAsPromise_(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.resolveToNonPromiseObj_(t):this.fulfill_(t)}},r.prototype.resolveToNonPromiseObj_=function(t){var e=void 0;try{e=t.then}catch(t){return void this.reject_(t)}"function"==typeof e?this.settleSameAsThenable_(e,t):this.fulfill_(t)},r.prototype.reject_=function(t){this.settle_(2,t)},r.prototype.fulfill_=function(t){this.settle_(1,t)},r.prototype.settle_=function(t,e){if(0!=this.state_)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.state_);this.state_=t,this.result_=e,this.executeOnSettledCallbacks_()},r.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var t=0;t<this.onSettledCallbacks_.length;++t)o.asyncExecute(this.onSettledCallbacks_[t]);this.onSettledCallbacks_=null}};var o=new e;return r.prototype.settleSameAsPromise_=function(t){var e=this.createResolveAndReject_();t.callWhenSettled_(e.resolve,e.reject)},r.prototype.settleSameAsThenable_=function(t,e){var n=this.createResolveAndReject_();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},r.prototype.then=function(t,e){function n(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new r(function(t,e){i=t,o=e});return this.callWhenSettled_(n(t,i),n(e,o)),a},r.prototype.catch=function(t){return this.then(void 0,t)},r.prototype.callWhenSettled_=function(t,e){function n(){switch(i.state_){case 1:t(i.result_);break;case 2:e(i.result_);break;default:throw Error("Unexpected state: "+i.state_)}}var i=this;null==this.onSettledCallbacks_?o.asyncExecute(n):this.onSettledCallbacks_.push(n)},r.resolve=n,r.reject=function(t){return new r(function(e,n){n(t)})},r.race=function(t){return new r(function(e,i){for(var r=$jscomp.makeIterator(t),o=r.next();!o.done;o=r.next())n(o.value).callWhenSettled_(e,i)})},r.all=function(t){var e=$jscomp.makeIterator(t),i=e.next();return i.done?n([]):new r(function(t,r){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,n(i.value).callWhenSettled_(o(a.length-1),r),i=e.next()}while(!i.done)})},r},"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",function(t){return t||function(t,e){var n=$jscomp.checkStringArgs(this,t,"startsWith");t+="";var i=n.length,r=t.length;e=Math.max(0,Math.min(0|e,n.length));for(var o=0;o<r&&e<i;)if(n[e++]!=t[o++])return!1;return o>=r}},"es6","es3"),$jscomp.polyfill("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991},"es6","es3"),function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n||4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(e){return t[e]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=112)}([function(t,e,n){function i(){return{errorPixels:[],impressionPixels:[],clickTracking:[],trackingEvents:{creativeView:[],start:[],firstQuartile:[],midpoint:[],thirdQuartile:[],complete:[],mute:[],unmute:[],pause:[],rewind:[],resume:[],fullscreen:[],exitFullscreen:[],expand:[],collapse:[],acceptInvitationLinear:[],acceptInvitation:[],closeLinear:[],skip:[],progress:[]}}}Object.defineProperty(e,"__esModule",{value:!0}),e.NO_SCORE=e.DEFAULT_AUTOPLAY_ALLOWED=e.DEFAULT_REQUIRES_MUTED=e.PLAYSINLINE=e.MP4_MIMETYPE=e.BLANK_MP4=e.FLASH_MIMES=e.HTML5_MIMES=e.DETECTED_SIZE_MATCH_SOURCE=e.VPAID_DEFAULTS=e.VIEW_MODE_NORMAL=e.KILL_STATES=e.DO_NOT_USE_WITHCREDS=e.VAST_VERSION=e.UNLOAD_DETECTION_INIT_EXCEPTION_IDX=e.PARENT_WIN=e.DOMAIN_MATCH_SOURCES=e.WINDOW_EVENTS=e.AD_PIXEL_EVENTS=e.HTML5_PIXEL_EVENTS=e.DOUBLECLICK_URLS=e.PIXEL_FORMATS=e.BID_PLATFORMS=e.IMA_NONLINEAR_SLOT_HEIGHT=e.IMA_MANAGER_EVENT_TYPES=e.IMA_MANAGER_STATES=e.POST_IMP_PROVIDER_ID_PROTECTED_MEDIA=e.POST_IMP_PROVIDER_ID_FORENSIQ=e.POST_IMP_PROVIDER_ID_WHITEOPS=e.POST_IMP_PROVIDER_ID_MOAT=e.POST_IMP_PROVIDER_ID_IAS=e.NO_TIMER=e.DEMAND_PARTNER_MACROS=e.VIEWABILITY=e.HB_BID_PRICE_MACRO=e.TRUST_BUT_VERIFY_MACROS=e.EVENT_TYPES=e.BROADCAST_EVENTS=e.BROADCAST_STATES=e.SLOT_EVENTS=e.SLOT_STATES_VAST_PENDING=e.SLOT_STATES=e.KEY_VAL_SEPARATOR=e.KEYS_SEPARATOR=e.CALL_CHAIN_VARIABLE_ID_SEPARATOR=e.CALL_CHAIN_VARIABLE_SEPARATOR=e.CALL_CHAIN_LINK_SEPARATOR=e.POSTER_SIZES=e.SIZE=e.CALL_CHAIN_IDENTIFIER_BLACKLIST=e.CALL_CHAIN_IDENTIFIERS=e.ORTB_DETAIL=e.IAS_RESIZE_AD=e.IAS_EVENTS=e.IAS_EXTRA_PARAMS=e.JSON_PIXEL_PARAMS=e.VAST_PIXEL_TYPES=e.CREATIVE_TYPES=e.BRIDGE_EVENTS=e.AUTOPLAY_STATES=e.AUTOPLAY_CHECK_STATES=e.AUTOPLAY_CHECK_EVENTS=e.FLASH_OBJECT_ID=e.FLASH_DIV_ID=e.VOLUME_EVENTS=e.RETRY_MS=e.QUARTILE_EVENTS=e.VAST_MACROS=e.VAST_ERRORCODES=e.MAX_URL_LENGTH=e.SSC_TO=e.VID_IO_PARAMS=e.VPAID_CONSTANTS=e.VIDEO_ATTRIBUTES_POSTER=e.VIDEO_ATTRIBUTES=e.ELEMENT_EVENTS=e.VIDEO_EVENTS=e.VPAID_ONCE_EVENTS=e.VPAID_FINAL_EVENTS=e.PIXEL_EVENTS=e.MANIFEST_PIXEL_EVENTS=e.VPAID_EVENTS=e.VD_ERROR_CODES=e.CALL_CHAIN_ERRORS=e.MANIFEST_PARSE_ERRORS=e.VID_IO_ONCE_EVENTS=e.VID_IO_FINAL_EVENTS=e.VID_IO_EVENTS=e.THIRD_PARTY_FEES=e.DEMAND_TYPES=e.RTMP=e.PROMOTE_PROTOCOL_NO_URL=e.ALLOW_SCRIPTS=e.DEFAULT_VOLUME=e.IMA_AD_ERROR_TRUNCATION_LENGTH=e.AD_ERROR_TRUNCATION_LENGTH=e.SHORT_UUID_LENGTH=e.MOAT_DUMMY_VALUE=e.HANDSHAKE_VERSION_2_0=e.NO_TIMEOUT=void 0,e.getDefaultVastPixels=i,e.getDefaultVastData=function(){return(0,r.default)({version:3,hbDetails:null,wrapperUrl:null,wrapperWaterfallCount:0,followAdditionalWrappers:!0,allowMultipleAds:!0,fallbackOnNoAd:!0,duration:null,media:[],jsVpaidUrl:null,flashVpaidUrl:null,xFlvMedia:[],hasPlayableMedia:!1,adParameters:"",clickThrough:null,noad:null,companions:"",icons:!1,linear:!0,skipOffset:o.NOT_IMPLEMENTED,ortb_detail:null,imaTagUrl:null},{errorPixels:[],impressionPixels:[],clickTracking:[],trackingEvents:{creativeView:[],start:[],firstQuartile:[],midpoint:[],thirdQuartile:[],complete:[],mute:[],unmute:[],pause:[],rewind:[],resume:[],fullscreen:[],exitFullscreen:[],expand:[],collapse:[],acceptInvitationLinear:[],acceptInvitation:[],closeLinear:[],skip:[],progress:[]}})};var r=(t=n(5))&&t.__esModule?t:{default:t};e.NO_TIMEOUT=1e9,e.HANDSHAKE_VERSION_2_0="2.0",e.MOAT_DUMMY_VALUE=1,e.SHORT_UUID_LENGTH=8,e.AD_ERROR_TRUNCATION_LENGTH=50,e.IMA_AD_ERROR_TRUNCATION_LENGTH=100,e.DEFAULT_VOLUME=1,e.ALLOW_SCRIPTS="allow-scripts",e.PROMOTE_PROTOCOL_NO_URL="PROMOTE_PROTOCOL_NO_URL",e.RTMP="rtmp",e.DEMAND_TYPES={UNKNOWN:0,FLASH_VPAID:1,JS_VPAID:2,VIDEO:3,BOTH:4,IMA:5,EMPTY_VAST:6,XHR_400_RESPONSE:7,XHR_500_RESPONSE:8,XHR_204_RESPONSE:9},e.THIRD_PARTY_FEES={AD_REQUESTS:0,IMPRESSIONS:1,PERCENT_OF_REV:3},t=e.VID_IO_EVENTS={js_opportunity:"js_opportunity",cm_req_js_opp:"cm_req_js_opp",cm_js_demand_req_resp:"cm_js_demand_req_resp",js_demand_opportunity:"js_demand_opportunity",js_demand_error:"js_demand_error",js_pixel_error:"js_pixel_error",js_demand_missed_opportunity:"js_demand_missed_opportunity",js_impression:"js_impression",js_supply_error:"js_supply_error",js_click:"js_click",js_first_quartile:"js_first_quartile",js_midpoint:"js_midpoint",js_third_quartile:"js_third_quartile",js_complete:"js_complete",js_skip:"js_skip",js_unload:"js_unload",js_volume_mismatch:"js_volume_mismatch",js_warning:"js_warning",openrtb_auction_win:"openrtb_auction_win",openrtb_bidder_error:"openrtb_bidder_error",js_tier_time:"js_tier_time"},e.VID_IO_FINAL_EVENTS={js_complete:"js_complete",js_skip:"js_skip",js_unload:"js_unload",js_supply_error:"js_supply_error"},e.VID_IO_ONCE_EVENTS={js_opportunity:"js_opportunity",js_impression:"js_impression",js_click:"js_click",js_first_quartile:"js_first_quartile",js_midpoint:"js_midpoint",js_third_quartile:"js_third_quartile"},e.MANIFEST_PARSE_ERRORS={PIMPS:"PIMPS",UUID:"UUID",SECURE:"SECURE",AID:"AID",SUPPLY_TAG_ID:"SUPPLY_TAG_ID",TO:"TO",V:"V",COUNTRY:"COUNTRY",SSID:"SSID",WIDTH:"WIDTH",HEIGHT:"HEIGHT",DOMAIN:"DOMAIN",IMP_PXL:"IMP_PXL",TD:"TD",TS:"TS",URLPARAMS:"URLPARAMS",DTO_OBJECT:"DTO_OBJECT",DTO_KEY_STRING:"DTO_KEY_STRING",DTO_KEY_POS:"DTO_KEY_POS",DTO_VALUE_INT:"DTO_VALUE_INT",DTO_VALUE_POS:"DTO_VALUE_POS",DTO_INVALID_DTID:"DTO_INVALID_DTID",OL:"OL",OV:"OV",SSC_PV:"SSC_PV",SSC_TO:"SSC_TO",PP:"PP",DX_ARRAY:"DX_ARRAY",BROADCAST_ARRAY:"BROADCAST_ARRAY",WATERFALL_OBJECT:"WATERFALL_OBJECT",WATERFALL_ID:"WATERFALL_ID",WATERFALL_URL:"WATERFALL_URL",WATERFALL_TO:"WATERFALL_TO",WATERFALL_A_CC:"WATERFALL_A_CC",WATERFALL_TD:"WATERFALL_TD",WATERFALL_TS:"WATERFALL_TS",WATERFALL_SSC_F:"WATERFALL_SSC_F",WATERFALL_SSC_ID:"WATERFALL_SSC_ID",WATERFALL_PIXELS_OBJECT:"WATERFALL_PIXELS_OBJECT",WATERFALL_PIXELS_VPAID_EVENT:"WATERFALL_PIXELS_VPAID_EVENT",WATERFALL_PIXELS_ARRAY:"WATERFALL_PIXELS_ARRAY",WATERFALL_PIXELS_URL:"WATERFALL_PIXELS_URL",WATERFALL_CALL_CHAIN:"WATERFALL_CALL_CHAIN",WATERFALL_CALL_CHAIN_2:"WATERFALL_CALL_CHAIN_2",WATERFALL_PREDECESSORS:"WATERFALL_PREDECESSORS",WATERFALL_PREDECESSORS_2:"WATERFALL_PREDECESSORS_2",WATERFALL_OL:"WATERFALL_OL",PASSTHRU:"PASSTHRU",PIXELS_OBJECT:"PIXELS_OBJECT",PIXELS_INVALID_EVENT:"PIXELS_INVALID_EVENT",PIXELS_ARRAY:"PIXELS_ARRAY",PIXELS_URL:"PIXELS_URL"},e.CALL_CHAIN_ERRORS={INVALID_CALL_CHAIN:"INVALID_CALL_CHAIN",INVALID_SUPPLY_DEMAND_PAIR:"INVALID_SUPPLY_DEMAND_PAIR",NO_SUPPLY_TAG_FOUND:"NO_SUPPLY_TAG_FOUND",INVALID_CALL_CHAIN_LINK_GENERAL:"INVALID_CALL_CHAIN_LINK_GENERAL",INVALID_CALL_CHAIN_LINK:"INVALID_CALL_CHAIN_LINK",INVALID_CALL_CHAIN_ID:"INVALID_CALL_CHAIN_ID",INVALID_CALL_CHAIN_TAG:"INVALID_CALL_CHAIN_TAG",INVALID_CALL_CHAIN_LINK_NO_SUPPLY_TAG:"INVALID_CALL_CHAIN_LINK_NO_SUPPLY_TAG",NOT_A_VALID_CALL_CHAIN_LINK:"NOT_A_VALID_CALL_CHAIN_LINK"},e.VD_ERROR_CODES={TIMEOUT_MANAGER_INIT_ERROR:"TIMEOUT_MANAGER_INIT_ERROR",VIDEO_ELEMENT_MANAGER_INIT_ERROR:"VIDEO_ELEMENT_MANAGER_INIT_ERROR",CABINET_INITIALIZE_ERROR:"CABINET_INITIALIZE_ERROR",PROCESSOR_CREATE_ERROR:"PROCESSOR_CREATE_ERROR",JS_OPPORTUNITY_ERROR:"JS_OPPORTUNITY_ERROR",FIRE_INIT_AD_PIXELS_ERROR:"FIRE_INIT_AD_PIXELS_ERROR",PROCESSOR_INIT_ERROR:"PROCESSOR_INIT_ERROR",PROCESSOR_NEXT_BROADCAST_ERROR:"PROCESSOR_NEXT_BROADCAST_ERROR",SSC_RESULT_MANAGER_INIT_ERROR:"SSC_RESULT_MANAGER_INIT_ERROR",INIT_AD_ERROR:"INIT_AD_ERROR",PIXEL_FACTORY_SET_INIT_PARAMS:"PIXEL_FACTORY_SET_INIT_PARAMS",IFRAME_ON_ERROR:"IFRAME_ON_ERROR",AD_ERROR:"AD_ERROR",PIXEL_NO_EVENT_ERROR:"PIXEL_NO_EVENT_ERROR",HB_BID_ERROR:"HB_BID_ERROR",JSON_PARSE_ERROR:"JSON_PARSE_ERROR",JSON_PARSE_UNKNOWN_ERROR:"JSON_PARSE_UNKNOWN_ERROR",JSON_PARSE_UNKNOWN_ERROR_2:"JSON_PARSE_UNKNOWN_ERROR_2",MANIFEST_PARSE_ERROR:"MANIFEST_PARSE_ERROR",MANIFEST_PARSE_UNKNOWN_ERROR:"MANIFEST_PARSE_UNKNOWN_ERROR",MANIFEST_PARSE_UNKNOWN_ERROR_2:"MANIFEST_PARSE_UNKNOWN_ERROR_2",JSON_RESPONSE_PARSE_ERROR:"JSON_RESPONSE_PARSE_ERROR",JSON_MANIFEST_PARSE_ERROR:"JSON_MANIFEST_PARSE_ERROR",JSON_TIMEOUT:"JSON_TIMEOUT",NO_FILL:"NO_FILL",PLAY_ERROR:"PLAY_ERROR",NO_RESPONSES:"NO_RESPONSES",STOP_AD_CALLED:"STOP_AD_CALLED",SKIP_AD_CALLED:"SKIP_AD_CALLED",NO_SOURCE:"NO_SOURCE",UNKNOWN_REJECTION:"UNKNOWN_REJECTION",UNCAUGHT_AD_CONTAINER_ERROR:"UNCAUGHT_AD_CONTAINER_ERROR",VAST_ERROR_EVENT:"VAST_ERROR_EVENT",VPAID_TIMEOUT:"VPAID_TIMEOUT",VIDEO_TIMEOUT:"VIDEO_TIMEOUT",IS_PLAYING_TIMEOUT:"IS_PLAYING_TIMEOUT",NO_XHR:"NO_XHR",BAD_XHR_STATUS:"BAD_XHR_STATUS",FLASH_DISABLED:"FLASH_DISABLED",FLASH_NOT_SUPPORTED:"FLASH_NOT_SUPPORTED",UNSUPPORTED_MEDIA:"UNSUPPORTED_MEDIA",EMPTY_VAST:"EMPTY_VAST",VAST_TIMEOUT:"VAST_TIMEOUT",TOO_MANY_WRAPPERS:"TOO_MANY_WRAPPERS",WRAPPER_CHAIN_NO_TIME:"VASTS_NO_TIME",AD_STOPPED:"AD_STOPPED",AD_SKIPPED:"AD_SKIPPED",AD_TIMEOUT:"AD_TIMEOUT",XHR_ERROR:"XHR_ERROR",DEMAND_TAG_OPP_ERROR:"DEMAND_TAG_OPP_ERROR",DEMAND_TAG_ERROR:"DEMAND_TAG_ERROR",SUPPLY_TAG_TIMEOUT:"SUPPLY_TAG_TIMEOUT",DEMAND_PARTNER_TIMEOUT:"DEMAND_PARTNER_TIMEOUT",DTO_TIMEOUT:"DTO_TIMEOUT",FLASH_DISPLAY_LOAD_ERROR:"FLASH_DISPLAY_LOAD_ERROR",VAST_LOGIC_ERROR:"VAST_LOGIC_ERROR",CHILD_HANDSHAKE_ERROR:"CHILD_HANDSHAKE_ERROR",CHILD_INIT_AD_ERROR:"CHILD_INIT_AD_ERROR",CHILD_SET_VOLUME_ERROR:"CHILD_SET_VOLUME_ERROR",IMA_WRAPPER_BEGIN_ERROR:"IMA_WRAPPER_BEGIN_ERROR",IMA_MANAGER_LOAD_ERROR:"IMA_MANAGER_LOAD_ERROR",IMA_MANAGER_LOAD_TIMEOUT:"IMA_MANAGER_LOAD_TIMEOUT",VIDEO_WRAPPER_BEGIN_ERROR:"VIDEO_WRAPPER_BEGIN_ERROR",JS_VPAID_BEGIN_ERROR:"JS_VPAID_BEGIN_ERROR",UNCAUGHT_LOAD_IFRAME_ERROR:"UNCAUGHT_LOAD_IFRAME_ERROR",AD_DEAD:"AD_DEAD",CREATE_VIDEO_SLOT_ERROR:"CREATE_VIDEO_SLOT_ERROR",GET_VOLUME_ERROR:"GET_VOLUME_ERROR",ADD_CLICK_LISTENER:"ADD_CLICK_LISTENER",FOUND_SOURCE_ERROR:"FOUND_SOURCE_ERROR",ADD_EVENT_LISTENERS_ERROR:"ADD_EVENT_LISTENERS_ERROR",RESPONSE_XML_NULL:"RESPONSE_XML_NULL",DOM_PARSER_PARSE_FAILURE:"RESPONSE_PARSE_FAILURE",JS_VPAID_EMBED_FAIL:"JS_VPAID_EMBED_FAIL",AD_BRIDGE_CREATE_ERROR:"AD_BRIDGE_CREATE_ERROR",JS_VPAID_BRIDGE_LOAD_ERROR:"JS_VPAID_BRIDGE_LOAD_ERROR",JS_VPAID_BRIDGE_SUBSCRIBE_FAIL:"JS_VPAID_BRIDGE_SUBSCRIBE_FAIL",CREATE_VIDEO_SLOT_LOGIC_ERROR:"CREATE_VIDEO_SLOT_LOGIC_ERROR",VAST_IMPRESSION_PIXELS_ERROR:"VAST_IMPRESSION_PIXELS_ERROR",VAST_ERROR_PIXELS_ERROR:"VAST_ERROR_PIXELS_ERROR",VAST_IS_LINEAR_XML_ERROR:"VAST_IS_LINEAR_XML_ERROR",VAST_IS_WRAPPER_XML_ERROR:"VAST_IS_WRAPPER_XML_ERROR",VAST_NOAD_XML_ERROR:"VAST_NOAD_XML_ERROR",VAST_ERROR_ORTB_DETAIL:"VAST_ERROR_ORTB_DETAIL",VAST_ERROR_EXTENSIONS:"VAST_ERROR_EXTENSIONS",FIND_VIDEO_AD_EXCEPTION:"FIND_VIDEO_AD_EXCEPTION",CREATE_VIDEO_ELEMENT_EXCEPTION:"CREATE_VIDEO_ELEMENT_EXCEPTION",CREATE_VIDEO_ELEMENT_LOGIC_ERROR:"CREATE_VIDEO_ELEMENT_LOGIC_ERROR",CAN_PLAY_VIDEO_EXCEPTION:"CAN_PLAY_VIDEO_EXCEPTION",JS_DEMAND_RESPONSE_EXCEPTION:"JS_DEMAND_RESPONSE_EXCEPTION",VAST_ONLOAD_EXCEPTION:"VAST_ONLOAD_EXCEPTION",EXTEND_VAST_EXCEPTION:"EXTEND_VAST_EXCEPTION",VAST_GET_LINEAR_WRAPPER_XML_ERROR:"VAST_GET_LINEAR_WRAPPER_XML_ERROR",INIT_AD_STATE_INFO_ERROR:"INIT_AD_STATE_INFO_ERROR",INIT_AD_TD_MISMATCH_ERROR:"INIT_AD_TD_MISMATCH_ERROR",INIT_AD_TS_MISMATCH_ERROR:"INIT_AD_TS_MISMATCH_ERROR",INIT_AD_GET_NEW_AD_PARAMETERS_ERROR:"INIT_AD_GET_NEW_AD_PARAMETERS_ERROR",PRE_INIT_STATE_INFO_FAIL:"PRE_INIT_STATE_INFO_FAIL",PRE_INIT_TD_MISMATCH_FAIL:"PRE_INIT_TD_MISMATCH_FAIL",PRE_INIT_TS_MISMATCH_FAIL:"PRE_INIT_TS_MISMATCH_FAIL",PRE_INIT_TV_MISMATCH_FAIL:"PRE_INIT_TV_MISMATCH_FAIL",PRE_INIT_TD_MISMATCH:"PRE_INIT_TD_MISMATCH",PRE_INIT_MISSED_OPPORTUNITY_FAIL:"PRE_INIT_MISSED_OPPORTUNITY_FAIL",DO_GET_VAST_RESPONSE_START_RESPONSE_FAIL:"DO_GET_VAST_RESPONSE_START_RESPONSE_FAIL",AD_VAST_GET_TIMEOUT_INFO_FAIL:"AD_VAST_GET_TIMEOUT_INFO_FAIL",AD_VAST_GET_OPTIONS_FAIL:"AD_VAST_GET_OPTIONS_FAIL",AD_VAST_GET_CALL_CHAIN_VARS_FAIL:"AD_VAST_GET_CALL_CHAIN_VARS_FAIL",AD_VAST_SEND_AD_REQUEST_FAIL:"AD_VAST_SEND_AD_REQUEST_FAIL",AD_VAST_GV_FAIL:"AD_VAST_GV_FAIL",SSC_NO_XHR:"SSC_NO_XHR",SSC_TIMEOUT:"SSC_TIMEOUT",SSC_BAD_XHR_STATUS:"SSC_BAD_XHR_STATUS",SSC_JSON_PARSE_ERROR:"SSC_JSON_PARSE_ERROR",SSC_RESULT_ERROR:"SSC_RESULT_ERROR",SSC_XHR_ERROR:"SSC_XHR_ERROR",SSC_UNKNOWN_ERROR:"SSC_UNKNOWN_ERROR",SSC_UNKNOWN_ERROR_2:"SSC_UNKNOWN_ERROR_2",SSC_MAKE_DEMAND_REQUEST_ERROR:"SSC_MAKE_DEMAND_REQUEST_ERROR",SSC_MAKE_DEMAND_REQUEST_ERROR_2:"SSC_MAKE_DEMAND_REQUEST_ERROR_2",SSC_JS_VPAID_BR_ERROR:"SSC_JS_VPAID_BR_ERROR",SSC_JS_VPAID_BR_ERROR_2:"SSC_JS_VPAID_BR_ERROR_2",SSC_CALL_LOG_EVENT_ERROR:"SSC_CALL_LOG_EVENT_ERROR",NOT_JS_DEMAND_RESPONSE:"NOT_JS_DEMAND_RESPONSE",ALREADY_SENT_DEMAND_RESPONSE:"ALREADY_SENT_DEMAND_RESPONSE",NEED_SSC_RESULT_IN_AD_CONTAINER:"NEED_SSC_RESULT_IN_AD_CONTAINER",JS_VPAID_BRIDGE_BEGIN_ERROR:"JS_VPAID_BRIDGE_BEGIN_ERROR",JS_BRIDGE_MANAGER_CREATE_ERROR:"JS_BRIDGE_MANAGER_CREATE_ERROR",MAX_BROADCAST_TIMEOUT:"MAX_BROADCAST_TIMEOUT",ADS_MANAGER_LOAD_ERROR:"ADS_MANAGER_LOAD_ERROR",IMA_ADS_LOADER_EXCEPTION:"IMA_ADS_LOADER_EXCEPTION",IMA_ADS_LOADER_ERROR:"IMA_ADS_LOADER_ERROR",IMA_ADS_ERROR:"IMA_ADS_ERROR",IMA_INIT_AD_ERROR:"IMA_INIT_AD_ERROR",IMA_ADS_MANAGER_INIT_ERROR:"IMA_ADS_MANAGER_INIT_ERROR",IMA_MANAGER_CREATE_ERROR:"IMA_MANAGER_CREATE_ERROR",PROCESSOR_SUPPLY_ERROR:"PROCESSOR_SUPPLY_ERROR",AD_CONTROLLER_ERROR:"AD_CONTROLLER_ERROR",INIT_AD_ERROR_EXCEPTION:"INIT_AD_ERROR_EXCEPTION",INIT_AD_EMPTY_ERROR:"INIT_AD_EMPTY_ERROR",INIT_AD_NULL_ERROR:"INIT_AD_NULL_ERROR",RECEIVED_NULL_STRING:"RECEIVED_NULL_STRING",IMA_AD_CONTAINER_TIMEOUT:"IMA_AD_CONTAINER_TIMEOUT",HB_BID_REQUEST_TIMEOUT:"HB_BID_REQUEST_TIMEOUT",ORTB_TIMEOUT:"ORTB_TIMEOUT",AD_PIXEL_ERROR:"AD_PIXEL_ERROR",UNLOAD_DETECTION_INIT_ERROR:"UNLOAD_DETECTION_INIT_ERROR",AD_VIDEO_COMPLETE_WITHOUT_AD_IMPRESSION:"AD_VIDEO_COMPLETE_WITHOUT_AD_IMPRESSION",STOP_AD_CALLED_BEFORE_POSTINIT:"STOP_AD_CALLED_BEFORE_POSTINIT",SKIP_AD_CALLED_BEFORE_POSTINIT:"SKIP_AD_CALLED_BEFORE_POSTINIT",DO_NOT_FOLLOW_WRAPPERS:"DO_NOT_FOLLOW_WRAPPERS",UNCAUGHT_FLASH_DEMAND_REQUEST_LOAD_ERROR:"UNCAUGHT_FLASH_DEMAND_REQUEST_LOAD_ERROR",UNCAUGHT_IMA_DEMAND_REQUEST_LOAD_ERROR:"UNCAUGHT_IMA_DEMAND_REQUEST_LOAD_ERROR",UNCAUGHT_MEDIA_DEMAND_REQUEST_LOAD_ERROR:"UNCAUGHT_MEDIA_DEMAND_REQUEST_LOAD_ERROR",UNC_VPAID_DR_GET_TO:"UNC_VPAID_DR_GET_TO",UNC_VPAID_DR_LOAD_ERR:"UNC_VPAID_DR_LOAD_ERR",CREATE_IFRAME_ERROR:"CREATE_IFRAME_ERROR",UNCAUGHT_ON_BROADCAST_VAST_READY_ERROR:"UNCAUGHT_ON_BROADCAST_VAST_READY_ERROR",UNCAUGHT_NEXT_BROADCAST_ERROR:"UNCAUGHT_NEXT_BROADCAST_ERROR",HB_AJAX_FAIL:"HB_AJAX_FAIL",HB_REQUEST_FAIL:"HB_REQUEST_FAIL",HB_MISSING_BID_PARAMS:"HB_MISSING_BID_PARAMS",PIXEL_FIRE_TIMEOUT:"PIXEL_FIRE_TIMEOUT",MAX_PIXEL_TRIES_EXCEEDED:"MAX_PIXEL_TRIES_EXCEEDED",XHR_NON_500:"XHR_NON_500",PIXEL_SEND_ERROR:"PIXEL_SEND_ERROR",GET_VPAID_AD_NOT_FUNCTION:"GET_VPAID_AD_NOT_FUNCTION",NO_GET_VPAID_AD:"NO_GET_VPAID_AD",NO_CONTENT_WINDOW:"NO_CONTENT_WINDOW",NO_IFRAME:"NO_IFRAME",CREATE_IFRAME_ELEMENT_ERROR:"CREATE_IFRAME_ELEMENT_ERROR",STYLE_IFRAME_ERROR:"STYLE_IFRAME_ERROR",APPEND_IFRAME_ERROR:"APPEND_IFRAME_ERROR",IFRAME_CONTENT_WINDOW_ERROR:"IFRAME_CONTENT_WINDOW_ERROR",IFRAME_WINDOW_DOCUMENT_ERROR:"IFRAME_WINDOW_DOCUMENT_ERROR",IFRAME_WRITE_ERROR:"IFRAME_WRITE_ERROR",IFRAME_SET_FUNCTION_ERROR:"IFRAME_SET_FUNCTION_ERROR",IFRAME_CLOSE_ERROR:"IFRAME_CLOSE_ERROR",CREATE_NEW_VIDEO_SLOT_SUPPORTED_MIMES:"CREATE_NEW_VIDEO_SLOT_SUPPORTED_MIMES",ORTB_REQUEST_FAIL:"ORTB_REQUEST_FAIL",ORTB_BIDDER_NO_FILL:"ORTB_BIDDER_NO_FILL",ORTB_NO_BIDS:"ORTB_NO_BIDS",DFP_NOT_CALLED_BID_ABOVE_MAX_PRICE:"DFP_NOT_CALLED_BID_ABOVE_MAX_PRICE",HB_ERROR_PARSING_BID_RESPONSE:"HB_ERROR_PARSING_BID_RESPONSE",REQUEST_VAST_LOGIC_ERROR:"REQUEST_VAST_LOGIC_ERROR",REQUEST_VAST_INIT_FAILED:"REQUEST_VAST_INIT_FAILED",AD_CONTAINER_STOP_AD_DURING_INIT:"AD_CONTAINER_STOP_AD_DURING_INIT",AD_CONTAINER_SKIP_AD_DURING_INIT:"AD_CONTAINER_SKIP_AD_DURING_INIT",DFP_FALLBACK_INVALID_PARAMS:"DFP_FALLBACK_INVALID_PARAMS",MOAT_POST_IMP:"MOAT_POST_IMP",IAS_POST_IMP:"IAS_POST_IMP",FORENSIQ_POST_IMP:"FORENSIQ_POST_IMP",SIZEINFO_POST_IMP:"SIZEINFO_POST_IMP",SSC_POST_IMP:"SSC_POST_IMP",MOAT_SEND:"MOAT_SEND",IAS_SEND:"IAS_SEND"},n=e.VPAID_EVENTS={AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdLoaded:"AdLoaded",AdLinearChange:"AdLinearChange",AdSizeChange:"AdSizeChange",AdExpandedChange:"AdExpandedChange",AdSkippableStateChange:"AdSkippableStateChange",AdDurationChange:"AdDurationChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdError:"AdError",AdLog:"AdLog"},e.MANIFEST_PIXEL_EVENTS={initAd:"initAd"},e.PIXEL_EVENTS={AdStarted:"AdStarted",AdImpression:"AdImpression",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdLoaded:"AdLoaded",AdError:"AdError",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdClickThru:"AdClickThru",AdUserAcceptInvitation:"AdUserAcceptInvitation"},e.VPAID_FINAL_EVENTS={AdError:"AdError",AdStopped:"AdStopped",AdSkipped:"AdSkipped"},e.VPAID_ONCE_EVENTS={AdLoaded:"AdLoaded",AdStarted:"AdStarted",AdImpression:"AdImpression",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete"},e.VIDEO_EVENTS={abort:"abort",canplay:"canplay",canplaythrough:"canplaythrough",click:"click",durationchange:"durationchange",emptied:"emptied",ended:"ended",error:"error",loadeddata:"loadeddata",loadedmetadata:"loadedmetadata",loadstart:"loadstart",pause:"pause",play:"play",playing:"playing",progress:"progress",ratechange:"ratechange",suspend:"suspend",seeked:"seeked",seeking:"seeking",timeupdate:"timeupdate",waiting:"waiting",volumechange:"volumechange"},e.ELEMENT_EVENTS={click:"click"},e.VIDEO_ATTRIBUTES={currentTime:"currentTime",duration:"duration",ended:"ended",paused:"paused",playbackRate:"playbackRate",src:"src",type:"type"},e.VIDEO_ATTRIBUTES_POSTER="poster";var o=e.VPAID_CONSTANTS={NOT_IMPLEMENTED:-1,UNKNOWN:-2};e.VID_IO_PARAMS={batches:"batches",instanceId:"instanceId",event:"event",dtidx:"dtidx",dtnum:"dtnum",yh_id:"yh_id",platform:"platform",qLength:"ql",bv:"bv",bidPrice:"bp",bidFloor:"bf",cb:"cb",timestamp:"timestamp",id:"id",aid:"aid",d:"d",w:"w",h:"h",cc:"cc",v:"v",ol:"ol",ov:"ov",vastVersion:"vv",uuid:"uuid",short_uuid:"suuid",vastErrorCode:"vec",reason:"reason",auctionCallChain:"a_cc",parentSupplyTagId:"ps_id",callChainIndicies:"cc_i",initialStage_notnull:"i_sn",initialStage_w:"i_w",initialStage_h:"i_h",initialStageWidth:"i_sw",initialStageHeight:"i_sh",initialStageDisplayState:"i_sds",initialStateInfoExternalInterface__objectID:"i_E_o",initialStateInfoExternalInterface__available:"i_E_a",initialStateInfoExternalInterface__error__getQualifiedClassName:"i_E_e",initialNo_element:"i_ne",initialOffsetWidth:"i_ow",initialOffsetHeight:"i_oh",initialClientWidth:"i_cw",initialClientHeight:"i_ch",initialScrollWidth:"i_Sw",initialScrollHeight:"i_Sh",initialGetBoundingClientRect__left:"i_bl",initialGetBoundingClientRect__top:"i_bt",initialGetBoundingClientRect__right:"i_br",initialGetBoundingClientRect__bottom:"i_bb",initialVpaidWidth:"vw",initialVpaidHeight:"vh",initialVpaidViewMode:"i_vv",inView:"in_v",loaderInfo__swfVersion:"l_s",loaderInfo__loaderURL:"l_l",loaderInfo__actionScriptVersion:"l_a",ExternalInterface__available:"E_a",ExternalInterface__error__getQualifiedClassName:"E_e",window__top__location__href:"d_wtlh",window__location__href:"d_wlh",window__top__location:"d_wtl",window__location__ancestorOrigins:"d_wla",Security__pageDomain:"d_Sp",document__referrer:"d_dr",ancestorOrigins:"d_ao",parentHostnames:"d_ph",domain_match:"d_m",domain_match_source:"d_ms",overflow_required:"o_r",overflow_optional:"o_o",overflow_exclude:"o_e",environmentInfoError:"e_e",stage_notnull:"s_sn",stage_w:"s_w",stage_h:"s_h",stageWidth:"s_sw",stageHeight:"s_sh",stageDisplayState:"s_sds",stateInfoExternalInterface__objectID:"s_E_o",stateInfoExternalInterface__available:"s_E_a",stateInfoExternalInterface__error__getQualifiedClassName:"s_E_e",timeOnPage:"time_on_page",no_element:"s_ne",offsetWidth:"s_ow",offsetHeight:"s_oh",clientWidth:"s_cw",clientHeight:"s_ch",scrollWidth:"s_Sw",scrollHeight:"s_Sh",getBoundingClientRect__left:"s_bl",getBoundingClientRect__top:"s_bt",getBoundingClientRect__right:"s_br",getBoundingClientRect__bottom:"s_bb",vpaidWidth:"s_vw",vpaidHeight:"s_vh",vpaidViewMode:"s_vv",detected_size_width:"ds_w",detected_size_height:"ds_h",detected_size_match_source:"ds_ms",idx:"idx",adLoaded:"adl",adImpression:"adi",tierStartTime:"t_st_pt",tierIdx:"t_idx_pt",tierFirstTagRequestTime:"t_ftst_pt",tierFirstVastResponseUsedTime:"t_fvst_pt",tierNumberVastResponsesUsed:"t_nv_pt",tierDoneTime:"t_dt_pt",numBroadcastQueues:"num_bq_pt",numDemandTags:"num_dt_pt"},e.SSC_TO={UNKNOWN:-1,NOT_CALLED:0,TIMEOUT:1,ERROR:2,NON_ERROR:3,OTHER:4},e.MAX_URL_LENGTH=2e3,e.VAST_ERRORCODES={VAST_ERRORCODE_100:100,VAST_ERRORCODE_101:101,VAST_ERRORCODE_102:102,VAST_ERRORCODE_200:200,VAST_ERRORCODE_201:201,VAST_ERRORCODE_202:202,VAST_ERRORCODE_203:203,VAST_ERRORCODE_300:300,VAST_ERRORCODE_301:301,VAST_ERRORCODE_302:302,VAST_ERRORCODE_303:303,VAST_ERRORCODE_400:400,VAST_ERRORCODE_401:401,VAST_ERRORCODE_402:402,VAST_ERRORCODE_403:403,VAST_ERRORCODE_405:405,VAST_ERRORCODE_500:500,VAST_ERRORCODE_501:501,VAST_ERRORCODE_502:502,VAST_ERRORCODE_503:503,VAST_ERRORCODE_600:600,VAST_ERRORCODE_601:601,VAST_ERRORCODE_602:602,VAST_ERRORCODE_603:603,VAST_ERRORCODE_604:604,VAST_ERRORCODE_900:900,VAST_ERRORCODE_901:901,SS_VAST_ERRORCODE_1301:1301,SS_VEC_1302_HTTP_TIMEOUT:1302,SS_VEC_1303_HTTP_ERROR:1303,SS_VEC_1304_NO_HTTP_RESPONSE:1304,SS_VEC_1305_4XX_HTTP_STATUS:1305,SS_VEC_1306_5XX_HTTP_STATUS:1306,SS_VEC_1307_OTHER_NON_200_HTTP_STATUS:1307,SS_VEC_1308_VAST_TIMEOUT:1308,SS_VEC_1309_WRAPPER_CHAIN_TIMEOUT:1309,SS_VEC_1310_BID_BELOW_FLOOR:1310,SS_VEC_1311_MIXED_CONTENT:1311,SS_VEC_1312_INDEX_REQUEST_TIMEOUT:1312,SS_VEC_1313_HB_ERROR_REQUESTING_VAST:1313,SS_VEC_1314_HB_ERROR_MISSING_REQUEST_PARAMS:1314,SS_VEC_1315_HB_BID_REQUEST_TIMEOUT:1315,SS_VEC_1316_MAX_BROADCAST_TIMEOUT:1316,SS_VEC_1317_OPENRTB_RESPONSE_TIMEOUT:1317,SS_VEC_1318_OPENRTB_REQUEST_ERROR:1318,SS_VEC_1319_OPENRTB_NO_BIDS:1319,SS_VEC_1320_IMA_MANAGER_LOADER_ERROR:1320,SS_VEC_1321_IMA_MANAGER_LOADER_TIMEOUT:1321,SS_VEC_1322_DFP_NOT_CALLED_BID_ABOVE_MAX:1322,SS_VEC_1323_HB_ERROR_PARSING_BID_RESPONSE:1323,SS_VAST_ERRORCODE_1501:1501,SS_VAST_ERRORCODE_1502:1502,SS_VAST_ERRORCODE_1503:1503,SS_VAST_ERRORCODE_1504:1504,SS_VAST_ERRORCODE_1505:1505,SS_VAST_ERRORCODE_1506:1506,SS_VAST_ERRORCODE_1507:1507,SS_VAST_ERRORCODE_1508:1508,SS_VAST_ERRORCODE_1509:1509,SS_VAST_ERRORCODE_1510:1510,SS_VAST_ERRORCODE_1511:1511,SS_VAST_ERRORCODE_1512:1512,SS_VAST_ERRORCODE_1513:1513,SS_VAST_ERRORCODE_1514:1514,SS_VAST_ERRORCODE_1515:1515,SS_VEC_1516_SUPPLY_TAG_TIMEOUT:1516,SS_VEC_1517_DEMAND_TAG_TIMEOUT:1517,SS_VEC_1520_DEMAND_PARTNER_TIMEOUT:1520,SS_VEC_1521_IMA_ADS_LOADER_EXCEPTION:1521,SS_VEC_1522_IMA_ADS_LOADER_ERROR:1522,SS_VEC_1523_IMA_ADS_ERROR:1523,SS_VEC_1524_IMA_INIT_AD_ERROR:1524,SS_VEC_1525_IMA_ADS_MANAGER_INIT_AD_ERROR:1525,SS_VEC_1526_IMA_WRAPPER_BEGIN_ERROR:1526,SS_VEC_1527_UNCAUGHT_FLASH_DEMAND_REQUEST_LOAD_ERROR:1527,SS_VEC_1528_UNCAUGHT_IMA_DEMAND_REQUEST_LOAD_ERROR:1528,SS_VEC_1529_UNCAUGHT_MEDIA_DEMAND_REQUEST_LOAD_ERROR:1529,SS_VEC_1530_UNCAUGHT_VPAID_DEMAND_REQUEST_LOAD_ERROR:1530,SS_VEC_1531_ORTB_BIDDER_NO_FILL:1531,SS_VEC_1533_MOAT_POST_IMP:1533,SS_VEC_1534_IAS_POST_IMP:1534,SS_VEC_1535_FORENSIQ_POST_IMP:1535,SS_VEC_1536_SIZEINFO_POST_IMP:1536,SS_VEC_1537_SSC_POST_IMP:1537,SS_VEC_1538_PROTECTED_MEDIA_POST_IMP:1538,SS_VEC_1539_MOAT_SEND:1539,SS_VEC_1540_IAS_SEND:1540},e.VAST_MACROS={ERRORCODE:"[ERRORCODE]",CACHEBUSTING:"[CACHEBUSTING]"},e.QUARTILE_EVENTS=[{event:n.AdVideoStart,pixel:null,value:0},{event:n.AdVideoFirstQuartile,pixel:t.js_first_quartile,value:25},{event:n.AdVideoMidpoint,pixel:t.js_midpoint,value:50},{event:n.AdVideoThirdQuartile,pixel:t.js_third_quartile,value:75}],e.RETRY_MS=200,e.VOLUME_EVENTS={AdLoaded:!0,AdStarted:!0,AdVideoStart:!0},e.FLASH_DIV_ID="vdDiv",e.FLASH_OBJECT_ID="vdObj",e.AUTOPLAY_CHECK_EVENTS={RESOLVED:"RESOLVED"},e.AUTOPLAY_CHECK_STATES={INIT:"INIT",CHECKING:"CHECKING",RESOLVED:"RESOLVED",DEAD:"DEAD"},e.AUTOPLAY_STATES={INIT:"INIT",CHECKING:"CHECKING",CLICK_TO_PLAY:"CLICK_TO_PLAY",RESOLVED:"RESOLVED",DEAD:"DEAD"},e.BRIDGE_EVENTS={EMBED_SUCCESS:"EMBED_SUCCESS",EMBED_FAIL:"EMBED_FAIL",SWF_IS_READY:"SWF_IS_READY",SWF_IS_READY_TIMEOUT:"SWF_IS_READY_TIMEOUT"},e.CREATIVE_TYPES={MEDIA:"MEDIA",JS_VPAID:"JS_VPAID",XFLV:"XFLV",FLASH_VPAID:"FLASH_VPAID",IMA:"IMA"},e.VAST_PIXEL_TYPES={VAST_ERROR:"VAST_ERROR",VAST_IMPRESSION:"VAST_IMPRESSION",VAST_CLICKTRACKING:"VAST_CLICKTRACKING",VAST_CREATIVEVIEW:"VAST_CREATIVEVIEW",VAST_START:"VAST_START",VAST_FIRSTQUARTILE:"VAST_FIRSTQUARTILE",VAST_MIDPOINT:"VAST_MIDPOINT",VAST_THIRDQUARTILE:"VAST_THIRDQUARTILE",VAST_COMPLETE:"VAST_COMPLETE",VAST_MUTE:"VAST_MUTE",VAST_UNMUTE:"VAST_UNMUTE",VAST_PAUSE:"VAST_PAUSE",VAST_REWIND:"VAST_REWIND",VAST_RESUME:"VAST_RESUME",VAST_FULLSCREEN:"VAST_FULLSCREEN",VAST_EXITFULLSCREEN:"VAST_EXITFULLSCREEN",VAST_EXPAND:"VAST_EXPAND",VAST_COLLAPSE:"VAST_COLLAPSE",VAST_ACCEPTINVITATIONLINEAR:"VAST_ACCEPTINVITATIONLINEAR",VAST_ACCEPTINVITATION:"VAST_ACCEPTINVITATION",VAST_CLOSELINEAR:"VAST_CLOSELINEAR",VAST_SKIP:"VAST_SKIP",VAST_PROGRESS:"VAST_PROGRESS"},e.JSON_PIXEL_PARAMS={url:"url",w:"w",h:"h",declaredDomain:"decl_d",declaredWidth:"decl_w",declaredHeight:"decl_h",detectedDomain:"det_d",detectedWidth:"det_w",detectedHeight:"det_h",fullUrl:"fullUrl",td:"td",ts:"ts",cb:"cb"},e.IAS_EXTRA_PARAMS={aCc:"a_cc",aId:"advId",country:"country",declaredDomain:"decl_d",declaredWidth:"decl_w",declaredHeight:"decl_h",detectedDomain:"det_d",detectedWidth:"det_w",detectedHeight:"det_h",ssId:"ssid"},e.IAS_EVENTS={AdLoaded:n.AdLoaded,AdStarted:n.AdStarted,AdStopped:n.AdStopped,AdSkipped:n.AdSkipped,AdSkippableStateChange:n.AdSkippableStateChange,AdDurationChange:n.AdDurationChange,AdVolumeChange:n.AdVolumeChange,AdImpression:n.AdImpression,AdVideoStart:n.AdVideoStart,AdVideoFirstQuartile:n.AdVideoFirstQuartile,AdVideoMidpoint:n.AdVideoMidpoint,AdVideoThirdQuartile:n.AdVideoThirdQuartile,AdVideoComplete:n.AdVideoComplete,AdClickThru:n.AdClickThru,AdPaused:n.AdPaused,AdPlaying:n.AdPlaying,AdError:n.AdError},e.IAS_RESIZE_AD="resizeAd",e.ORTB_DETAIL="ortb-detail",e.CALL_CHAIN_IDENTIFIERS={SUPPLY:"s",DEMAND:"d",ACCOUNT:"a",MOAT_USED:"mt",IAS_USED:"ias",FORENSIQ_USED:"f",PROTECTED_MEDIA_USED:"p",DIRECT_CONNECTION:"dc"},e.CALL_CHAIN_IDENTIFIER_BLACKLIST={sf:!0,a:!0},e.SIZE={XS:0,S:250,M:350,L:500,XL:800,UNKNOWN:-1},e.POSTER_SIZES={"16:9":[{width:426,height:240,filename:"426x240"},{width:640,height:360,filename:"640x360"},{width:720,height:480,filename:"720x480"},{width:1280,height:720,filename:"1280x720"},{width:1920,height:1080,filename:"1920x1080"}],"4:3":[{width:176,height:144,filename:"176x144"},{width:320,height:240,filename:"320x240"},{width:480,height:360,filename:"480x360"},{width:640,height:480,filename:"640x480"},{width:1280,height:960,filename:"1280x960"}]},e.CALL_CHAIN_LINK_SEPARATOR="_",e.CALL_CHAIN_VARIABLE_SEPARATOR="-",e.CALL_CHAIN_VARIABLE_ID_SEPARATOR=".",e.KEYS_SEPARATOR="&",e.KEY_VAL_SEPARATOR="=",n=e.SLOT_STATES={DEMAND_TAG_READY:"DEMAND_TAG_READY",REQUESTING_INIT:"REQUESTING_INIT",INITIALIZED:"INITIALIZED",INIT_FAILED:"INIT_FAILED",REQUESTING_VAST:"REQUESTING_VAST",NO_VAST:"NO_VAST",VAST_READY:"VAST_READY",REQUESTING_VPAID:"REQUESTING_VPAID",VPAID_FAILED:"VPAID_FAILED"},e.SLOT_STATES_VAST_PENDING=[n.REQUESTING_INIT,n.INITIALIZED,n.REQUESTING_VAST],n=e.SLOT_EVENTS={Initialized:"Initialized",VastDone:"VastDone"},e.BROADCAST_STATES={INIT:"INIT",REQUESTING:"REQUESTING",DONE:"DONE"};var a=e.BROADCAST_EVENTS={VastReady:"VastReady",Done:"Done",VastRequestTimerTimeout:"VastRequestTimerTimeout"};e.EVENT_TYPES={_:t,Slot:n,Broadcast:a},e.TRUST_BUT_VERIFY_MACROS={DETECTED_DOMAIN:"{{DETECTED_DOMAIN}}",DETECTED_URL:"{{DETECTED_URL}}",DETECTED_ENCODED_URL:"{{DETECTED_ENCODED_URL}}",DETECTED_DOUBLE_ENCODED_URL:"{{DETECTED_DOUBLE_ENCODED_URL}}",DETECTED_HEIGHT:"{{DETECTED_HEIGHT}}",DETECTED_WIDTH:"{{DETECTED_WIDTH}}",DETECTED_IN_VIEW:"{{IS_INVIEW}}",DETECTED_IS_VISIBLE:"{{IS_VISIBLE}}"},e.HB_BID_PRICE_MACRO="{{BID_PRICE}}",e.VIEWABILITY={UNINITIALIZED:-2,UNKNOWN:-1,NOT_VIEWABLE:0,VIEWABLE:1},e.DEMAND_PARTNER_MACROS={D_WIDTH:"{{D_WIDTH}}",D_HEIGHT:"{{D_HEIGHT}}"},e.NO_TIMER=0,e.POST_IMP_PROVIDER_ID_IAS="i",e.POST_IMP_PROVIDER_ID_MOAT="m",e.POST_IMP_PROVIDER_ID_WHITEOPS="w",e.POST_IMP_PROVIDER_ID_FORENSIQ="f",e.POST_IMP_PROVIDER_ID_PROTECTED_MEDIA="p",e.IMA_MANAGER_STATES={INIT:"INIT",REQUEST_SCRIPT:"REQUEST_SCRIPT",SCRIPT_LOADED:"SCRIPT_LOADED",LOADED:"LOADED",LOAD_ERROR:"LOAD_ERROR",DEAD:"DEAD"},e.IMA_MANAGER_EVENT_TYPES={LOADED:"LOADED",LOAD_ERROR:"LOAD_ERROR"},e.IMA_NONLINEAR_SLOT_HEIGHT=150,e.BID_PLATFORMS={conversant:"conversant",rubicon:"rubicon",spotx:"spotx",stickyads:"stickyads",telaria:"telaria",appnexus:"appnexus",districtm:"districtm",brealtime:"brealtime",openx:"openx",index:"index",ima:"ima",synacor:"synacor",vuble:"vuble",unruly:"unruly",dfp:"dfp",beachfront:"beachfront",oath:"oath",lkqd:"lkqd",sonobi:"sonobi",pubmatic:"pubmatic",facebook:"facebook",yieldnexus:"yieldnexus",ortb:"ortb",a9:"a9"},e.PIXEL_FORMATS={js:"js",image:"image",iframe:"iframe"},e.DOUBLECLICK_URLS=["//googleads.g.doubleclick.net","//pubads.g.doubleclick.net"],e.HTML5_PIXEL_EVENTS={cached:"cached",error:"error",abort:"abort",load:"load"},e.AD_PIXEL_EVENTS={DONE:"DONE"},e.WINDOW_EVENTS={unload:"unload"},e.DOMAIN_MATCH_SOURCES={WINDOW_LOCATION_ANCESTORORIGINS:"d_wla",WINDOW_TOP_LOCATION:"d_wtl",WINDOW_LOCATION:"d_wl",TOP_PARENT:"d_p",DOCUMENT_REFERRER:"d_r"},e.PARENT_WIN="win",e.UNLOAD_DETECTION_INIT_EXCEPTION_IDX=-1,e.VAST_VERSION={SYNACOR:"-3.0",IMA:"-2.0",UNKNOWN:"-1.0",NOT_VAST:"0.0",_1_0:"1.0",_2_0:"2.0",_3_0:"3.0",_4_0:"4.0"},e.DO_NOT_USE_WITHCREDS=["//ads.nexage.com"],e.KILL_STATES={START:"START",KILLED:"KILLED",STOPPED:"STOPPED"},e.VIEW_MODE_NORMAL="normal",e.VPAID_DEFAULTS={getAdExpanded:!0,getAdCompanions:"",getAdDuration:o.UNKNOWN,getAdHeight:o.UNKNOWN,getAdWidth:o.UNKNOWN,getAdViewMode:o.UNKNOWN,getAdIcons:!1,getAdLinear:!0,getAdRemainingTime:o.UNKNOWN,getAdSkippableState:!1},e.DETECTED_SIZE_MATCH_SOURCE={client:"client",vpaid:"vpaid",manifest:"vpaid",none:"vpaid"},e.HTML5_MIMES="video/mp4 application/javascript video/webm video/quicktime video/ogg video/3gpp".split(" "),e.FLASH_MIMES=["video/x-flv","application/x-shockwave-flash"],e.BLANK_MP4="data:video/mp4;base64, AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw",e.MP4_MIMETYPE="video/mp4",e.PLAYSINLINE="playsinline",e.DEFAULT_REQUIRES_MUTED=!0,e.DEFAULT_AUTOPLAY_ALLOWED=!0,e.NO_SCORE=-1},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return t.substr(n||0,e.length)===e}function a(t,e,n){if(t=t+"//"+e,null===n)return t;for(var i in e=[],n)n.hasOwnProperty(i)&&e.push(i+"="+encodeURIComponent(n[i]));return t+"?"+e.join("&")}function s(t){return null!==t.getElementsByTagName("script")?t.getElementsByTagName("script")[0]:null}function u(t,e,n,i){try{var r=new Image(1,1);try{r.addEventListener(b.HTML5_PIXEL_EVENTS.load,n),r.addEventListener(b.HTML5_PIXEL_EVENTS.error,i)}catch(t){n()}r.src=e,t.body.appendChild(r)}catch(r){t=t.createElement("img");try{t.addEventListener(b.HTML5_PIXEL_EVENTS.load,n),t.addEventListener(b.HTML5_PIXEL_EVENTS.error,i)}catch(t){n()}t.src=e}}function _(t,e){var n=t.createElement("script");n.type="text/javascript",n.async=!0;var i=s(t);i?i.parentNode.insertBefore(n,i):t.head.appendChild(n),n.src=e}function l(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";return e?(n&&(n='sandbox="'+n+'"'),"<iframe "+n+' id="'+t+'" frameborder="0" allowtransparency="true" marginheight="0" marginwidth="0" width="0" hspace="0" vspace="0" height="0" style="height:0px;width:0px;display:none;" scrolling="no" src="'+e+'"> </iframe>'):""}function d(t,e,n,i){t=l(t,n,i),(n=document.createElement("div")).innerHTML=t,e.body.appendChild(n.firstChild)}function c(t,e){return t?"object"===(void 0===t?"undefined":R(t))?t=JSON.stringify(t):"string"!=typeof t&&(t=String(t)):t=String(t),t.length>e?t.slice(0,e):t}function h(t){return isNaN(t)||0>t?b.SIZE.UNKNOWN:t<b.SIZE.S?b.SIZE.XS:t<b.SIZE.M?b.SIZE.S:t<=b.SIZE.L?b.SIZE.M:t<b.SIZE.XL?b.SIZE.L:b.SIZE.XL}function A(t,e){return 4<3*t/e?"16:9":"4:3"}function f(t){return(0,m.default)(t)&&0===t.indexOf("www.")?t.substr(4):t}function p(t,e){return!!(0,g.default)(t,function(t){return o(e,D+t)||o(e,V+t)})}function E(t){try{for(var e=t,n=0;n<C;n++){var i=decodeURIComponent(e);if(i===e)break;e=i}return e}catch(e){return t}}Object.defineProperty(e,"__esModule",{value:!0}),e.INSECURE_PROTOCOL=e.SECURE_PROTOCOL=void 0;var R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.getCb=function(){return Math.floor(1e7*Math.random())},e.getProtocol=function(t){return t?D:V},e.stringStartsWith=o,e.promoteProtocol=function(t,e){if(!t)throw Error(b.PROMOTE_PROTOCOL_NO_URL);return e===D&&o(t,V)?e+t.substr(V.length):t},e.getPageProtocol=function(){for(var t=null,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;e&&e!==e.parent;)try{if((t=e.location.protocol)&&(t===D||t===V))return t;e=e.parent}catch(n){try{if(e.document.referrer&&0<e.document.referrer.length){t=e.document.referrer.match(/^(https?:)\/\//)[1];break}}catch(t){break}}return null===t?V:t!==D&&t!==V?D:t},e.makeUrl=a,e.getScriptLocation=s,e.addImage=u,e.addScript=_,e.createTrackPixelIframeHtml=l,e.addIframe=d,e.firePixels=function(t,e){if((0,O.default)(e))for(var n=0;n<e.length;n++){var i=e[n];(0,m.default)(i)?u(t,i,function(){},function(){}):i.format===b.PIXEL_FORMATS.image?u(t,i.url,function(){},function(){}):i.format===b.PIXEL_FORMATS.js?_(t,i.url):i.format===b.PIXEL_FORMATS.iframe&&d("px_"+Math.round(1e5*Math.random()),t,i.url,"allow-scripts allow-same-origin")}},e.checkVPAIDInterface=function(t){return t.handshakeVersion&&"function"==typeof t.handshakeVersion&&t.initAd&&"function"==typeof t.initAd&&t.startAd&&"function"==typeof t.startAd&&t.stopAd&&"function"==typeof t.stopAd&&t.skipAd&&"function"==typeof t.skipAd&&t.resizeAd&&"function"==typeof t.resizeAd&&t.pauseAd&&"function"==typeof t.pauseAd&&t.resumeAd&&"function"==typeof t.resumeAd&&t.expandAd&&"function"==typeof t.expandAd&&t.collapseAd&&"function"==typeof t.collapseAd&&t.subscribe&&"function"==typeof t.subscribe&&t.unsubscribe&&"function"==typeof t.unsubscribe&&t.getAdVolume&&"function"==typeof t.getAdVolume&&t.getAdExpanded&&"function"==typeof t.getAdExpanded&&t.getAdCompanions&&"function"==typeof t.getAdCompanions&&t.getAdDuration&&"function"==typeof t.getAdDuration&&t.getAdHeight&&"function"==typeof t.getAdHeight&&t.getAdIcons&&"function"==typeof t.getAdIcons&&t.getAdLinear&&"function"==typeof t.getAdLinear&&t.getAdRemainingTime&&"function"==typeof t.getAdRemainingTime&&t.getAdSkippableState&&"function"==typeof t.getAdSkippableState&&t.getAdWidth&&"function"==typeof t.getAdWidth},e.getRequestMethod=function(t,e){var n=new XMLHttpRequest,i=!1;if("withCredentials"in n)n.open("GET",t,!0),e&&(i=n.withCredentials=!0);else{if("undefined"==typeof XDomainRequest)return null;(n=new XDomainRequest).open("GET",t)}return{xhr:n,withCredentials:i}},e.canPlayVideo=function(t,e){return(t.canPlayType&&""!==t.canPlayType(e.mimetype).replace(/no/,"")||!t.canPlayType)&&(0,m.default)(e.url)&&e.url.substr(0,b.RTMP.length)!==b.RTMP},e.getTruncatedString=c,e.getShortUuid=function(t){return c(t,b.SHORT_UUID_LENGTH)},e.getReason=function(t){if(b.VD_ERROR_CODES.hasOwnProperty(t))return t;if((0,m.default)(t)){var e=t.substr(0,b.VD_ERROR_CODES.IMA_ADS_ERROR.length)===b.VD_ERROR_CODES.IMA_ADS_ERROR||t.substr(0,b.VD_ERROR_CODES.IMA_ADS_LOADER_ERROR.length)===b.VD_ERROR_CODES.IMA_ADS_LOADER_ERROR?b.IMA_AD_ERROR_TRUNCATION_LENGTH:b.AD_ERROR_TRUNCATION_LENGTH;return c(t,e)}return"object"===(void 0===t?"undefined":R(t))?c(JSON.stringify(t),b.AD_ERROR_TRUNCATION_LENGTH):c(String(t),b.AD_ERROR_TRUNCATION_LENGTH)},e.getTimeStr=function(){var t=new Date;return"["+t.getMinutes()+":"+t.getSeconds()+":"+t.getMilliseconds()+"]"},e.getDocumentAndWindow=function(t){var e=void 0,n=void 0;try{n=(e=t.ownerDocument).defaultView||e.parentWindow}catch(t){e=document,n=window}return null!==e&&null!==n||(e=document,n=window),{document:e,window:n}},e.printError=function(t){return t.fileName+":"+t.lineNumber+" "+t.message},e.getSize=h,e.sizeMatch=function(t,e){return h(t.width)===h(e.width)},e.isOrtbDemandTag=function(t){return t.hasOwnProperty("ortb")&&1===t.ortb},e.isOpenmarketDemandTag=function(t){return t.hasOwnProperty("ortb")&&1===t.ortb&&t.hasOwnProperty("url")&&t.url.includes("springserve.net/bc2")},e.getORtbElement=function(t,e,n){try{var i=t.getElementsByTagName(e)[0].textContent.trim();try{return n(i)}catch(t){return i}}catch(t){return""}},e.getBooleanAttribute=function(t,e,n){return t.hasAttribute(e)?"true"===t.getAttribute(e):n},e.getHistoryManager=function(){return{demand_events:{request:{},response:{},opportunity:{},error:{}},blockedRequests:{},supplyTagOpportunities:{}}},e.identityWrapper=function(t){return t},e.forEachType=function(t,e){(0,v.default)(t,function(t,n){(0,v.default)(t,function(t,i){e(t,n,i)})})},e.getClosestAspectRatio=A,e.getPosterFilename=function(t,e){e=b.POSTER_SIZES[A(t,e)];for(var n=0;n<e.length;n++){var i=e[n];if(t<=i.width)return i.filename}return e[e.length-1].filename},e.getPoster=function(t,e,n){return a(t,e+n+".jpg",null)},e.cleanDomain=f,e.domainMatch=function(t,e){return f(t.domain)===f(e.domain_match)},e.cssreset=function(t){t.style.margin=0,t.style.padding=0,t.style.border=0,t.style.outline=0,t.style["font-size"]="100%",t.style["vertical-align"]="baseline",t.style.background="transparent"},e.styleButton=function(t){t.style.width="60px",t.style.height="30px",t.style.backgroundColor="rgba(33,33,33,.8)",t.style.color="rgba(255, 255, 255, 0.6)",t.style.display="block",t.style.position="absolute",t.innerHTML="Skip ad",t.style.bottom="10px",t.style.right="10px",t.style.border="none",t.style.borderRadius="15px",t.style.cursor="pointer"},e.isUrlPrefix=p,e.shouldUseWithCreds=function(t){return!p(b.DO_NOT_USE_WITHCREDS,t)},e.unencodeComponent=E,e.unencodeParam=function t(e){return(0,m.default)(e)?E(e):(0,S.default)(e)||(0,y.default)(e)?e:(0,O.default)(e)?(0,I.default)(e,t):"object"===(void 0===e?"undefined":R(e))?(0,T.default)(e,function(e){return t(e)}):E(e)},e.getSizeInfo=function(t,e){var n=null;return e.environmentVars&&(n=P.getStateInfo(e.environmentVars)),n&&0<n.detectedWidth?{width:n.detectedWidth,height:n.detectedHeight,source:b.DETECTED_SIZE_MATCH_SOURCE.client}:0<e.width?{width:e.width,height:e.height,source:b.DETECTED_SIZE_MATCH_SOURCE.vpaid}:t&&0<t.width?{width:t.width,height:t.height,source:b.DETECTED_SIZE_MATCH_SOURCE.manifest}:{width:b.VPAID_CONSTANTS.UNKNOWN,height:b.VPAID_CONSTANTS.UNKNOWN,source:b.DETECTED_SIZE_MATCH_SOURCE.none}};var O=r(n(4)),S=r(n(90)),y=r(n(51)),v=r(n(2)),T=r(n(18)),I=r(n(12)),m=r(n(50)),g=r(n(91)),b=i(n(0)),P=i(n=n(205)),D=e.SECURE_PROTOCOL="https:",V=e.INSECURE_PROTOCOL="http:",C=5},function(t,e,n){var i=n(201),r=n(48),o=n(89),a=n(4);t.exports=function(t,e){return(a(t)?i:r)(t,o(e))}},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();t=r(t=n(38));var s=n(9),u=r(s),_=r(s=n(28)),l=r(s=n(2)),d=r(s=n(5)),c=i(s=n(0)),h=r(s=n(56)),A=r(s=n(20)),f=r(s=n(37)),p=i(n=n(1));n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t)._bidOptionalParams=t._demandTag.hasOwnProperty("bid_optional_params")?t._demandTag.bid_optional_params:{},t._bidParams=t._demandTag.hasOwnProperty("bid_params")?t._demandTag.bid_params:{},t._bidFloor=(0,_.default)(t._demandTag.hasOwnProperty("bid_floor")?t._demandTag.bid_floor:0),t._bid=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),a(e,[{key:"dropPixels",value:function(t){try{p.firePixels(document,t)}catch(t){}}},{key:"dropImageUserSync",value:function(t){p.firePixels(document,[t])}},{key:"dropIframeUserSync",value:function(t){this._iframe=p.addIframe(this._cabinet.uuid,document,t,"allow-scripts allow-same-origin")}},{key:"getBestBidOpenRTBResults",value:function(t){var e=null;return(0,l.default)(t.seatbid,function(t){(0,l.default)(t.bid,function(t){(null===e||t.price>e.price)&&(e=t)})}),e}},{key:"sortOpenRTBResultsByPrice",value:function(t){return t.seatbid.sort(function(t,e){return t.bid[0].price<e.bid[0].price?1:t.bid[0].price>e.bid[0].price?-1:0})}},{key:"hasBid",value:function(){return null!==this.bid}},{key:"isValidBid",value:function(){return this.hasBid()&&this.bidMeetsFloor()}},{key:"failedBidRequest",value:function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:c.VAST_ERRORCODES.SS_VAST_ERRORCODE_1301,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:c.VD_ERROR_CODES.HB_BID_ERROR;this.sendJsDemandResponse(c.VID_IO_EVENTS.cm_js_demand_req_resp,this._demandTag,(o(t={cc_i:this._demandTag.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.response,!0).join(","),response_time:this._cabinet.timeoutManager.getResponseTime(this._demandTag.waterfallIdx),has_ad:!1,reason:n,wrapper_count:0,dtype:c.DEMAND_TYPES.UNKNOWN},c.VID_IO_PARAMS.bidPrice,this.bid),o(t,c.VID_IO_PARAMS.bidFloor,this.bidFloor),o(t,c.VID_IO_PARAMS.vastErrorCode,e),t)),this.onSlotVastDone(this._idx,null)}},{key:"failedHBVastRequest",value:function(t){this.failedBidRequest(1<arguments.length&&void 0!==arguments[1]?arguments[1]:c.VAST_ERRORCODES.SS_VEC_1313_HB_ERROR_REQUESTING_VAST,t)}},{key:"_getAdVastProcessor",value:function(t){return t=new h.default(this._cabinet,this._initParams,this._demandTag,t,this.hbDetails),this.registerSSEventListeners_(t),t}},{key:"getDNT",value:function(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNoTrack||"yes"===navigator.doNotTrack}},{key:"bidMeetsFloor",value:function(){return null!==this.bid&&this.bid>=this.bidFloor}},{key:"getTimeoutInfo",value:function(){return this.cabinet.timeoutManager.getTimeoutInfo(this._demandTag.waterfallIdx,new A.default(this.cabinet.timeouts.HB_BID_REQUEST_TIMEOUT,c.VD_ERROR_CODES.HB_BID_REQUEST_TIMEOUT,c.VAST_ERRORCODES.SS_VEC_1315_HB_BID_REQUEST_TIMEOUT))}},{key:"handleResponse",value:function(t,e){}},{key:"handleError",value:function(t){var e=this.demandTag.hasOwnProperty("bid_platform")?this.demandTag.bid_platform+": "+c.VD_ERROR_CODES.HB_REQUEST_FAIL:c.VD_ERROR_CODES.HB_REQUEST_FAIL;"timeout"===t?this.failedHBVastRequest(e,c.VAST_ERRORCODES.SS_VEC_1315_HB_BID_REQUEST_TIMEOUT):this.failedHBVastRequest(e)}},{key:"_ajaxIt",value:function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"POST",r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},o=this.handleResponse.bind(this),a=this.handleError.bind(this);"POST"===i&&(e=JSON.stringify(e)),t?f.default.ajax(t,this.getTimeoutInfo(),{success:function(t){o(t,n)},error:function(t){a(t)}},e,(0,d.default)(r,{method:i,withCredentials:!0})):this.failedHBVastRequest("HB_MISSING_URL")}},{key:"priceReductionAmount",get:function(){if(!this._demandTag.third_party_fee||void 0===this._demandTag.third_party_fee_metric||0>this._demandTag.third_party_fee_metric)return 0;var t=parseFloat(this._demandTag.third_party_fee)||0;return this._demandTag.third_party_fee_metric===c.THIRD_PARTY_FEES.IMPRESSIONS||this._demandTag.third_party_fee_metric===c.THIRD_PARTY_FEES.AD_REQUESTS?t:this._demandTag.third_party_fee_metric===c.THIRD_PARTY_FEES.PERCENT_OF_REV?t/100*(this.bid||0):0}},{key:"effectiveScore",get:function(){return function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"effectiveScore",this)*((this.bid||0)-this.priceReductionAmount)}},{key:"isFixedScore",get:function(){return!1}},{key:"bid",get:function(){return this._bid},set:function(t){null!==t&&(t=(0,_.default)(t),(0,u.default)(t)?this._bid=null:this._bid=t)}},{key:"bidFloor",get:function(){return this._bidFloor}},{key:"hbDetails",get:function(){var t;return o(t={},c.VID_IO_PARAMS.bidPrice,this.bid),o(t,c.VID_IO_PARAMS.bidFloor,this.bidFloor),t}}]),e}(t.default),e.default=n},function(t,e){t.exports=Array.isArray},function(t,e,n){e=n(58);var i=n(22),r=n(65),o=n(30),a=Object.prototype,s=a.hasOwnProperty;n=e(function(t,e){t=Object(t);var n=-1,u=e.length,_=2<u?e[2]:void 0;for(_&&r(e[0],e[1],_)&&(u=1);++n<u;){_=e[n];for(var l=o(_),d=-1,c=l.length;++d<c;){var h=l[d],A=t[h];(void 0===A||i(A,a[h])&&!s.call(t,h))&&(t[h]=_[h])}}return t}),t.exports=n},function(t,e,n){e=n(63),n="object"==typeof self&&self&&self.Object===Object&&self,e=e||n||Function("return this")(),t.exports=e},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){e=n(21);var i=n(118),r=n(119),o=e?e.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?i(t):r(t)}},function(t,e,n){var i=n(51);t.exports=function(t){return i(t)&&t!=+t}},function(t,e){e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var i=n(31),r=n(13),o=n(190),a=n(4);t.exports=function(t,e){return(a(t)?i:o)(t,r(e,3))}},function(t,e,n){var i=n(135),r=n(179),o=n(29),a=n(4),s=n(187);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?r(t[0],t[1]):i(t):s(t)}},function(t,e,n){var i=n(117),r=n(122);t.exports=function(t,e){return t=r(t,e),i(t)?t:void 0}},function(t,e,n){var i=n(62),r=n(41);t.exports=function(t){return null!=t&&r(t.length)&&!i(t)}},function(t,e,n){t.exports=n(132)},function(t,e,n){var i=n(26);t.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,n){var i=n(43),r=n(84),o=n(13);t.exports=function(t,e){var n={};return e=o(e,3),r(t,function(t,r,o){i(n,r,e(t,r,o))}),n}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.ViewabilityDetection=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e._set=function(t){u=t},e.init=function(t,e,n){return(u=new s(t,e)).setViewRightNow(n||function(){u.hasBeenDetected=!0}),u.poll(),u},e.detector=function(){return u};var r=(t=n(49))&&t.__esModule?t:{default:t},o=(t=n(208))&&t.__esModule?t:{default:t},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),s=e.ViewabilityDetection=function(){function t(e,n){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.slot=e,this.doc=n||document,this._isInView=a.VIEWABILITY.UNINITIALIZED,this._viewablePercent=-1,this._tabIsInView=!0,this._hasBeenDetected=!1,this.visibilityChangeEvent=this.hiddenAttribute=null}return i(t,[{key:"setViewRightNow",value:function(t){var e=this;(0,r.default)(this.slot)&&o.default.then(function(n){e.hasBeenDetected=!0,new n(e.slot).then(function(n){e._viewablePercent=n.getPercent(e.slot),e._isInView=n.getVisible(e.slot),t()}).catch(function(e){t()})}).catch(function(e){t()})}},{key:"poll",value:function(){var t=this;setInterval(function(){t.setViewRightNow(function(){})},1e3)}},{key:"hasBeenDetected",set:function(t){(this._hasBeenDetected=t)&&0>this._isInView&&(this._isInView=a.VIEWABILITY.UNKNOWN)},get:function(){return this._hasBeenDetected}},{key:"viewabilityPercent",get:function(){return this._viewablePercent}},{key:"isInView",get:function(){return this._isInView}}]),t}(),u=null},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));t=function(){function t(e,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:r.VAST_ERRORCODES.VAST_ERRORCODE_301;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._timeout=e,this._reason=n,this._vec=i}return i(t,[{key:"timeout",get:function(){return this._timeout},set:function(t){this._timeout=t}},{key:"reason",get:function(){return this._reason},set:function(t){this._reason=t}},{key:"vec",get:function(){return this._vec},set:function(t){this._vec=t}}]),t}(),e.default=t},function(t,e,n){e=n(6).Symbol,t.exports=e},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&n.test(t))&&-1<t&&0==t%1&&t<e}},function(t,e,n){var i=n(66),r=n(171),o=n(15);t.exports=function(t){return o(t)?i(t):r(t)}},function(t,e,n){var i=n(4),r=n(47),o=n(181),a=n(82);t.exports=function(t,e){return i(t)?t:r(t,e)?[t]:o(a(t))}},function(t,e,n){var i=n(8),r=n(7);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==i(t)}},function(t,e,n){var i=n(198);t.exports=function(t){var e=(t=i(t))%1;return t==t?e?t-e:t:0}},function(t,e,n){var i=n(11),r=n(26),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,_=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(r(t))return NaN;if(i(t)&&(t="function"==typeof t.valueOf?t.valueOf():t,t=i(t)?t+"":t),"string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var e=s.test(t);return e||u.test(t)?_(t.slice(2),e?2:8):a.test(t)?NaN:+t}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var i=n(66),r=n(130),o=n(15);t.exports=function(t){return o(t)?i(t,!0):r(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}},function(t,e,n){function i(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}e=n(137);var r=n(138),o=n(139),a=n(140);n=n(141),i.prototype.clear=e,i.prototype.delete=r,i.prototype.get=o,i.prototype.has=a,i.prototype.set=n,t.exports=i},function(t,e,n){var i=n(22);t.exports=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}},function(t,e,n){e=n(14)(Object,"create"),t.exports=e},function(t,e,n){var i=n(155);t.exports=function(t,e){return t=t.__data__,i(e)?t["string"==typeof e?"string":"hash"]:t.map}},function(t,e,n){var i=n(25),r=n(17);t.exports=function(t,e){for(var n=0,o=(e=i(e,t)).length;null!=t&&n<o;)t=t[r(e[n++])];return n&&n==o?t:void 0}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(94),a=(t=n(2))&&t.__esModule?t:{default:t},s=(n=n(16))&&n.__esModule?n:{default:n};n=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}return r(t,null,[{key:"ajax",value:function(t,e,n,r){var u=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},_=void 0,l=!1,d=u.method||(r?"POST":"GET"),c="object"===(void 0===n?"undefined":i(n))?n:{success:function(){},error:function(t){}};"function"==typeof n&&(c.success=n),XMLHttpRequest?void 0===(_=new XMLHttpRequest).responseType?l=!0:"function"==typeof _.overrideMimeType&&_.overrideMimeType("application/json"):l=!0,l?((_=new XDomainRequest).onload=function(){c.success(_.responseText,_)},_.onerror=function(){c.error("error",_)},_.ontimeout=function(){c.error("timeout",_)},_.onprogress=function(){}):_.onreadystatechange=function(){if(4===_.readyState){var t=_.status;200<=t&&300>t||304===t?c.success(_.responseText,_):c.error(_.statusText,_)}};var h=t;"GET"===d&&r&&(h=(0,o.parse)(t,u),(0,s.default)(h.search,r),h=(0,o.format)(h)),_.open(d,h);try{_.timeout=e.timeout}catch(t){}l||(u.withCredentials&&(_.withCredentials=!0),u.customHeaders&&(0,a.default)(u.customHeaders,function(t,e){_.setRequestHeader(e,t)}),u.preflight&&_.setRequestHeader("X-Requested-With","XMLHttpRequest"),_.setRequestHeader("Content-Type",u.contentType||"text/plain")),_.send("POST"===d&&r)}}]),t}(),e.default=n},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0},a=i(t=n(0));t=(t=n(98))&&t.__esModule?t:{default:t};var s=i(n(19)),u=i(n=n(1));n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdContainer",t,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t)._idx=n,t._demandTag=i,t._adSlotState=a.SLOT_STATES.DEMAND_TAG_READY,t._adVast=null,t._initFailReason=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"initialize",value:function(){this._adSlotState=a.SLOT_STATES.REQUESTING_INIT,this.onSlotInitialized(this.idx,null)}},{key:"widthToPass",value:function(t){return t&&(this._demandTag.ts||this._cabinet.manifest.ts)?t.width:this.cabinet.manifest.width}},{key:"gdprSet",value:function(){return this._cabinet.manifest.hasOwnProperty("gdpr")}},{key:"gdprApplies",value:function(){return this._cabinet.manifest.gdpr}},{key:"gdprConsentString",value:function(){return this._cabinet.manifest.consent?u.unencodeComponent(this._cabinet.manifest.consent):""}},{key:"encodedGdprConsentString",value:function(){return encodeURIComponent(this.gdprConsentString())}},{key:"heightToPass",value:function(t){return t&&(this._demandTag.ts||this._cabinet.manifest.ts)?t.height:this.cabinet.manifest.height}},{key:"isDetectedDomain",value:function(){return this._demandTag.td||this._cabinet.manifest.td}},{key:"internalError",value:function(t,e){this._initFailReason===a.VD_ERROR_CODES.PRE_INIT_TD_MISMATCH?this.missedOpportunity(!0,!1,!1):this.on_cm_js_demand_req_resp(this._demandTag,{cc_i:this._demandTag.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.response,!0).join(","),response_time:0,wrapper_count:0,has_ad:!1,timeout:e,reason:t,dtype:this.defaultDemandType},null),this.onSlotVastDone(this._idx,null)}},{key:"missedOpportunity",value:function(t,e,n){}},{key:"sendJsDemandResponse",value:function(t,e,n){if(t!==a.VID_IO_EVENTS.cm_js_demand_req_resp)throw Error(a.VD_ERROR_CODES.NOT_JS_DEMAND_RESPONSE);this.on_cm_js_demand_req_resp(e,n)}},{key:"onSlotInitialized",value:function(t,n){this.adVpaidState.isDead||(this._initFailReason=n,this._adSlotState=null===n?a.SLOT_STATES.INITIALIZED:a.SLOT_STATES.INIT_FAILED,o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onSlotInitialized",this).call(this,t,n))}},{key:"onSlotVastDone",value:function(t,n){this._adVast=n,this.adVpaidState.isDead||(this._adSlotState=null===n?a.SLOT_STATES.NO_VAST:a.SLOT_STATES.VAST_READY,o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onSlotVastDone",this).call(this,t,n))}},{key:"vpaidStart",value:function(){this._adSlotState=a.SLOT_STATES.REQUESTING_VPAID}},{key:"vpaidFailed",value:function(){this._adSlotState=a.SLOT_STATES.VPAID_FAILED}},{key:"stopAd",value:function(){this.adSlotState===a.SLOT_STATES.REQUESTING_INIT?this.onSlotInitialized(this._idx,a.VD_ERROR_CODES.AD_CONTAINER_STOP_AD_DURING_INIT):this.adSlotState===a.SLOT_STATES.REQUESTING_VAST&&this.onSlotVastDone(this._idx,null),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stopAd",this).call(this)}},{key:"skipAd",value:function(){this.adSlotState===a.SLOT_STATES.REQUESTING_INIT?this.onSlotInitialized(this._idx,a.VD_ERROR_CODES.AD_CONTAINER_SKIP_AD_DURING_INIT):this.adSlotState===a.SLOT_STATES.REQUESTING_VAST&&this.onSlotVastDone(this._idx,null),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"skipAd",this).call(this)}},{key:"_containerRequestVast",value:function(t){throw Error("must implement")}},{key:"requestVast",value:function(t){if(this.adSlotState===a.SLOT_STATES.INITIALIZED)try{o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"requestVast",this).call(this,t),this.passesTargetingAsync(t,this.passesTargetingCallback.bind(this))}catch(t){this.internalError(a.VD_ERROR_CODES.UNCAUGHT_AD_CONTAINER_ERROR,!1)}else this.adSlotState===a.SLOT_STATES.INIT_FAILED?this.internalError(a.VD_ERROR_CODES.REQUEST_VAST_INIT_FAILED,!1):this.internalError(a.VD_ERROR_CODES.REQUEST_VAST_LOGIC_ERROR,!1)}},{key:"passesTargetingCallback",value:function(t,e){if(e&&this.adVpaidState.isContinue){try{this.fireOpportunity()}catch(t){return void this.internalError(a.VD_ERROR_CODES.DO_GET_VAST_RESPONSE_START_RESPONSE_FAIL,!1)}this._adSlotState=a.SLOT_STATES.REQUESTING_VAST,this._cabinet.timeoutManager.startTierFirstVastRequest(),this._containerRequestVast(t)}}},{key:"finishVastRequest",value:function(t){}},{key:"fireOpportunity",value:function(){for(var t={request_time:this._cabinet.timeoutManager.getRequestTime(this._demandTag.waterfallIdx)},e=this._demandTag.callChain.getSupplyTagHistory(this._cabinet.historyManager.supplyTagOpportunities),n=this._demandTag.callChain.callChainLinks,i=[],r=0;r<e.length;r++){var o=e[r];0<o&&i.push(a.CALL_CHAIN_IDENTIFIERS.SUPPLY+a.CALL_CHAIN_VARIABLE_ID_SEPARATOR+n[o].supplyTagId)}0<i.length&&this.on_cm_req_js_opp(null,t,null,i.join(a.CALL_CHAIN_LINK_SEPARATOR))}},{key:"passesTargetingAsync",value:function(t,e){var n=this,i=s.detector();i&&this._demandTag.tv&&i.isInView===a.VIEWABILITY.UNINITIALIZED?setTimeout(function(){e(t,n.passesTargeting(t),!0)},this.cabinet.timeouts.VIEWABILITY):e(t,this.passesTargeting(t),!1)}},{key:"passesTargeting",value:function(t){var e=void 0;try{e=!this._cabinet.isDomainMatch&&this._demandTag.td}catch(t){return this.internalError(a.VD_ERROR_CODES.PRE_INIT_TD_MISMATCH_FAIL,!1),!1}var n=void 0;try{n=this._demandTag.ts&&!this._cabinet.isSizeMatch(t)}catch(t){return this.internalError(a.VD_ERROR_CODES.PRE_INIT_TS_MISMATCH_FAIL,!1),!1}t=void 0;try{t=this._demandTag.tv&&s.detector().isInView!==a.VIEWABILITY.VIEWABLE}catch(t){return this.internalError(a.VD_ERROR_CODES.PRE_INIT_TV_MISMATCH_FAIL,!1),!1}try{if(e||n||t)return this.missedOpportunity(e,n,t),this.onSlotVastDone(this._idx,null),!1}catch(t){return this.internalError(a.VD_ERROR_CODES.PRE_INIT_MISSED_OPPORTUNITY_FAIL,!1),!1}return!0}},{key:"idx",get:function(){return this._idx}},{key:"effectiveScore",get:function(){return parseFloat(this._demandTag.score||1)}},{key:"isFixedScore",get:function(){return!0}},{key:"domainToPass",get:function(){return this.isDetectedDomain()?this.cabinet.locationInfo.domain_match:this.cabinet.manifest.domain}},{key:"fullDomainToPass",get:function(){return this.isDetectedDomain()?this.cabinet.locationInfo.url:this.cabinet.manifest.url?this.cabinet.manifest.url:this.cabinet.manifest.domain}},{key:"isVastPending",get:function(){return-1<a.SLOT_STATES_VAST_PENDING.indexOf(this.adSlotState)}},{key:"isRequestingVpaid",get:function(){return this.adSlotState===a.SLOT_STATES.REQUESTING_VPAID}},{key:"defaultDemandType",get:function(){return a.DEMAND_TYPES.UNKNOWN}},{key:"adSlotState",get:function(){return this._adSlotState}},{key:"demandTag",get:function(){return this._demandTag}},{key:"adVast",get:function(){return this._adVast}}]),e}(t.default),e.default=n},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0},u=r(n(12)),_=r(n(16)),l=r(n(5)),d=r(n(53)),c=i(n(0)),h=i(n(1));n=function(t){function e(t,n,i,r,o,a){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i));return s._creativeType=r,s._demandTag=o,s._adVast=a,s._slotListeners={},s._killState=c.KILL_STATES.START,s._hasSetAdVolume=!1,s._onKillFn=function(){s.demandError(c.VD_ERROR_CODES.AD_STOPPED,!1,c.VAST_ERRORCODES.VAST_ERRORCODE_901)},s._killAdTimeout=0,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),a(e,[{key:"fireVastPixels",value:function(t,e){try{h.firePixels(document,(0,u.default)(e,function(t){return t.replace(c.VAST_MACROS.CACHEBUSTING,h.getCb())}))}catch(t){}}},{key:"fireErrorPixels",value:function(){this.fireVastPixels(c.VAST_PIXEL_TYPES.VAST_ERROR,(0,u.default)(this._adVast.errorPixels,function(t){return t.replace(c.VAST_MACROS.ERRORCODE,c.VAST_ERRORCODES.VAST_ERRORCODE_901)}))}},{key:"demandError",value:function(t,e,n){h.isOpenmarketDemandTag(this._demandTag)?this.onSlotVastDone(this._demandTag.broadcastIdx,null):(this.fireErrorPixels(),this.on_js_demand_error(this._demandTag,this.getOptions(o({cc_i:this._demandTag.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.error,!0).join(","),response_time:this._cabinet.timeoutManager.getDemandTagResponseTime(this._demandTag.waterfallIdx,this._demandTag.broadcastIdx),reason:t,timeout:e,creative_type:this._creativeType},c.VID_IO_PARAMS.vastErrorCode,n)),null),this._killState=c.KILL_STATES.STOPPED)}},{key:"getOptions",value:function(t){return null!==this._adVast.ortb_detail?(0,_.default)(t,this._adVast.ortb_detail):null!==this._adVast.hbDetails?(0,_.default)(t,this._adVast.hbDetails):t}},{key:"getCreativeData",value:function(){return{AdParameters:this._adVast.adParameters}}},{key:"demandOpp",value:function(){var t=this.getCallChainIndicesDemandOpp();t&&this.on_js_demand_opportunity(this._demandTag,this.getOptions({cc_i:t,response_time:this._cabinet.timeoutManager.getDemandTagResponseTime(this._demandTag.waterfallIdx,this._demandTag.broadcastIdx),creative_type:this._creativeType}),null)}},{key:"getCallChainIndicesDemandOpp",value:function(){var t=this._cabinet.historyManager.demand_events.opportunity;return(h.isOpenmarketDemandTag(this._demandTag)?this._demandTag.callChain.getCallChainPenultimateLink():this._demandTag.callChain).getCallChainIndices(t,!1).join(",")}},{key:"killAd",value:function(t,n,i){var r=this;this.removeAllListeners();try{s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stopAd",this).call(this)}catch(e){return void this.demandError(t,n,i)}this._onKillFn=function(){r._killState===c.KILL_STATES.KILLED&&r.demandError(t,n,i),clearTimeout(r._killAdTimeout)},this._killState=c.KILL_STATES.KILLED,this._killAdTimeout=setTimeout(this._onKillFn,this._cabinet.timeouts.CHILD_KILL_AD_TIMEOUT)}},{key:"load",value:function(){throw Error("DemandRequest::load must override")}},{key:"begin",value:function(t,e,n){var i=this,r=this._cabinet.timeoutManager.getDemandTagTimeoutInfo(this._demandTag.waterfallIdx,this._demandTag.broadcastIdx,null);if(0>=r.timeout)this.killAd(r.reason,!0,r.vec);else{this._ad=e,this.registerVpaidEventListeners_(this._ad),this._demandTagTimeout=setTimeout(function(){i.killAd(r.reason,!0,r.vec)},r.timeout);try{this._ad.handshakeVersion(this._handshakeVersion)}catch(t){return void this.killAd(c.VD_ERROR_CODES.CHILD_HANDSHAKE_ERROR,!1,c.VAST_ERRORCODES.SS_VAST_ERRORCODE_1505)}try{this._ad.initAd(this._initParams.width,this._initParams.height,this._initParams.viewMode,this._initParams.desiredBitrate,t,n)}catch(t){return void this.killAd(c.VD_ERROR_CODES.CHILD_INIT_AD_ERROR,!1,c.VAST_ERRORCODES.SS_VAST_ERRORCODE_1506)}this.maybeInitializeAdVolume()}}},{key:"stopAd",value:function(){this.killAd(c.VD_ERROR_CODES.STOP_AD_CALLED,!1,c.VAST_ERRORCODES.SS_VAST_ERRORCODE_1513)}},{key:"maybeInitializeAdVolume",value:function(){try{this._ad&&this._ad.setAdVolume&&"function"==typeof this._ad.setAdVolume&&(this._hasSetAdVolume?this._ad.setAdVolume(this.getAdVolume()):(this._ad.setAdVolume(this._volume),this._hasSetAdVolume=!0))}catch(t){}}},{key:"onAdLoaded",value:function(){this.maybeInitializeAdVolume(),this.checkVideoSlotMutedAdNot(),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdLoaded",this).call(this)}},{key:"onAdStarted",value:function(){this.maybeInitializeAdVolume(),this.checkVideoSlotMutedAdNot(),this.fireVastPixels(c.VAST_PIXEL_TYPES.VAST_CREATIVEVIEW,this._adVast.trackingEvents.creativeView),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdStarted",this).call(this)}},{key:"onAdVideoStart",value:function(){this.maybeInitializeAdVolume(),this.fireVastPixels(c.VAST_PIXEL_TYPES.VAST_START,this._adVast.trackingEvents.start),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVideoStart",this).call(this)}},{key:"onAdImpression",value:function(){this.maybeInitializeAdVolume(),this.on_js_impression(this._demandTag,this.getOptions({time_on_page:this._cabinet.timeoutManager.timeOnPage,response_time:this._cabinet.timeoutManager.getDemandTagResponseTime(this._demandTag.waterfallIdx,this._demandTag.broadcastIdx),creative_type:this._creativeType,dtype:d.default.getDemandType(this._adVast),ctype:d.default.getCreativeTypeToDemandType(this._creativeType)}),null),clearTimeout(this._demandTagTimeout),this.fireVastPixels(c.VAST_PIXEL_TYPES.VAST_IMPRESSION,this._adVast.impressionPixels),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdImpression",this).call(this)}},{key:"onAdUserAcceptInvitation",value:function(){this.fireVastPixels(c.VAST_PIXEL_TYPES.VAST_ACCEPTINVITATION,this._adVast.trackingEvents.acceptInvitation),this.fireVastPixels(c.VAST_PIXEL_TYPES.VAST_ACCEPTINVITATIONLINEAR,this._adVast.trackingEvents.acceptInvitationLinear),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdUserAcceptInvitation",this).call(this)}},{key:"onAdUserMinimize",value:function(){this.fireVastPixels(c.VAST_PIXEL_TYPES.VAST_COLLAPSE,this._adVast.trackingEvents.collapse),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdUserMinimize",this).call(this)}},{key:"onAdUserClose",value:function(){this.fireVastPixels(c.VAST_PIXEL_TYPES.VAST_CLOSELINEAR,this._adVast.trackingEvents.closeLinear),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdUserClose",this).call(this)}},{key:"onAdClickThru",value:function(t,n,i){this.on_js_click(this._demandTag,this.getOptions({creative_type:this._creativeType}),null),this.fireVastPixels(c.VAST_PIXEL_TYPES.VAST_CLICKTRACKING,this._adVast.clickTracking),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdClickThru",this).call(this,t,n,i)}},{key:"onAdVideoFirstQuartile",value:function(){this.fireVastPixels(c.VAST_PIXEL_TYPES.VAST_FIRSTQUARTILE,this._adVast.trackingEvents.firstQuartile),this.on_js_first_quartile(this._demandTag,this._adVast.ortb_detail||{},null),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVideoFirstQuartile",this).call(this)}},{key:"onAdVideoMidpoint",value:function(){this.fireVastPixels(c.VAST_PIXEL_TYPES.VAST_MIDPOINT,this._adVast.trackingEvents.midpoint),this.on_js_midpoint(this._demandTag,this._adVast.ortb_detail||{},null),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVideoMidpoint",this).call(this)}},{key:"onAdVideoThirdQuartile",value:function(){this.fireVastPixels(c.VAST_PIXEL_TYPES.VAST_THIRDQUARTILE,this._adVast.trackingEvents.thirdQuartile),this.on_js_third_quartile(this._demandTag,this._adVast.ortb_detail||{},null),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVideoThirdQuartile",this).call(this)}},{key:"onAdVideoComplete",value:function(){this.fireVastPixels(c.VAST_PIXEL_TYPES.VAST_COMPLETE,this._adVast.trackingEvents.complete);var t=(0,l.default)(o({},c.VID_IO_PARAMS.adImpression,this.adVpaidState.isVpaidEvent(c.VPAID_EVENTS.AdImpression)?1:0),this._adVast.ortb_detail||{});this.on_js_complete(this._demandTag,t,null),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVideoComplete",this).call(this)}},{key:"onAdPaused",value:function(){this.fireVastPixels(c.VAST_PIXEL_TYPES.VAST_PAUSE,this._adVast.trackingEvents.pause),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdPaused",this).call(this)}},{key:"onAdPlaying",value:function(){this.fireVastPixels(c.VAST_PIXEL_TYPES.VAST_RESUME,this._adVast.trackingEvents.resume),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdPlaying",this).call(this)}},{key:"onAdVolumeChange",value:function(){var t=this.getAdVolume();this._volume===t&&this._volume===this._previousVolume||(this._volume=t,0===this._volume&&0<this._previousVolume&&this.fireVastPixels(c.VAST_PIXEL_TYPES.VAST_MUTE,this._adVast.trackingEvents.mute),0<this._volume&&0===this._previousVolume&&this.fireVastPixels(c.VAST_PIXEL_TYPES.VAST_UNMUTE,this._adVast.trackingEvents.unmute),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVolumeChange",this).call(this)),this.checkVideoSlotMutedAdNot()}},{key:"onAdStopped",value:function(){clearTimeout(this._killAdTimeout),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdStopped",this).call(this),this.adVpaidState.isVpaidEvent(c.VPAID_EVENTS.AdImpression)||this._onKillFn()}},{key:"onAdSkipped",value:function(){clearTimeout(this._killAdTimeout),this.fireVastPixels(c.VAST_PIXEL_TYPES.VAST_SKIP,this._adVast.trackingEvents.skip),this.on_js_skip(this._demandTag,(0,_.default)({creative_type:this._creativeType},this._adVast.ortb_detail||{})),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdSkipped",this).call(this),this.adVpaidState.isVpaidEvent(c.VPAID_EVENTS.AdImpression)||this.demandError(c.VD_ERROR_CODES.AD_SKIPPED,!1,c.VAST_ERRORCODES.VAST_ERRORCODE_901)}},{key:"doOnAdError",value:function(t,n){clearTimeout(this._killAdTimeout),this.fireErrorPixels(),t=t||c.VD_ERROR_CODES.AD_ERROR,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdError",this).call(this,t),this.adVpaidState.isVpaidEvent(c.VPAID_EVENTS.AdImpression)||this.demandError(t,!1,n)}},{key:"onAdError",value:function(t){this.doOnAdError(t,c.VAST_ERRORCODES.VAST_ERRORCODE_901)}},{key:"checkVideoSlotMutedAdNot",value:function(){this._adVidIoState.isVidIoEvent(c.VID_IO_EVENTS.js_volume_mismatch)||null===this._playerVolume||0!==this._playerVolume||0===this.getAdVolume()||this.on_js_volume_mismatch(this._demandTag)}}]),e}(r(n=n(55)).default),e.default=n},function(t,e,n){function i(t,e,n){var i=t.pimps;t=(i.s||{})[n]||[];var r=(i.d||{})[n]||[];n=(i.dc||{})[n]||[],i=e.supplyTagId;var a=e.demandTagId;return e=e.directConnectionId,-1<(0,o.default)(t,i)||-1<(0,o.default)(r,a)||-1<(0,o.default)(n,e)}function r(t,e,n){return t=(t.pimps.dc||{})[n]||[],e=e.directConnectionId,-1<(0,o.default)(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.shouldFireLink=i,e.shouldFireDCLink=r,e.shouldFire=function(t,e,n){e=e.callChain.callChainLinks;for(var r=0;r<e.length;r++)if(i(t,e[r],n))return!0;return!1},e.filterManifestKeys=function(t){if(t.hasOwnProperty("keys")){var e=[];return t.keys.forEach(function(n){t.passthru[n]?e.push(n+a.KEY_VAL_SEPARATOR+t.passthru[n]):e.push(n)}),e.join(a.KEYS_SEPARATOR)}return""},e.addsAppNameBundleToParams=function(t){var e={appName:"",appBundle:""};return t.hasOwnProperty("passthru")&&t.passthru&&(t.passthru.hasOwnProperty("app_name")&&(e.appName=(""+t.passthru.app_name).split(" ").join("_")),t.passthru.hasOwnProperty("app_bundle")&&(e.appBundle=(""+t.passthru.app_bundle).split(" ").join("_"))),e},e.addPostImpProviderToCallChain=function(t,e,n,o){e=e.callChain.callChainLinks;for(var s=[],u=0;u<e.length;u++){var _=e[u];i(t,_,n)?(0<u&&r(t,_,n)&&(s.pop(),s.push(e[u-1].toProviderUsedString(o))),s.push(_.toProviderUsedString(o))):s.push(_.toString())}return s.join(a.CALL_CHAIN_LINK_SEPARATOR)};var o=(t=n(268))&&t.__esModule?t:{default:t},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0))},function(t,e){t.exports=function(t){return"number"==typeof t&&-1<t&&0==t%1&&9007199254740991>=t}},function(t,e,n){e=n(125);var i=n(7),r=(n=Object.prototype).hasOwnProperty,o=n.propertyIsEnumerable;n=e(function(){return arguments}())?e:function(t){return i(t)&&r.call(t,"callee")&&!o.call(t,"callee")},t.exports=n},function(t,e,n){var i=n(61);t.exports=function(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){e=n(14),n=e(n=n(6),"Map"),t.exports=n},function(t,e,n){function i(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}e=n(147);var r=n(154),o=n(156),a=n(157);n=n(158),i.prototype.clear=e,i.prototype.delete=r,i.prototype.get=o,i.prototype.has=a,i.prototype.set=n,t.exports=i},function(t,e){t.exports=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}},function(t,e,n){var i=n(4),r=n(26),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!r(t))||(a.test(t)||!o.test(t)||null!=e&&t in Object(e))}},function(t,e,n){e=n(84),n=n(192)(e),t.exports=n},function(t,e,n){var i=n(7),r=n(193);t.exports=function(t){return i(t)&&1===t.nodeType&&!r(t)}},function(t,e,n){var i=n(8),r=n(4),o=n(7);t.exports=function(t){return"string"==typeof t||!r(t)&&o(t)&&"[object String]"==i(t)}},function(t,e,n){var i=n(8),r=n(7);t.exports=function(t){return"number"==typeof t||r(t)&&"[object Number]"==i(t)}},function(t,e,n){var i=n(77),r=n(207),o=n(13),a=n(4);t.exports=function(t,e){return(a(t)?i:r)(t,o(e,3))}},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=r(n(2)),s=i(n(0)),u=r(n(37)),_=i(n(1)),l=i(n(19)),d=r(n=n(20));n=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._cabinet=e,this._pixelError=this._pixelLoad=this._pixelInit=this._batchCount=0,this._eventListeners={},this._queue=[],this._flusherInterval=0,this.startFlusher()}return o(t,[{key:"startFlusher",value:function(){var t=this;this._flusherInterval=setInterval(function(){t.flush()},this._cabinet.timeouts.PIXEL_QUEUE_FLUSH_INTERVAL_MS)}},{key:"killFlusher",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];0<this.queueLength&&t&&this.flush(),this.hasFlusher&&(clearInterval(this._flusherInterval),this._flusherInterval=0)}},{key:"enqueue",value:function(t){this._queue.push(t),this.hasFlusher||this.flush()}},{key:"flush",value:function(){var t=this;this.swapAndGetBatchAsync(function(e){e&&t.sendVidIoBatch(e)})}},{key:"swapAndGetBatchAsync",value:function(t){var e=this,n=l.detector();n&&n.isInView===s.VIEWABILITY.UNINITIALIZED?setTimeout(function(){t(e.swapAndGetBatch(),!0)},this._cabinet.timeouts.VIEWABILITY):t(this.swapAndGetBatch(),!1)}},{key:"swapAndGetBatch",value:function(){var t=this._swapQueue(),e=null;if(0<t.length){e=this._cabinet.pixelEventFactory.newBatch();for(var n=0;n<t.length;n++)e.addEvent(t[n])}return e}},{key:"_successFunc",value:function(){this._pixelLoad++,this.checkIsDone()}},{key:"_errorFunc",value:function(){this._pixelError++,this.checkIsDone()}},{key:"_fallBackToImages",value:function(t,e){var n=this;(0,a.default)(t.toImageUrls(),function(t){e&&!t.includes("impression")||n.addImage(t)})}},{key:"addImage",value:function(t){this._pixelInit++,_.addImage(document,t,this._successFunc.bind(this),this._errorFunc.bind(this))}},{key:"sendVidIoBatch",value:function(t){var e=this,n=void 0;try{n=t.toJson()}catch(e){return void this.onAjaxError(t,"UNEXPECTED_PIXEL_ERROR_CREATING_BATCH_"+e.message)}try{var i={batch:++this._batchCount};t.containsImp&&(i.imp=1);var r=t.getUrl(i),o=JSON.stringify(n);this._pixelInit++,this.callAjax(r,o,function n(i){return function(a,u){e._pixelError++,a=500<=u.status&&600>u.status,i>=e._cabinet.timeouts.MAX_PIXEL_TRIES?a?e.onAjaxError(t,s.VD_ERROR_CODES.MAX_PIXEL_TRIES_EXCEEDED,!0):e.onAjaxError(t,s.VD_ERROR_CODES.MAX_PIXEL_TRIES_EXCEEDED):a?(e._pixelInit++,setTimeout(function(){try{e.callAjax(r,o,n(i+1))}catch(n){e.onAjaxError(t,n.message||s.VD_ERROR_CODES.PIXEL_SEND_ERROR)}},e._cabinet.timeouts.PIXEL_WAIT*(i+1))):e.onAjaxError(t,s.VD_ERROR_CODES.XHR_NON_500)}}(0))}catch(e){this.onAjaxError(t,e.message||s.VD_ERROR_CODES.PIXEL_SEND_ERROR)}}},{key:"callAjax",value:function(t,e,n){u.default.ajax(t,new d.default(this._cabinet.timeouts.MAX_PIXEL_FIRE_TIMEOUT,s.VD_ERROR_CODES.PIXEL_FIRE_TIMEOUT),{success:this._successFunc.bind(this),error:n},e,{method:"POST",withCredentials:!0})}},{key:"onAjaxError",value:function(t,e){this._fallBackToImages(t,2<arguments.length&&void 0!==arguments[2]&&arguments[2]),this.addImage(t.getUrl({event:s.VID_IO_EVENTS.js_pixel_error,reason:e}))}},{key:"_swapQueue",value:function(){var t=this._queue;return this._queue=[],t}},{key:"checkIsDone",value:function(){this.isDone&&this.callPixelEvent(s.AD_PIXEL_EVENTS.DONE)}},{key:"callPixelEvent",value:function(t){if(this._eventListeners.hasOwnProperty(t)){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(e=0;e<this._eventListeners[t].length;e++)this._eventListeners[t][e].apply(this._eventListeners[t][e],n)}}},{key:"subscribe",value:function(t,e,n){this._eventListeners.hasOwnProperty(e)||(this._eventListeners[e]=[]),this._eventListeners[e].push(t.bind(n))}},{key:"unsubscribe",value:function(t){this._eventListeners&&this._eventListeners.hasOwnProperty(t)&&(this._eventListeners[t]=[])}},{key:"cabinet",get:function(){return this._cabinet}},{key:"hasFlusher",get:function(){return 0!==this._flusherInterval}},{key:"queueLength",get:function(){return this._queue.length}},{key:"isDone",get:function(){return 0===this.queueLength&&this._pixelInit===this._pixelLoad+this._pixelError}}],[{key:"getDemandTypeFromXhrReturnCode",value:function(t){return 204===t?s.DEMAND_TYPES.XHR_204_RESPONSE:400<=t&&500>t?s.DEMAND_TYPES.XHR_400_RESPONSE:500<=t&&600>t?s.DEMAND_TYPES.XHR_500_RESPONSE:s.DEMAND_TYPES.UNKNOWN}},{key:"getDemandType",value:function(t){return t.isJsVpaid&&t.isFlashVpaid?s.DEMAND_TYPES.BOTH:t.isJsVpaid?s.DEMAND_TYPES.JS_VPAID:t.isFlashVpaid?s.DEMAND_TYPES.FLASH_VPAID:t.isMedia||t.isXFLVMedia?s.DEMAND_TYPES.VIDEO:s.DEMAND_TYPES.UNKNOWN}},{key:"getCreativeTypeToDemandType",value:function(t){return t===s.CREATIVE_TYPES.MEDIA||t===s.CREATIVE_TYPES.XFLV?s.DEMAND_TYPES.VIDEO:t===s.CREATIVE_TYPES.FLASH_VPAID?s.DEMAND_TYPES.FLASH_VPAID:t===s.CREATIVE_TYPES.JS_VPAID?s.DEMAND_TYPES.JS_VPAID:s.DEMAND_TYPES.UNKNOWN}}]),t}(),e.default=n},function(t,e,n){function i(t,e){var n=document.createElement("script");n.type="text/javascript",n.async=!0,e&&"function"==typeof e&&(n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,e())}:n.onload=function(){e()}),n.src=t,(t=(t=document.getElementsByTagName("head")).length?t:document.getElementsByTagName("body")).length&&(t=t[0]).insertBefore(n,t.firstChild)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){t&&(n?r[t]?e&&"function"==typeof e&&(r[t].loaded?e():r[t].callbacks.push(e)):(r[t]={loaded:!1,callbacks:[]},e&&"function"==typeof e&&r[t].callbacks.push(e),i(t,function(){r[t].loaded=!0;try{for(var e=0;e<r[t].callbacks.length;e++)r[t].callbacks[e]()}catch(t){}})):i(t,e))};var r={}},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=r(t=n(2)),u=i(t=n(0)),_=i(t=n(1));t=r(t=n(221));var l=r(n(102)),d=r(n=n(227));n=function(t){function e(t,n,i){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdVd("+t+")",_.identityWrapper),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t)._receivedAdVidIoState=new d.default,t._adVidIoState=new d.default,t._receivedVpaidState=new l.default,t._ssEventListeners={},t._cabinet=n,t._initParams=i,t._vpaidEventQueue=[],t._vidIoEventQueue=[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),a(e,[{key:"onBroadcastVastReady",value:function(t){this.forwardSSEvent_(u.BROADCAST_EVENTS.VastReady,t)}},{key:"onBroadcastDone",value:function(){this.forwardSSEvent_(u.BROADCAST_EVENTS.Done)}},{key:"onBroadcastVastRequestTimerTimeout",value:function(){this.forwardSSEvent_(u.BROADCAST_EVENTS.VastRequestTimerTimeout)}},{key:"onSlotInitialized",value:function(t,e){this.forwardSSEvent_(u.SLOT_EVENTS.Initialized,t,e)}},{key:"onSlotVastDone",value:function(t,e){this.forwardSSEvent_(u.SLOT_EVENTS.VastDone,t,e)}},{key:"on_js_opportunity",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.js_opportunity,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_cm_req_js_opp",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.cm_req_js_opp,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_cm_js_demand_req_resp",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.cm_js_demand_req_resp,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_js_demand_opportunity",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.js_demand_opportunity,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_js_demand_error",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.js_demand_error,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_js_pixel_error",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.js_pixel_error,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_js_demand_missed_opportunity",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.js_demand_missed_opportunity,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_js_impression",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.js_impression,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_js_supply_error",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.js_supply_error,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_js_click",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.js_click,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_js_first_quartile",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.js_first_quartile,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_js_midpoint",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.js_midpoint,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_js_third_quartile",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.js_third_quartile,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_js_complete",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.js_complete,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_js_skip",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.js_skip,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_js_unload",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.js_unload,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_js_volume_mismatch",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.js_volume_mismatch,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_js_warning",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.js_warning,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_openrtb_auction_win",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.openrtb_auction_win,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_openrtb_bidder_error",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.openrtb_bidder_error,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"on_js_tier_time",value:function(){this.forwardVidIoEvent_(u.VID_IO_EVENTS.js_tier_time,0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)}},{key:"forwardSSEvent_",value:function(t){if(this._ssEventListeners.hasOwnProperty(t)){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(e=0;e<this._ssEventListeners[t].length;e++)this._ssEventListeners[t][e].apply(this._ssEventListeners[t][e],n)}}},{key:"pushVidIoEvent",value:function(t){this._vidIoEventQueue.push([t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,4<arguments.length&&void 0!==arguments[4]?arguments[4]:null]),this._receivedAdVidIoState.vidIoEventCount[t]++}},{key:"forwardVidIoEvent_",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=this,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;u.VID_IO_EVENTS.hasOwnProperty(t)&&(u.VID_IO_FINAL_EVENTS.hasOwnProperty(t)?this._receivedAdVidIoState.isVidIoDead||this.pushVidIoEvent(t,e,n,r,a):u.VID_IO_ONCE_EVENTS.hasOwnProperty(t)&&this._receivedAdVidIoState.isVidIoEvent(t)||this.pushVidIoEvent(t,e,n,r,a),e=this._vidIoEventQueue,this._vidIoEventQueue=[],(0,s.default)(e,function(t){var e=t[0];e!==u.VID_IO_EVENTS.js_complete||i._receivedAdVidIoState.isVidIoEvent(u.VID_IO_EVENTS.js_impression)?(i._adVidIoState.vidIoEventCount[e]++,i.onForwardVidIoEvent.apply(i,o(t)),i.forwardSSEvent_.apply(i,o(t))):i._vidIoEventQueue.push(t)}))}},{key:"pushVpaidEvent",value:function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this._vpaidEventQueue.push([t].concat(n)),this._receivedVpaidState.vpaidEventCount[t]++}},{key:"forwardEvent_",value:function(t){var n=this;if(u.VPAID_EVENTS.hasOwnProperty(t)){for(var i=arguments.length,r=Array(1<i?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];u.VPAID_FINAL_EVENTS.hasOwnProperty(t)?this._receivedVpaidState.isAdDead||this.pushVpaidEvent.apply(this,[t].concat(r)):u.VPAID_ONCE_EVENTS.hasOwnProperty(t)&&this._receivedVpaidState.isVpaidEvent(t)||this.pushVpaidEvent.apply(this,[t].concat(r)),i=this._vpaidEventQueue,this._vpaidEventQueue=[],(0,s.default)(i,function(t){var i;(i=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"forwardEvent_",n)).call.apply(i,[n].concat(o(t)))})}}},{key:"registerSSEventListeners_",value:function(t){var e=this,n={js_opportunity:this.on_js_opportunity,cm_req_js_opp:this.on_cm_req_js_opp,cm_js_demand_req_resp:this.on_cm_js_demand_req_resp,js_demand_opportunity:this.on_js_demand_opportunity,js_demand_error:this.on_js_demand_error,js_pixel_error:this.on_js_pixel_error,js_demand_missed_opportunity:this.on_js_demand_missed_opportunity,js_impression:this.on_js_impression,js_supply_error:this.on_js_supply_error,js_click:this.on_js_click,js_first_quartile:this.on_js_first_quartile,js_midpoint:this.on_js_midpoint,js_third_quartile:this.on_js_third_quartile,js_complete:this.on_js_complete,js_skip:this.on_js_skip,js_unload:this.on_js_unload,js_volume_mismatch:this.on_js_volume_mismatch,js_warning:this.on_js_warning,openrtb_auction_win:this.on_openrtb_auction_win,openrtb_bidder_error:this.on_openrtb_bidder_error,js_tier_time:this.on_js_tier_time,Initialized:this.onSlotInitialized,VastDone:this.onSlotVastDone,VastReady:this.onBroadcastVastReady,Done:this.onBroadcastDone,VastRequestTimerTimeout:this.onBroadcastVastRequestTimerTimeout};_.forEachType(u.EVENT_TYPES,function(i,r,o){t.subscribeSSEvent(n[o],o,e)})}},{key:"unregisterSSEventListeners_",value:function(t){_.forEachType(u.EVENT_TYPES,function(e,n,i){t.unsubscribeSSEvent(i)})}},{key:"onForwardVidIoEvent",value:function(t){}},{key:"subscribeSSEvent",value:function(t,e,n){this._ssEventListeners.hasOwnProperty(e)||(this._ssEventListeners[e]=[]),this._ssEventListeners[e].push(t.bind(n))}},{key:"unsubscribeSSEvent",value:function(t){this._ssEventListeners.hasOwnProperty(t)&&(this._ssEventListeners[t]=[])}},{key:"cabinet",get:function(){return this._cabinet}},{key:"uuid",get:function(){return this._cabinet.uuid}},{key:"shortUuid",get:function(){return this._cabinet.shortUuid}},{key:"initParams",get:function(){return this._initParams}},{key:"adVidIoState",get:function(){return this._adVidIoState}}]),e}(t.default),e.default=n},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=r(n(16)),u=r(n(18)),_=i(n(1)),l=i(n(0)),d=r(n(57)),c=r(n(53)),h=r(n(229)),A=i(n(104)),f=r(n(20));n=function(t){function e(t,n,i,r,o){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(n=(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdVastProcessor",t,n),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(n=!n||"object"!=typeof n&&"function"!=typeof n?this:n)._cabinet=t,n._demandTag=i,n._sizeInfo=r,n._hbDetails=o,n._wrapperCount=0,n._wrapperWaterfallCount=0,n._vastPixels=l.getDefaultVastPixels(),n._isOrtb=_.isOrtbDemandTag(i),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),a(e,[{key:"getXhr",value:function(t,e,n){var i=this,r=_.getRequestMethod(e,n);if(r){(n=r.xhr).responseType="document";try{"function"==typeof n.overrideMimeType&&n.overrideMimeType("text/xml")}catch(t){}return n.timeout=t.timeout,n.ontimeout=function(){i.demandResponseFail(!0,t.reason,l.VAST_ERRORCODES.SS_VEC_1302_HTTP_TIMEOUT)},n.onerror=function(){r.withCredentials?i.requestVast(e,!1):i.demandResponseFail(!1,l.VD_ERROR_CODES.XHR_ERROR,l.VAST_ERRORCODES.SS_VEC_1303_HTTP_ERROR)},n}this.demandResponseFail(!1,l.VD_ERROR_CODES.NO_XHR,l.VAST_ERRORCODES.SS_VEC_1304_NO_HTTP_RESPONSE)}},{key:"requestVast",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],o=this.getTimeoutInfo();if(0>=o.timeout)this.demandResponseFail(!0,o.reason,o.vec);else{var a=this._cabinet.replacePageProtocol(A.replaceDetectedMacros(this._cabinet.locationInfo,this._sizeInfo,null===t?this._demandTag.url:t)),s=this.getXhr(o,a,e);s.onload=function(){try{if(200!==s.status)e?n.requestVast(a,!1,i):400<=s.status&&500>s.status?n.demandResponseFail(!1,l.VD_ERROR_CODES.BAD_XHR_STATUS+"_"+s.status,l.VAST_ERRORCODES.SS_VEC_1305_4XX_HTTP_STATUS,c.default.getDemandTypeFromXhrReturnCode(s.status)):500<=s.status&&600>s.status?n.demandResponseFail(!1,l.VD_ERROR_CODES.BAD_XHR_STATUS+"_"+s.status,l.VAST_ERRORCODES.SS_VEC_1306_5XX_HTTP_STATUS,c.default.getDemandTypeFromXhrReturnCode(s.status)):n.demandResponseFail(!1,l.VD_ERROR_CODES.BAD_XHR_STATUS+"_"+s.status,l.VAST_ERRORCODES.SS_VEC_1307_OTHER_NON_200_HTTP_STATUS,c.default.getDemandTypeFromXhrReturnCode(s.status));else{var t=null;if(null!==s.responseXML)t=s.responseXML;else if("function"!=typeof s.overrideMimeType&&s.responseText)try{t=(new DOMParser).parseFromString(s.responseText,"application/xml")}catch(t){return void n.demandResponseFail(!1,l.VD_ERROR_CODES.DOM_PARSER_PARSE_FAILURE,l.VAST_ERRORCODES.VAST_ERRORCODE_100)}null===t?n.demandResponseFail(!1,l.VD_ERROR_CODES.RESPONSE_XML_NULL,l.VAST_ERRORCODES.VAST_ERRORCODE_100):n.processVast(t,a,i,r)}}catch(t){n.demandResponseFail(!1,l.VD_ERROR_CODES.VAST_ONLOAD_EXCEPTION+"_"+t.message,l.VAST_ERRORCODES.SS_VAST_ERRORCODE_1508)}},s.send()}}},{key:"failOrSucceedPlayingMedia",value:function(t){t=new d.default(t);try{var e=this._cabinet.manifest.ef;if(t.isJsVpaid||t.isMedia||t.isFlashVpaid||t.isXFLVMedia)if(t.isJsVpaid||t.hasPlayableMedia||e&&(t.isFlashVpaid||t.isXFLVMedia)&&this._cabinet.canPlayFlash)this.demandResponseSuccess(t);else{var n=(t.isFlashVpaid||t.isXFLVMedia)&&!this._cabinet.canPlayFlash,i=t.isMedia&&!t.hasPlayableMedia,r=[];e?n&&r.push(l.VD_ERROR_CODES.FLASH_NOT_SUPPORTED):r.push(l.VD_ERROR_CODES.FLASH_DISABLED),i&&r.push(l.VD_ERROR_CODES.UNSUPPORTED_MEDIA),this.demandResponseFail(!1,r.join("_"),l.VAST_ERRORCODES.VAST_ERRORCODE_403,c.default.getDemandType(t),!0)}else this.demandResponseFail(!1,l.VD_ERROR_CODES.EMPTY_VAST,l.VAST_ERRORCODES.VAST_ERRORCODE_303,l.DEMAND_TYPES.EMPTY_VAST)}catch(t){this.demandResponseFail(!1,l.VD_ERROR_CODES.JS_DEMAND_RESPONSE_EXCEPTION+"_"+t.message,l.VAST_ERRORCODES.VAST_ERRORCODE_405,l.DEMAND_TYPES.UNKNOWN,!0)}}},{key:"playMedia",value:function(t){if(0<t.media.length){try{this._cabinet.autoplayVideoElementManager.videoSlot||this._cabinet.autoplayVideoElementManager.createNewVideoSlot()}catch(t){return void this.demandResponseFail(!1,l.VD_ERROR_CODES.CREATE_VIDEO_ELEMENT_EXCEPTION+"_"+t.message,l.VAST_ERRORCODES.VAST_ERRORCODE_405,l.DEMAND_TYPES.UNKNOWN,!0)}try{var e=this._cabinet.autoplayVideoElementManager.videoSlot;if(null===e)return void this.demandResponseFail(!1,l.VD_ERROR_CODES.CREATE_VIDEO_ELEMENT_LOGIC_ERROR,l.VAST_ERRORCODES.VAST_ERRORCODE_405,l.DEMAND_TYPES.UNKNOWN,!0);for(var n=0;n<t.media.length;n++)if(_.canPlayVideo(e,t.media[n])){t.hasPlayableMedia=!0;break}}catch(t){return void this.demandResponseFail(!1,l.VD_ERROR_CODES.CAN_PLAY_VIDEO_EXCEPTION+"_"+t.message,l.VAST_ERRORCODES.VAST_ERRORCODE_403,l.DEMAND_TYPES.UNKNOWN,!0)}}this.failOrSucceedPlayingMedia(t)}},{key:"processVast",value:function(t,n){var i=void 0;try{i=new h.default(this._isOrtb,n,t).findVideoAd()}catch(t){return void this.demandResponseFail(!1,l.VD_ERROR_CODES.FIND_VIDEO_AD_EXCEPTION+"_"+t.message,l.VAST_ERRORCODES.SS_VAST_ERRORCODE_1511)}t=void 0;try{t=(0,s.default)({},i,e.extendPixels(this._vastPixels,i)),this._hbDetails&&(t.hbDetails=this._hbDetails),this._vastPixels.hasOwnProperty("ortb_detail")&&(t.ortb_detail=this._vastPixels.ortb_detail),this._vastPixels=t}catch(t){return void this.demandResponseFail(!1,l.VD_ERROR_CODES.EXTEND_VAST_EXCEPTION+"_"+t.message,l.VAST_ERRORCODES.SS_VAST_ERRORCODE_1508)}this._isOrtb&&this.openrtbAuctionWin(t.ortb_detail),null!==t.wrapperUrl?(this._wrapperWaterfallCount+=t.wrapperWaterfallCount,this.wrapperCb(t.wrapperUrl)):this.playMedia(t)}},{key:"getTimeoutInfo",value:function(){return this._cabinet.timeoutManager.getTimeoutInfo(this._demandTag.waterfallIdx,[new f.default(this._cabinet.timeouts.WRAPPER_CHAIN_TIMEOUT-this._cabinet.timeoutManager.getResponseTime(this._demandTag.waterfallIdx),l.VD_ERROR_CODES.WRAPPER_CHAIN_NO_TIME,l.VAST_ERRORCODES.SS_VEC_1309_WRAPPER_CHAIN_TIMEOUT),new f.default(this._cabinet.timeouts.VAST_TIMEOUT,l.VD_ERROR_CODES.VAST_TIMEOUT,l.VAST_ERRORCODES.SS_VEC_1308_VAST_TIMEOUT)])}},{key:"getCallChainIndicesDemandReqResponse",value:function(){return this._demandTag.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.response,!1).join(",")}},{key:"demandResponseFail",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:l.VAST_ERRORCODES.VAST_ERRORCODE_901,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:l.DEMAND_TYPES.UNKNOWN,r=4<arguments.length&&void 0!==arguments[4]&&arguments[4],a=this.getCallChainIndicesDemandReqResponse();a&&this.on_cm_js_demand_req_resp(this._demandTag,(0,s.default)(o({cc_i:a,response_time:this._cabinet.timeoutManager.getResponseTime(this._demandTag.waterfallIdx),wrapper_count:this._wrapperCount,has_ad:r,timeout:t,reason:e,dtype:i},l.VID_IO_PARAMS.vastErrorCode,n),this._hbDetails||{},this.wrapperWaterfallObj)),this.onSlotVastDone(this._demandTag.broadcastIdx,null)}},{key:"demandResponseSuccess",value:function(t){var e,n=this.getCallChainIndicesDemandReqResponse();n&&this.on_cm_js_demand_req_resp(this._demandTag,(0,s.default)((o(e={cc_i:n,response_time:this._cabinet.timeoutManager.getResponseTime(this._demandTag.waterfallIdx),wrapper_count:this._wrapperCount,has_ad:!0,timeout:!1},l.VID_IO_PARAMS.vastVersion,t.version),o(e,"dtype",c.default.getDemandType(t)),e),t.ortb_detail||{},this._hbDetails||{},this.wrapperWaterfallObj));this.onSlotVastDone(this._demandTag.broadcastIdx,t)}},{key:"openrtbAuctionWin",value:function(t){this.on_openrtb_auction_win(this._demandTag,(0,s.default)({cc_i:this._demandTag.callChain.getCallChainLastTwoIndices().join(",")},t))}},{key:"wrapperCb",value:function(t){this._wrapperCount++,this._wrapperCount>this._cabinet.timeouts.MAX_WRAPPERS?this.demandResponseFail(!1,l.VD_ERROR_CODES.TOO_MANY_WRAPPERS,l.VAST_ERRORCODES.VAST_ERRORCODE_302):(this._isOrtb=!1,this.requestVast(t,_.shouldUseWithCreds(t)))}},{key:"wrapperWaterfallObj",get:function(){var t={};return 0<this._wrapperWaterfallCount&&(t.wrapperWaterfalls=10<this._wrapperWaterfallCount?10:this._wrapperWaterfallCount),t}}],[{key:"extendPixels",value:function(t,e){var n={errorPixels:t.errorPixels.concat(e.errorPixels),impressionPixels:t.impressionPixels.concat(e.impressionPixels),clickTracking:t.clickTracking.concat(e.clickTracking),trackingEvents:{}};return(0,u.default)(t.trackingEvents,function(t,i){n.trackingEvents[i]=[].concat(t,e.trackingEvents[i])}),n}}]),e}(r(n=n(99)).default),e.default=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=(t=n(228))&&t.__esModule?t:{default:t};t=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._version=e.version,this._hbDetails=e.hbDetails,this._wrapperUrl=e.wrapperUrl,this._wrapperWaterfallCount=e.wrapperWaterfallCount,this._duration=e.duration,this._media=e.media,this._jsVpaidUrl=e.jsVpaidUrl,this._flashVpaidUrl=e.flashVpaidUrl,this._xFlvMedia=e.xFlvMedia,this._hasPlayableMedia=e.hasPlayableMedia,this._adParameters=e.adParameters,this._clickThrough=e.clickThrough,this._noad=e.noad,this._companions=e.companions,this._icons=e.icons,this._linear=e.linear,this._skipOffset=e.skipOffset,this._ortb_detail=e.ortb_detail,this._imaTagUrl=e.imaTagUrl,this._errorPixels=e.errorPixels,this._impressionPixels=e.impressionPixels,this._clickTracking=e.clickTracking,this._trackingEvents=new r.default(e.trackingEvents)}return i(t,[{key:"version",get:function(){return this._version}},{key:"hbDetails",get:function(){return this._hbDetails}},{key:"wrapperUrl",get:function(){return this._wrapperUrl}},{key:"wrapperWaterfallCount",get:function(){return this._wrapperWaterfallCount}},{key:"duration",get:function(){return this._duration}},{key:"media",get:function(){return this._media}},{key:"jsVpaidUrl",get:function(){return this._jsVpaidUrl}},{key:"flashVpaidUrl",get:function(){return this._flashVpaidUrl}},{key:"xFlvMedia",get:function(){return this._xFlvMedia}},{key:"hasPlayableMedia",get:function(){return this._hasPlayableMedia}},{key:"adParameters",get:function(){return this._adParameters}},{key:"clickThrough",get:function(){return this._clickThrough}},{key:"noad",get:function(){return this._noad}},{key:"companions",get:function(){return this._companions}},{key:"icons",get:function(){return this._icons}},{key:"linear",get:function(){return this._linear}},{key:"skipOffset",get:function(){return this._skipOffset}},{key:"ortb_detail",get:function(){return this._ortb_detail}},{key:"imaTagUrl",get:function(){return this._imaTagUrl}},{key:"errorPixels",get:function(){return this._errorPixels}},{key:"impressionPixels",get:function(){return this._impressionPixels}},{key:"clickTracking",get:function(){return this._clickTracking}},{key:"trackingEvents",get:function(){return this._trackingEvents}},{key:"isIMA",get:function(){return null!==this.imaTagUrl}},{key:"isJsVpaid",get:function(){return null!==this.jsVpaidUrl}},{key:"isMedia",get:function(){return 0<this.media.length}},{key:"isFlashVpaid",get:function(){return null!==this.flashVpaidUrl}},{key:"isXFLVMedia",get:function(){return 0<this.xFlvMedia.length}},{key:"isWrapper",get:function(){return null!==this._wrapperUrl}}]),t}(),e.default=t},function(t,e,n){var i=n(29),r=n(59),o=n(60);t.exports=function(t,e){return o(r(t,e,i),t+"")}},function(t,e,n){var i=n(114),r=Math.max;t.exports=function(t,e,n){return e=r(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,s=r(o.length-e,0),u=Array(s);++a<s;)u[a]=o[e+a];for(a=-1,s=Array(e+1);++a<e;)s[a]=o[a];return s[e]=n(u),i(t,this,s)}}},function(t,e,n){e=n(115),n=n(123)(e),t.exports=n},function(t,e,n){e=n(14);t:{try{var i=e(Object,"defineProperty");i({},"",{});var r=i;break t}catch(t){}r=void 0}t.exports=r},function(t,e,n){var i=n(8),r=n(11);t.exports=function(t){return!!r(t)&&("[object Function]"==(t=i(t))||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t)}},function(t,e,n){e=n(10),t.exports="object"==typeof e&&e&&e.Object===Object&&e},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}return t+""}return""}},function(t,e,n){var i=n(22),r=n(15),o=n(23),a=n(11);t.exports=function(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?r(n)&&o(e,n.length):"string"==s&&e in n)&&i(n[e],t)}},function(t,e,n){var i=n(124),r=n(42),o=n(4),a=n(67),s=n(23),u=n(69),_=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n,l=o(t),d=!l&&r(t),c=!l&&!d&&a(t),h=!l&&!d&&!c&&u(t),A=(d=(l=l||d||c||h)?i(t.length,String):[]).length;for(n in t)!e&&!_.call(t,n)||l&&("length"==n||c&&("offset"==n||"parent"==n)||h&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||s(n,A))||d.push(n);return d}},function(t,e,n){t=n(68)(t);var i=n(6);n=n(126);var r=(e=e&&!e.nodeType&&e)&&"object"==typeof t&&t&&!t.nodeType&&t;i=r&&r.exports===e?i.Buffer:void 0,t.exports=(i?i.isBuffer:void 0)||n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){e=n(127);var i=n(128);e=(n=(n=n(129))&&n.isTypedArray)?i(n):e,t.exports=e},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var i=n(43),r=n(22),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&r(a,n)&&(void 0!==n||e in t)||i(t,e,n)}},function(t,e,n){function i(t){this.size=(this.__data__=new r(t)).size}var r=n(32);e=n(142);var o=n(143),a=n(144),s=n(145);n=n(146),i.prototype.clear=e,i.prototype.delete=o,i.prototype.get=a,i.prototype.has=s,i.prototype.set=n,t.exports=i},function(t,e,n){var i=n(159),r=n(7);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!r(e)&&!r(n)?e!=e&&n!=n:i(e,n,o,a,t,s))}},function(t,e,n){var i=n(160),r=n(163),o=n(164);t.exports=function(t,e,n,a,s,u){var _=1&n,l=t.length,d=e.length;if(l!=d&&!(_&&d>l))return!1;if((d=u.get(t))&&u.get(e))return d==e;d=-1;var c=!0,h=2&n?new i:void 0;for(u.set(t,e),u.set(e,t);++d<l;){var A=t[d],f=e[d];if(a)var p=_?a(f,A,d,e,t,u):a(A,f,d,t,e,u);if(void 0!==p){if(p)continue;c=!1;break}if(h){if(!r(e,function(t,e){if(!o(h,e)&&(A===t||s(A,t,n,a,u)))return h.push(e)})){c=!1;break}}else if(A!==f&&!s(A,f,n,a,u)){c=!1;break}}return u.delete(t),u.delete(e),c}},function(t,e,n){var i=n(46),r=n(4);t.exports=function(t,e,n){return e=e(t),r(t)?e:i(e,n(t))}},function(t,e,n){var i=n(77);e=n(78);var r=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols;t.exports=o?function(t){return null==t?[]:(t=Object(t),i(o(t),function(e){return r.call(t,e)}))}:e},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}},function(t,e){t.exports=function(){return[]}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var i=n(11);t.exports=function(t){return t==t&&!i(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var i=n(184);t.exports=function(t){return null==t?"":i(t)}},function(t,e,n){var i=n(185),r=n(186);t.exports=function(t,e){return null!=t&&r(t,e,i)}},function(t,e,n){var i=n(85),r=n(24);t.exports=function(t,e){return t&&i(t,e,r)}},function(t,e,n){e=n(191)(),t.exports=e},function(t,e,n){e=n(79)(Object.getPrototypeOf,Object),t.exports=e},function(t,e,n){var i=n(88),r=n(196),o=n(197);t.exports=function(t,e,n){return e==e?o(t,e,n):i(t,r,n)}},function(t,e){t.exports=function(t,e,n,i){var r=t.length;for(n+=i?1:-1;i?n--:++n<r;)if(e(t[n],n,t))return n;return-1}},function(t,e,n){var i=n(29);t.exports=function(t){return"function"==typeof t?t:i}},function(t,e,n){var i=n(8),r=n(7);t.exports=function(t){return!0===t||!1===t||r(t)&&"[object Boolean]"==i(t)}},function(t,e,n){e=n(203),n=e(n=n(204)),t.exports=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=(t=n(206))&&t.__esModule?t:{default:t},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));n=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");if(/[^0-9a-z\-_.]/.test(e))throw Error(o.CALL_CHAIN_ERRORS.INVALID_CALL_CHAIN);this._callChainLinks=[],e=e.split(o.CALL_CHAIN_LINK_SEPARATOR);for(var n=0;n<e.length;n++){var i=e[n].split(o.CALL_CHAIN_VARIABLE_SEPARATOR);if(2>i.length)throw Error(o.CALL_CHAIN_ERRORS.NOT_A_VALID_CALL_CHAIN_LINK);for(var a,s,u=0,_=[],l=0;l<i.length;l++){if(2!==(a=i[l].split(o.CALL_CHAIN_VARIABLE_ID_SEPARATOR)).length)throw Error(o.CALL_CHAIN_ERRORS.INVALID_CALL_CHAIN_LINK_GENERAL);if(s=a[0],a=parseInt(a[1]),isNaN(a)||0===a)throw Error(o.CALL_CHAIN_ERRORS.INVALID_CALL_CHAIN_ID);if(/[^a-z]/.test(s)||1>s.length)throw Error(o.CALL_CHAIN_ERRORS.INVALID_CALL_CHAIN_TAG);switch(s){case o.CALL_CHAIN_IDENTIFIERS.SUPPLY:u=a;break;default:_.push({id:a,tag:s})}}if(0===u)throw Error(o.CALL_CHAIN_ERRORS.INVALID_CALL_CHAIN_LINK_NO_SUPPLY_TAG);this._callChainLinks.push(new r.default(u,_))}}return i(t,[{key:"toString",value:function(){return this.callChainLinkStrings.join(o.CALL_CHAIN_LINK_SEPARATOR)}},{key:"toVidIoString",value:function(){return this.vidIoCallChainLinkStrings.join(o.CALL_CHAIN_LINK_SEPARATOR)}},{key:"getCurrentCallChainBySupplyTag",value:function(t,e){for(var n=0;n<this._callChainLinks.length;n++)if(this._callChainLinks[n].supplyTagId===t)return e?this.callChainLinkStrings.slice(0,n+1).join(o.CALL_CHAIN_LINK_SEPARATOR):(e=this.callChainLinkStrings.slice(0,n).join(o.CALL_CHAIN_LINK_SEPARATOR))+(0<e.length?o.CALL_CHAIN_LINK_SEPARATOR:"")+o.CALL_CHAIN_IDENTIFIERS.SUPPLY+o.CALL_CHAIN_VARIABLE_ID_SEPARATOR+t;throw Error(o.CALL_CHAIN_ERRORS.NO_SUPPLY_TAG_FOUND)}},{key:"getCallChainIndices",value:function(t){for(var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=[],i=this.callChainLinks,r=i.length,o=0;o<r;o++){var a=this.getCurrentCallChainBySupplyTag(i[o].supplyTagId,!0);(!t.hasOwnProperty(a)||e&&o===r-1)&&(t[a]=!0,n.push(o))}return n}},{key:"getCallChainLastTwoIndices",value:function(){return 2>this.callChainLinks.length?[0]:[this.callChainLinks.length-2,this.callChainLinks.length-1]}},{key:"getCallChainPenultimateIndex",value:function(){return 2>this.callChainLinks.length?[0]:[this.callChainLinks.length-2]}},{key:"getCallChainPenultimateLink",value:function(){return new t(this.getCurrentCallChainBySupplyTag(this.callChainLinks[this.getCallChainPenultimateIndex()].supplyTagId,!0))}},{key:"getCallChainLastLink",value:function(){return this.callChainLinks[this.callChainLinks.length-1]}},{key:"getSupplyTagHistory",value:function(t){for(var e=[],n=this.callChainLinks,i=0;i<n.length;i++){var r=this.getCurrentCallChainBySupplyTag(n[i].supplyTagId,!1);t.hasOwnProperty(r)||(t[r]=!0,e.push(i))}return e}},{key:"callChainLinks",get:function(){return this._callChainLinks}},{key:"callChainLinkStrings",get:function(){for(var t=[],e=0;e<this._callChainLinks.length;e++)t.push(this._callChainLinks[e].toString());return t}},{key:"vidIoCallChainLinkStrings",get:function(){for(var t=[],e=0;e<this._callChainLinks.length;e++)t.push(this._callChainLinks[e].toVidIoString());return t}}]),t}(),e.default=n},function(t,e){var n=Array.prototype.join;t.exports=function(t,e){return null==t?"":n.call(t,e)}},function(t,e,n){function i(t){return t?t.replace(/^\?/,"").split("&").reduce(function(t,e){e=e.split("=");var n=o(e,2);return e=n[0],n=n[1],/\[\]$/.test(e)?(t[e=e.replace("[]","")]=t[e]||[],t[e].push(n)):t[e]=n||"",t},{}):{}}function r(t){return Object.keys(t).map(function(e){return Array.isArray(t[e])?t[e].map(function(t){return e+"[]="+t}).join("&"):e+"="+t[e]}).join("&")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.parseQS=i,e.formatQS=r,e.parse=function(t,e){var n=document.createElement("a");return n.href=e&&"noDecodeWholeURL"in e&&e.noDecodeWholeURL?t:decodeURIComponent(t),{protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:i(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}},e.format=function(t){return(t.protocol||"http")+"://"+(t.host||t.hostname+(t.port?":"+t.port:""))+(t.pathname||"")+(t.search?"?"+r(t.search||""):"")+(t.hash?"#"+t.hash:"")},e.resolve=function(t,e){var n=document.getElementsByTagName("base")[0],i=n&&n.href,r=document.head||document.getElementsByTagName("head")[0]||document.body||document.getElementsByTagName("body")[0],o=n||r.appendChild(document.createElement("base")),a=document.createElement("a");return o.href=t,a.href=e,t=a.href,n?n.href=i:r.removeChild(o),t}},function(t,e,n){var i=n(211),r=n(212),o=n(13);t.exports=function(t,e){return t&&t.length?i(t,o(e,2),r):void 0}},function(t,e,n){var i=n(215);e=n(217)(function(t,e){return null==t?{}:i(t,e)}),t.exports=e},function(t,e,n){var i=n(36),r=n(216),o=n(25);t.exports=function(t,e,n){for(var a=-1,s=e.length,u={};++a<s;){var _=e[a],l=i(t,_);n(l,_)&&r(u,o(_,t),l)}return u}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();t=function(t){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t=(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?this:t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"initialize",value:function(){}}]),e}(((t=n(99))&&t.__esModule?t:{default:t}).default),e.default=t},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();t=function(t){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t=(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?this:t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"requestVast",value:function(t){}},{key:"finishVastRequest",value:function(t){}},{key:"isVastPending",get:function(){throw Error("AdVastRequestor::isVastPending must override")}},{key:"isRequestingVpaid",get:function(){throw Error("AdVastRequestor::isRequestingVpaid must override")}}]),e}(((t=n(55))&&t.__esModule?t:{default:t}).default),e.default=t},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=i(n(12)),a=i(n(16));i(n(101));var s=i(n(2)),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),_=i(n(102)),l=i(n=n(103));n=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._name="AdVpaid("+e+")",this._adVpaidState=new _.default,this._playerEventListeners={},this._volume=this._previousVolume=u.DEFAULT_VOLUME,this._playerVolume=null,this._handshakeVersion=u.HANDSHAKE_VERSION_2_0,this._initParams=l.default.getDefault(),this._creativeData=null,this._slotListeners={},this._videoSlotListeners={}}return r(t,[{key:"forwardEvent_",value:function(t){if(u.VPAID_EVENTS.hasOwnProperty(t)){this._adVpaidState.vpaidEventCount[t]++;for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.doForwardAndDispatchEvent.apply(this,[t].concat(n))}}},{key:"onAdStarted",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdStarted].concat(e))}},{key:"onAdStopped",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdStopped].concat(e))}},{key:"onAdSkipped",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdSkipped].concat(e))}},{key:"onAdLoaded",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdLoaded].concat(e))}},{key:"onAdLinearChange",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdLinearChange].concat(e))}},{key:"onAdSizeChange",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdSizeChange].concat(e))}},{key:"onAdExpandedChange",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdExpandedChange].concat(e))}},{key:"onAdSkippableStateChange",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdSkippableStateChange].concat(e))}},{key:"onAdDurationChange",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdDurationChange].concat(e))}},{key:"onAdRemainingTimeChange",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdRemainingTimeChange].concat(e))}},{key:"onAdVolumeChange",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdVolumeChange].concat(e))}},{key:"onAdImpression",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdImpression].concat(e))}},{key:"onAdClickThru",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdClickThru].concat(e))}},{key:"onAdInteraction",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdInteraction].concat(e))}},{key:"onAdVideoStart",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdVideoStart].concat(e))}},{key:"onAdVideoFirstQuartile",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdVideoFirstQuartile].concat(e))}},{key:"onAdVideoMidpoint",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdVideoMidpoint].concat(e))}},{key:"onAdVideoThirdQuartile",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdVideoThirdQuartile].concat(e))}},{key:"onAdVideoComplete",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdVideoComplete].concat(e))}},{key:"onAdUserAcceptInvitation",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdUserAcceptInvitation].concat(e))}},{key:"onAdUserMinimize",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdUserMinimize].concat(e))}},{key:"onAdUserClose",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdUserClose].concat(e))}},{key:"onAdPaused",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdPaused].concat(e))}},{key:"onAdPlaying",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdPlaying].concat(e))}},{key:"onAdError",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdError].concat(e))}},{key:"onAdLog",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.forwardEvent_.apply(this,[u.VPAID_EVENTS.AdLog].concat(e))}},{key:"handshakeVersion",value:function(t){try{t&&(1<(t=""+t).length&&2===parseInt(t[0])&&(this._handshakeVersion=t))}catch(t){}return this._handshakeVersion}},{key:"initAd",value:function(t,e,n,i,r,o){this._initParams.width=t,this._initParams.height=e,this._initParams.viewMode=n,this._initParams.desiredBitrate=i,this._initParams.environmentVars=o,this._creativeData=r,this._adVpaidState.isInitAd=!0}},{key:"resizeAd",value:function(t,e,n){this._initParams.width=t,this._initParams.height=e,this._initParams.viewMode=n}},{key:"startAd",value:function(){this._adVpaidState.isStartAd=!0}},{key:"stopAd",value:function(){this._adVpaidState.isStopAd=!0}},{key:"pauseAd",value:function(){}},{key:"resumeAd",value:function(){}},{key:"expandAd",value:function(){}},{key:"collapseAd",value:function(){}},{key:"skipAd",value:function(){this._adVpaidState.isSkipAd=!0}},{key:"getAdVolumeInternal",value:function(){return this._volume}},{key:"getAdVolume",value:function(){return this.getAdVolumeInternal()}},{key:"setAdVolumeInternal",value:function(t){this._previousVolume=this._volume,this._volume=t}},{key:"setAdVolume",value:function(t){this._playerVolume=t,this.setAdVolumeInternal(t)}},{key:"getAdExpanded",value:function(){return u.VPAID_DEFAULTS.getAdExpanded}},{key:"getAdCompanions",value:function(){return u.VPAID_DEFAULTS.getAdCompanions}},{key:"getAdDuration",value:function(){return u.VPAID_DEFAULTS.getAdDuration}},{key:"getAdHeight",value:function(){return this._initParams.height}},{key:"getAdWidth",value:function(){return this._initParams.width}},{key:"getAdViewMode",value:function(){return this._initParams.viewMode}},{key:"getAdIcons",value:function(){return u.VPAID_DEFAULTS.getAdIcons}},{key:"getAdLinear",value:function(){return u.VPAID_DEFAULTS.getAdLinear}},{key:"getAdRemainingTime",value:function(){return u.VPAID_DEFAULTS.getAdRemainingTime}},{key:"getAdSkippableState",value:function(){return u.VPAID_DEFAULTS.getAdSkippableState}},{key:"addSlotEventListener_",value:function(t,e){this._slotListeners.hasOwnProperty(t)||(this._slotListeners[t]=[]),this._slotListeners[t].push(e),this._initParams.environmentVars.slot.addEventListener(t,e,!1)}},{key:"removeSlotEventListener_",value:function(t,e){var n=this;this._initParams.environmentVars.slot.removeEventListener(t,e,!1),this._slotListeners.hasOwnProperty(t)&&(0,s.default)(this._slotListeners[t],function(i,r){i===e&&n._slotListeners[t].splice(r,1)})}},{key:"addVideoSlotEventListener_",value:function(t,e){this._videoSlotListeners.hasOwnProperty(t)||(this._videoSlotListeners[t]=[]),this._videoSlotListeners[t].push(e),this._initParams.environmentVars.videoSlot.addEventListener(t,e,!1)}},{key:"removeVideoSlotEventListener_",value:function(t,e){var n=this;this._initParams.environmentVars.videoSlot&&this._initParams.environmentVars.videoSlot.removeEventListener(t,e,!1),this._videoSlotListeners.hasOwnProperty(t)&&(0,s.default)(this._videoSlotListeners[t],function(i,r){i===e&&n._videoSlotListeners[t].splice(r,1)})}},{key:"removeAllListeners",value:function(){var t=this;(0,o.default)((0,a.default)({},this._videoSlotListeners),function(e,n){(0,s.default)(e,function(e){t.removeVideoSlotEventListener_(n,e)})}),(0,o.default)((0,a.default)({},this._slotListeners),function(e,n){(0,s.default)(e,function(e){t.removeSlotEventListener_(n,e)})})}},{key:"registerVpaidEventListeners_",value:function(t){var e=this,n=this,i={AdStarted:function(){n.onAdStarted.apply(n,arguments)},AdStopped:function(){n.onAdStopped.apply(n,arguments)},AdSkipped:function(){n.onAdSkipped.apply(n,arguments)},AdLoaded:function(){n.onAdLoaded.apply(n,arguments)},AdLinearChange:function(){n.onAdLinearChange.apply(n,arguments)},AdSizeChange:function(){n.onAdSizeChange.apply(n,arguments)},AdExpandedChange:function(){n.onAdExpandedChange.apply(n,arguments)},AdSkippableStateChange:function(){n.onAdSkippableStateChange.apply(n,arguments)},AdDurationChange:function(){n.onAdDurationChange.apply(n,arguments)},AdRemainingTimeChange:function(){n.onAdRemainingTimeChange.apply(n,arguments)},AdVolumeChange:function(){n.onAdVolumeChange.apply(n,arguments)},AdImpression:function(){n.onAdImpression.apply(n,arguments)},AdClickThru:function(){n.onAdClickThru.apply(n,arguments)},AdInteraction:function(){n.onAdInteraction.apply(n,arguments)},AdVideoStart:function(){n.onAdVideoStart.apply(n,arguments)},AdVideoFirstQuartile:function(){n.onAdVideoFirstQuartile.apply(n,arguments)},AdVideoMidpoint:function(){n.onAdVideoMidpoint.apply(n,arguments)},AdVideoThirdQuartile:function(){n.onAdVideoThirdQuartile.apply(n,arguments)},AdVideoComplete:function(){n.onAdVideoComplete.apply(n,arguments)},AdUserAcceptInvitation:function(){n.onAdUserAcceptInvitation.apply(n,arguments)},AdUserMinimize:function(){n.onAdUserMinimize.apply(n,arguments)},AdUserClose:function(){n.onAdUserClose.apply(n,arguments)},AdPaused:function(){n.onAdPaused.apply(n,arguments)},AdPlaying:function(){n.onAdPlaying.apply(n,arguments)},AdError:function(){n.onAdError.apply(n,arguments)},AdLog:function(){n.onAdLog.apply(n,arguments)}};(0,s.default)(u.VPAID_EVENTS,function(n){t.subscribe(i[n],n,e)})}},{key:"unregisterVpaidEventListeners_",value:function(t){(0,s.default)(u.VPAID_EVENTS,function(e){t.unsubscribe(e)})}},{key:"doForwardAndDispatchEvent",value:function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.dispatchEvent.apply(this,[t].concat(n))}},{key:"dispatchEvent",value:function(t){if(this._playerEventListeners.hasOwnProperty(t)){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(e=0;e<this._playerEventListeners[t].length;e++)this._playerEventListeners[t][e].apply(this._playerEventListeners[t][e],n)}}},{key:"subscribe",value:function(t,e,n){this._playerEventListeners.hasOwnProperty(e)||(this._playerEventListeners[e]=[]),this._playerEventListeners[e].push(t.bind(n))}},{key:"unsubscribe",value:function(t){this._playerEventListeners&&this._playerEventListeners.hasOwnProperty(t)&&(this._playerEventListeners[t]=[])}},{key:"name",get:function(){return this._name}},{key:"uuid",get:function(){return null}},{key:"shortUuid",get:function(){return null}},{key:"adVpaidState",get:function(){return this._adVpaidState}}]),t}(),e.default=n},function(t,e,n){var i=n(13),r=n(222);t.exports=function(t,e){var n=[];if(!t||!t.length)return n;var o=-1,a=[],s=t.length;for(e=i(e,3);++o<s;){var u=t[o];e(u,o,t)&&(n.push(u),a.push(o))}return r(t,a),n}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=(t=n(18))&&t.__esModule?t:{default:t},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));n=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._isSkipAd=this._isStopAd=this._isStartAd=this._isInitAd=!1,this._vpaidEventCount=(0,r.default)(o.VPAID_EVENTS,function(){return 0})}return i(t,[{key:"isVpaidEvent",value:function(t){return this._vpaidEventCount.hasOwnProperty(t)&&0<this._vpaidEventCount[t]}},{key:"isKilledAd",get:function(){return this._isStopAd||this._isSkipAd}},{key:"isAdDead",get:function(){return this.isVpaidEvent(o.VPAID_EVENTS.AdStopped)||this.isVpaidEvent(o.VPAID_EVENTS.AdError)}},{key:"isDead",get:function(){return this.isKilledAd||this.isAdDead||this.isVpaidEvent(o.VPAID_EVENTS.AdSkipped)}},{key:"isContinue",get:function(){return!this.isDead&&!this.isVpaidEvent(o.VPAID_EVENTS.AdImpression)}},{key:"isInitAd",get:function(){return this._isInitAd},set:function(t){this._isInitAd=t}},{key:"isStartAd",get:function(){return this._isStartAd},set:function(t){this._isStartAd=t}},{key:"isStopAd",get:function(){return this._isStopAd},set:function(t){this._isStopAd=t}},{key:"isSkipAd",get:function(){return this._isSkipAd},set:function(t){this._isSkipAd=t}},{key:"vpaidEventCount",get:function(){return this._vpaidEventCount}}]),t}(),e.default=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));t=function(){function t(e,n,i,r,o){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._width=e,this._height=n,this._viewMode=i,this._desiredBitrate=r,this._environmentVars=o}return i(t,null,[{key:"getDefault",value:function(){return new t(r.VPAID_DEFAULTS.getAdWidth,r.VPAID_DEFAULTS.getAdHeight,r.VPAID_DEFAULTS.getAdViewMode,null,null)}}]),i(t,[{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"viewMode",get:function(){return this._viewMode},set:function(t){this._viewMode=t}},{key:"desiredBitrate",get:function(){return this._desiredBitrate},set:function(t){this._desiredBitrate=t}},{key:"environmentVars",get:function(){return this._environmentVars},set:function(t){this._environmentVars=t}}]),t}(),e.default=t},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.replaceDetectedMacros=function(t,e,n){return 0>n.indexOf("{{")?n:(null!==t&&(n=(n=(n=(n=n.replace(r.TRUST_BUT_VERIFY_MACROS.DETECTED_DOMAIN,t.domain_match)).replace(r.TRUST_BUT_VERIFY_MACROS.DETECTED_URL,t.url)).replace(r.TRUST_BUT_VERIFY_MACROS.DETECTED_ENCODED_URL,encodeURIComponent(t.url))).replace(r.TRUST_BUT_VERIFY_MACROS.DETECTED_DOUBLE_ENCODED_URL,encodeURIComponent(encodeURIComponent(t.url)))),null!==e&&(n=(n=(n=(n=n.replace(r.TRUST_BUT_VERIFY_MACROS.DETECTED_HEIGHT,e.height)).replace(r.TRUST_BUT_VERIFY_MACROS.DETECTED_WIDTH,e.width)).replace(r.DEMAND_PARTNER_MACROS.D_HEIGHT,e.height)).replace(r.DEMAND_PARTNER_MACROS.D_WIDTH,e.width)),t=o.detector(),e=r.VIEWABILITY.UNINITIALIZED,null!==t&&(e=t.isInView),(n=n.replace(r.TRUST_BUT_VERIFY_MACROS.DETECTED_IN_VIEW,e)).replace(r.TRUST_BUT_VERIFY_MACROS.DETECTED_IS_VISIBLE,e))};var r=i(n(0)),o=i(n=n(19))},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));t=function(t){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t=(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?this:t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"finishVastRequest",value:function(t){this.cabinet.imaManager.finishVastRequest(t),function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"finishVastRequest",this).call(this,t)}},{key:"registerImaManagerEventListeners",value:function(){this.cabinet.imaManager.subscribeImaManagerEvent(this.onLOADED,r.IMA_MANAGER_EVENT_TYPES.LOADED,this),this.cabinet.imaManager.subscribeImaManagerEvent(this.onLOAD_ERROR,r.IMA_MANAGER_EVENT_TYPES.LOAD_ERROR,this)}},{key:"unregisterImaManagerEventListeners",value:function(){this.cabinet.imaManager.unsubscribeImaManagerEvent(r.IMA_MANAGER_EVENT_TYPES.LOADED,this.onLOADED),this.cabinet.imaManager.unsubscribeImaManagerEvent(r.IMA_MANAGER_EVENT_TYPES.LOAD_ERROR,this.onLOAD_ERROR)}},{key:"defaultDemandType",get:function(){return r.DEMAND_TYPES.IMA}}]),e}(((t=n(38))&&t.__esModule?t:{default:t}).default),e.default=t},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0},u=r(t=n(16)),_=r(t=n(5)),l=i(t=n(0)),d=r(t=n(9)),c=i(t=n(1)),h=n(105);h=r(h);var A=n(28),f=r(A),p=r(A=n(2)),E=r(n=n(57)),R=t.SECURE_PROTOCOL+"//pubads.g.doubleclick.net/gampad/ads?output=xml_vast3&gdfp_req=1&env=vp&";n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r));return o._bidParams=o._demandTag.hasOwnProperty("bid_params")?o._demandTag.bid_params:{},o._bidOptionalParams=o._demandTag.hasOwnProperty("bid_optional_params")?o._demandTag.bid_optional_params:{},o.adUnitName=o._bidParams.adUnitName,o.videoSize=o._bidParams.videoSize,o.priceBucketParameterName=o._bidParams.priceBucketParameterName,o.priceBucketGranularity=parseFloat(o._bidParams.priceBucketGranularity),o.priceBucketUpperLimit=parseFloat(o._bidParams.priceBucketUpperLimit),o.customParameters="",o.bid=null,o._bidFloor=(0,f.default)(o._demandTag.hasOwnProperty("bid_floor")?o._demandTag.bid_floor:0),o._bidOptionalParams.hasOwnProperty("customParameters")&&(0,p.default)(o._bidOptionalParams.customParameters,function(t,e){o.customParameters=o.customParameters?o.customParameters+"&"+e+"="+c.unencodeParam(t):o.customParameters+(e+"=")+c.unencodeParam(t)}),o._overLimitBid=l.NO_SCORE,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,h.default),a(e,[{key:"initialize",value:function(){if(this._adSlotState=l.SLOT_STATES.REQUESTING_INIT,this.isInvalidParams())this.onSlotInitialized(this.idx,l.VD_ERROR_CODES.DFP_FALLBACK_INVALID_PARAMS);else{var t=void 0;try{t=!this._cabinet.isDomainMatch&&this._demandTag.td}catch(t){return void this.onSlotInitialized(this.idx,l.VD_ERROR_CODES.PRE_INIT_TD_MISMATCH_FAIL)}t?this.onSlotInitialized(this.idx,l.VD_ERROR_CODES.PRE_INIT_TD_MISMATCH):this.cabinet.imaManager.state===l.IMA_MANAGER_STATES.LOAD_ERROR?this.onLOAD_ERROR():this.cabinet.imaManager.state===l.IMA_MANAGER_STATES.LOADED?this.onLOADED():this.cabinet.imaManager.state===l.IMA_MANAGER_STATES.INIT&&(this.registerImaManagerEventListeners(),this.cabinet.timeoutManager.startImaLoad(),this.cabinet.imaManager.loadAndStartIma())}}},{key:"_containerRequestVast",value:function(t){}},{key:"isInvalidParams",value:function(){return!this.adUnitName||!this.videoSize||!this.priceBucketParameterName||!this.priceBucketGranularity||(0,d.default)(this.priceBucketGranularity)||!this.priceBucketUpperLimit||(0,d.default)(this.priceBucketUpperLimit)}},{key:"getBid",value:function(t){var e=t;return(!t||t<this._bidFloor)&&(e=this._bidFloor),(0===(t=e/this.priceBucketGranularity)?e:Math.ceil(t)*this.priceBucketGranularity).toFixed(2)}},{key:"isBidOverLimit",value:function(t){return this.getBid(t)>this.priceBucketUpperLimit}},{key:"setBid",value:function(t){this.bid=this.getBid(t),this.sendJsDemandResponse(!0,{vv:l.VAST_VERSION.IMA}),this._adVast=new E.default((0,_.default)({imaTagUrl:this.getTagUrl(),hbDetails:this.hbDetails},l.getDefaultVastData())),this._overLimitBid=l.NO_SCORE,this.onSlotVastDone(this._idx,this._adVast)}},{key:"getTagUrl",value:function(){var t=R+"iu="+this.adUnitName+"&sz="+this.videoSize;this.customParameters?t+="&cust_params="+encodeURIComponent(this.customParameters+"&"+this.priceBucketParameterName+"="+this.bid):t+="&"+this.priceBucketParameterName+"="+this.bid;return t}},{key:"finishVastRequest",value:function(t){var n;this._overLimitBid!==l.NO_SCORE&&this.sendJsDemandResponse(!1,(o(n={},l.VID_IO_PARAMS.vastErrorCode,l.VAST_ERRORCODES.SS_VEC_1322_DFP_NOT_CALLED_BID_ABOVE_MAX),o(n,l.VID_IO_PARAMS.reason,l.VD_ERROR_CODES.DFP_NOT_CALLED_BID_ABOVE_MAX_PRICE),n));s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"finishVastRequest",this).call(this,t)}},{key:"sendJsDemandResponse",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];i={cc_i:this._demandTag.callChain.getCallChainIndices(this.cabinet.historyManager.demand_events.response,!0).join(","),response_time:this.cabinet.timeoutManager.getImaLoadingTime(),wrapper_count:0,has_ad:t,timeout:i,dtype:l.DEMAND_TYPES.IMA},s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"sendJsDemandResponse",this).call(this,l.VID_IO_EVENTS.cm_js_demand_req_resp,this._demandTag,(0,u.default)(i,n))}},{key:"onLOADED",value:function(){this.adVpaidState.isContinue&&this.onSlotInitialized(this.idx,null)}},{key:"onLOAD_ERROR",value:function(){this.adVpaidState.isContinue&&this.onSlotInitialized(this.idx,l.VD_ERROR_CODES.ADS_MANAGER_LOAD_ERROR)}},{key:"internalError",value:function(t,n){var i;this._initFailReason===l.VD_ERROR_CODES.ADS_MANAGER_LOAD_ERROR?(this.sendJsDemandResponse(!1,(o(i={},l.VID_IO_PARAMS.vastErrorCode,l.VAST_ERRORCODES.SS_VEC_1320_IMA_MANAGER_LOADER_ERROR),o(i,l.VID_IO_PARAMS.reason,l.VD_ERROR_CODES.IMA_MANAGER_LOAD_ERROR),i)),this.onSlotVastDone(this._idx,null)):s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"internalError",this).call(this,t,n)}},{key:"hbDetails",get:function(){var t;return o(t={},l.VID_IO_PARAMS.bidPrice,this.bid),o(t,l.VID_IO_PARAMS.bidFloor,this._bidFloor),t}},{key:"effectiveScore",get:function(){return 0}},{key:"overLimitBid",get:function(){return this._overLimitBid},set:function(t){this._overLimitBid=t}}]),e}(),e.default=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();t=function(t){function e(t,n,i){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdStartManager("+t+")",n,i),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?this:t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"onAdLoaded",value:function(){(function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdLoaded",this).call(this),this.adVpaidState.isStartAd&&this.ad&&!this.ad.adVpaidState.isStartAd&&this.ad.startAd()}}]),e}(((t=n(55))&&t.__esModule?t:{default:t}).default),e.default=t},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0};t=(t=n(100))&&t.__esModule?t:{default:t};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));n=function(t){function e(t,n,i){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t)._cabinet=n,t._adVast=i,t._expanded=!1,t._clickToPlay=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"getAdExpanded",value:function(){return this._expanded}},{key:"collapseAd",value:function(){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"collapseAd",this).call(this),this._expanded=!1}},{key:"expandAd",value:function(){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"expandAd",this).call(this),this._expanded=!0}},{key:"_cleanup",value:function(){this._clickToPlay&&(this.removeVideoSlotEventListener_(o.VIDEO_EVENTS.click,this._clickToPlay),this._clickToPlay=null)}},{key:"stopAd",value:function(){this._cleanup(),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stopAd",this).call(this)}},{key:"skipAd",value:function(){this._cleanup(),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"skipAd",this).call(this)}},{key:"onAdError",value:function(){var t;this._cleanup();for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];(t=r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdError",this)).call.apply(t,[this].concat(i))}},{key:"onAdSkipped",value:function(){var t;this._cleanup();for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];(t=r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdSkipped",this)).call.apply(t,[this].concat(i))}},{key:"onAdStopped",value:function(){var t;this._cleanup();for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];(t=r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdStopped",this)).call.apply(t,[this].concat(i))}},{key:"showClickToPlay",value:function(){var t=this;this._initParams.environmentVars.videoSlot.setAttribute(o.VIDEO_ATTRIBUTES_POSTER,this._cabinet.getPosterUrl(this._initParams.width,this._initParams.height)),this._clickToPlay={handleEvent:function(){t.removeVideoSlotEventListener_(o.VIDEO_EVENTS.click,t._clickToPlay),t._clickToPlay=null,t.playAd()}},this.addVideoSlotEventListener_(o.VIDEO_EVENTS.click,this._clickToPlay)}},{key:"playAd",value:function(){throw Error("AdVpaidWrapper::playAd must override")}},{key:"cabinet",get:function(){return this._cabinet}},{key:"uuid",get:function(){return this._cabinet.uuid}},{key:"shortUuid",get:function(){return this._cabinet.shortUuid}}]),e}(t.default),e.default=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.addBlankMp4=function(t){t.setAttribute(i.VIDEO_ATTRIBUTES.src,i.BLANK_MP4),t.setAttribute(i.VIDEO_ATTRIBUTES.type,i.MP4_MIMETYPE)},e.removeBlankMp4=function(t){t.removeAttribute(i.VIDEO_ATTRIBUTES.src),t.removeAttribute(i.VIDEO_ATTRIBUTES.type)},e.isMuted=function(t){return 0===t.volume||t.muted},e.isPlaying=function(t){return!t.paused&&!t.ended};var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0))},function(t,e,n){var i=n(6);t.exports=function(){return i.Date.now()}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();t=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._params={}}return i(t,[{key:"pushParam",value:function(t,e){this._params[t]=e}},{key:"build",value:function(){return this}}]),t}(),e.default=t},function(t,e,n){var i=(t=n(113))&&t.__esModule?t:{default:t};window.getVPAIDAd=function(){return new i.default("vid.springserve.com","vid-io.springserve.net/vd/i","vpaid.springserve.net/production/bridge_789074cb.swf","vpaid.springserve.net/posters/",!0,"789074cb")}},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_=r(t=n(5)),l=r(t=n(16)),d=r(t=n(12)),c=r(t=n(49)),h=i(t=n(194)),A=r(t=n(53)),f=r(t=n(209));t=r(t=n(107));var p=n(0),E=i(p),R=i(p=n(265)),O=i(p=n(266)),S=n(1),y=i(S),v=r(p=n(269)),T=i(p=n(270)),I=i(p=n(271)),m=r(p=n(272)),g=i(p=n(40)),b=i(p=n(19)),P=r(p=n(273)),D=r(p=n(274)),V=n(288),C=n(289),N=r(n=n(103));n=function(t){function e(t,n,i,r,o,a){var s=6<arguments.length&&void 0!==arguments[6]?arguments[6]:null;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var u=(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdController",new D.default(t,n,i,r,o,a,m.default),N.default.getDefault());if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(u=!u||"object"!=typeof u&&"function"!=typeof u?this:u)._moatApiReference=null,u._iasApiReference=null,u._pixelQueue=new A.default(u._cabinet),u._unloadDetection=new P.default(u._cabinet,u._initParams,u.adVpaidState,u._adVidIoState,s,u._pixelQueue),u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),u(e,null,[{key:"getJsonUrl",value:function(t,e,n){var i={};if(null!==t.manifest.urlparams)for(var r in t.manifest.urlparams)t.manifest.urlparams.hasOwnProperty(r)&&(i[r]=t.manifest.urlparams[r]);return i[E.JSON_PIXEL_PARAMS.declaredDomain]=t.manifest.domain,i[E.JSON_PIXEL_PARAMS.declaredWidth]=t.manifest.width,i[E.JSON_PIXEL_PARAMS.declaredHeight]=t.manifest.height,i[E.JSON_PIXEL_PARAMS.detectedDomain]=t.locationInfo.domain_match,i[E.JSON_PIXEL_PARAMS.detectedWidth]=e.width,i[E.JSON_PIXEL_PARAMS.detectedHeight]=e.height,i[E.JSON_PIXEL_PARAMS.fullUrl]=t.locationInfo.url,i[E.JSON_PIXEL_PARAMS.cb]=y.getCb(),i[E.JSON_PIXEL_PARAMS.url]=t.manifest.td?t.locationInfo.domain_match:t.manifest.domain,i[E.JSON_PIXEL_PARAMS.w]=t.manifest.ts?e.width:t.manifest.width,i[E.JSON_PIXEL_PARAMS.h]=t.manifest.ts?e.height:t.manifest.height,y.makeUrl(y.getProtocol(n),t.endpoint+"/json/"+t.manifest.supplyTagId,i)}}]),u(e,[{key:"replaceBidPriceMacro",value:function(t,e){return(0,d.default)(t,function(t){var n=t.url;return 0<=n.indexOf("{{")?(0,_.default)({},{url:n.replace(E.HB_BID_PRICE_MACRO,e)},t):t})}},{key:"doForwardAndDispatchEvent",value:function(t){for(var e=this,n=arguments.length,i=Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(E.VOLUME_EVENTS.hasOwnProperty(t)&&this.setAdVolumeInternal(this.getAdVolumeInternal()),(n=this._currentDemandTag)&&(r=h.getPixelUrlsByEvent(n,t),t===E.VPAID_EVENTS.AdImpression&&this._ad._ad.hasOwnProperty("_vast")&&this._ad._ad._vast.hasOwnProperty("hbDetails")&&(r=this.replaceBidPriceMacro(r,this._ad._ad._vast.hbDetails.bp)),y.firePixels(document,r)),null!==this._moatApiReference)try{var a={type:t,adVolume:this.getAdVolumeInternal()};this._moatApiReference.dispatchEvent(a)}catch(t){var s;this.on_js_warning(n,(o(s={},E.VID_IO_PARAMS.reason,E.VD_ERROR_CODES.MOAT_SEND),o(s,E.VID_IO_PARAMS.vastErrorCode,E.VAST_ERRORCODES.SS_VEC_1539_MOAT_SEND),s))}if(E.IAS_EVENTS.hasOwnProperty(t)&&this._sendIasEvent(t,n,{}),E.VPAID_FINAL_EVENTS.hasOwnProperty(t)&&!this._pixelQueue.isDone){var u=setTimeout(function(){e._pixelQueue.unsubscribe(E.AD_PIXEL_EVENTS.DONE),e.dispatchEvent.apply(e,[t].concat(i))},this._cabinet.timeouts.VPAID_FINAL_EVENT_TIMEOUT);this._pixelQueue.subscribe(function(){clearTimeout(u),this._pixelQueue.unsubscribe(E.AD_PIXEL_EVENTS.DONE),this.dispatchEvent.apply(this,[t].concat(i))},E.AD_PIXEL_EVENTS.DONE,this)}else this.dispatchEvent.apply(this,[t].concat(i))}},{key:"_sendIasEvent",value:function(t,e,n){if(null!==this._iasApiReference)try{var i;i=this._initParams.environmentVars.videoSlot?this._initParams.environmentVars.videoSlot:this._initParams.environmentVars.slot;var r=(0,l.default)({ad_duration:this.getAdDuration(),ad_dimensions:this._initParams.width+"x"+this._initParams.height,player_dimensions:i.width+"x"+i.height,volume:this.getAdVolumeInternal()},n);this._iasApiReference.sendEvent(t,r)}catch(t){var a;this.on_js_warning(e,(o(a={},E.VID_IO_PARAMS.reason,E.VD_ERROR_CODES.IAS_SEND),o(a,E.VID_IO_PARAMS.vastErrorCode,E.VAST_ERRORCODES.SS_VEC_1540_IAS_SEND),a))}}},{key:"dispatchEvent",value:function(t){try{for(var n,i=arguments.length,r=Array(1<i?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];(n=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispatchEvent",this)).call.apply(n,[this,t].concat(r))}catch(t){}}},{key:"initAd",value:function(t,n,i,r,o,a){try{s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initAd",this).call(this,t,n,i,r,o,a)}catch(t){return void this.initAdError(E.VD_ERROR_CODES.INIT_AD_ERROR,t)}try{this._cabinet.pixelEventFactory.setInitParams(this._initParams)}catch(t){return void this.initAdError(E.VD_ERROR_CODES.PIXEL_FACTORY_SET_INIT_PARAMS,t)}try{this._cabinet.manifest=h.parse(JSON.parse(this._creativeData.AdParameters))}catch(t){return void this.initAdError(E.VD_ERROR_CODES.MANIFEST_PARSE_ERROR,t)}try{this._unloadDetection.registerUnloads()}catch(t){return void this.initAdError(E.VD_ERROR_CODES.UNLOAD_DETECTION_INIT_ERROR,t)}var u=void 0;try{u=this._cabinet.getSizeInfo(this._initParams)}catch(t){return void this.initAdError(E.VD_ERROR_CODES.INIT_AD_STATE_INFO_ERROR,t)}var _=void 0;try{_=this._cabinet.isDomainMatch}catch(t){return void this.initAdError(E.VD_ERROR_CODES.INIT_AD_TD_MISMATCH_ERROR,t)}var l=void 0;try{l=this._cabinet.isSizeMatch(u)}catch(t){return void this.initAdError(E.VD_ERROR_CODES.INIT_AD_TS_MISMATCH_ERROR,t)}try{var d=(0,c.default)(this._initParams.environmentVars.videoSlot)?this._initParams.environmentVars.videoSlot:this._initParams.environmentVars.slot;b.init(d,document)}catch(t){}try{if(this._cabinet.manifest.td&&!_||this._cabinet.manifest.ts&&!l)return void this.getNewAdParameters(t,n,i,r,o,a,u)}catch(t){return void this.initAdError(E.VD_ERROR_CODES.INIT_AD_GET_NEW_AD_PARAMETERS_ERROR,t)}try{this.postInit(t,n,i,r,o,a)}catch(t){this.postInitError(t)}}},{key:"postInit",value:function(t,e,n,i,r,a){if(!this._adVpaidState.isDead){if(0===this._cabinet.manifest.numWaterfalls)throw Error(E.VD_ERROR_CODES.NO_RESPONSES);try{this._cabinet.initialize(a)}catch(t){throw this.on_js_opportunity(null,o({},E.VID_IO_PARAMS.reason,t),null),Error(t)}try{var s;this.on_js_opportunity(null,(o(s={},E.VID_IO_PARAMS.timeOnPage,this._cabinet.timeoutManager.initTime),o(s,E.VID_IO_PARAMS.numBroadcastQueues,this._cabinet.manifest.numWaterfalls),o(s,E.VID_IO_PARAMS.numDemandTags,this._cabinet.manifest.numTags),s),null)}catch(t){throw Error(E.VD_ERROR_CODES.JS_OPPORTUNITY_ERROR)}try{this._ad=new f.default(this._cabinet,this._initParams),this._ad.handshakeVersion(this._handshakeVersion),this.registerVpaidEventListeners_(this._ad),this.registerSSEventListeners_(this._ad),this.setAdVolume(this._volume)}catch(t){throw Error(E.VD_ERROR_CODES.PROCESSOR_CREATE_ERROR)}try{y.firePixels(document,h.getPixelUrlsByEvent(this._cabinet.manifest,E.MANIFEST_PIXEL_EVENTS.initAd))}catch(t){throw Error(E.VD_ERROR_CODES.FIRE_INIT_AD_PIXELS_ERROR)}try{this._ad.initAd(t,e,n,i,r,a)}catch(t){throw Error(E.VD_ERROR_CODES.PROCESSOR_INIT_ERROR)}try{this._ad.nextBroadcast()}catch(t){throw Error(E.VD_ERROR_CODES.PROCESSOR_NEXT_BROADCAST_ERROR)}}}},{key:"resizeAd",value:function(t,n,i){this._sendIasEvent(E.IAS_RESIZE_AD,this._currentDemandTag,{width:t,height:n,viewMode:i}),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"resizeAd",this).call(this,t,n,i)}},{key:"postInitError",value:function(t){this.initAdError(t&&t.message?t.message:E.VD_ERROR_CODES.AD_CONTROLLER_ERROR,t?t.error:null)}},{key:"initAdError",value:function(t,e){var n=void 0,i=void 0;try{var r="null"===t?E.VD_ERROR_CODES.RECEIVED_NULL_STRING:t;if("null"===(n=(r||E.VD_ERROR_CODES.INIT_AD_EMPTY_ERROR)+(e?"_"+e.message:""))&&(n=E.VD_ERROR_CODES.INIT_AD_NULL_ERROR),i=o({reason:n,timeout:!1},E.VID_IO_PARAMS.timeOnPage,0),null!==this._cabinet.timeoutManager&&t!==E.VD_ERROR_CODES.TIMEOUT_MANAGER_INIT_ERROR){var s=a(this._cabinet.timeoutManager.timeOnPage,1);E.VID_IO_PARAMS.timeOnPage=s[0]}}catch(t){i=o({reason:n=E.VD_ERROR_CODES.INIT_AD_ERROR_EXCEPTION,timeout:!1},E.VID_IO_PARAMS.timeOnPage,0)}this.on_js_supply_error(null,i,null),this.onAdError(n)}},{key:"supplyError",value:function(t,e){var n;this.on_js_supply_error(null,(o(n={},E.VID_IO_PARAMS.timeOnPage,this._cabinet.timeoutManager.timeOnPage),o(n,"reason",t),o(n,"timeout",e),n),null)}},{key:"stopAd",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stopAd",this).call(this),this.adVpaidState.isVpaidEvent(E.VPAID_EVENTS.AdImpression)||this.supplyError(this._ad?E.VD_ERROR_CODES.STOP_AD_CALLED:E.VD_ERROR_CODES.STOP_AD_CALLED_BEFORE_POSTINIT,!0)}},{key:"skipAd",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"skipAd",this).call(this),this.adVpaidState.isVpaidEvent(E.VPAID_EVENTS.AdImpression)||this.supplyError(this._ad?E.VD_ERROR_CODES.SKIP_AD_CALLED:E.VD_ERROR_CODES.SKIP_AD_CALLED_BEFORE_POSTINIT,!0)}},{key:"setAdVolume",value:function(t){this.cabinet.autoplayVideoElementManager&&this.cabinet.autoplayVideoElementManager.onSetAdVolume(t),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setAdVolume",this).call(this,t)}},{key:"on_js_impression",value:function(t,n,i){try{O.load(document,this._cabinet.manifest,t,this._initParams.width,this._initParams.height,this._cabinet.locationInfo.domain_match,y.SECURE_PROTOCOL)}catch(e){var r;this.on_js_warning(t,(o(r={},E.VID_IO_PARAMS.reason,E.VD_ERROR_CODES.SSC_POST_IMP),o(r,E.VID_IO_PARAMS.vastErrorCode,E.VAST_ERRORCODES.SS_VEC_1537_SSC_POST_IMP),r))}try{var a=this._cabinet.getSizeInfo(this._initParams);try{this.doMoatPostImp(t,a)}catch(e){var u;this.on_js_warning(t,(o(u={},E.VID_IO_PARAMS.reason,E.VD_ERROR_CODES.MOAT_POST_IMP),o(u,E.VID_IO_PARAMS.vastErrorCode,E.VAST_ERRORCODES.SS_VEC_1533_MOAT_POST_IMP),u))}try{this.doIasPostImp(t,a)}catch(e){var _;this.on_js_warning(t,(o(_={},E.VID_IO_PARAMS.reason,E.VD_ERROR_CODES.IAS_POST_IMP),o(_,E.VID_IO_PARAMS.vastErrorCode,E.VAST_ERRORCODES.SS_VEC_1534_IAS_POST_IMP),_))}try{this.doForensiqPostImp(t,a)}catch(e){var l;this.on_js_warning(t,(o(l={},E.VID_IO_PARAMS.reason,E.VD_ERROR_CODES.FORENSIQ_POST_IMP),o(l,E.VID_IO_PARAMS.vastErrorCode,E.VAST_ERRORCODES.SS_VEC_1535_FORENSIQ_POST_IMP),l))}try{this.doProtectedMediaPostImp(t,a)}catch(e){var d;this.on_js_warning(t,(o(d={},E.VID_IO_PARAMS.reason,E.VD_ERROR_CODES.FORENSIQ_POST_IMP),o(d,E.VID_IO_PARAMS.vastErrorCode,E.VAST_ERRORCODES.SS_VEC_1538_PROTECTED_MEDIA_POST_IMP),d))}}catch(e){var c;this.on_js_warning(t,(o(c={},E.VID_IO_PARAMS.reason,E.VD_ERROR_CODES.SIZEINFO_POST_IMP),o(c,E.VID_IO_PARAMS.vastErrorCode,E.VAST_ERRORCODES.SS_VEC_1536_SIZEINFO_POST_IMP),c))}s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"on_js_impression",this).call(this,t,n,i)}},{key:"onAdError",value:function(t){var n,i,r=!1;this._adVpaidState.isVpaidEvent(E.VPAID_EVENTS.AdImpression)||(t===E.VD_ERROR_CODES.SUPPLY_TAG_TIMEOUT&&(r=!0),this.on_js_supply_error(null,(o(i={},E.VID_IO_PARAMS.timeOnPage,this._cabinet&&this._cabinet.timeoutManager?this._cabinet.timeoutManager.timeOnPage:0),o(i,"reason",t),o(i,"timeout",r),i),null));r=arguments.length,i=Array(1<r?r-1:0);for(var a=1;a<r;a++)i[a-1]=arguments[a];(n=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdError",this)).call.apply(n,[this,t].concat(i))}},{key:"onForwardVidIoEvent",value:function(t){this._pixelQueue.enqueue(this._cabinet.pixelEventFactory.build(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,4<arguments.length&&void 0!==arguments[4]?arguments[4]:null)),this._pixelQueue.hasFlusher&&(E.VID_IO_FINAL_EVENTS.hasOwnProperty(t)||t===E.VID_IO_EVENTS.js_impression)&&this._pixelQueue.killFlusher()}},{key:"getNewAdParameters",value:function(t,n,i,r,o,a,s){var u=this;if(s=y.getRequestMethod(e.getJsonUrl(this._cabinet,s,this._cabinet.forceSecure||this._cabinet.manifest.secure),!0)){var l=s.xhr;l.timeout=this._cabinet.timeouts.JSON_TIMEOUT,l.ontimeout=function(){u.initAdError(E.VD_ERROR_CODES.JSON_TIMEOUT,null)},l.onload=function(){if(200!==l.status)u.initAdError(E.VD_ERROR_CODES.BAD_XHR_STATUS+"_"+l.status,null);else{var e=void 0;try{var s=JSON.parse(l.responseText),d={dx:s.dx};s.hasOwnProperty("dto")&&(d.dto=s.dto),e=(0,_.default)(d,JSON.parse(u._creativeData.AdParameters)),u._creativeData.AdParameters=JSON.stringify(e),o.AdParameters=u._creativeData.AdParameters}catch(t){return void u.initAdError(E.VD_ERROR_CODES.JSON_RESPONSE_PARSE_ERROR,t)}try{u._cabinet.manifest=h.parse(e),u._cabinet.wasReauctioned=!0}catch(t){return void u.initAdError(E.VD_ERROR_CODES.JSON_MANIFEST_PARSE_ERROR,t)}try{u.postInit(t,n,i,r,o,a)}catch(t){u.postInitError(t)}}},l.onerror=function(){u.initAdError(E.VD_ERROR_CODES.XHR_ERROR,null)},l.send()}else this.initAdError(E.VD_ERROR_CODES.NO_XHR,null)}},{key:"doMoatPostImp",value:function(t,e){if(null===this._moatApiReference&&g.shouldFire(this._cabinet.manifest,t,E.POST_IMP_PROVIDER_ID_MOAT)){var n=g.addPostImpProviderToCallChain(this._cabinet.manifest,t,E.POST_IMP_PROVIDER_ID_MOAT,E.CALL_CHAIN_IDENTIFIERS.MOAT_USED),i=g.filterManifestKeys(this._cabinet.manifest),r=g.addsAppNameBundleToParams(this._cabinet.manifest),o=r.appName;r=r.appBundle;var a=t.callChain.getCallChainLastLink().accountId;0===a&&(a=this._cabinet.manifest.hasOwnProperty("aid")?this._cabinet.manifest.aid:0),t={level1:this._cabinet.manifest.aid,level2:this._cabinet.manifest.supplyTagId,level3:this._cabinet.manifest.domain,level4:E.MOAT_DUMMY_VALUE,slicer1:E.MOAT_DUMMY_VALUE,slicer2:n,zMoatCountry:this._cabinet.manifest.country,zMoatSSSize:this._cabinet.manifest.width+"x"+this._cabinet.manifest.height,zMoatSSDetSize:e.width+"x"+e.height,zMoatSSDetDomain:this._cabinet.locationInfo.domain_match,zMoatAppName:o,zMoatAppBundle:r,zMoatKeys:i,zMoatEndDemandTag:t.callChain.getCallChainLastLink().demandTagId,zMoatEndAccountId:a},this._moatApiReference=R.initMoatTracking(this._initParams.environmentVars.slot,t,this.getAdDuration(),v.default.moatPartnerCode,this._initParams.environmentVars.videoSlot.src)}}},{key:"doIasPostImp",value:function(t,e){if(null===this._iasApiReference&&g.shouldFire(this._cabinet.manifest,t,E.POST_IMP_PROVIDER_ID_IAS)){t=g.addPostImpProviderToCallChain(this._cabinet.manifest,t,E.POST_IMP_PROVIDER_ID_IAS,E.CALL_CHAIN_IDENTIFIERS.IAS_USED);var n={partner:I.partner,anId:I.adNetworkId,placementId:this._cabinet.manifest.supplyTagId,impId:this.uuid},i=[];i.push(E.IAS_EXTRA_PARAMS.declaredDomain+"="+this._cabinet.manifest.domain),i.push(E.IAS_EXTRA_PARAMS.declaredWidth+"="+this._cabinet.manifest.width),i.push(E.IAS_EXTRA_PARAMS.declaredHeight+"="+this._cabinet.manifest.height),i.push(E.IAS_EXTRA_PARAMS.detectedDomain+"="+this._cabinet.locationInfo.domain_match),i.push(E.IAS_EXTRA_PARAMS.detectedWidth+"="+e.width),i.push(E.IAS_EXTRA_PARAMS.detectedHeight+"="+e.height),i.push(E.IAS_EXTRA_PARAMS.aId+"="+this._cabinet.manifest.aid),i.push(E.IAS_EXTRA_PARAMS.aCc+"="+t),i.push(E.IAS_EXTRA_PARAMS.ssId+"="+this._cabinet.manifest.ssid),i.push(E.IAS_EXTRA_PARAMS.country+"="+this._cabinet.manifest.country),n.planId=i.join("|"),this._iasApiReference=new T.__IASVANS,this._iasApiReference.initCM(n,this._initParams.environmentVars.slot)}}},{key:"doForensiqPostImp",value:function(t,e){if(g.shouldFire(this._cabinet.manifest,t,E.POST_IMP_PROVIDER_ID_FORENSIQ)){var n=g.addPostImpProviderToCallChain(this._cabinet.manifest,t,E.POST_IMP_PROVIDER_ID_FORENSIQ,E.CALL_CHAIN_IDENTIFIERS.FORENSIQ_USED);t=(0,V.constructForensiqJsPixel)(t,this._cabinet,e,n),(0,S.addScript)(document,t)}}},{key:"doProtectedMediaPostImp",value:function(t,e){if(g.shouldFire(this._cabinet.manifest,t,E.POST_IMP_PROVIDER_ID_PROTECTED_MEDIA)){var n=g.addPostImpProviderToCallChain(this._cabinet.manifest,t,E.POST_IMP_PROVIDER_ID_PROTECTED_MEDIA,E.CALL_CHAIN_IDENTIFIERS.PROTECTED_MEDIA_USED);t=(0,C.constructProtectedMediaJsPixel)(t,this._cabinet,e,n),(0,S.addScript)(document,t)}}},{key:"_currentDemandTag",get:function(){return null!==this._ad&&this._ad.hasOwnProperty("_ad")&&this._ad._ad&&this._ad._ad.hasOwnProperty("_demandTag")?this._ad._ad._demandTag:null}}]),e}(t.default),e.default=n},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var i=n(116),r=n(61);e=n(29),t.exports=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:e},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,n){var i=n(62),r=n(120),o=n(11),a=n(64),s=/^\[object .+?Constructor\]$/,u=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||r(t))&&(i(t)?u:s).test(a(t))}},function(t,e,n){e=n(21);var i=(n=Object.prototype).hasOwnProperty,r=n.toString,o=e?e.toStringTag:void 0;t.exports=function(t){var e=i.call(t,o),n=t[o];try{t[o]=void 0;var a=!0}catch(t){}var s=r.call(t);return a&&(e?t[o]=n:delete t[o]),s}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var i=n(121),r=function(){var t=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!r&&r in t}},function(t,e,n){e=n(6)["__core-js_shared__"],t.exports=e},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e){var n=Date.now;t.exports=function(t){var e=0,i=0;return function(){var r=n(),o=16-(r-i);if(i=r,0<o){if(800<=++e)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e){t.exports=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},function(t,e,n){var i=n(8),r=n(7);t.exports=function(t){return r(t)&&"[object Arguments]"==i(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var i=n(8),r=n(41),o=n(7),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&r(t.length)&&!!a[i(t)]}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){t=n(68)(t),n=n(63);var i=e&&!e.nodeType&&e;n=(e=i&&"object"==typeof t&&t&&!t.nodeType&&t)&&e.exports===i&&n.process;t:{try{var r=e&&e.require&&e.require("util").types;if(r){var o=r;break t}o=n&&n.binding&&n.binding("util");break t}catch(t){}o=void 0}t.exports=o},function(t,e,n){var i=n(11),r=n(70),o=n(131),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return o(t);var e,n=r(t),s=[];for(e in t)("constructor"!=e||!n&&a.call(t,e))&&s.push(e);return s}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var i=n(133);e=n(134);var r=n(30);n=e(function(t,e){i(e,r(e),t)}),t.exports=n},function(t,e,n){var i=n(71),r=n(43);t.exports=function(t,e,n,o){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var _=e[s],l=o?o(n[_],t[_],_,n,t):void 0;void 0===l&&(l=t[_]),a?r(n,_,l):i(n,_,l)}return n}},function(t,e,n){var i=n(58),r=n(65);t.exports=function(t){return i(function(e,n){var i=-1,o=n.length,a=1<o?n[o-1]:void 0,s=2<o?n[2]:void 0;for(a=3<t.length&&"function"==typeof a?(o--,a):void 0,s&&r(n[0],n[1],s)&&(a=3>o?void 0:a,o=1),e=Object(e);++i<o;)(s=n[i])&&t(e,s,i,a);return e})}},function(t,e,n){var i=n(136),r=n(178),o=n(81);t.exports=function(t){var e=r(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}}},function(t,e,n){var i=n(72),r=n(73);t.exports=function(t,e,n,o){var a=n.length,s=a,u=!o;if(null==t)return!s;for(t=Object(t);a--;){var _=n[a];if(u&&_[2]?_[1]!==t[_[0]]:!(_[0]in t))return!1}for(;++a<s;){var l=(_=n[a])[0],d=t[l],c=_[1];if(u&&_[2]){if(void 0===d&&!(l in t))return!1}else{if(_=new i,o)var h=o(d,c,l,t,e,_);if(void 0===h?!r(c,d,3,o,_):!h)return!1}}return!0}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var i=n(33),r=Array.prototype.splice;t.exports=function(t){var e=this.__data__;return!(0>(t=i(e,t)))&&(t==e.length-1?e.pop():r.call(e,t,1),--this.size,!0)}},function(t,e,n){var i=n(33);t.exports=function(t){var e=this.__data__;return 0>(t=i(e,t))?void 0:e[t][1]}},function(t,e,n){var i=n(33);t.exports=function(t){return-1<i(this.__data__,t)}},function(t,e,n){var i=n(33);t.exports=function(t,e){var n=this.__data__,r=i(n,t);return 0>r?(++this.size,n.push([t,e])):n[r][1]=e,this}},function(t,e,n){var i=n(32);t.exports=function(){this.__data__=new i,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__;return t=e.delete(t),this.size=e.size,t}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var i=n(32),r=n(44),o=n(45);t.exports=function(t,e){var n=this.__data__;if(n instanceof i){var a=n.__data__;if(!r||199>a.length)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var i=n(148),r=n(32),o=n(44);t.exports=function(){this.size=0,this.__data__={hash:new i,map:new(o||r),string:new i}}},function(t,e,n){function i(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}e=n(149);var r=n(150),o=n(151),a=n(152);n=n(153),i.prototype.clear=e,i.prototype.delete=r,i.prototype.get=o,i.prototype.has=a,i.prototype.set=n,t.exports=i},function(t,e,n){var i=n(34);t.exports=function(){this.__data__=i?i(null):{},this.size=0}},function(t,e){t.exports=function(t){return t=this.has(t)&&delete this.__data__[t],this.size-=t?1:0,t}},function(t,e,n){var i=n(34),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return i?"__lodash_hash_undefined__"===(t=e[t])?void 0:t:r.call(e,t)?e[t]:void 0}},function(t,e,n){var i=n(34),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return i?void 0!==e[t]:r.call(e,t)}},function(t,e,n){var i=n(34);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var i=n(35);t.exports=function(t){return t=i(this,t).delete(t),this.size-=t?1:0,t}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var i=n(35);t.exports=function(t){return i(this,t).get(t)}},function(t,e,n){var i=n(35);t.exports=function(t){return i(this,t).has(t)}},function(t,e,n){var i=n(35);t.exports=function(t,e){var n=i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}},function(t,e,n){var i=n(72),r=n(74),o=n(165),a=n(169),s=n(173),u=n(4),_=n(67),l=n(69),d=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,c,h,A){var f=u(t),p=u(e),E=f?"[object Array]":s(t),R=p?"[object Array]":s(e),O="[object Object]"==(E="[object Arguments]"==E?"[object Object]":E);if(p="[object Object]"==(R="[object Arguments]"==R?"[object Object]":R),(R=E==R)&&_(t)){if(!_(e))return!1;f=!0,O=!1}return R&&!O?(A||(A=new i),f||l(t)?r(t,e,n,c,h,A):o(t,e,E,n,c,h,A)):1&n||(f=O&&d.call(t,"__wrapped__"),E=p&&d.call(e,"__wrapped__"),!f&&!E)?!!R&&(A||(A=new i),a(t,e,n,c,h,A)):(t=f?t.value():t,e=E?e.value():e,A||(A=new i),h(t,e,n,c,A))}},function(t,e,n){function i(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}var r=n(45);e=n(161),n=n(162),i.prototype.add=i.prototype.push=e,i.prototype.has=n,t.exports=i},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){e=n(21);var i=n(166),r=n(22),o=n(74),a=n(167),s=n(168),u=(n=e?e.prototype:void 0)?n.valueOf:void 0;t.exports=function(t,e,n,_,l,d,c){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)break;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":if(t.byteLength!=e.byteLength||!d(new i(t),new i(e)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return r(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var h=a;case"[object Set]":if(h||(h=s),t.size!=e.size&&!(1&_))break;return(n=c.get(t))?n==e:(_|=2,c.set(t,e),e=o(h(t),h(e),_,l,d,c),c.delete(t),e);case"[object Symbol]":if(u)return u.call(t)==u.call(e)}return!1}},function(t,e,n){e=n(6).Uint8Array,t.exports=e},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},function(t,e,n){var i=n(170),r=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,a,s){var u=1&n,_=i(t),l=_.length,d=i(e).length;if(l!=d&&!u)return!1;for(var c=l;c--;){var h=_[c];if(!(u?h in e:r.call(e,h)))return!1}if((d=s.get(t))&&s.get(e))return d==e;d=!0,s.set(t,e),s.set(e,t);for(var A=u;++c<l;){var f=t[h=_[c]],p=e[h];if(o)var E=u?o(p,f,h,e,t,s):o(f,p,h,t,e,s);if(void 0===E?f!==p&&!a(f,p,n,o,s):!E){d=!1;break}A||(A="constructor"==h)}return d&&!A&&((n=t.constructor)!=(o=e.constructor)&&"constructor"in t&&"constructor"in e&&!("function"==typeof n&&n instanceof n&&"function"==typeof o&&o instanceof o)&&(d=!1)),s.delete(t),s.delete(e),d}},function(t,e,n){var i=n(75),r=n(76),o=n(24);t.exports=function(t){return i(t,o,r)}},function(t,e,n){var i=n(70),r=n(172),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return r(t);var e,n=[];for(e in Object(t))o.call(t,e)&&"constructor"!=e&&n.push(e);return n}},function(t,e,n){e=n(79)(Object.keys,Object),t.exports=e},function(t,e,n){e=n(174);var i=n(44),r=n(175),o=n(176),a=n(177),s=n(8),u=n(64),_=u(e),l=u(i),d=u(r),c=u(o),h=u(a);n=s,(e&&"[object DataView]"!=n(new e(new ArrayBuffer(1)))||i&&"[object Map]"!=n(new i)||r&&"[object Promise]"!=n(r.resolve())||o&&"[object Set]"!=n(new o)||a&&"[object WeakMap]"!=n(new a))&&(n=function(t){var e=s(t);if(t=(t="[object Object]"==e?t.constructor:void 0)?u(t):"")switch(t){case _:return"[object DataView]";case l:return"[object Map]";case d:return"[object Promise]";case c:return"[object Set]";case h:return"[object WeakMap]"}return e}),t.exports=n},function(t,e,n){e=n(14),n=e(n=n(6),"DataView"),t.exports=n},function(t,e,n){e=n(14),n=e(n=n(6),"Promise"),t.exports=n},function(t,e,n){e=n(14),n=e(n=n(6),"Set"),t.exports=n},function(t,e,n){e=n(14),n=e(n=n(6),"WeakMap"),t.exports=n},function(t,e,n){var i=n(80),r=n(24);t.exports=function(t){for(var e=r(t),n=e.length;n--;){var o=e[n],a=t[o];e[n]=[o,a,i(a)]}return e}},function(t,e,n){var i=n(73),r=n(180),o=n(83),a=n(47),s=n(80),u=n(81),_=n(17);t.exports=function(t,e){return a(t)&&s(e)?u(_(t),e):function(n){var a=r(n,t);return void 0===a&&a===e?o(n,t):i(e,a,3)}}},function(t,e,n){var i=n(36);t.exports=function(t,e,n){return void 0===(t=null==t?void 0:i(t,e))?n:t}},function(t,e,n){var i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g;e=n(182)(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,function(t,n,i,o){e.push(i?o.replace(r,"$1"):n||t)}),e}),t.exports=e},function(t,e,n){var i=n(183);t.exports=function(t){var e=(t=i(t,function(t){return 500===e.size&&e.clear(),t})).cache;return t}},function(t,e,n){function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;return o.has(r)?o.get(r):(i=t.apply(this,i),n.cache=o.set(r,i)||o,i)};return n.cache=new(i.Cache||r),n}var r=n(45);i.Cache=r,t.exports=i},function(t,e,n){e=n(21);var i=n(31),r=n(4),o=n(26),a=1/0,s=(n=e?e.prototype:void 0)?n.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(r(e))return i(e,t)+"";if(o(e))return s?s.call(e):"";var n=e+"";return"0"==n&&1/e==-a?"-0":n}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var i=n(25),r=n(42),o=n(4),a=n(23),s=n(41),u=n(17);t.exports=function(t,e,n){for(var _=-1,l=(e=i(e,t)).length,d=!1;++_<l;){var c=u(e[_]);if(!(d=null!=t&&n(t,c)))break;t=t[c]}return d||++_!=l?d:!!(l=null==t?0:t.length)&&s(l)&&a(c,l)&&(o(t)||r(t))}},function(t,e,n){var i=n(188),r=n(189),o=n(47),a=n(17);t.exports=function(t){return o(t)?i(a(t)):r(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var i=n(36);t.exports=function(t){return function(e){return i(e,t)}}},function(t,e,n){var i=n(48),r=n(15);t.exports=function(t,e){var n=-1,o=r(t)?Array(t.length):[];return i(t,function(t,i,r){o[++n]=e(t,i,r)}),o}},function(t,e){t.exports=function(t){return function(e,n,i){for(var r=-1,o=Object(e),a=(i=i(e)).length;a--;){var s=i[t?a:++r];if(!1===n(o[s],s,o))break}return e}}},function(t,e,n){var i=n(15);t.exports=function(t,e){return function(n,r){if(null==n)return n;if(!i(n))return t(n,r);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==r(s[a],a,s););return n}}},function(t,e,n){var i=n(8),r=n(86),o=n(7),a=Function.prototype.toString,s=Object.prototype.hasOwnProperty,u=a.call(Object);t.exports=function(t){return!(!o(t)||"[object Object]"!=i(t))&&(null===(t=r(t))||"function"==typeof(t=s.call(t,"constructor")&&t.constructor)&&t instanceof t&&a.call(t)==u)}},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f.NO_TIMEOUT;return t.hasOwnProperty("to")&&0<t.to?t.to:e}function a(t){return!!(0,h.default)(t)||t.hasOwnProperty("url")&&(0,h.default)(t.url)&&t.hasOwnProperty("format")&&(0,u.default)(f.PIXEL_FORMATS,t.format)}Object.defineProperty(e,"__esModule",{value:!0}),e.getTimeoutFromObj=o,e.getPixelUrlsByEvent=function(t,e){if(t&&t.hasOwnProperty("pixels")&&null!==t.pixels){if(e)return t.pixels.hasOwnProperty(e)?t.pixels[e]:null;throw Error(f.VD_ERROR_CODES.PIXEL_NO_EVENT_ERROR)}return null},e.isValidPixel=a,e.parse=function(t){if(t.dbg=t.db||!1,t.hasOwnProperty("passthru")&&!(0,l.default)(t.passthru))throw Error(f.MANIFEST_PARSE_ERRORS.PASSTHRU);if(t.hasOwnProperty("urlparams")&&!(0,l.default)(t.urlparams))throw Error(f.MANIFEST_PARSE_ERRORS.URLPARAMS);if(t.hasOwnProperty("pixels")&&null!==t.pixels){if(!(0,l.default)(t.pixels))throw Error(f.MANIFEST_PARSE_ERRORS.PIXELS_OBJECT);var e,n=t.pixels;for(e in n)if(n.hasOwnProperty(e)){if(!f.MANIFEST_PIXEL_EVENTS.hasOwnProperty(e))throw Error(f.MANIFEST_PARSE_ERRORS.PIXELS_INVALID_EVENT);if(!(0,d.default)(n[e]))throw Error(f.MANIFEST_PARSE_ERRORS.PIXELS_ARRAY);for(var i=n[e],r=0;r<i.length;r++)if(!a(i[r]))throw Error(f.MANIFEST_PARSE_ERRORS.PIXELS_URL)}}if(t.hasOwnProperty("td")&&!(0,c.default)(t.td))throw Error(f.MANIFEST_PARSE_ERRORS.TD);if(t.hasOwnProperty("ts")&&!(0,c.default)(t.ts))throw Error(f.MANIFEST_PARSE_ERRORS.TS);if(!t.hasOwnProperty("uuid")||!(0,h.default)(t.uuid))throw Error(f.MANIFEST_PARSE_ERRORS.UUID);if(!t.hasOwnProperty("ssid")||!(0,h.default)(t.ssid))throw Error(f.MANIFEST_PARSE_ERRORS.SSID);if(!t.hasOwnProperty("secure")||!(0,c.default)(t.secure))throw Error(f.MANIFEST_PARSE_ERRORS.SECURE);if(!t.hasOwnProperty("aid")||!(0,A.default)(t.aid))throw Error(f.MANIFEST_PARSE_ERRORS.AID);if(!t.hasOwnProperty("country")||!(0,h.default)(t.country))throw Error(f.MANIFEST_PARSE_ERRORS.COUNTRY);if(t.hasOwnProperty("pimps")){if(!(0,l.default)(t.pimps))throw Error(f.MANIFEST_PARSE_ERRORS.PIMPS);if(t.pimps.hasOwnProperty("w_pv")&&!(0,h.default)(t.pimps.w_pv))throw Error(f.MANIFEST_PARSE_ERRORS.SSC_PV);if(t.pimps.hasOwnProperty("w_to")&&!(0,A.default)(t.pimps.w_to))throw Error(f.MANIFEST_PARSE_ERRORS.SSC_TO)}for(n=[],i=e=0;i<t.dx.length;i++){r=t.dx[i],n.push([]);for(var u=0;u<r.length;u++){e++;var R=r[u];if(R.hasOwnProperty("url")){if(!(0,h.default)(R.url))throw Error(f.MANIFEST_PARSE_ERRORS.WATERFALL_URL);p.isUrlPrefix(f.DOUBLECLICK_URLS,R.url)&&(R.bid_platform=f.BID_PLATFORMS.ima)}if(p.isOpenmarketDemandTag(R)&&(R.bid_platform=f.BID_PLATFORMS.ortb),!R.hasOwnProperty("a_cc")||!(0,h.default)(R.a_cc))throw Error(f.MANIFEST_PARSE_ERRORS.WATERFALL_A_CC);for(var O=new E.default(R.a_cc),S=0;S<O.callChainLinks.length;S++);if(R.hasOwnProperty("td")&&!(0,c.default)(R.td))throw Error(f.MANIFEST_PARSE_ERRORS.WATERFALL_TD);if(R.hasOwnProperty("ts")&&!(0,c.default)(R.ts))throw Error(f.MANIFEST_PARSE_ERRORS.WATERFALL_TS);if(R.hasOwnProperty("pixels")&&null!==R.pixels){if(!(0,l.default)(R.pixels))throw Error(f.MANIFEST_PARSE_ERRORS.WATERFALL_PIXELS_OBJECT);for(var y in S=R.pixels)if(S.hasOwnProperty(y)){if(!f.VPAID_EVENTS.hasOwnProperty(y))throw Error(f.MANIFEST_PARSE_ERRORS.WATERFALL_PIXELS_VPAID_EVENT);if(!(0,d.default)(S[y]))throw Error(f.MANIFEST_PARSE_ERRORS.WATERFALL_PIXELS_ARRAY);for(var v=S[y],T=0;T<v.length;T++)if(!a(v[T]))throw Error(f.MANIFEST_PARSE_ERRORS.WATERFALL_PIXELS_URL)}}R.hasOwnProperty("passthru")&&R.passthru.hasOwnProperty("_t1")&&0<parseInt(R.passthru._t1)?R.tier=parseInt(R.passthru._t1):R.tier=i+1,n[i].push((0,s.default)({waterfallIdx:i,broadcastIdx:u,callChain:O},R,{td:!1,ts:!1,pixels:null}))}}if(t.hasOwnProperty("dto")){if(!(0,l.default)(t.dto))throw Error(f.MANIFEST_PARSE_ERRORS.DTO_OBJECT);(0,_.default)(t.dto,function(t,e){if(!(0,h.default)(e))throw Error(f.MANIFEST_PARSE_ERRORS.DTO_KEY_STRING);if(0>=parseInt(e))throw Error(f.MANIFEST_PARSE_ERRORS.DTO_KEY_POS);if(!(0,A.default)(t))throw Error(f.MANIFEST_PARSE_ERRORS.DTO_VALUE_INT);if(0>=parseInt(t))throw Error(f.MANIFEST_PARSE_ERRORS.DTO_VALUE_POS)})}return(0,s.default)({timeout:o(t),numWaterfalls:t.dx.length,numTags:e,dx:n,enableFlashIframe:!0},t,{pixels:null,ef:!1,td:!1,ts:!1,urlparams:null,passthru:null,pimps:{}})};var s=r(n(5)),u=r(n(195)),_=r(n(2)),l=r(n(11)),d=r(n(4)),c=r(n(90)),h=r(n(50)),A=r(n(202)),f=i(n(0)),p=i(n(1)),E=r(n=n(92))},function(t,e,n){var i=n(87),r=n(15),o=n(50),a=n(27),s=n(199),u=Math.max;t.exports=function(t,e,n,_){return t=r(t)?t:s(t),n=n&&!_?a(n):0,_=t.length,0>n&&(n=u(_+n,0)),o(t)?n<=_&&-1<t.indexOf(e,n):!!_&&-1<i(t,e,n)}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){--n;for(var i=t.length;++n<i;)if(t[n]===e)return n;return-1}},function(t,e,n){var i=n(28);t.exports=function(t){return t?(t=i(t))===1/0||t===-1/0?1.7976931348623157e308*(0>t?-1:1):t==t?t:0:0===t?t:0}},function(t,e,n){var i=n(200),r=n(24);t.exports=function(t){return null==t?[]:i(t,r(t))}},function(t,e,n){var i=n(31);t.exports=function(t,e){return i(e,function(e){return t[e]})}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}},function(t,e,n){var i=n(27);t.exports=function(t){return"number"==typeof t&&t==i(t)}},function(t,e,n){var i=n(13),r=n(15),o=n(24);t.exports=function(t){return function(e,n,a){var s=Object(e);if(!r(e)){var u=i(n,3);e=o(e),n=function(t){return u(s[t],t,s)}}return-1<(n=t(e,n,a))?s[u?e[n]:n]:void 0}}},function(t,e,n){var i=n(88),r=n(13),o=n(27),a=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;return s?(0>(n=null==n?0:o(n))&&(n=a(s+n,0)),i(t,r(e,3),n)):-1}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.getStateInfo=void 0;var i=(t=n(49))&&t.__esModule?t:{default:t};e.getStateInfo=function(t){var e={no_element:null,offsetWidth:null,offsetHeight:null,clientWidth:null,clientHeight:null,detectedHeight:null,detectedWidth:null,detectedSizeSource:null,scrollWidth:null,scrollHeight:null,getBoundingClientRect__left:null,getBoundingClientRect__top:null,getBoundingClientRect__right:null,getBoundingClientRect__bottom:null,other:{}},n=null;try{n=t.videoSlot,e.other.videoSlotIsNull=null===n,e.other.videoSlotIsElement=(0,i.default)(n),e.other.videoSlotIsElement||(n=t.slot)}catch(t){}try{jwplayer&&(e.other.jwplayer_version=jwplayer.version),vidible&&(e.other.vidible_version=vidible.version()),videojs&&(e.other.videojs_version=videojs.VERSION),google&&google.ima&&(e.other.google_ima_version=google.ima.VERSION)}catch(t){}try{if(e.no_element=null===n,!e.no_element&&(0,i.default)(n)){e.offsetWidth=n.offsetWidth,e.offsetHeight=n.offsetHeight,e.clientWidth=n.clientWidth,e.clientHeight=n.clientHeight,e.scrollWidth=n.scrollWidth,e.scrollHeight=n.scrollHeight;var r=n.getBoundingClientRect();null!==r&&(e.getBoundingClientRect__left=r.left,e.getBoundingClientRect__top=r.top,e.getBoundingClientRect__right=r.right,e.getBoundingClientRect__bottom=r.bottom)}isNaN(parseInt(e.clientWidth))||(e.detectedWidth=parseInt(e.clientWidth)),isNaN(parseInt(e.clientHeight))||(e.detectedHeight=parseInt(e.clientHeight))}catch(t){}return e}},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=i(n(12)),a=i(n(93)),s=i(n(91)),u=i(n(52)),_=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));n=function(){function t(e,n){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._supplyTagId=e,this._otherTags=n}return r(t,[{key:"getFirstOtherTagId",value:function(t){var e=(0,s.default)(this._otherTags,function(e){return e.tag===t});return e?e.id:0}},{key:"getString",value:function(t){return t=[{id:this.supplyTagId,tag:_.CALL_CHAIN_IDENTIFIERS.SUPPLY}].concat(t),t=(0,o.default)(t,function(t){return t.tag+_.CALL_CHAIN_VARIABLE_ID_SEPARATOR+t.id}),(0,a.default)(t,_.CALL_CHAIN_VARIABLE_SEPARATOR)}},{key:"toString",value:function(){return this.getString(this.otherTags)}},{key:"toProviderUsedString",value:function(t){return this.getString(this.otherTags.concat({id:1,tag:t}))}},{key:"toVidIoString",value:function(){return this.getString((0,u.default)(this.otherTags,function(t){return!_.CALL_CHAIN_IDENTIFIER_BLACKLIST.hasOwnProperty(t.tag)}))}},{key:"supplyTagId",get:function(){return this._supplyTagId}},{key:"demandTagId",get:function(){return this.getFirstOtherTagId(_.CALL_CHAIN_IDENTIFIERS.DEMAND)}},{key:"accountId",get:function(){return this.getFirstOtherTagId(_.CALL_CHAIN_IDENTIFIERS.ACCOUNT)}},{key:"directConnectionId",get:function(){return this.getFirstOtherTagId(_.CALL_CHAIN_IDENTIFIERS.DIRECT_CONNECTION)}},{key:"otherTags",get:function(){return this._otherTags}}]),t}(),e.default=n},function(t,e,n){var i=n(48);t.exports=function(t,e){var n=[];return i(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}},function(t,e,n){(function(e){function n(){n=function(){},u.Symbol||(u.Symbol=i)}function i(t){return"jscomp_symbol_"+(t||"")+_++}function r(){n();var t=u.Symbol.iterator;t||(t=u.Symbol.iterator=u.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&s(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return o(this)}}),r=function(){}}function o(t){var e=0;return function(t){return r(),(t={next:t})[u.Symbol.iterator]=function(){return this},t}(function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})}function a(t){r();var e=t[Symbol.iterator];return e?e.call(t):o(t)}var s="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},u="undefined"!=typeof window&&window===this?this:void 0!==e&&null!=e?e:this,_=0;e=u;for(var l=["Promise"],d=0;d<l.length-1;d++){var c=l[d];c in e||(e[c]={}),e=e[c]}var h=e[l=l[l.length-1]];(d=function(){function t(t){this.c=0,this.h=void 0,this.b=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.b=null}function n(e){return e instanceof t?e:new t(function(t){t(e)})}if(h)return h;e.prototype.c=function(t){this.b||(this.b=[],this.g()),this.b.push(t)},e.prototype.g=function(){var t=this;this.f(function(){t.i()})};var i=u.setTimeout;e.prototype.f=function(t){i(t,0)},e.prototype.i=function(){for(;this.b&&this.b.length;){var t=this.b;this.b=[];for(var e=0;e<t.length;++e){var n=t[e];delete t[e];try{n()}catch(t){this.h(t)}}}this.b=null},e.prototype.h=function(t){this.f(function(){throw t})},t.prototype.f=function(){function t(t){return function(i){n||(n=!0,t.call(e,i))}}var e=this,n=!1;return{resolve:t(this.v),reject:t(this.g)}},t.prototype.v=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.w(e);else{t:switch(typeof e){case"object":var n=null!=e;break t;case"function":n=!0;break t;default:n=!1}n?this.s(e):this.i(e)}},t.prototype.s=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.A(e,t):this.i(t)},t.prototype.g=function(t){this.l(2,t)},t.prototype.i=function(t){this.l(1,t)},t.prototype.l=function(t,e){if(0!=this.c)throw Error("Cannot settle("+t+", "+e|"): Promise already settled in state"+this.c);this.c=t,this.h=e,this.o()},t.prototype.o=function(){if(this.b){for(var t=this.b,e=0;e<t.length;++e)t[e].call(),t[e]=null;this.b=null}};var r=new e;return t.prototype.w=function(t){var e=this.f();t.j(e.resolve,e.reject)},t.prototype.A=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},t.prototype.then=function(e,n){function i(t,e){return"function"==typeof t?function(e){try{r(t(e))}catch(t){o(t)}}:e}var r,o,a=new t(function(t,e){r=t,o=e});return this.j(i(e,r),i(n,o)),a},t.prototype.catch=function(t){return this.then(void 0,t)},t.prototype.j=function(t,e){function n(){switch(i.c){case 1:t(i.h);break;case 2:e(i.h);break;default:throw Error("Unexpected state: "+i.c)}}var i=this;this.b?this.b.push(function(){r.c(n)}):r.c(n)},t.resolve=n,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,i){for(var r=a(e),o=r.next();!o.done;o=r.next())n(o.value).j(t,i)})},t.all=function(e){var i=a(e),r=i.next();return r.done?n([]):new t(function(t,e){function o(e){return function(n){a[e]=n,--s||t(a)}}var a=[],s=0;do{a.push(void 0),s++,n(r.value).j(o(a.length-1),e),r=i.next()}while(!r.done)})},t}())!=h&&null!=d&&s(e,l,{configurable:!0,writable:!0,value:d}),t.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={C:i,m:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.m=!0,r.exports}var n={};return e.i=t,e.f=n,e.b=function(t,n){e.c(t)||Object.defineProperty(t,"a",{configurable:!1,enumerable:!0,get:n})},e.g=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.b(n,n),n},e.c=function(t){return Object.prototype.hasOwnProperty.call(t,"a")},e.h="",e(e.l=0)}([function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(2);e.default=new Promise(function(t,e){Object(i.a)(r.a.u).then(function(){t(window.oath.viewabilitySDK)}).catch(function(t){e(t)})})},function(t,e){var n=[];e.a=function(t){return-1!==n.indexOf(t)?Promise.resolve():new Promise(function(e,i){var r=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.src=t,o.async=!0,o.onload=o.onreadystatechange=function(){this.readyState&&"complete"!==this.readyState||(o.onload=o.onreadystatechange=null,n.push(t),e())},o.onerror=o.onabort=i,r.appendChild(o)})}},function(t,e){e.a={u:"https://cdn-ssl.vidible.tv/prod/client-utils/js/oath-viewability-sdk-v2.js"}}])}).call(this,n(10))},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),s=i(t=n(210));t=i(t=n(107));var u=i(n=n(258));n=function(t){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,"Processor",t,n),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t)._broadcastQueues=[],t._currentWaterfallIndex=-1,t._currentAdContainer=-1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"initAd",value:function(t,n,i,r,a,u){for(o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initAd",this).call(this,t,n,i,r,a,u),t=0;t<this._cabinet.manifest.dx.length;t++)(n=new s.default(this._cabinet,this._cabinet.manifest.dx[t],this._initParams,t)).initialize(),this._broadcastQueues.push(n)}},{key:"maybeStopDemandRequest",value:function(){if(this._ad){this.unregisterVpaidEventListeners_(this._ad),this.unregisterSSEventListeners_(this._ad);try{this._ad.stopAd()}catch(t){}}}},{key:"stopAd",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stopAd",this).call(this),this.getBroadcastQueue().finishVastRequest(!1)}},{key:"skipAd",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"skipAd",this).call(this),this.getBroadcastQueue().finishVastRequest(!1)}},{key:"nextBroadcast",value:function(){try{if(this.maybeStopDemandRequest(),-1<this._currentWaterfallIndex){var t=this.getBroadcastQueue();t.finishVastRequest(!0),this.unregisterSSEventListeners_(t)}if(this._currentWaterfallIndex+1>=this._broadcastQueues.length)this.registerAndForwardAdError(a.VD_ERROR_CODES.NO_FILL);else{this._currentWaterfallIndex++;var e=this.getBroadcastQueue();this.registerSSEventListeners_(e),e.requestVast(this._cabinet.getSizeInfo(this._initParams))}}catch(t){this.registerAndForwardAdError(a.VD_ERROR_CODES.UNCAUGHT_NEXT_BROADCAST_ERROR+t.message)}}},{key:"getBroadcastQueue",value:function(){return this._broadcastQueues[this._currentWaterfallIndex]}},{key:"on_js_demand_error",value:function(t,n,i){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"on_js_demand_error",this).call(this,t,n,i);try{this.getBroadcastQueue().getAdContainer(this._currentAdContainer).vpaidFailed()}catch(t){}this.getBroadcastQueue().nextVpaid()}},{key:"onSlotVastDone",value:function(t,e){try{this.getBroadcastQueue().getAdContainer(this._currentAdContainer).onSlotVastDone(t,e)}catch(t){}}},{key:"onBroadcastVastReady",value:function(t){try{if(o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onBroadcastVastReady",this).call(this,t),this.adVpaidState.isContinue){this.maybeStopDemandRequest();var n=this.getBroadcastQueue().getAdContainer(t);n.vpaidStart(),this._currentAdContainer=t,this._cabinet.timeoutManager.startVpaid(n.demandTag.waterfallIdx,n.demandTag.broadcastIdx,n.demandTag.tier),this._ad=(new u.default).build(this._cabinet,this._initParams,n.demandTag,n.adVast),this.registerVpaidEventListeners_(this._ad),this.registerSSEventListeners_(this._ad),this._ad.load()}}catch(t){this.registerAndForwardAdError(a.VD_ERROR_CODES.UNCAUGHT_ON_BROADCAST_VAST_READY_ERROR+t.message)}}},{key:"onAdImpression",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdImpression",this).call(this);try{this.getBroadcastQueue().finishVastRequest(!1)}catch(t){}}},{key:"onBroadcastDone",value:function(){!this.adVpaidState.isVpaidEvent(a.VPAID_EVENTS.AdImpression)&&0>=this._cabinet.timeoutManager.supplyTagRemaining?this.registerAndForwardAdError(a.VD_ERROR_CODES.SUPPLY_TAG_TIMEOUT):(o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onBroadcastDone",this).call(this),this.adVpaidState.isContinue&&this.nextBroadcast())}},{key:"onAdSkipped",value:function(){this.adVpaidState.isVpaidEvent(a.VPAID_EVENTS.AdImpression)&&o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdSkipped",this).call(this)}},{key:"onAdStopped",value:function(){this.adVpaidState.isVpaidEvent(a.VPAID_EVENTS.AdImpression)&&o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdStopped",this).call(this)}},{key:"onAdError",value:function(t){this.adVpaidState.isVpaidEvent(a.VPAID_EVENTS.AdImpression)&&this.registerAndForwardAdError(t||a.VD_ERROR_CODES.PLAY_ERROR)}},{key:"registerAndForwardAdError",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdError",this).call(this,t)}}]),e}(t.default),e.default=n},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0},a=i(t=n(5)),s=i(t=n(2)),u=i(t=n(95)),_=i(t=n(52)),l=i(t=n(213)),d=n(0),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(d);t=i(t=n(98));var h=i(n=n(106));n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var o=(e.__proto__||Object.getPrototypeOf(e)).call(this,"BroadcastQueue",t,i);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");(o=!o||"object"!=typeof o&&"function"!=typeof o?this:o)._waterfallIdx=r,o._adContainers=[],r=new l.default,o._dfpAdContainer=null,o._dfpTimer=c.NO_TIMER;for(var s=0;s<n.length;s++){var u=n[s];(u=r.build(t,s,u.hasOwnProperty("url")?(0,a.default)({url:o._cabinet.replacePageProtocol(u.url)},u):u,i))instanceof h.default&&(o._dfpAdContainer=u),o._adContainers.push(u),o.registerSSEventListeners_(u)}return o._vastRequestTimer=c.NO_TIMER,o._broadcastState=c.BROADCAST_STATES.INIT,o._tier=n[0].tier,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"initialize",value:function(){(0,s.default)(this._adContainers,function(t){return t.initialize()})}},{key:"requestVast",value:function(t){var n=this;o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"requestVast",this).call(this,t),this._broadcastState=c.BROADCAST_STATES.REQUESTING,this._vastRequestTimer=setTimeout(function(){n.onBroadcastVastRequestTimerTimeout()},this._cabinet.timeouts.BROADCAST_VAST_REQUEST_TIMEOUT),this._dfpAdContainer&&(this._dfpTimer=setTimeout(function(){n._dfpAdContainer._adSlotState===c.SLOT_STATES.REQUESTING_INIT&&(n._dfpAdContainer._adSlotState=c.SLOT_STATES.INIT_FAILED,n._dfpAdContainer.requestVast(n._cabinet.getSizeInfo(n._initParams)),n._dfpTimer=c.NO_TIMER)},this._cabinet.timeouts.IMA_TIMEOUT)),this._cabinet.timeoutManager.startBroadcast(this._waterfallIdx,this.tier),(0,s.default)(this._adContainers,function(e){e.adSlotState!==c.SLOT_STATES.INITIALIZED&&e.adSlotState!==c.SLOT_STATES.INIT_FAILED||e.requestVast(t)})}},{key:"finishVastRequest",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"finishVastRequest",this).call(this,t),(0,s.default)(this._adContainers,function(e){e.finishVastRequest(t)}),this._broadcastState!==c.BROADCAST_STATES.DONE&&this.onBroadcastDone()}},{key:"onSlotInitialized",value:function(t,e){this._dfpAdContainer===this._adContainers[t]&&(clearTimeout(this._dfpTimer),this._dfpTimer=c.NO_TIMER),this._broadcastState===c.BROADCAST_STATES.REQUESTING&&this._adContainers[t].requestVast(this._cabinet.getSizeInfo(this._initParams))}},{key:"onSlotVastDone",value:function(t,e){this.nextVpaid()}},{key:"_isDfpPending",value:function(t){return!!this._dfpAdContainer&&-1<[d.SLOT_STATES.REQUESTING_INIT,d.SLOT_STATES.INITIALIZED].indexOf(this._dfpAdContainer.adSlotState)&&!this._dfpAdContainer.isBidOverLimit(t)}},{key:"_isDfpSetBid",value:function(t){return!!this._dfpAdContainer&&this._dfpAdContainer.adSlotState===c.SLOT_STATES.REQUESTING_VAST&&!this._dfpAdContainer.isBidOverLimit(t)}},{key:"_isDfpSetBidOverLimit",value:function(t){return!!this._dfpAdContainer&&this._dfpAdContainer.adSlotState===c.SLOT_STATES.REQUESTING_VAST&&this._dfpAdContainer.isBidOverLimit(t)}},{key:"_getMaxEffectiveScoreContainer",value:function(t){return(0,u.default)(t,function(t){return t.effectiveScore})}},{key:"_chooseBestContainer",value:function(t){var e=this;return 0<(0,_.default)(t,function(t){return t===e._dfpAdContainer}).length?this._dfpAdContainer:this._getMaxEffectiveScoreContainer(t)}},{key:"_getFixedScorePendingContainers",value:function(){return(0,_.default)(this._adContainers,function(t){return t.isFixedScore&&t.isVastPending})}},{key:"_getVastReadyContainers",value:function(){return(0,_.default)(this._adContainers,function(t){return t.adSlotState===c.SLOT_STATES.VAST_READY})}},{key:"nextVpaid",value:function(){if(0>=this._cabinet.timeoutManager.supplyTagRemaining)this.onBroadcastDone();else if(this._broadcastState===c.BROADCAST_STATES.REQUESTING&&!this.isRequestingVpaid){var t=this._getVastReadyContainers(),e=this._getMaxEffectiveScoreContainer(t);e=e?e.effectiveScore:0;var n=this._getFixedScorePendingContainers();n=(n=this._getMaxEffectiveScoreContainer(n))?n.effectiveScore:0,t=this._chooseBestContainer(t),(this._isBroadcastVastRequestTimerTimeout||e>=n&&!this._isDfpPending(e))&&(this._isDfpSetBid(e)?this._dfpAdContainer.setBid(e):(this._isDfpSetBidOverLimit(e)&&(this._dfpAdContainer.overLimitBid=e),t?this.onBroadcastVastReady(t.idx):this.isVastPending||this.onBroadcastDone()))}}},{key:"onBroadcastVastRequestTimerTimeout",value:function(){this._vastRequestTimer=c.NO_TIMER,this.nextVpaid(),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onBroadcastVastRequestTimerTimeout",this).call(this)}},{key:"onBroadcastDone",value:function(){try{this._vastRequestTimer!==c.NO_TIMER&&(clearTimeout(this._vastRequestTimer),this._vastRequestTimer=c.NO_TIMER),this._dfpTimer!==c.NO_TIMER&&(clearTimeout(this._dfpTimer),this._dfpTimer=c.NO_TIMER)}catch(t){}this._broadcastState=c.BROADCAST_STATES.DONE,o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onBroadcastDone",this).call(this)}},{key:"getAdContainer",value:function(t){return this._adContainers[t]}},{key:"tier",get:function(){return this._tier}},{key:"isVastPending",get:function(){for(var t=0;t<this._adContainers.length;t++)if(this._adContainers[t].isVastPending)return!0;return!1}},{key:"isRequestingVpaid",get:function(){for(var t=0;t<this._adContainers.length;t++)if(this._adContainers[t].isRequestingVpaid)return!0;return!1}},{key:"_isBroadcastVastRequestTimerTimeout",get:function(){return this._cabinet.timeoutManager.getResponseTime(this._waterfallIdx)>=this._cabinet.timeouts.BROADCAST_VAST_REQUEST_TIMEOUT}}]),e}(t.default),e.default=n},function(t,e,n){var i=n(26);t.exports=function(t,e,n){for(var r=-1,o=t.length;++r<o;){var a=t[r],s=e(a);if(null!=s&&(void 0===u?s==s&&!i(s):n(s,u)))var u=s,_=a}return _}},function(t,e){t.exports=function(t,e){return t>e}},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=i(n(5)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),u=i(n(214)),_=i(n(231)),l=i(n(233)),d=i(n(234)),c=i(n(235)),h=i(n(236)),A=i(n(237)),f=i(n(239)),p=i(n(240)),E=i(n(241)),R=i(n(242)),O=i(n(243)),S=i(n(244)),y=i(n(106)),v=i(n(245)),T=i(n(246)),I=i(n(247)),m=i(n(248)),g=i(n(249)),b=i(n(250)),P=i(n(251)),D=i(n(252)),V=i(n=n(254));n=function(){function t(){var e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:E.default;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.DEFAULT_CONTAINER=i,this.CONTAINERS=(0,a.default)(n,(r(e={},s.BID_PLATFORMS.rubicon,l.default),r(e,s.BID_PLATFORMS.conversant,f.default),r(e,s.BID_PLATFORMS.spotx,u.default),r(e,s.BID_PLATFORMS.stickyads,d.default),r(e,s.BID_PLATFORMS.telaria,c.default),r(e,s.BID_PLATFORMS.appnexus,h.default),r(e,s.BID_PLATFORMS.districtm,h.default),r(e,s.BID_PLATFORMS.brealtime,h.default),r(e,s.BID_PLATFORMS.openx,A.default),r(e,s.BID_PLATFORMS.index,_.default),r(e,s.BID_PLATFORMS.ima,p.default),r(e,s.BID_PLATFORMS.synacor,R.default),r(e,s.BID_PLATFORMS.vuble,O.default),r(e,s.BID_PLATFORMS.unruly,S.default),r(e,s.BID_PLATFORMS.dfp,y.default),r(e,s.BID_PLATFORMS.beachfront,v.default),r(e,s.BID_PLATFORMS.oath,P.default),r(e,s.BID_PLATFORMS.lkqd,m.default),r(e,s.BID_PLATFORMS.sonobi,g.default),r(e,s.BID_PLATFORMS.pubmatic,T.default),r(e,s.BID_PLATFORMS.facebook,I.default),r(e,s.BID_PLATFORMS.yieldnexus,b.default),r(e,s.BID_PLATFORMS.ortb,D.default),r(e,s.BID_PLATFORMS.a9,V.default),e))}return o(t,[{key:"build",value:function(t,e,n,i){return new(this.containerFor(n.bid_platform))(t,e,n,i)}},{key:"containerFor",value:function(t){return t&&this.CONTAINERS.hasOwnProperty(t)?this.CONTAINERS[t]:this.DEFAULT_CONTAINER}}]),t}(),e.default=n},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=r(n(2)),s=r(n(54)),u=i(n(0)),_=i(n(1)),l=r(n(96));n=n(3);var d=["content_id","ad_mute","custom","hide_skin","autoplay"];n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t)._channelId=null,t._bidParams.hasOwnProperty("channel_id")&&(t._channelId=t._bidParams.channel_id),t._spotxOptions=null,t._sizeInfo=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"_setSpotxOptions",value:function(t){var e=this;null===this._spotxOptions&&(this._spotxOptions={channel_id:this._channelId,video_slot:this._initParams.environmentVars.videoSlot,slot:this._initParams.environmentVars.slot,content_width:this.widthToPass(t),content_height:this.heightToPass(t),contentPageUrl:this.domainToPass,content_page_url:this.domainToPass},t=(0,l.default)(this._bidOptionalParams,d),(0,a.default)(t,function(t,n){e._spotxOptions[n]=_.unencodeParam(t)}))}},{key:"_getScriptUrl",value:function(){return this._cabinet.pageProtocol+"//js.spotx.tv/directsdk/v1/"+this._spotxOptions.channel_id+".js"}},{key:"_handleDirectAdOsFailure",value:function(){this.failedBidRequest()}},{key:"_getSpotxVastUrl",value:function(t){return this._cabinet.pageProtocol+"//search.spotxchange.com/ad/vast.html?key="+t}},{key:"_handleDirectAdOsSuccess",value:function(t){t&&t.hasOwnProperty("spotx_bid")&&t.hasOwnProperty("spotx_ad_key")&&(this.bid=t.spotx_bid),this.hasBid()?this.bidMeetsFloor()?(t=this._getSpotxVastUrl(t.spotx_ad_key),this._demandTag.url=t,this._getAdVastProcessor(this._sizeInfo).requestVast(t,!0,this.hbDetails)):this.failedBidRequest(u.VAST_ERRORCODES.SS_VEC_1310_BID_BELOW_FLOOR):this.failedBidRequest()}},{key:"_getDirectAdOs",value:function(){return new SpotX.DirectAdOS(this._spotxOptions)}},{key:"_handleScriptLoadSuccess",value:function(){var t=null;try{t=this._getDirectAdOs()}catch(t){return void this.failedBidRequest(u.VAST_ERRORCODES.SS_VAST_ERRORCODE_1301,u.VD_ERROR_CODES.HB_BID_ERROR+"_"+t.message)}t.getAdServerKVPs().then(this._handleDirectAdOsSuccess.bind(this),this._handleDirectAdOsFailure.bind(this))}},{key:"_containerRequestVast",value:function(t){if(this._sizeInfo=t,null===this._channelId)this.onSlotVastDone(this._idx,null);else{try{this._cabinet.autoplayVideoElementManager.maybeCreateAndAppendVideoSlot()}catch(t){return void this.onSlotVastDone(this._idx,null)}this._setSpotxOptions(t),t=this._handleScriptLoadSuccess.bind(this),this._scriptLoaderFunc(this._getScriptUrl(),t)}}},{key:"_scriptLoaderFunc",get:function(){return s.default}}]),e}(r(n).default),e.default=n},function(t,e,n){var i=n(97),r=n(83);t.exports=function(t,e){return i(t,e,function(e,n){return r(t,n)})}},function(t,e,n){var i=n(71),r=n(25),o=n(23),a=n(11),s=n(17);t.exports=function(t,e,n,u){if(!a(t))return t;for(var _=-1,l=(e=r(e,t)).length,d=l-1,c=t;null!=c&&++_<l;){var h=s(e[_]),A=n;if(_!=d){var f=c[h];void 0===(A=u?u(f,h,c):void 0)&&(A=a(f)?f:o(e[_+1])?[]:{})}i(c,h,A),c=c[h]}return t}},function(t,e,n){var i=n(218),r=n(59),o=n(60);t.exports=function(t){return o(r(t,void 0,i),t+"")}},function(t,e,n){var i=n(219);t.exports=function(t){return null!=t&&t.length?i(t,1):[]}},function(t,e,n){var i=n(46),r=n(220);t.exports=function t(e,n,o,a,s){var u=-1,_=e.length;for(o||(o=r),s||(s=[]);++u<_;){var l=e[u];0<n&&o(l)?1<n?t(l,n-1,o,a,s):i(s,l):a||(s[s.length]=l)}return s}},function(t,e,n){e=n(21);var i=n(42),r=n(4),o=e?e.isConcatSpreadable:void 0;t.exports=function(t){return r(t)||i(t)||!!(o&&t&&t[o])}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));t=function(t){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdVpaidParent("+t+")"),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t)._wrapper=n,t._ad=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"handshakeVersion",value:function(t){var n=r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"handshakeVersion",this).call(this,t);return this._ad?this._wrapper(this._ad.handshakeVersion(t)):n}},{key:"initAd",value:function(t,n,i,o,a,s){if(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initAd",this).call(this,t,n,i,o,a,s),this._ad)return this._wrapper(this._ad.initAd(t,n,i,o,a,s))}},{key:"resizeAd",value:function(t,n,i){if(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"resizeAd",this).call(this,t,n,i),this._ad)return this._wrapper(this._ad.resizeAd(t,n,i))}},{key:"startAd",value:function(){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"startAd",this).call(this),this._ad&&this._wrapper(this._ad.startAd())}},{key:"stopAd",value:function(){if(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stopAd",this).call(this),this._ad)return this._wrapper(this._ad.stopAd());this.onAdStopped()}},{key:"pauseAd",value:function(){if(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"pauseAd",this).call(this),this._ad)return this._wrapper(this._ad.pauseAd())}},{key:"resumeAd",value:function(){if(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"resumeAd",this).call(this),this._ad)return this._wrapper(this._ad.resumeAd())}},{key:"expandAd",value:function(){if(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"expandAd",this).call(this),this._ad)return this._wrapper(this._ad.expandAd())}},{key:"collapseAd",value:function(){if(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"collapseAd",this).call(this),this._ad)return this._wrapper(this._ad.collapseAd())}},{key:"skipAd",value:function(){if(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"skipAd",this).call(this),this._ad)return this._wrapper(this._ad.skipAd());this.onAdSkipped(),this.onAdStopped()}},{key:"getAdVolumeInternal",value:function(){if(null!==this._ad){var t=this._wrapper(this._ad.getAdVolume());"number"==typeof t&&0<=t&&1>=t&&(this._volume=t)}return this._volume}},{key:"getAdVolume",value:function(){return this.getAdVolumeInternal()}},{key:"setAdVolumeInternal",value:function(t){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setAdVolumeInternal",this).call(this,t),this._ad&&this._wrapper(this._ad.setAdVolume(t))}},{key:"setAdVolume",value:function(t){this.setAdVolumeInternal(t)}},{key:"getAdExpanded",value:function(){return this._ad?this._wrapper(this._ad.getAdExpanded()):o.VPAID_DEFAULTS.getAdExpanded}},{key:"getAdCompanions",value:function(){var t=o.VPAID_DEFAULTS.getAdCompanions;return this._ad&&"function"==typeof this._ad.getAdCompanions&&(t=this._wrapper(this._ad.getAdCompanions())),t}},{key:"getAdDuration",value:function(){return this._ad?this._wrapper(this._ad.getAdDuration()):o.VPAID_DEFAULTS.getAdDuration}},{key:"getAdHeight",value:function(){return this._ad?this._wrapper(this._ad.getAdHeight()):this._initParams.height}},{key:"getAdWidth",value:function(){return this._ad?this._wrapper(this._ad.getAdWidth()):this._initParams.width}},{key:"getAdViewMode",value:function(){return this._ad?this._wrapper(this._ad.getAdViewMode()):this._initParams.viewMode}},{key:"getAdIcons",value:function(){return this._ad?this._wrapper(this._ad.getAdIcons()):o.VPAID_DEFAULTS.getAdIcons}},{key:"getAdLinear",value:function(){return this._ad?this._wrapper(this._ad.getAdLinear()):o.VPAID_DEFAULTS.getAdLinear}},{key:"getAdRemainingTime",value:function(){return this._ad?this._wrapper(this._ad.getAdRemainingTime()):o.VPAID_DEFAULTS.getAdRemainingTime}},{key:"getAdSkippableState",value:function(){return this._ad?this._wrapper(this._ad.getAdSkippableState()):o.VPAID_DEFAULTS.getAdSkippableState}},{key:"wrapper",get:function(){return this._wrapper}},{key:"ad",get:function(){return this._ad}}]),e}(((t=n(100))&&t.__esModule?t:{default:t}).default),e.default=t},function(t,e,n){var i=n(223),r=n(23),o=Array.prototype.splice;t.exports=function(t,e){for(var n=t?e.length:0,a=n-1;n--;){var s=e[n];if(n==a||s!==u){var u=s;r(s)?o.call(t,s,1):i(t,s)}}return t}},function(t,e,n){var i=n(25),r=n(224),o=n(225),a=n(17);t.exports=function(t,e){return e=i(e,t),null==(t=o(t,e))||delete t[a(r(e))]}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,n){var i=n(36),r=n(226);t.exports=function(t,e){return 2>e.length?t:i(t,r(e,0,-1))}},function(t,e){t.exports=function(t,e,n){var i=-1,r=t.length;for(0>e&&(e=-e>r?0:r+e),0>(n=n>r?r:n)&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0,n=Array(r);++i<r;)n[i]=t[i+e];return n}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=(t=n(18))&&t.__esModule?t:{default:t},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));n=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._vidIoEventCount=(0,r.default)(o.VID_IO_EVENTS,function(){return 0})}return i(t,[{key:"isVidIoEvent",value:function(t){return this._vidIoEventCount.hasOwnProperty(t)&&0<this._vidIoEventCount[t]}},{key:"vidIoEventCount",get:function(){return this._vidIoEventCount}},{key:"isVidIoDead",get:function(){return this.isVidIoEvent(o.VID_IO_EVENTS.js_complete)||this.isVidIoEvent(o.VID_IO_EVENTS.js_skip)||this.isVidIoEvent(o.VID_IO_EVENTS.js_unload)||this.isVidIoEvent(o.VID_IO_EVENTS.js_supply_error)}}]),t}(),e.default=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();t=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._creativeView=e.creativeView,this._start=e.start,this._firstQuartile=e.firstQuartile,this._midpoint=e.midpoint,this._thirdQuartile=e.thirdQuartile,this._complete=e.complete,this._mute=e.mute,this._unmute=e.unmute,this._pause=e.pause,this._rewind=e.rewind,this._resume=e.resume,this._fullscreen=e.fullscreen,this._exitFullscreen=e.exitFullscreen,this._expand=e.expand,this._collapse=e.collapse,this._acceptInvitationLinear=e.acceptInvitationLinear,this._acceptInvitation=e.acceptInvitation,this._closeLinear=e.closeLinear,this._skip=e.skip,this._progress=e.progress}return i(t,[{key:"creativeView",get:function(){return this._creativeView}},{key:"start",get:function(){return this._start}},{key:"firstQuartile",get:function(){return this._firstQuartile}},{key:"midpoint",get:function(){return this._midpoint}},{key:"thirdQuartile",get:function(){return this._thirdQuartile}},{key:"complete",get:function(){return this._complete}},{key:"mute",get:function(){return this._mute}},{key:"unmute",get:function(){return this._unmute}},{key:"pause",get:function(){return this._pause}},{key:"rewind",get:function(){return this._rewind}},{key:"resume",get:function(){return this._resume}},{key:"fullscreen",get:function(){return this._fullscreen}},{key:"exitFullscreen",get:function(){return this._exitFullscreen}},{key:"expand",get:function(){return this._expand}},{key:"collapse",get:function(){return this._collapse}},{key:"acceptInvitationLinear",get:function(){return this._acceptInvitationLinear}},{key:"acceptInvitation",get:function(){return this._acceptInvitation}},{key:"closeLinear",get:function(){return this._closeLinear}},{key:"skip",get:function(){return this._skip}},{key:"progress",get:function(){return this._progress}}]),t}(),e.default=t},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=(t=n(2))&&t.__esModule?t:{default:t},a=i(t=n(0)),s=i(t=n(1)),u=i(t=n(230)),_=n(94);n=function(){function t(e,n,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._isOrtb=e,this._baseUrl=n,this._vastTag=i}return r(t,[{key:"getVastVersion",value:function(){return 1!==this._vastTag.getElementsByTagName("VAST").length?1<=this._vastTag.getElementsByTagName("VideoAdServingTemplate").length?a.VAST_VERSION._1_0:a.VAST_VERSION.NOT_VAST:this._vastTag.getElementsByTagName("VAST")[0].getAttribute("version")||a.VAST_VERSION.UNKNOWN}},{key:"findVideoAd",value:function(){var t=a.getDefaultVastData();if(t.version=this.getVastVersion(),-1<[a.VAST_VERSION._1_0,a.VAST_VERSION.NOT_VAST].indexOf(t.version))return t;var e=this._vastTag.getElementsByTagName("Ad");if(e=0===e.length?null:e[0]){try{t.impressionPixels=this.getUnorderedUrls("Impression",e)}catch(t){throw Error(a.VD_ERROR_CODES.VAST_IMPRESSION_PIXELS_ERROR+"_"+t.message)}try{t.errorPixels=this.getUnorderedUrls("Error",e)}catch(t){throw Error(a.VD_ERROR_CODES.VAST_ERROR_PIXELS_ERROR+"_"+t.message)}}if(this._isOrtb){e=null;try{e=this._vastTag.getElementsByTagName("Extension")}catch(t){throw Error(a.VD_ERROR_CODES.VAST_ERROR_EXTENSIONS+"_"+t.message)}try{for(var n=0;n<e.length;n++){var i=e[n];i.getAttribute("type")===a.ORTB_DETAIL&&(t.ortb_detail={bf:s.getORtbElement(i,"bf",parseFloat),bp:s.getORtbElement(i,"bp",parseFloat),scode:s.getORtbElement(i,"scode",parseInt),bpa:s.getORtbElement(i,"bpa",parseFloat),bid_result:s.getORtbElement(i,"bid_result",parseInt),seat_id:s.getORtbElement(i,"seat_id",function(t){return t}),cid:s.getORtbElement(i,"cid",function(t){return t}),crid:s.getORtbElement(i,"crid",function(t){return t}),adomain:s.getORtbElement(i,"adomain",this.getFirstElementStringWithCommas)})}}catch(t){throw Error(a.VD_ERROR_CODES.VAST_ERROR_ORTB_DETAIL+"_"+t.message)}}e=null,i=void 0;try{var r=this._vastTag.getElementsByTagName("Wrapper");0<r.length&&(t.wrapperWaterfallCount=r.length-1,e=r[0]),i=u.getFirstElement("Linear",this._vastTag)}catch(t){throw Error(a.VD_ERROR_CODES.VAST_GET_LINEAR_WRAPPER_XML_ERROR+"_"+t.message)}if(null!==e)try{var o=u.getFirstElement("VASTAdTagURI",e);t.followAdditionalWrappers=s.getBooleanAttribute(e,"followAdditionalWrappers",!0),t.allowMultipleAds=s.getBooleanAttribute(e,"allowMultipleAds",!0),t.fallbackOnNoAd=s.getBooleanAttribute(e,"fallbackOnNoAd",!0),t.wrapperUrl=null!==o?this.getUrl(o.textContent):null,t.impressionPixels=this.getUnorderedUrls("Impression",e),t.errorPixels=this.getUnorderedUrls("Error",e);var _=u.getFirstElement("Linear",e);null!==_&&this.setTrackingEvents(t,_),t.clickTracking=this.getUnorderedUrls("ClickTracking",e)}catch(t){throw Error(a.VD_ERROR_CODES.VAST_IS_WRAPPER_XML_ERROR+"_"+t.message)}else if(null!==i)try{t.linear=!0;var l=i.getElementsByTagName("MediaFile");for(r=0;r<l.length;r++){var d=l[r];if(d.hasAttribute("type")){var c=d.getAttribute("type");"video/x-flv"===c?t.xFlvMedia.push(this.getMedia(d)):"application/javascript"===c?t.jsVpaidUrl=this.getUrl(d.textContent):"application/x-shockwave-flash"===c?t.flashVpaidUrl=this.getUrl(d.textContent):0===c.indexOf("video")&&t.media.push(this.getMedia(d))}}var h=u.getFirstElement("AdParameters",i);null!==h&&(t.adParameters=h.textContent);var A=u.getTextFromTagName("Duration",i);if(null!==A){var f=u.parseDuration(A);null!==f&&(t.duration=f)}var p=i.getAttribute("skipoffset");if(null!==p){var E=u.getSkipOffset(p,t.duration);t.skipOffset=null===E?a.VPAID_CONSTANTS.NOT_IMPLEMENTED:E}this.setTrackingEvents(t,i),t.clickTracking=this.getUnorderedUrls("ClickTracking",i),t.clickThrough=this.getUrlFromTagName("ClickThrough",i)}catch(t){throw Error(a.VD_ERROR_CODES.VAST_IS_LINEAR_XML_ERROR+"_"+t.message)}else try{t.noad=this.getUrlFromTagName("Error",this._vastTag)}catch(t){throw Error(a.VD_ERROR_CODES.VAST_NOAD_XML_ERROR+"_"+t.message)}return t}},{key:"getMedia",value:function(t){function e(t){return"true"===t}var n={mimetype:t.getAttribute("type"),url:this.getUrl(t.textContent)},i={delivery:function(t){return t},width:parseInt,height:parseInt,bitrate:parseInt,scalable:e,maintainAspectRatio:e};return(0,o.default)(i,function(e,i){t.hasAttribute(i)&&(n[i]=e(t.getAttribute(i)))}),n}},{key:"getUrlFromTagName",value:function(t,e){return null!==(t=u.getFirstElement(t,e))?this.getUrl(t.textContent):null}},{key:"getUrl",value:function(t){if(!(t=t.trim()))return null;try{return(0,_.resolve)(this._baseUrl,t)}catch(e){return t}}},{key:"setTrackingEvents",value:function(t,e){e=e.getElementsByTagName("Tracking");for(var n=0;n<e.length;n++){var i=e[n],r=i.getAttribute("event");t.trackingEvents.hasOwnProperty(r)&&(i=this.getUrl(i.textContent))&&t.trackingEvents[r].push(i)}}},{key:"getUnorderedUrls",value:function(t,e){var n=[];for(t=e.getElementsByTagName(t),e=0;e<t.length;e++){var i=this.getUrl(t[e].textContent);null!==i&&n.push(i)}return n}},{key:"getFirstElementStringWithCommas",value:function(t){try{var e=t.split(",");return void 0===e||0===e.length?"":e[0]}catch(t){return""}}}]),t}(),e.default=n},function(t,e,n){function i(t,e){return 0<(t=e.getElementsByTagName(t)).length?t[0]:null}function r(t){var e=t.trim().split(":");if(3!==e.length)return null;var n=e[2].split(".");return t=parseInt(n[0]),2===n.length&&(t+=parseFloat("0."+n[1])),n=60*parseInt(e[1]),e=3600*parseInt(e[0]),isNaN(e)||isNaN(n)||isNaN(t)||3600<n||60<t?null:e+n+t}Object.defineProperty(e,"__esModule",{value:!0}),e.getFirstElement=i,e.getTextFromTagName=function(t,e){return null!==(t=i(t,e))&&""!==(t=t.textContent.trim())?t:null},e.parseDuration=r,e.getSkipOffset=function(t,e){return"%"===(t=t.trim())[t.length-1]?null!==e&&0<e?parseFloat(t)/100*e:null:r(t)}},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=r(t=n(9)),s=r(t=n(51)),u=i(t=n(1));t=r(t=n(3));var _=n(232),l=r(_),d=r(_=n(2)),c=i(n=n(0));n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t)._siteId=parseInt(t._bidParams.siteId),t._callBackId=t.cabinet.shortUuid+Math.floor(100*Math.random()).toString(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"getJsonPayload",value:function(t){var e=this.widthToPass(t);t=this.heightToPass(t);var n=this.domainToPass;return{id:this._callBackId,site:{page:n,ref:n},imp:[{id:"0",video:{mimes:this.cabinet.supportedMimes(this.cabinet.canPlayFlash),minduration:0,maxduration:30,protocols:[2,3,5,6],w:e,h:t,linearity:1,api:[1,2],playbackmethod:[3],startdelay:0},ext:{sid:"pr_1_1_s",custom:"videoPlayback"}}]}}},{key:"getRequestParams",value:function(t){return null===this._siteId||(0,a.default)(this._siteId)?null:(t=this.getJsonPayload(t),{fn:this._callBackFnName(),v:"8.8",s:this._siteId,r:JSON.stringify(t)})}},{key:"_getBaseUrl",value:function(){return this._cabinet.pageProtocol===u.SECURE_PROTOCOL?"as-sec.casalemedia.com/cygnus":"as.casalemedia.com/cygnus"}},{key:"getUrl",value:function(t){var e=this._getBaseUrl();return(t=this.getRequestParams(t))?u.makeUrl(this.cabinet.pageProtocol,e,t):null}},{key:"_callBackFnName",value:function(){return"indexResponse"+this._callBackId}},{key:"_jsonpIt",value:function(t,e){var n=this;try{(0,l.default)(t,this._callBackFnName(),function(t){n.handleResponse(t,e)},function(){n.handleTimeout()},this.getTimeoutInfo().timeout)}catch(t){this.handleError()}}},{key:"_containerRequestVast",value:function(t){var e=this.getUrl(t);e?this._jsonpIt(e,t):this.failedBidRequest()}},{key:"handleTimeout",value:function(){this.failedBidRequest(c.VAST_ERRORCODES.SS_VEC_1312_INDEX_REQUEST_TIMEOUT,c.VD_ERROR_CODES.HB_BID_REQUEST_TIMEOUT)}},{key:"extractBid",value:function(t){try{if("string"==typeof t.ext.pricelevel){var e=t.ext.pricelevel;return"_"===e.charAt(0)&&(e=e.slice(1)),t=e/100,!(0,s.default)(t)||(0,a.default)(t)?null:t}}catch(t){return null}}},{key:"getBestBid",value:function(t){var e=this,n=null;return(0,d.default)(t.seatbid,function(t){(0,d.default)(t.bid,function(t){t.price=e.extractBid(t),t.price&&(null===n||t.price>n.price)&&(n=t)})}),n}},{key:"handleResponse",value:function(t,e){var n=null;try{n=this.getBestBid(t),this.bid=n.price}catch(t){return void this.failedBidRequest()}if(this.hasBid())if(this.bidMeetsFloor()){t=null;try{t=n.ext.vasturl}catch(t){return void this.failedBidRequest()}this._getAdVastProcessor(e).requestVast(t,!0,this.hbDetails)}else this.failedBidRequest(c.VAST_ERRORCODES.SS_VEC_1310_BID_BELOW_FLOOR);else this.failedBidRequest()}}]),e}(t.default),e.default=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=e||"callback",i=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)||function(){},r=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)||function(){},o=window.setTimeout(function(){window[n]=function(){},r()},4<arguments.length&&void 0!==arguments[4]?arguments[4]:2e3);window[n]=function(t){window.clearTimeout(o),i(t)};var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=t;var s=document.getElementsByTagName("head");(s=s.length?s:document.getElementsByTagName("body")).length&&(s=s[0]).insertBefore(a,s.firstChild)}},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=r(t=n(9)),s=r(t=n(18)),u=r(t=n(12)),_=i(t=n(1));t=r(t=n(3));var l=i(n=n(0));n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t).accountId=parseInt(t._bidParams.accountId),t.zoneId=parseInt(t._bidParams.zoneId),t.siteId=parseInt(t._bidParams.siteId),t.sizeId=parseInt(t._bidParams.sizeId||201),t.keywords=t._bidOptionalParams.keywords,t.inventory=t._bidOptionalParams.inventory,t.visitor=t._bidOptionalParams.visitor,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"_getScreenResolution",value:function(){return[window.screen.width,window.screen.height].join("x")}},{key:"getSlotId",value:function(){return this._cabinet.uuid}},{key:"isInvalidParams",value:function(){return!this.siteId||(0,a.default)(this.siteId)||!this.zoneId||(0,a.default)(this.zoneId)||!this.accountId||(0,a.default)(this.accountId)||!this.sizeId||(0,a.default)(this.sizeId)}},{key:"unencodeOptionalParams",value:function(t){return t?(0,s.default)(t,function(t){return"string"==typeof t?_.unencodeComponent(t):(0,u.default)(t,function(t){return _.unencodeComponent(t)})}):t}},{key:"addOptionalParams",value:function(t){this.keywords&&(t.keywords=this.keywords),this.inventory&&(t.inventory=this.unencodeOptionalParams(this.inventory)),this.visitor&&(t.visitor=this.unencodeOptionalParams(this.visitor))}},{key:"getRequestParams",value:function(t){if(this.isInvalidParams())return null;var e={page_url:this.domainToPass,resolution:this._getScreenResolution(),account_id:this.accountId,integration:"pbjs_lite_v0.30.0-pre","x_source.tid":this._cabinet.uuid,timeout:1e3,stash_creatives:!1,slots:[]};return this.gdprSet()&&(e.gdpr_consent=this.gdprConsentString(),e.gdpr=this.gdprApplies()),t={site_id:this.siteId,zone_id:this.zoneId,position:"btf",floor:.01<parseFloat(this._bidFloor)?this._bidFloor:.01,element_id:this.getSlotId(),name:this.getSlotId(),language:"en",width:this.widthToPass(t),height:this.heightToPass(t),size_id:this.sizeId},this.addOptionalParams(t),e.slots.push(t),e}},{key:"getUrl",value:function(){return this._cabinet.pageProtocol+"//fastlane-adv.rubiconproject.com/v1/auction/video"}},{key:"_containerRequestVast",value:function(t){var e=this.getRequestParams(t);if(null===e)this.failedBidRequest();else try{this._ajaxIt(this.getUrl(),e,t)}catch(t){this.failedHBVastRequest("RUBICON_"+l.VD_ERROR_CODES.HB_AJAX_FAIL+" "+t.message)}}},{key:"handleResponse",value:function(t,e){var n=null;try{n=JSON.parse(t).ads[this.getSlotId()][0],this.bid=n.cpm}catch(t){return void this.failedBidRequest()}this.hasBid()?this.bidMeetsFloor()?(t=(new DOMParser).parseFromString(n.creative_content,"application/xml"),this._getAdVastProcessor(e).processVast(t,"",this.hbDetails)):this.failedBidRequest(l.VAST_ERRORCODES.SS_VEC_1310_BID_BELOW_FLOOR):this.failedBidRequest()}}]),e}(t.default),e.default=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();t=(t=n(3))&&t.__esModule?t:{default:t};var r=n(9),o=r&&r.__esModule?r:{default:r},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t).zoneId=null,t._bidParams.hasOwnProperty("zoneId")&&(t.zoneId=parseInt(t._bidParams.zoneId)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"getUrl",value:function(){return this._cabinet.pageProtocol+"//ads.stickyadstv.com/www/delivery/swfIndex.php?reqType=AdsSetup&protocolVersion=2.0&zoneId="+this.zoneId+"&loc="+this.domainToPass}},{key:"_containerRequestVast",value:function(t){(null===this.zoneId||(0,o.default)(this.zoneId))&&this.failedBidRequest("STICKY_INVALID_ZONEID"),this._ajaxIt(this.getUrl(),null,t,"GET")}},{key:"getPriceFromExtension",value:function(t){var e=void 0;try{e=t.getElementsByTagName("Extension")}catch(t){this.failedBidRequest()}for(t=0;t<e.length;t++){var n=e[t];if("StickyPricing"===n.getAttribute("type"))return e=n.getElementsByTagName("Price")[0],{bid:parseFloat(e.textContent.trim()),currency:e.getAttribute("currency")}}}},{key:"handleResponse",value:function(t,e){var n=null;try{n=(new DOMParser).parseFromString(t,"application/xml")}catch(t){return void this.failedBidRequest("STICKY_HB_VAST_PARSE_ERROR")}t=void 0;try{t=this.getPriceFromExtension(n),this.bid=t.bid}catch(t){return void this.failedBidRequest()}this.hasBid()?"USD"!==t.currency?this.failedBidRequest(a.VAST_ERRORCODES.SS_VAST_ERRORCODE_1301,"STICKY_CURRENCY_NON_USD_"+t.currency):this.bidMeetsFloor()?this._getAdVastProcessor(e).processVast(n,"",this.hbDetails):this.failedBidRequest(a.VAST_ERRORCODES.SS_VEC_1310_BID_BELOW_FLOOR):this.failedBidRequest()}}]),e}(t.default),e.default=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();t=(t=n(3))&&t.__esModule?t:{default:t};var r=n(2),o=r&&r.__esModule?r:{default:r},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t).adCode=null,t.supplyCode=null,t.setParams(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"setParams",value:function(){this._bidParams.hasOwnProperty("adCode")&&(this.adCode=this._bidParams.adCode),this._bidParams.hasOwnProperty("supplyCode")&&(this.supplyCode=this._bidParams.supplyCode)}},{key:"_containerRequestVast",value:function(t){var e=this.generateUrl(t);if(null===e)this.failedBidRequest();else try{this._ajaxIt(e,null,t,"GET")}catch(t){this.failedHBVastRequest("TELARIA_"+a.VD_ERROR_CODES.HB_AJAX_FAIL+" "+t.message)}}},{key:"generateUrl",value:function(t){if(null===this.adCode||null===this.supplyCode)return null;var e=this.widthToPass(t);t=this.heightToPass(t);var n=this._cabinet.pageProtocol+"//"+this.supplyCode+".ads.tremorhub.com/ad/tag?adCode="+this.adCode;return n+="&playerWidth="+e,n+="&playerHeight="+t,n+="&srcPageUrl="+encodeURIComponent(this.fullDomainToPass),(0,o.default)(this._bidOptionalParams,function(t,e){n+="&"+e+"="+t}),this.gdprSet()&&(n+="&gdpr="+this.gdprApplies()+"&gdpr_consent="+this.encodedGdprConsentString()),n+="&fmt=json"}},{key:"handleResponse",value:function(t,e){var n=void 0;try{n=JSON.parse(t)}catch(t){return void this.failedBidRequest()}!n.hasOwnProperty("seatbid")||1>n.seatbid.length?this.failedBidRequest():(null!==(t=this.getBestBidOpenRTBResults(n))&&(this.bid=t.price),this.hasBid()?this.bidMeetsFloor()?(t=(new DOMParser).parseFromString(t.adm,"application/xml"),this._getAdVastProcessor(e).processVast(t,"",this.hbDetails)):this.failedBidRequest(a.VAST_ERRORCODES.SS_VEC_1310_BID_BELOW_FLOOR):this.failedBidRequest())}}]),e}(t.default),e.default=n},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=r(t=n(9)),s=r(t=n(2)),u=r(t=n(96)),_=i(t=n(1));t=r(t=n(3));var l=i(n=n(0)),d=["code","ext_inv_code","position","prevent_deals","keywords"],c="playback_method mimes max_duration min_duration context skippable frameworks".split(" ");n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t)._placementId=parseInt(t._bidParams.placementId),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"includeVideoParams",value:function(t){var e=(0,u.default)(this._bidOptionalParams,c);(0,s.default)(e,function(e,n){"string"==typeof n&&(t[n]=_.unencodeParam(e))})}},{key:"includeTagParams",value:function(t){var e=(0,u.default)(this._bidOptionalParams,d);(0,s.default)(e,function(e,n){if(e=_.unencodeParam(e),"keywords"===n)if("string"==typeof e)t[n]=e;else{var i={};(0,s.default)(e,function(t,e){i[e]="string"==typeof t&&t.includes(",")?t.split(","):t}),t[n]=i}else t[n]=e})}},{key:"getRequestParams",value:function(t){if(null===this._placementId||(0,a.default)(this._placementId))return null;var e=this.widthToPass(t);return e={sizes:[{width:e,height:t=this.heightToPass(t)}],primary_size:{width:e,height:t},uuid:this._cabinet.uuid,id:this._placementId,allow_smaller_sizes:!1,use_pmt_rule:!1,prebid:!0,disable_psa:!0,require_asset_url:!0,video:{playback_method:["auto_play_sound_off"]}},this.includeTagParams(e),this.includeVideoParams(e.video),e={tags:[e],sdk:{source:"pbjs",version:"1.16.0"}},this.gdprSet()&&(e.gdpr_consent={consent_string:this.gdprConsentString(),consent_required:this.gdprApplies()}),e}},{key:"getUrl",value:function(){return this._cabinet.pageProtocol+"//ib.adnxs.com/ut/v3/prebid"}},{key:"_containerRequestVast",value:function(t){var e=this.getRequestParams(t);if(null===e)this.failedBidRequest();else try{this._ajaxIt(this.getUrl(),e,t)}catch(t){this.failedHBVastRequest("APPNEXUS_"+l.VD_ERROR_CODES.HB_AJAX_FAIL+" "+t.message)}}},{key:"handleResponse",value:function(t,e){t=JSON.parse(t);try{this.bid=t.tags[0].ads[0].cpm}catch(t){return void this.failedBidRequest()}if(this.hasBid())if(this.bidMeetsFloor()){var n=null;try{n=t.tags[0].ads[0].rtb.video.asset_url}catch(t){return void this.failedBidRequest()}this._demandTag.url=n,this._getAdVastProcessor(e).requestVast(n,!0,this.hbDetails)}else this.failedBidRequest(l.VAST_ERRORCODES.SS_VEC_1310_BID_BELOW_FLOOR);else this.failedBidRequest()}}]),e}(t.default),e.default=n},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(1),s=r(a),u=r(n(0)),_=i(n(238)),l=i(n(4)),d=i(n(5)),c=i(n(93));n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t).deliveryDomain=t._bidParams.delDomain,t.auid=t._bidParams.auid,t.customParams=t._bidOptionalParams.customParams||{},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"formatCustomValue",value:function(t){return(0,l.default)(t)?(0,c.default)(t,","):t}},{key:"getCustomParams",value:function(){var t=this,e={};return(0,_.default)(this.customParams,function(n,i){e["c."+i]=encodeURIComponent(s.unencodeComponent(t.formatCustomValue(n)))}),e}},{key:"getRequestParams",value:function(t){if(!this.auid)return null;var e=this.widthToPass(t);t=this.heightToPass(t);var n={imp:[{video:{mimes:this.cabinet.supportedMimes(!1),w:e,h:t}}]};return e={auid:this.auid,url:this.domainToPass,vht:t,vwd:e,openrtb:encodeURIComponent(JSON.stringify(n)),be:!0},this.gdprSet()&&(e.gdpr_consent=this.gdprConsentString(),e.gdpr=this.gdprApplies()),(0,d.default)(e,this.getCustomParams())}},{key:"getUrl",value:function(){return a.SECURE_PROTOCOL+"//"+this.deliveryDomain+"/v/1.0/avjp"}},{key:"_containerRequestVast",value:function(t){var e=this.getRequestParams(t);if(null===e)this.failedBidRequest();else try{this._ajaxIt(this.getUrl(),e,t,"GET")}catch(t){this.failedHBVastRequest("OPENX_"+u.VD_ERROR_CODES.HB_AJAX_FAIL+" "+t.message)}}},{key:"handleResponse",value:function(t,e){t=JSON.parse(t);try{this.bid=parseInt(t.pub_rev)/1e3}catch(t){return void this.failedBidRequest()}if(this.hasBid())if(this.bidMeetsFloor()){var n=null;try{n=t.vastUrl}catch(t){return void this.failedBidRequest()}this._demandTag.url=n,this._getAdVastProcessor(e).requestVast(n,!0,this.hbDetails)}else this.failedBidRequest(u.VAST_ERRORCODES.SS_VEC_1310_BID_BELOW_FLOOR);else this.failedBidRequest()}},{key:"domainToPass",get:function(){var t=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"domainToPass",this),n=this.cabinet.pageProtocol;return 0===t.indexOf("//")?n+t:0!==t.indexOf("http")?n+"//"+t:t}}]),e}(i(n=n(3)).default),e.default=n},function(t,e,n){var i=n(85),r=n(89),o=n(30);t.exports=function(t,e){return null==t?t:i(t,r(e),o)}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();t=(t=n(3))&&t.__esModule?t:{default:t};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),o=n(1);n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t).siteId=t._bidParams.siteId,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"isMobile",value:function(){try{return null!==document.querySelector('meta[name="viewport"][content*="width=device-width"]')?1:0}catch(t){return 0}}},{key:"getDevice",value:function(){var t=navigator.language?"language":"userLanguage";return{h:window.screen.height,w:window.screen.width,dnt:this.getDNT()?1:0,language:navigator[t].split("-")[0],make:navigator.vendor?navigator.vendor:"",ua:navigator.userAgent}}},{key:"getRequestParams",value:function(t){if(!this.siteId)return null;var e=this.widthToPass(t);return t=this.heightToPass(t),{id:this.shortUuid,site:{id:this.siteId,mobile:this.isMobile(),page:this.domainToPass},at:1,device:this.getDevice(),imp:[{video:{mimes:"video/mp4 application/javascript video/webm video/quicktime video/ogg video/3gpp".split(" "),w:e,h:t},id:this.shortUuid,secure:this._cabinet.pageProtocol===o.SECURE_PROTOCOL,bidfloor:this.bidFloor,displaymanager:"Prebid.js",displaymanagerver:"2.2.2"}]}}},{key:"getUrl",value:function(){return this._cabinet.pageProtocol+"//media.msg.dotomi.com/s2s/header/24"}},{key:"_containerRequestVast",value:function(t){var e=this.getRequestParams(t);if(null===e)this.failedBidRequest();else try{this._ajaxIt(this.getUrl(),e,t)}catch(t){this.failedHBVastRequest("CONVERSANT_"+r.VD_ERROR_CODES.HB_AJAX_FAIL+" "+t.message)}}},{key:"handleResponse",value:function(t,e){var n=void 0;try{n=JSON.parse(t)}catch(t){return void this.failedBidRequest()}!n.hasOwnProperty("seatbid")||1>n.seatbid.length?this.failedBidRequest():(null!==(t=this.getBestBidOpenRTBResults(n))&&(this.bid=t.price),this.hasBid()?this.bidMeetsFloor()?this._getAdVastProcessor(e).requestVast(t.adm,!0,this.hbDetails):this.failedBidRequest(r.VAST_ERRORCODES.SS_VEC_1310_BID_BELOW_FLOOR):this.failedBidRequest())}}]),e}(t.default),e.default=n},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=i(t=n(5)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),s=i(t=n(57));t=i(t=n(105));var u=i(n=n(20));n=function(t){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t=(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?this:t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"_containerRequestVast",value:function(t){this.cabinet.timeoutManager.getTimeoutInfo(this._demandTag.waterfallIdx,new u.default(this._cabinet.timeouts.IMA_TIMEOUT,a.VD_ERROR_CODES.IMA_AD_CONTAINER_TIMEOUT)),this.cabinet.imaManager.state===a.IMA_MANAGER_STATES.LOAD_ERROR?this.onLOAD_ERROR():this.cabinet.imaManager.state===a.IMA_MANAGER_STATES.LOADED?this.onLOADED():this.cabinet.imaManager.state===a.IMA_MANAGER_STATES.INIT?(this.registerImaManagerEventListeners(),this.cabinet.timeoutManager.startImaLoad(),this.cabinet.imaManager.loadAndStartIma()):this.registerImaManagerEventListeners()}},{key:"onLOAD_ERROR",value:function(){this.sendJsDemandResponse(a.VID_IO_EVENTS.cm_js_demand_req_resp,this._demandTag,{cc_i:this._demandTag.callChain.getCallChainIndices(this.cabinet.historyManager.demand_events.response,!0).join(","),response_time:this.cabinet.timeoutManager.getResponseTime(this._demandTag.waterfallIdx),wrapper_count:0,has_ad:!1,timeout:!1,reason:a.VD_ERROR_CODES.IMA_MANAGER_LOAD_ERROR,dtype:a.DEMAND_TYPES.IMA}),this.adVpaidState.isContinue&&this.onSlotVastDone(this._idx,null)}},{key:"onLOADED",value:function(){this.sendJsDemandResponse(a.VID_IO_EVENTS.cm_js_demand_req_resp,this._demandTag,{cc_i:this._demandTag.callChain.getCallChainIndices(this.cabinet.historyManager.demand_events.response,!0).join(","),response_time:this.cabinet.timeoutManager.getResponseTime(this._demandTag.waterfallIdx),wrapper_count:0,has_ad:!0,timeout:!1,vv:a.VAST_VERSION.IMA,dtype:a.DEMAND_TYPES.IMA}),this.adVpaidState.isContinue&&this.onSlotVastDone(this._idx,new s.default((0,o.default)({imaTagUrl:this._demandTag.url},a.getDefaultVastData())))}}]),e}(t.default),e.default=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=(t=n(56))&&t.__esModule?t:{default:t};t=(t=n(38))&&t.__esModule?t:{default:t};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(1));n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?this:t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"_containerRequestVast",value:function(t){t=new r.default(this._cabinet,this._initParams,this._demandTag,t),this.registerSSEventListeners_(t),t.requestVast(null,o.shouldUseWithCreds(this._demandTag.url))}}]),e}(t.default),e.default=n},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0},s=(t=n(28))&&t.__esModule?t:{default:t};t=(t=n(3))&&t.__esModule?t:{default:t};var u=n(0),_=i(u),l=i(u=n(19)),d=i(n=n(1));n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t).id=Math.random().toString(),t._bidResults=null,t._bidIndex=0,t._numBids=0,t._sizeInfo=null,t._firedDemandReqResponse=!1,t._contangoSectionId=null,t._bidParams.hasOwnProperty("contango_section_id")&&(t._contangoSectionId=d.unencodeParam(t._bidParams.contango_section_id)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"isLastBid",value:function(){return this.bidIndex>=this.numBids-1}},{key:"incrementBidIndex",value:function(){this._bidIndex+=1}},{key:"onSlotVastDone",value:function(t,n){n?a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onSlotVastDone",this).call(this,t,n):this.isLastBid()?a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onSlotVastDone",this).call(this,t,null):(this.incrementBidIndex(),this.processBid())}},{key:"failedBidRequest",value:function(){var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:_.VAST_ERRORCODES.SS_VAST_ERRORCODE_1301,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:_.VD_ERROR_CODES.HB_BID_ERROR;this.sendJsDemandResponse(_.VID_IO_EVENTS.cm_js_demand_req_resp,this._demandTag,(r(t={cc_i:this._demandTag.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.response,!0).join(","),response_time:this._cabinet.timeoutManager.getResponseTime(this._demandTag.waterfallIdx),has_ad:!1,reason:i,wrapper_count:0,dtype:_.DEMAND_TYPES.UNKNOWN},_.VID_IO_PARAMS.bidPrice,this.bid),r(t,_.VID_IO_PARAMS.bidFloor,this.bidFloor),r(t,_.VID_IO_PARAMS.vastErrorCode,n),t)),this._firedDemandReqResponse=!0,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onSlotVastDone",this).call(this,this._idx,null)}},{key:"successfulBidRequest",value:function(){var t;this.sendJsDemandResponse(_.VID_IO_EVENTS.cm_js_demand_req_resp,this._demandTag,(r(t={cc_i:this._demandTag.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.response,!0).join(","),response_time:this.cabinet.timeoutManager.getResponseTime(this._demandTag.waterfallIdx),has_ad:!0,wrapper_count:0,dtype:_.DEMAND_TYPES.UNKNOWN},_.VID_IO_PARAMS.bidPrice,this.bid),r(t,_.VID_IO_PARAMS.bidFloor,this.bidFloor),r(t,_.VID_IO_PARAMS.vastVersion,_.VAST_VERSION.SYNACOR),t)),this._firedDemandReqResponse=!0}},{key:"getRequestParams",value:function(t,e){if(!this._contangoSectionId)return null;var n=1;return e&&e.isInView!==_.VIEWABILITY.UNINITIALIZED&&e.isInView!==_.VIEWABILITY.UNKNOWN?e.isInView===_.VIEWABILITY.NOT_VIEWABLE&&(n=3):n=0,t={id:this.id,site:{domain:this.domainToPass,page:this.fullDomainToPass,ref:this.cabinet.locationInfo.document__referrer},imp:[{id:this.id,bidfloor:this.bidFloor,tagid:this._contangoSectionId,video:{w:this.widthToPass(t),h:this.heightToPass(t),pos:n,linearity:1}}],device:{ua:navigator.userAgent}},this._bidOptionalParams.hasOwnProperty("minduration")&&(t.imp[0].video.minduration=this._bidOptionalParams.minduration),this._bidOptionalParams.hasOwnProperty("maxduration")&&(t.imp[0].video.maxduration=this._bidOptionalParams.maxduration),this._bidOptionalParams.hasOwnProperty("site_id")&&(t.site.id=this._bidOptionalParams.site_id),this._bidOptionalParams.hasOwnProperty("publisher_id")&&(t.site.publisher={id:this._bidOptionalParams.publisher_id}),this._bidOptionalParams.hasOwnProperty("viewability_percentage")&&!isNaN((0,s.default)(this._bidOptionalParams.viewability_percentage))&&(t.imp[0].metric=[{type:"viewability_percentage",value:(0,s.default)(this._bidOptionalParams.viewability_percentage),vendor:"EXCHANGE"}]),t}},{key:"getUrl",value:function(){return this._cabinet.pageProtocol+"//uat-net.technoratimedia.com/openrtb/bids/springserve"}},{key:"_containerRequestVast",value:function(){var t=l.detector();t&&t.isInView===_.VIEWABILITY.UNINITIALIZED?this.waitForViewabilityInitAsync(t,this.requestVastPostViewabilityInit.bind(this)):this.requestVastPostViewabilityInit(t)}},{key:"waitForViewabilityInitAsync",value:function(t,e){setTimeout(function(){e(t)},this.cabinet.timeouts.VIEWABILITY)}},{key:"requestVastPostViewabilityInit",value:function(t){var e=this.sizeInfo;if(t=this.getRequestParams(e,t))try{this._ajaxIt(this.getUrl(),t,e)}catch(t){this.failedHBVastRequest("SYNACOR_"+_.VD_ERROR_CODES.HB_AJAX_FAIL+" "+t.message)}else this.failedBidRequest(_.VAST_ERRORCODES.SS_VEC_1314_HB_ERROR_MISSING_REQUEST_PARAMS,_.VD_ERROR_CODES.HB_MISSING_BID_PARAMS)}},{key:"handleResponse",value:function(t){try{this._bidResults=this.sortOpenRTBResultsByPrice(JSON.parse(t))}catch(t){return void this.failedBidRequest(_.VAST_ERRORCODES.SS_VEC_1323_HB_ERROR_PARSING_BID_RESPONSE)}this._bidResults?(this._numBids=this.bidResults.length,0===this.numBids?this.failedBidRequest():this.processBid()):this.failedBidRequest(_.VAST_ERRORCODES.SS_VEC_1323_HB_ERROR_PARSING_BID_RESPONSE)}},{key:"processBid",value:function(){var t=void 0;try{t=this.bidResults[this.bidIndex].bid[0],this.bid=t.price}catch(t){return void this.onSlotVastDone(this._idx,null)}0!==this.bidIndex&&this.firedDemandReqResponse||this.successfulBidRequest(),this.hasBid()&&this.bidMeetsFloor()&&t.hasOwnProperty("nurl")?(t=t.nurl.replace(/\${AUCTION_PRICE}/g,this.bid),this._getAdVastProcessor(this.sizeInfo).requestVast(t,!0,this.hbDetails)):this.onSlotVastDone(this._idx,null)}},{key:"bidResults",get:function(){return this._bidResults}},{key:"bidIndex",get:function(){return this._bidIndex}},{key:"numBids",get:function(){return this._numBids}},{key:"sizeInfo",get:function(){return this._cabinet.getSizeInfo(this._initParams)}},{key:"firedDemandReqResponse",get:function(){return this._firedDemandReqResponse}}]),e}(t.default),e.default=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();t=(t=n(3))&&t.__esModule?t:{default:t};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),o=n(9),a=o&&o.__esModule?o:{default:o},s=n(1).SECURE_PROTOCOL+"//player.mediabong.{ENV}/prebid/request",u=["net"];n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t).env=t._bidParams.env,t.zoneId=t._bidParams.zoneId,t.pubId=parseInt(t._bidParams.pubId),t.videoContext=t._bidParams.videoContext,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"isInvalidParams",value:function(){return!this.zoneId||(0,a.default)(this.zoneId)||!this.pubId||(0,a.default)(this.pubId)||!this.env||!u.includes(this.env)||!this.videoContext}},{key:"getRequestParams",value:function(t){if(this.isInvalidParams())return null;var e=this.fullDomainToPass;return{width:this.widthToPass(t),height:this.heightToPass(t),pub_id:this.pubId,zone_id:this.zoneId,context:this.videoContext,floor_price:this.bidFloor,url:e.startsWith("http")?e:this._cabinet.pageProtocol+"//"+e,env:this.env}}},{key:"getUrl",value:function(){return s.replace("{ENV}",this.env)}},{key:"_containerRequestVast",value:function(t){var e=this.getRequestParams(t);if(null===e)this.failedBidRequest(r.VAST_ERRORCODES.SS_VEC_1314_HB_ERROR_MISSING_REQUEST_PARAMS,r.VD_ERROR_CODES.HB_MISSING_BID_PARAMS);else try{this._ajaxIt(this.getUrl(),e,t)}catch(t){this.failedHBVastRequest("VUBLE_"+r.VD_ERROR_CODES.HB_AJAX_FAIL+" "+t.message)}}},{key:"handleResponse",value:function(t,e){var n=void 0;try{var i=JSON.parse(t);if("ok"!==i.status)return void this.failedBidRequest();if(this.bid=i.cpm,!this.hasBid())return void this.failedBidRequest();if(!this.bidMeetsFloor())return void this.failedBidRequest(r.VAST_ERRORCODES.SS_VEC_1310_BID_BELOW_FLOOR);if(!(n=i.url))return void this.failedBidRequest()}catch(t){return void this.failedBidRequest()}this._getAdVastProcessor(e).requestVast(n,!0,this.hbDetails)}}]),e}(t.default),e.default=n},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();t=i(t=n(3));var o=n(37),a=i(o),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),u=i(o=n(9)),_=n(1).SECURE_PROTOCOL+"//targeting.unrulymedia.com/prebid";n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t).targetingUUID=t._bidParams.targetingUUID,t.siteId=t._bidParams.siteId,t.videoContext=t._bidParams.videoContext,t.adUnitCode=Math.random().toString(),t.bidId=Math.random().toString(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"isInvalidParams",value:function(){return!this.targetingUUID||!this.siteId||(0,u.default)(this.siteId)||!this.videoContext}},{key:"getRequestParams",value:function(t){return this.isInvalidParams()?null:{bidRequests:[{params:{targetingUUID:this.targetingUUID,siteId:this.siteId},mediaTypes:{video:{context:this.videoContext}},adUnitCode:this.adUnitCode,sizes:[[this.widthToPass(t),this.heightToPass(t)]],bidId:this.bidId}]}}},{key:"getUrl",value:function(){return _}},{key:"_ajaxIt",value:function(t,e,n){var i=this.handleResponse.bind(this),r=this.handleError.bind(this);a.default.ajax(t,this.getTimeoutInfo(),{success:function(t){i(t,n)},error:function(){r()}},JSON.stringify(e),{method:"POST",withCredentials:!0,contentType:"application/json"})}},{key:"_containerRequestVast",value:function(t){var e=this.getRequestParams(t);if(null===e)this.failedBidRequest(s.VAST_ERRORCODES.SS_VEC_1314_HB_ERROR_MISSING_REQUEST_PARAMS,s.VD_ERROR_CODES.HB_MISSING_BID_PARAMS);else try{this._ajaxIt(this.getUrl(),e,t)}catch(t){this.failedHBVastRequest("UNRULY_"+s.VD_ERROR_CODES.HB_AJAX_FAIL+" "+t.message)}}},{key:"handleResponse",value:function(t,e){var n=void 0;try{var i=JSON.parse(t).bids[0];if(this.bid=i.cpm,!this.hasBid())return void this.failedBidRequest();if(!this.bidMeetsFloor())return void this.failedBidRequest(s.VAST_ERRORCODES.SS_VEC_1310_BID_BELOW_FLOOR);if(!(n=i.vastUrl))return void this.failedBidRequest()}catch(t){return void this.failedBidRequest()}this._getAdVastProcessor(e).requestVast(n,!0,this.hbDetails)}}]),e}(t.default),e.default=n},function(t,e,n){(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(3);r=r&&r.__esModule?r:{default:r};var o=n(1),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));r=function(e){function n(t,e,i,r){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");if(t=(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t).appId=null,t._bidParams.hasOwnProperty("appId")&&(t.appId=t._bidParams.appId);try{t.dropIframeUserSync(t.userSyncUrl())}catch(t){}return t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r.default),i(n,[{key:"userSyncUrl",value:function(){var t=this.gdprSet()?this.gdprApplies():0;return"https://sync.bfmio.com/sync_iframe?ifg=3&ifpl=5&id="+this.appId+"&gdpr="+t+"&gc="+encodeURIComponent(this.gdprConsentString())+"&gce=1"}},{key:"_containerRequestVast",value:function(t){var e=this.generateUrl(t);if(null===e)this.failedBidRequest();else{var n=this.getRequestData(t);this._ajaxIt(e,n,t)}}},{key:"isMobile",value:function(){try{return/(ios|ipod|ipad|iphone|android)/i.test(t.navigator.userAgent)}catch(t){return 2}}},{key:"isConnectedTV",value:function(){try{return/(smart[-]?tv|hbbtv|appletv|googletv|hdmi|netcast\.tv|viera|nettv|roku|\bdtv\b|sonydtv|inettvbrowser|\btv\b)/i.test(t.navigator.userAgent)}catch(t){return 2}}},{key:"getBeachBidFloor",value:function(){return!this.bidFloor||.01>this.bidFloor?.01:this.bidFloor}},{key:"getRequestData",value:function(e){var n=this.fullDomainToPass;return e={isPrebid:!0,appId:this.appId,domain:this.domainToPass,imp:[{video:{w:this.widthToPass(e),h:this.heightToPass(e)},bidfloor:this.getBeachBidFloor(),secure:this._cabinet.pageProtocol===o.SECURE_PROTOCOL?1:0}],site:{page:n.startsWith("http")?n:this._cabinet.pageProtocol+"//"+n,domain:this.domainToPass},device:{ua:t.navigator.userAgent,devicetype:this.isMobile()?1:this.isConnectedTV()?3:2,js:1,geo:{}},regs:{},user:{},cur:["USD"]},this.gdprSet()&&(e.regs.ext={gdpr:this.gdprApplies()},e.user.ext={consent:this.gdprConsentString()}),e}},{key:"generateUrl",value:function(){return null===this.appId?null:this._cabinet.pageProtocol+"//reachms.bfmio.com/bid.json?exchange_id="+this.appId}},{key:"handleResponse",value:function(t,e){var n=void 0;try{n=JSON.parse(t)}catch(t){return void this.failedBidRequest()}n&&n.url&&n.bidPrice?(null!==(t=n.bidPrice)&&(this.bid=t),this.hasBid()?this.bidMeetsFloor()?this._getAdVastProcessor(e).requestVast(n.url,!0,this.hbDetails):this.failedBidRequest(a.VAST_ERRORCODES.SS_VEC_1310_BID_BELOW_FLOOR):this.failedBidRequest()):this.failedBidRequest()}}]),n}(),e.default=r}).call(this,n(10))},function(t,e,n){(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(3);r=r&&r.__esModule?r:{default:r};var o=n(1),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));r=function(e){function n(t,e,i,r){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");if(t=(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t).publisherId=null,t.adSlot="",t._bidParams.hasOwnProperty("publisherId")&&(t.publisherId=t._bidParams.publisherId),t._bidParams.hasOwnProperty("adSlot")&&(t.adSlot=t._bidParams.adSlot),t._bidParams.hasOwnProperty("linearity")&&(t.linearity=parseInt(t._bidParams.linearity)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r.default),i(n,[{key:"parseAdSlot",value:function(){if(!this.adSlot)return!1;try{this.adSlotId=this.adSlot.split(":")[0].split("@")[0]}catch(t){return!1}return!0}},{key:"_containerRequestVast",value:function(t){var e=this.generateUrl(t);if(null===e)this.failedBidRequest();else{var n=this.getRequestData(t);n?this._ajaxIt(e,n,t):this.failedBidRequest()}}},{key:"addGdpr",value:function(t){this.gdprSet()&&(t.user.ext.consent=this._cabinet.manifest.consent,t.regs.ext.gdpr=this._cabinet.manifest.gdpr)}},{key:"getRequestData",value:function(e){if(this.parseAdSlot())return e={at:1,id:""+(new Date).getTime(),user:{geo:{},ext:{}},regs:{ext:{}},site:{page:this.domainToPass,ref:this.domainToPass,publisher:{id:""+this.publisherId}},device:{ua:t.navigator.userAgent,js:1,dnt:"yes"===navigator.doNotTrack||"1"===navigator.doNotTrack||"1"===navigator.msDoNotTrack?1:0,h:window.screen?window.screen.height:this.heightToPass(e),w:window.screen?window.screen.width:this.widthToPass(e),geo:{},language:navigator.language},ext:{wrapper:{wv:"prebid_prebid_1.16.0",wp:"pbjs",transactionId:this._cabinet.uuid}},imp:[{id:this._cabinet.shortUuid,tagid:this.adSlotId,secure:this._cabinet.pageProtocol===o.SECURE_PROTOCOL?1:0,video:{protocols:[2,3,4,5,6],playbackmethod:[1,3],linearity:this.linearity,api:this.cabinet.canPlayFlash?[1,2]:[2],mimes:this.cabinet.supportedMimes(this.cabinet.canPlayFlash),w:this.widthToPass(e),h:this.heightToPass(e)},ext:{},bidfloor:this.bidFloor}],cur:["USD"]},this.addGdpr(e),e}},{key:"generateUrl",value:function(){return this._cabinet.pageProtocol+"//hbopenbid.pubmatic.com/translator?source=prebid-client"}},{key:"handleResponse",value:function(t,e){var n=void 0;try{n=JSON.parse(t)}catch(t){return void this.failedBidRequest()}n&&(t=this.getBestBidOpenRTBResults(n))?(null!==(n=t.price)&&(this.bid=n),this.hasBid()?this.bidMeetsFloor()?(t=(new DOMParser).parseFromString(t.adm,"application/xml"),this._getAdVastProcessor(e).processVast(t,"",this.hbDetails)):this.failedBidRequest(a.VAST_ERRORCODES.SS_VEC_1310_BID_BELOW_FLOOR):this.failedBidRequest()):this.failedBidRequest()}}]),n}(),e.default=r}).call(this,n(10))},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=i(t=n(9));t=i(t=n(3));var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),s=i(n=n(95));n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t)._placementId=t._bidParams.placementId,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"getRequestParams",value:function(t){return null===this._placementId||(0,o.default)(this._placementId)?null:(this.heightUsed=this.heightToPass(t),this.widthUsed=this.widthToPass(t),this.domainUsed=encodeURIComponent(this.fullDomainToPass),"placementids[]="+this._placementId+"&sdk=&adformats[]=video&playerheight="+this.heightUsed+"&playerwidth="+this.widthUsed+"&requestids[]="+this._cabinet.uuid+"&pageurl="+this.domainUsed)}},{key:"getUrl",value:function(t){return"https://an.facebook.com/v2/placementbid.json?"+this.getRequestParams(t)}},{key:"_containerRequestVast",value:function(t){if(null===this.getRequestParams(t))this.failedBidRequest();else try{this._ajaxIt(this.getUrl(),null,t,"GET")}catch(t){this.failedHBVastRequest("FB_"+a.VD_ERROR_CODES.HB_AJAX_FAIL+" "+t.message)}}},{key:"formatVastURL",value:function(t,e){return"https://an.facebook.com/v1/instream/vast.xml?placementid="+t+"&pageurl="+this.domainUsed+"&playerwidth="+this.widthUsed+"&playerheight="+this.heightUsed+"&bidid="+e}},{key:"handleResponse",value:function(t,e){var n=JSON.parse(t);t=void 0;try{t=(0,s.default)(n.bids[this._placementId],function(t){return t.bid_price_cents})}catch(t){return void this.failedBidRequest()}if(t){try{this.bid=t.bid_price_cents/100}catch(t){return void this.failedBidRequest()}if(this.hasBid())if(this.bidMeetsFloor()){n=null;try{n=this.formatVastURL(t.placement_id,t.bid_id)}catch(t){return void this.failedBidRequest()}this._demandTag.url=n,this._getAdVastProcessor(e).requestVast(n,!0,this.hbDetails)}else this.failedBidRequest(a.VAST_ERRORCODES.SS_VEC_1310_BID_BELOW_FLOOR);else this.failedBidRequest()}else this.failedBidRequest()}}]),e}(t.default),e.default=n},function(t,e,n){(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(3);r=r&&r.__esModule?r:{default:r};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));r=function(e){function n(t,e,i,r){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");if(t=(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t).publisherId=null,t.siteId=null,t._bidParams.hasOwnProperty("publisherId")&&(t.publisherId=t._bidParams.publisherId),t._bidParams.hasOwnProperty("siteId")&&(t.siteId=t._bidParams.siteId),t._bidParams.hasOwnProperty("ip")&&(t.ipAddress=t._bidParams.ip),t.outputFormat=t._bidParams.output||"vastvpaid",t.appName=null,t.appBundle=null,t._cabinet.manifest.hasOwnProperty("passthru")&&(t.appName=t._cabinet.manifest.passthru.app_name,t.appBundle=t._cabinet.manifest.passthru.app_bundle),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r.default),i(n,[{key:"_containerRequestVast",value:function(t){var e=this.generateUrl(t);if(null===e)this.failedBidRequest();else{var n=this.getRequestData(t);n?this._ajaxIt(e,n,t,"GET"):this.failedBidRequest()}}},{key:"addGdpr",value:function(t){this.gdprSet()&&(t.gdprcs=this._cabinet.manifest.consent,t.gdpr=this._cabinet.manifest.gdpr)}},{key:"getRequestData",value:function(e){var n={pid:this.publisherId,sid:this.siteId,prebid:!0,output:this.outputFormat,execution:"any",support:"html5",playinit:"auto",volume:"100",width:this.widthToPass(e),height:this.heightToPass(e),pageurl:encodeURIComponent(this.domainToPass),ua:encodeURIComponent(t.navigator.userAgent),dnt:this.getDNT()?1:0};return n.rnd=Math.floor(999999999*Math.random()),n.bidId=this._cabinet.uuid,n.bidWidth=this.widthToPass(e),n.bidHeight=this.heightToPass(e),this.appName&&(n.appname=this.appName),this.ipAddress&&(n.ip=this.ipAddress),this.appBundle&&(n.bundleid=this.appBundle),this.addGdpr(n),n}},{key:"generateUrl",value:function(){return this._cabinet.pageProtocol+"//ssp.lkqd.net/ad"}},{key:"handleResponse",value:function(t,e){var n=void 0;try{n=(new DOMParser).parseFromString(t,"application/xml")}catch(t){return void this.failedBidRequest()}if(n&&0===n.getElementsByTagName("parsererror").length){try{this.bid=parseFloat(n.getElementsByTagName("Pricing")[0].textContent)}catch(t){return void this.failedBidRequest()}this.hasBid()?this.bidMeetsFloor()?this._getAdVastProcessor(e).processVast(n,"",this.hbDetails):this.failedBidRequest(o.VAST_ERRORCODES.SS_VEC_1310_BID_BELOW_FLOOR):this.failedBidRequest()}else this.failedBidRequest()}}]),n}(),e.default=r}).call(this,n(10))},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();t=(t=n(3))&&t.__esModule?t:{default:t};var r=n(12),o=r&&r.__esModule?r:{default:r},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t).placementId=null,t._bidParams.hasOwnProperty("placementId")&&(t.placementId=t._bidParams.placementId),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"_containerRequestVast",value:function(t){var e=this.generateUrl();if(null===e)this.failedBidRequest();else{var n=this.getRequestData(t);n?this._ajaxIt(e,n,t,"GET"):this.failedBidRequest()}}},{key:"addGdpr",value:function(t){this.gdprSet()&&(t.consent_string=this._cabinet.manifest.consent,t.gdpr=this._cabinet.manifest.gdpr?"true":"false")}},{key:"getKeyMaker",value:function(t){var e={},n=this._cabinet.shortUuid;return t=this.placementId+"|"+[this.widthToPass(t),this.heightToPass(t)].join()+"|f="+this.bidFloor,n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}},{key:"_isInbounds",value:function(){return function(){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;return window.innerWidth>=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0)&&window.innerWidth<t}}},{key:"_getPlatform",value:function(){var t=this._isInbounds();return t(0,768)?"mobile":t(768,992)?"tablet":"desktop"}},{key:"getRequestData",value:function(t){var e=this.fullDomainToPass;return t={key_maker:JSON.stringify(this.getKeyMaker(t)),ref:e.startsWith("http")?e:this._cabinet.pageProtocol+"//"+e,s:this._cabinet.uuid,pv:this._cabinet.uuid,vp:this._getPlatform(),lib_name:"prebid",lib_v:"pbjs_lite_v1.25.0",us:0},this.addGdpr(t),t}},{key:"getVideoUrl",value:function(t,e){var n=this.fullDomainToPass;return n=n.startsWith("http")?n:this._cabinet.pageProtocol+"//"+n,"https://"+t+"apex.go.sonobi.com/vast.xml?vid="+e+"&ref="+encodeURIComponent(n)}},{key:"generateUrl",value:function(){return"https://apex.go.sonobi.com/trinity.json"}},{key:"_fireSonobiPixels",value:function(t){t&&(t=(0,o.default)(t,function(t){return{url:t.url,format:t.type}}),this.dropPixels(t))}},{key:"handleResponse",value:function(t,e){var n={},i=null;try{(n=JSON.parse(t)).hasOwnProperty("sbi_px")&&this._fireSonobiPixels(n.sbi_px)}catch(t){return void this.failedBidRequest()}try{i=n.slots[this._cabinet.shortUuid]}catch(t){return void this.failedBidRequest()}if(i&&n.sbi_dc&&i.sbi_mouse&&i.sbi_aid){try{this.bid=parseFloat(i.sbi_mouse)}catch(t){return void this.failedBidRequest()}this.hasBid()?this.bidMeetsFloor()?(t=this._getAdVastProcessor(e),n=this.getVideoUrl(n.sbi_dc,i.sbi_aid),t.requestVast(n,!0,this.hbDetails)):this.failedBidRequest(a.VAST_ERRORCODES.SS_VEC_1310_BID_BELOW_FLOOR):this.failedBidRequest()}else this.failedBidRequest()}}]),e}(t.default),e.default=n},function(t,e,n){(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(3);r=r&&r.__esModule?r:{default:r};var o=n(1),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));r=function(e){function n(t,e,i,r){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");if(t=(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t).spid=null,t.adpos=void 0,t.instl=void 0,t.spid=t._bidParams.spid,t.adpos=t._bidParams.adpos,t.instl=parseInt(t._bidParams.instl),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r.default),i(n,[{key:"_containerRequestVast",value:function(t){var e=this.generateUrl(t);if(null===e)this.failedBidRequest();else{var n=this.getRequestData(t);n?this._ajaxIt(e,n,t):this.failedBidRequest()}}},{key:"addGdpr",value:function(t){this.gdprSet()&&(t.ext.gdpr_consent={consent_string:this._cabinet.manifest.consent,consent_required:this._cabinet.manifest.gdpr})}},{key:"getTopFrame",value:function(){try{return window.top===window?1:0}catch(t){return 0}}},{key:"getRequestData",value:function(e){if(this.spid){var n=this.fullDomainToPass;return e={at:1,id:""+(new Date).getTime(),user:{geo:{},ext:{}},regs:{ext:{}},site:{domain:this.domainToPass,page:this.domainToPass,ref:n.startsWith("http")?n:this._cabinet.pageProtocol+"//"+n},device:{ua:t.navigator.userAgent,js:1,dnt:"yes"===navigator.doNotTrack||"1"===navigator.doNotTrack||"1"===navigator.msDoNotTrack?1:0,h:window.screen?window.screen.height:this.heightToPass(e),w:window.screen?window.screen.width:this.widthToPass(e),geo:{},language:navigator.language},ext:{},imp:[{id:this._cabinet.shortUuid,instl:this.instl?this.instl:0,tagid:this.adSlotId,secure:this._cabinet.pageProtocol===o.SECURE_PROTOCOL?1:0,video:{protocols:[2,3,4,5,6],playbackmethod:[1,3],linearity:this.linearity,api:this.cabinet.canPlayFlash?[1,2]:[2],pos:this.adpos||0,mimes:this.cabinet.supportedMimes(this.cabinet.canPlayFlash),w:this.widthToPass(e),h:this.heightToPass(e),topFrame:this.getTopFrame()},ext:{},bidfloor:this.bidFloor}],cur:["USD"]},this.addGdpr(e),e}}},{key:"generateUrl",value:function(){return"https://ssp.ynxs.io/r/"+this.spid+"/bidr?bidder=prebid&rformat=open_rtb&reqformat=rtb_json"}},{key:"handleResponse",value:function(t,e){var n=void 0;try{n=JSON.parse(t)}catch(t){return void this.failedBidRequest()}n&&(t=this.getBestBidOpenRTBResults(n))?(null!==(n=t.price)&&(this.bid=n),this.hasBid()?this.bidMeetsFloor()?(t=(new DOMParser).parseFromString(t.adm,"application/xml"),this._getAdVastProcessor(e).processVast(t,"",this.hbDetails)):this.failedBidRequest(a.VAST_ERRORCODES.SS_VEC_1310_BID_BELOW_FLOOR):this.failedBidRequest()):this.failedBidRequest()}}]),n}(),e.default=r}).call(this,n(10))},function(t,e,n){(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(3);r=r&&r.__esModule?r:{default:r};var o=n(1),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));r=function(e){function n(t,e,i,r){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");if(t=(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t).pubId=null,t.siteId=t._bidParams.siteId,t._bidParams.hasOwnProperty("pubId")&&(t.pubId=t._bidParams.pubId),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r.default),i(n,[{key:"_containerRequestVast",value:function(t){var e=this.generateUrl(t);if(null===e)this.failedBidRequest();else{var n=this.getRequestData(t);this._ajaxIt(e,n,t,"POST")}}},{key:"isMobile",value:function(){try{return/(ios|ipod|ipad|iphone|android)/i.test(t.navigator.userAgent)}catch(t){return 2}}},{key:"isConnectedTV",value:function(){try{return/(smart[-]?tv|hbbtv|appletv|googletv|hdmi|netcast\.tv|viera|nettv|roku|\bdtv\b|sonydtv|inettvbrowser|\btv\b)/i.test(t.navigator.userAgent)}catch(t){return 2}}},{key:"getBeachBidFloor",value:function(){return!this.bidFloor||.01>this.bidFloor?.01:this.bidFloor}},{key:"getRequestData",value:function(e){var n=this.fullDomainToPass;return e={at:2,id:this._cabinet.shortUuid,domain:this.domainToPass,imp:[{video:{w:this.widthToPass(e),h:this.heightToPass(e),linearity:1,api:[2],delivery:[2],protocols:[2,3,4,5,6],mimes:this.cabinet.supportedMimes(this.cabinet.canPlayFlash)},id:1,bidfloor:this.getBeachBidFloor(),secure:this._cabinet.pageProtocol===o.SECURE_PROTOCOL?1:0}],site:{page:n.startsWith("http")?n:this._cabinet.pageProtocol+"//"+n,domain:this.domainToPass,ref:n,id:this.siteId},device:{ua:t.navigator.userAgent,devicetype:this.isMobile()?1:this.isConnectedTV()?3:2,js:1,geo:{}},regs:{},user:{},cur:["USD"],tmax:200},this.gdprSet()&&(e.regs.ext={gdpr:this.gdprApplies()},e.user.ext={consent:this.gdprConsentString()}),e}},{key:"generateUrl",value:function(){return null===this.pubId?null:this._cabinet.pageProtocol+"//ads.adaptv.advertising.com/rtb/openrtb?ext_id="+this.pubId}},{key:"handleResponse",value:function(t,e){var n=void 0;try{n=JSON.parse(t)}catch(t){return void this.failedBidRequest()}n?(null!==(t=this.getBestBidOpenRTBResults(n))&&(this.bid=t.price),this.hasBid()?this.bidMeetsFloor()?(e=this._getAdVastProcessor(e),t.adm?(t=(new DOMParser).parseFromString(t.adm,"application/xml"),e.processVast(t,"",this.hbDetails)):t.nurl?e.requestVast(t.nurl,!0,this.hbDetails):this.failedBidRequest(a.VAST_ERRORCODES.SS_VEC_1323_HB_ERROR_PARSING_BID_RESPONSE)):this.failedBidRequest(a.VAST_ERRORCODES.SS_VEC_1310_BID_BELOW_FLOOR):this.failedBidRequest()):this.failedBidRequest()}}]),n}(),e.default=r}).call(this,n(10))},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0};t=i(t=n(38));var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),s=n(20),u=i(s),_=i(s=n(92)),l=i(s=n(253)),d=i(n=n(37));n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t)._ortbIndex=0,t._ortbNumBids=null,t._ortbResponse=null,t._sizeInfo=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"isLastBid",value:function(){return this.ortbBidIndex===this.ortbNumBids-1}},{key:"incrementOrtbBidIndex",value:function(){this._ortbIndex++}},{key:"onSlotVastDone",value:function(t,n){n?o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onSlotVastDone",this).call(this,t,n):this.ortbResponse?this.isLastBid()?(this.openrtbBidderError(),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onSlotVastDone",this).call(this,t,null)):(this.openrtbBidderError(),this.incrementOrtbBidIndex(),this.processBid()):o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onSlotVastDone",this).call(this,t,null)}},{key:"failedOrtbRequest",value:function(){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a.VAST_ERRORCODES.SS_VEC_1319_OPENRTB_NO_BIDS,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a.VD_ERROR_CODES.ORTB_NO_BIDS,i=this._demandTag.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.response,!1).join(",");i&&this.sendJsDemandResponse(a.VID_IO_EVENTS.cm_js_demand_req_resp,this._demandTag,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({cc_i:i,response_time:this.cabinet.timeoutManager.getResponseTime(this._demandTag.waterfallIdx),has_ad:!1,reason:n,wrapper_count:0,dtype:a.DEMAND_TYPES.UNKNOWN},a.VID_IO_PARAMS.vastErrorCode,t)),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onSlotVastDone",this).call(this,this._idx,null)}},{key:"successfulOrtbRequest",value:function(){this.sendJsDemandResponse(a.VID_IO_EVENTS.cm_js_demand_req_resp,this._demandTag,{cc_i:this._demandTag.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.response,!1).join(","),response_time:this.cabinet.timeoutManager.getResponseTime(this._demandTag.waterfallIdx),has_ad:!0,wrapper_count:0,dtype:a.DEMAND_TYPES.UNKNOWN})}},{key:"openrtbBidderError",value:function(){this.on_openrtb_bidder_error(this._demandTag,{vec:a.VAST_ERRORCODES.SS_VEC_1531_ORTB_BIDDER_NO_FILL,reason:a.VD_ERROR_CODES.ORTB_BIDDER_NO_FILL,cc_i:this._demandTag.callChain.getCallChainLastTwoIndices().join(",")})}},{key:"getTimeoutInfo",value:function(){return this.cabinet.timeoutManager.getTimeoutInfo(this._demandTag.waterfallIdx,new u.default(this.cabinet.timeouts.VAST_TIMEOUT,a.VD_ERROR_CODES.ORTB_TIMEOUT,a.VAST_ERRORCODES.SS_VEC_1317_OPENRTB_RESPONSE_TIMEOUT))}},{key:"_ajaxIt",value:function(t,e,n){var i=this.handleResponse.bind(this),r=this.handleError.bind(this);d.default.ajax(t,this.getTimeoutInfo(),{success:function(t){i(t,n)},error:function(t){r(t)}})}},{key:"_getOrtbUrlWithDetDomainSize",value:function(t){return this._demandTag.url+"&"+a.JSON_PIXEL_PARAMS.detectedDomain+"="+this.cabinet.locationInfo.domain_match+"&"+a.JSON_PIXEL_PARAMS.detectedWidth+"="+t.width}},{key:"_containerRequestVast",value:function(t){this._sizeInfo=t;var e=this._getOrtbUrlWithDetDomainSize(t);try{this._ajaxIt(e,t)}catch(t){this.failedOrtbRequest()}}},{key:"_getOrtbAdVastProcessor",value:function(t){return t=new l.default(this._cabinet,this._initParams,this._demandTag,t),this.registerSSEventListeners_(t),t}},{key:"handleError",value:function(t){this.failedOrtbRequest("timeout"===t,a.VAST_ERRORCODES.SS_VEC_1318_OPENRTB_REQUEST_ERROR,a.VD_ERROR_CODES.ORTB_REQUEST_FAIL)}},{key:"handleResponse",value:function(t){try{this._ortbResponse=JSON.parse(t).responses}catch(t){this.failedOrtbRequest()}this._ortbResponse?(this._ortbNumBids=this.ortbResponse.length,0===this.ortbNumBids?this.failedOrtbRequest():(this.successfulOrtbRequest(),this.processBid())):this.failedOrtbRequest()}},{key:"processBid",value:function(){var t=this.ortbResponse[this.ortbBidIndex];if(t.hasOwnProperty("v")&&t.hasOwnProperty("cc")){var e=(new DOMParser).parseFromString(t.v,"application/xml");t=t.cc;try{var n=new _.default(t);this._demandTag.callChain=n,this._demandTag.a_cc=t}catch(t){return void this.onSlotVastDone(this._idx,null)}this._getOrtbAdVastProcessor(this.sizeInfo).processVast(e,"")}else this.onSlotVastDone(this._idx,null)}},{key:"ortbBidIndex",get:function(){return this._ortbIndex}},{key:"ortbResponse",get:function(){return this._ortbResponse}},{key:"ortbNumBids",get:function(){return this._ortbNumBids}},{key:"sizeInfo",get:function(){return this._sizeInfo}}]),e}(t.default),e.default=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();t=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t)._isOrtb=!0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"demandResponseFail",value:function(){this.onSlotVastDone(this._demandTag.broadcastIdx,null)}},{key:"demandResponseSuccess",value:function(t){this.onSlotVastDone(this._demandTag.broadcastIdx,t)}}]),e}(((t=n(56))&&t.__esModule?t:{default:t}).default),e.default=t},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=r(n(54)),s=i(n(0)),u=i(n(1)),_=r(n(255));n=n(3);var l={"1874a281":19.5,b6eb63d7:31,"0333df70":13.75,"5f183ae6":7.25,"7c17b45c":5.25,"00ad8a57":26.5,"8718cb8a":8.5,"8e3ce118":12.75,"9590f906":11.25,"48b85fbd":1.75,"65c6370f":3.5,b4d03f7f:7.5,"50af7f50":17,"2f7f186b":45,b206e35c:19.75,ae45cabb:39,ac997490:16.75,"53b517be":16.5,"8d72a7e3":6.25,"4845aec7":46,a9b96e79:10.75,"17a51c39":27.5,be205fef:50,"6ecf0a43":26,"0f191a28":37,"7fe4fa2d":2.5,f7e17fd0:10,a257f5a4:1.5,"9e26279e":14.5,"0e6c1100":12.25,dacf021e:23.5,e7f217f7:13,"3edafc5a":19,"9c9e4280":15.75,"2cab95ad":47,"4553eb55":22.5,ec92987b:14,"5c42c245":8.25,"3d2a52ea":3.75,a47109e3:.5,"6186e054":32,"9f805500":24.5,bfe5f84a:9.25,"6a4da9ae":33,"62bef091":18.25,29247364:29.5,"2223eda8":17.75,b87a0d58:7.75,b5294a2e:11.75,"96937e65":38,"5d81a99d":8,"90938a04":48,"257d71a6":9.5,"6fbf75bc":6.75,"7582a1d3":16.25,d3063d0c:40,"8c2aa898":18,d5191131:9.75,da300183:14.25,"7e1dcec2":17.25,"1b61b867":15.5,"8cd9d35d":25.5,"7c7ad1dd":2,"3f7bdc95":4,f402d3d7:3,fdf23c55:.75,"0c02e28d":4.5,54898362:44,b86dcf41:25,f609f7cb:41,f88e4aa1:8.75,"2ba59efb":21,"87b23d36":13.25,e7fff407:12.5,"3ee3c3a5":2.75,eb24d621:5,c7b67a4a:18.75,d6ce55a8:24,d4b0038e:30,d6a9f172:10.5,dd31255f:27,"52439b53":11.5,"82e340d7":22,"03ff35c9":34,d5979124:15,e6feca6d:23,aeaa40a2:9,"5dd979b8":10.25,e3bf6d1f:36,"709750d4":42,"72fa14de":21.5,"52424a5e":2.25,c72af351:.25,"6278dfbc":14.75,f72f8aab:1.25,"85e44a3f":1,abdb1fbb:15.25,"2fcdbedc":12,cc6c8f57:28,f6494a88:5.75,d4ce75a1:49,"6942448d":43,"3c7c8f7b":7,f12fe44d:6,"69660e5c":6.5,"7295d922":3.25,"688ef7f1":20,"70b986e8":17.5,"03586863":20.5,fbf62d36:35,"9c0e649f":13.5,b4e4604c:28.5,e2fb8962:16,"6aea1317":19.25,a31c908c:29,f6bbc73d:4.75,b50ace2d:18.5,dcee5fa9:5.5,"08934315":11,"0c4da90d":4.25,"4e3c9b73":38,b979c0f9:29,"13d87234":4.25,b4c687e2:16.75,ad7c04b7:27.5,"779bc048":15.75,c989a3df:5.25,"36700ffc":11,a1c7ee61:18.5,"9ffdcc50":6.25,"1c799b30":9.75,"15171e5c":15,"112ad16d":12.75,"45bdf798":31,10028689:5.5,"6d0881f0":50,c4778b9c:26,"41f5a258":11.75,25274942:14.75,"25fc399d":30,"6ef7fee8":24,"34c3a8c8":20.5,"86373d58":17.25,f7b82351:33,"17d5d598":2,aac73f7d:18,"7adbaba3":7.75,"4428b9d6":35,"2f72461f":2.75,a0eaa610:10.25,"534aea57":4,f6179a86:36,fa788726:6.5,"76ef5a95":8.75,b1aefcc4:1.25,"45e25d94":.5,"7a9aee13":26.5,a9d44eef:32,"6e1c1cf5":13.5,"10864e11":14,fe1c3d6e:14.5,b0e98225:4.75,"0f76562d":24.5,"06133975":8,36189912:23,"56a47c3d":.75,"50d4d412":10.5,"1a1eef21":19.5,"19a57908":49,e9a31605:16.5,"2b04bd31":27,"12f5ea94":16.25,"97bf63a1":37,a8eb9fc8:5.75,df2ec58c:1,afc3fe13:40,af5b6430:12,"025e8e5e":15.25,b6b32e79:41,a7352aee:44,a08e8d68:28.5,b0be4a22:1.5,"9e0d477d":19.25,fd2c54fa:29.5,"77e7ac00":21,"14e549a8":8.5,"85e1d43f":20,d6403b1c:34,f5f5cd6f:22,fe1f0f1d:21.5,b04fdcc8:17.5,"47555dc9":39,80067084:2.5,d1882dab:16,db76cc31:18.75,"4dd220a5":23.5,"6ddbbb6f":11.5,"0c4e087b":28,"829264ee":22.5,"3ff1e027":9.5,"9ad05e48":25,abb7448c:6,ed9292ae:43,fae83725:46,c1f013e0:12.5,"515a4eb2":42,"2d22c246":3.5,86132607:7.25,"979f8c3a":2.25,a96a89a3:47,"106a8ebb":6.75,"9c52280c":17,"5a8319b4":48,"9fcb00fa":15.5,"02041d8e":10,d6d2e903:9.25,"257441f4":7,cdf3bca5:45,"26905d28":19,b0a62d2f:25.5,d19b06a1:3.75,"0966a3b6":7.5,b6338ca3:13.25,c8e55364:10.75,df1c4ede:11.25,"2be705dd":3.25,"3adf9eb8":3,"247cdc5a":19.75,"07f3c299":12.25,"4cc6e2fa":4.5,"50852c50":1.75,"579036a9":17.75,"246775aa":18.25,"231da23d":8.25,"191bf000":13,"7995b90f":9,e4016e97:14.25,d979e400:5,c014d773:13.75};n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t)._publisherId=null,t._slotId="videoSlot",t._shouldInit=!0,t._bidParams.hasOwnProperty("publisher_id")&&(t._publisherId=t._bidParams.publisher_id),t._bidParams.hasOwnProperty("slot_id")&&(t._slotId=t._bidParams.slot_id||"videoSlot"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"_getScriptUrl",value:function(){return this._cabinet.pageProtocol+"//c.amazon-adsystem.com/aax2/apstag.js"}},{key:"_handleApstagFailure",value:function(){this.failedBidRequest()}},{key:"_getAmazonVastUrl",value:function(t,e,n){return"https://aax.amazon-adsystem.com/e/dtb/vast?b="+e+"&rnd="+n+"&pp="+t}},{key:"_mapToBid",value:function(t){return(t=(0,_.default)(t))&&l[t.substr(0,8)]||null}},{key:"_getCb",value:function(){return u.getCb()}},{key:"_handleApstagSuccess",value:function(t){!t||0>=t.length?this.failedBidRequest(s.VAST_ERRORCODES.SS_VEC_1319_OPENRTB_NO_BIDS):(t=t[0],this.bid=this._mapToBid(t.amznbid),this.hasBid()?this.bidMeetsFloor()?(t=this._getAmazonVastUrl(t.amznbid,t.amzniid,this._getCb()),this._demandTag.url=t,this._getAdVastProcessor(this._sizeInfo).requestVast(t,!0,this.hbDetails)):this.failedBidRequest(s.VAST_ERRORCODES.SS_VEC_1310_BID_BELOW_FLOOR):this.failedBidRequest())}},{key:"_getApsTag",value:function(){var t,e,n,i,r,o;return t="apstag",e=window,n=document,i="script",e[t]||(e[t]={init:function(){e[t]._Q.push(["i",arguments])},fetchBids:function(){e[t]._Q.push(["f",arguments])},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(r=n.createElement(i)).async=!0,r.src="//c.amazon-adsystem.com/aax2/apstag.js",(o=n.getElementsByTagName(i)[0]).parentNode.insertBefore(r,o)),window.apstag}},{key:"_getBids",value:function(){var t=this._getApsTag();if(t)try{this._shouldInit&&t.init({pubID:this._publisherId});var e=this._handleApstagSuccess.bind(this);t.fetchBids({slots:[{slotID:this._slotId,mediaType:"video"}]},function(t){e(t)})}catch(t){this.failedBidRequest(s.VAST_ERRORCODES.SS_VAST_ERRORCODE_1301,s.VD_ERROR_CODES.HB_BID_ERROR+"_"+t.message)}else this._handleApstagFailure()}},{key:"_containerRequestVast",value:function(t){this._sizeInfo=t,this._getBids()}},{key:"_scriptLoaderFunc",get:function(){return a.default}}]),e}(r(n).default),e.default=n},function(b,c,a){(function(c,l){var h;!function(){function n(e,n){n?(t[0]=t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0,this.blocks=t):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function m(t,i,r){var o=typeof t;if("string"===o){var a=[],s=t.length,u=0;for(o=0;o<s;++o){var _=t.charCodeAt(o);128>_?a[u++]=_:(2048>_?a[u++]=192|_>>6:(55296>_||57344<=_?a[u++]=224|_>>12:(_=65536+((1023&_)<<10|1023&t.charCodeAt(++o)),a[u++]=240|_>>18,a[u++]=128|_>>12&63),a[u++]=128|_>>6&63),a[u++]=128|63&_)}t=a}else{if("object"!==o)throw Error("input is invalid type");if(null===t)throw Error("input is invalid type");if(e&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||e&&ArrayBuffer.isView(t)))throw Error("input is invalid type")}for(64<t.length&&(t=new n(i,!0).update(t).array()),a=[],s=[],o=0;64>o;++o)u=t[o]||0,a[o]=92^u,s[o]=54^u;n.call(this,i,r),this.update(s),this.oKeyPad=a,this.inner=!0,this.sharedMemory=r}var k="object"==typeof window,g=k?window:{};g.JS_SHA256_NO_WINDOW&&(k=!1),k=!k&&"object"==typeof self;var f=!g.JS_SHA256_NO_NODE_JS&&"object"==typeof c&&c.versions&&c.versions.node;f?g=l:k&&(g=self),k=!g.JS_SHA256_NO_COMMON_JS&&"object"==typeof b&&b.exports;var d=a(257),e=!g.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,q="0123456789abcdef".split(""),p=[-2147483648,8388608,32768,128],u=[24,16,8,0],w=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],v=["hex","array","digest","arrayBuffer"],t=[];!g.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!e||!g.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});var x=function(t,e){return function(i){return new n(e,!0).update(i)[t]()}},B=function(t){var e=x("hex",t);f&&(e=z(e,t)),e.create=function(){return new n(t)},e.update=function(t){return e.create().update(t)};for(var i=0;i<v.length;++i){var r=v[i];e[r]=x(r,t)}return e},z=function(a,b){var d=eval("require('crypto')"),c=eval("require('buffer').Buffer"),e=b?"sha224":"sha256";return function(t){if("string"==typeof t)return d.createHash(e).update(t,"utf8").digest("hex");if(null==t)throw Error("input is invalid type");return t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===c?d.createHash(e).update(new c(t)).digest("hex"):a(t)}},A=function(t,e){return function(n,i){return new m(n,e,!0).update(i)[t]()}},H=function(t){var e=A("hex",t);e.create=function(e){return new m(e,t)},e.update=function(t,n){return e.create(t).update(n)};for(var n=0;n<v.length;++n){var i=v[n];e[i]=A(i,t)}return e};n.prototype.update=function(t){if(!this.finalized){var n=typeof t;if("string"!==n){if("object"!==n)throw Error("input is invalid type");if(null===t)throw Error("input is invalid type");if(e&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||e&&ArrayBuffer.isView(t)))throw Error("input is invalid type");var i=!0}for(var r,o=0,a=t.length,s=this.blocks;o<a;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),i)for(r=this.start;o<a&&64>r;++o)s[r>>2]|=t[o]<<u[3&r++];else for(r=this.start;o<a&&64>r;++o)128>(n=t.charCodeAt(o))?s[r>>2]|=n<<u[3&r++]:(2048>n?s[r>>2]|=(192|n>>6)<<u[3&r++]:(55296>n||57344<=n?s[r>>2]|=(224|n>>12)<<u[3&r++]:(n=65536+((1023&n)<<10|1023&t.charCodeAt(++o)),s[r>>2]|=(240|n>>18)<<u[3&r++],s[r>>2]|=(128|n>>12&63)<<u[3&r++]),s[r>>2]|=(128|n>>6&63)<<u[3&r++]),s[r>>2]|=(128|63&n)<<u[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,64<=r?(this.block=s[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes%=4294967296),this}},n.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=p[3&e],this.block=t[16],56<=e&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},n.prototype.hash=function(){var t,e=this.h0,n=this.h1,i=this.h2,r=this.h3,o=this.h4,a=this.h5,s=this.h6,u=this.h7,_=this.blocks;for(t=16;64>t;++t){var l=_[t-15],d=(l>>>7|l<<25)^(l>>>18|l<<14)^l>>>3;l=((l=_[t-2])>>>17|l<<15)^(l>>>19|l<<13)^l>>>10,_[t]=_[t-16]+d+_[t-7]+l<<0}var c=n&i;for(t=0;64>t;t+=4){if(this.first){if(this.is224){var h=300032;u=(l=_[0]-1413257819)-150054599<<0,r=l+24177077<<0}else h=704751109,u=(l=_[0]-210244248)-1521486534<<0,r=l+143694565<<0;this.first=!1}else{d=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10);var A=(h=e&n)^e&i^c,f=o&a^~o&s;u=r+(l=u+(l=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+f+w[t]+_[t])<<0,r=l+(d+=A)<<0}d=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),A=(c=r&e)^r&n^h,s=i+(l=s+(l=(u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(f=u&o^~u&a)+w[t+1]+_[t+1])<<0,d=((i=l+(d+=A)<<0)>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),A=(h=i&r)^i&e^c,a=n+(l=a+(l=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7))+(f=s&u^~s&o)+w[t+2]+_[t+2])<<0,d=((n=l+(d+=A)<<0)>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),A=(c=n&i)^n&r^h,o=e+(l=o+(l=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(f=a&s^~a&u)+w[t+3]+_[t+3])<<0,e=l+(d+=A)<<0}this.h0=this.h0+e<<0,this.h1=this.h1+n<<0,this.h2=this.h2+i<<0,this.h3=this.h3+r<<0,this.h4=this.h4+o<<0,this.h5=this.h5+a<<0,this.h6=this.h6+s<<0,this.h7=this.h7+u<<0},n.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,i=this.h3,r=this.h4,o=this.h5,a=this.h6,s=this.h7;return t=q[t>>28&15]+q[t>>24&15]+q[t>>20&15]+q[t>>16&15]+q[t>>12&15]+q[t>>8&15]+q[t>>4&15]+q[15&t]+q[e>>28&15]+q[e>>24&15]+q[e>>20&15]+q[e>>16&15]+q[e>>12&15]+q[e>>8&15]+q[e>>4&15]+q[15&e]+q[n>>28&15]+q[n>>24&15]+q[n>>20&15]+q[n>>16&15]+q[n>>12&15]+q[n>>8&15]+q[n>>4&15]+q[15&n]+q[i>>28&15]+q[i>>24&15]+q[i>>20&15]+q[i>>16&15]+q[i>>12&15]+q[i>>8&15]+q[i>>4&15]+q[15&i]+q[r>>28&15]+q[r>>24&15]+q[r>>20&15]+q[r>>16&15]+q[r>>12&15]+q[r>>8&15]+q[r>>4&15]+q[15&r]+q[o>>28&15]+q[o>>24&15]+q[o>>20&15]+q[o>>16&15]+q[o>>12&15]+q[o>>8&15]+q[o>>4&15]+q[15&o]+q[a>>28&15]+q[a>>24&15]+q[a>>20&15]+q[a>>16&15]+q[a>>12&15]+q[a>>8&15]+q[a>>4&15]+q[15&a],this.is224||(t+=q[s>>28&15]+q[s>>24&15]+q[s>>20&15]+q[s>>16&15]+q[s>>12&15]+q[s>>8&15]+q[s>>4&15]+q[15&s]),t},n.prototype.toString=n.prototype.hex,n.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,i=this.h3,r=this.h4,o=this.h5,a=this.h6,s=this.h7;return t=[t>>24&255,t>>16&255,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24&255,n>>16&255,n>>8&255,255&n,i>>24&255,i>>16&255,i>>8&255,255&i,r>>24&255,r>>16&255,r>>8&255,255&r,o>>24&255,o>>16&255,o>>8&255,255&o,a>>24&255,a>>16&255,a>>8&255,255&a],this.is224||t.push(s>>24&255,s>>16&255,s>>8&255,255&s),t},n.prototype.array=n.prototype.digest,n.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t},m.prototype=new n,m.prototype.finalize=function(){if(n.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();n.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),n.prototype.finalize.call(this)}};var C=B();C.sha256=C,C.sha224=B(!0),C.sha256.hmac=H(),C.sha224.hmac=H(!0),k?b.exports=C:(g.sha256=C.sha256,g.sha224=C.sha224,d&&(h=C,void 0===h||(b.exports=h)))}()}).call(this,a(256),a(10))},function(t,e){function n(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function r(t){if(_===setTimeout)return setTimeout(t,0);if((_===n||!_)&&setTimeout)return _=setTimeout,setTimeout(t,0);try{return _(t,0)}catch(e){try{return _.call(null,t,0)}catch(e){return _.call(this,t,0)}}}function o(){h&&d&&(h=!1,d.length?c=d.concat(c):A=-1,c.length&&a())}function a(){if(!h){var t=r(o);h=!0;for(var e=c.length;e;){for(d=c,c=[];++A<e;)d&&d[A].run();A=-1,e=c.length}d=null,h=!1,function(t){if(l===clearTimeout)return clearTimeout(t);if((l===i||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}(t)}}function s(t,e){this.fun=t,this.array=e}function u(){}t=t.exports={};try{var _="function"==typeof setTimeout?setTimeout:n}catch(t){_=n}try{var l="function"==typeof clearTimeout?clearTimeout:i}catch(t){l=i}var d,c=[],h=!1,A=-1;t.nextTick=function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new s(t,e)),1!==c.length||h||r(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=u,t.addListener=u,t.once=u,t.off=u,t.removeListener=u,t.removeAllListeners=u,t.emit=u,t.prependListener=u,t.prependOnceListener=u,t.listeners=function(t){return[]},t.binding=function(t){throw Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw Error("process.chdir is not supported")},t.umask=function(){return 0}},function(t,e){t.exports={}},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),s=i(n(5)),u=i(n(259)),_=i(n(261)),l=i(n(263)),d=i(n=n(39));n=function(){function t(){var e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d.default;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.DEFAULT_DEMAND_REQUEST=i,this.DEMAND_REQUESTS=(0,s.default)(n,(r(e={},a.CREATIVE_TYPES.IMA,u.default),r(e,a.CREATIVE_TYPES.MEDIA,_.default),r(e,a.CREATIVE_TYPES.JS_VPAID,l.default),e))}return o(t,[{key:"build",value:function(e,n,i,r){var o=t.getCreativeType(r);return new(this.demandRequestFor(o))(e,n,o,i,r)}},{key:"demandRequestFor",value:function(t){return t&&this.DEMAND_REQUESTS.hasOwnProperty(t)?this.DEMAND_REQUESTS[t]:this.DEFAULT_DEMAND_REQUEST}}],[{key:"getCreativeType",value:function(t){return t.isIMA?a.CREATIVE_TYPES.IMA:t.hasPlayableMedia?a.CREATIVE_TYPES.MEDIA:t.isJsVpaid?a.CREATIVE_TYPES.JS_VPAID:t.isFlashVpaid?a.CREATIVE_TYPES.FLASH_VPAID:null}}]),t}(),e.default=n},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=i(t=n(0)),a=(t=n(260))&&t.__esModule?t:{default:t};t=(t=n(39))&&t.__esModule?t:{default:t},i(n=n(1)),n=function(t){function e(t,n,i,r,o){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,"ImaDemandRequest",t,n,i,r,o),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t)._imaWrapper=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"createImaWrapper",value:function(){this._imaWrapper=new a.default(this._cabinet,this._adVast)}},{key:"beginImaWrapper",value:function(){try{this.begin(this.getCreativeData(),this._imaWrapper,this._initParams.environmentVars)}catch(t){try{this.stopAd()}catch(t){}this.demandError(o.VD_ERROR_CODES.IMA_WRAPPER_BEGIN_ERROR,!1,o.VAST_ERRORCODES.SS_VEC_1526_IMA_WRAPPER_BEGIN_ERROR)}}},{key:"load",value:function(){try{this.demandOpp()}catch(t){return void this.demandError(o.VD_ERROR_CODES.DEMAND_TAG_OPP_ERROR,!1,o.VAST_ERRORCODES.SS_VAST_ERRORCODE_1512)}try{this.createImaWrapper(),this.beginImaWrapper()}catch(t){this.demandError(o.VD_ERROR_CODES.UNCAUGHT_IMA_DEMAND_REQUEST_LOAD_ERROR+t.message,!1,o.VAST_ERRORCODES.SS_VEC_1528_UNCAUGHT_IMA_DEMAND_REQUEST_LOAD_ERROR)}}},{key:"onAdError",value:function(t){var e=void 0,n=void 0;try{e=t.msg,n=t.vec}catch(t){}e=e||o.VD_ERROR_CODES.AD_ERROR,n=n||o.VAST_ERRORCODES.VAST_ERRORCODE_901,this.doOnAdError(e,n)}}]),e}(t.default),e.default=n},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0},a=i(n(0)),s=i(n(104));n=function(t){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,"VpaidImaWrapper",t,n),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t)._adsManager=null,t._currentAd=null,t._isDestroyAd=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"initAd",value:function(t,n,i,r,u,_){var l=this;o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initAd",this).call(this,t,n,i,r,u,_);try{this._cabinet.imaManager.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this._cabinet.imaManager.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerAdError.bind(this),!1),_.videoSlot.onended=function(){l._cabinet.imaManager.doContentComplete()}}catch(t){return void this.onAdError({msg:a.VD_ERROR_CODES.IMA_INIT_AD_ERROR,vec:a.VAST_ERRORCODES.SS_VEC_1525_IMA_ADS_MANAGER_INIT_AD_ERROR})}try{var d=new google.ima.AdsRequest,c=this._cabinet.replacePageProtocol(s.replaceDetectedMacros(this._cabinet.locationInfo,this._cabinet.getSizeInfo(this._initParams),this._adVast.imaTagUrl));d.adTagUrl=c,d.linearAdSlotWidth=t,d.linearAdSlotHeight=n,d.nonLinearAdSlotWidth=t,d.nonLinearAdSlotHeight=a.IMA_NONLINEAR_SLOT_HEIGHT,d.vastLoadTimeout=this._cabinet.timeouts.VAST_TIMEOUT,d.setAdWillAutoPlay(this._cabinet.autoplayVideoElementManager.autoplayAllowed),d.setAdWillPlayMuted(this._cabinet.autoplayVideoElementManager.autoplayRequiresMuted),this._cabinet.imaManager.adsLoader.requestAds(d)}catch(t){this.onAdError({msg:a.VD_ERROR_CODES.IMA_ADS_LOADER_EXCEPTION,vec:a.VAST_ERRORCODES.SS_VEC_1521_IMA_ADS_LOADER_EXCEPTION})}}},{key:"onAdsManagerLoaded",value:function(t){var e=new google.ima.AdsRenderingSettings;e.restoreCustomPlaybackStateOnAdBreakComplete=!0,this._adsManager=t.getAdsManager(this._initParams.environmentVars.videoSlot,e),this._adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onIMAAdError.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,function(){}),this._adsManager.addEventListener(google.ima.AdEvent.Type.AD_METADATA,function(){}),this._adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,this.onIMAClick.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,function(){}),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(){}),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(){}),this._adsManager.addEventListener(google.ima.AdEvent.Type.DURATION_CHANGE,this.onIMADurationChange.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,this.onIMAFirstQuartile.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.IMPRESSION,this.onIMAImpression.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.INTERACTION,this.onIMAInteraction.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.LINEAR_CHANGED,this.onIMALinearChanged.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onIMALoaded.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.LOG,this.onIMALog.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,this.onIMAMidpoint.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onIMAPaused.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onIMAResumed.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,this.onIMASkippableStateChanged.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onIMASkipped.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onIMAStarted.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,this.onIMAThirdQuartile.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,this.onIMAUserClose.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,this.onIMAVolumeChanged.bind(this)),this._adsManager.addEventListener(google.ima.AdEvent.Type.VOLUME_MUTED,this.onIMAVolumeMuted.bind(this)),this.onAdLoaded()}},{key:"onAdsManagerAdError",value:function(t){t=e.getMsg(a.VD_ERROR_CODES.IMA_ADS_LOADER_ERROR,t),this.destroyAd(),this.onAdError({msg:t,vec:a.VAST_ERRORCODES.SS_VEC_1522_IMA_ADS_LOADER_ERROR})}},{key:"onIMAAdError",value:function(t){t=e.getMsg(a.VD_ERROR_CODES.IMA_ADS_ERROR,t),this.destroyAd(),this.onAdError({msg:t,vec:a.VAST_ERRORCODES.SS_VEC_1523_IMA_ADS_ERROR})}},{key:"destroyAd",value:function(){this._isDestroyAd=!0,this._adsManager&&(this._adsManager.destroy(),this._adsManager=null),this._cabinet.imaManager.doContentComplete(),this._cabinet.imaManager.contentComplete=!1}},{key:"onAllAdsCompleted",value:function(){this._isDestroyAd||this.destroyAd(),this.onAdVideoComplete(),this.onAdStopped()}},{key:"onIMAClick",value:function(t){this.onAdClickThru("",t.getAd().getAdId(),!1)}},{key:"onIMADurationChange",value:function(){this.onAdDurationChange()}},{key:"onIMAFirstQuartile",value:function(){this.onAdVideoFirstQuartile()}},{key:"onIMAImpression",value:function(){this.onAdImpression()}},{key:"onIMAInteraction",value:function(){this.onAdInteraction()}},{key:"onIMALinearChanged",value:function(){this.onAdLinearChange()}},{key:"onIMALoaded",value:function(t){this._currentAd=t.getAd()}},{key:"onIMALog",value:function(t){(t=t.getAdData()).hasOwnProperty("adError")?this.onAdLog(t.adError.getMessage()):this.onAdLog("IMA Ad Log")}},{key:"onIMAMidpoint",value:function(){this.onAdVideoMidpoint()}},{key:"onIMAPaused",value:function(){this.onAdPaused()}},{key:"onIMAResumed",value:function(){this.onAdPlaying()}},{key:"onIMASkippableStateChanged",value:function(){this.onAdSkippableStateChange()}},{key:"onIMASkipped",value:function(){this._isDestroyAd||this.destroyAd(),this.onAdSkipped(),this.onAdStopped()}},{key:"onIMAStarted",value:function(){this.onAdStarted(),this.onAdVideoStart()}},{key:"onIMAThirdQuartile",value:function(){this.onAdVideoThirdQuartile()}},{key:"onIMAUserClose",value:function(){this.onAdUserClose()}},{key:"onIMAVolumeChanged",value:function(){this.onAdVolumeChange()}},{key:"onIMAVolumeMuted",value:function(){this.onAdVolumeChange()}},{key:"startAd",value:function(){this.adVpaidState.isDead||this._isDestroyAd||(this._cabinet.autoplayVideoElementManager.autoplayAllowed||this._cabinet.imaManager.adDisplayContainerInitialized?this.playAd():this.showClickToPlay())}},{key:"playAd",value:function(){this._cabinet.imaManager.maybeInitializeAdDisplayContainer();try{this._adsManager.init(this._initParams.width,this._initParams.height,this._initParams.viewMode),this._adsManager.start()}catch(t){this.destroyAd(),this.onAdError({msg:a.VD_ERROR_CODES.IMA_ADS_MANAGER_INIT_ERROR,vec:a.VAST_ERRORCODES.SS_VEC_1524_IMA_INIT_AD_ERROR})}}},{key:"getAdRemainingTime",value:function(){return this._adsManager?this._adsManager.getRemainingTime():a.VPAID_CONSTANTS.UNKNOWN}},{key:"getAdDuration",value:function(){return this._currentAd?this._currentAd.getDuration():a.VPAID_CONSTANTS.UNKNOWN}},{key:"getAdCompanions",value:function(){return this._currentAd?this._currentAd.getCompanionAds(this.width,this.height):[]}},{key:"getAdIcons",value:function(){return""}},{key:"getAdLinear",value:function(){return!this._currentAd||this._currentAd.isLinear()}},{key:"collapseAd",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"collapseAd",this).call(this),this._adsManager&&this._adsManager.collapse()}},{key:"expandAd",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"expandAd",this).call(this),this._adsManager&&this._adsManager.expand()}},{key:"getAdSkippableState",value:function(){return!!this._adsManager&&this._adsManager.getAdSkippableState()}},{key:"skipAd",value:function(){this._adsManager?this._adsManager.skip():(this._isSkipAd=!0,this.onAdSkipped(),this.onAdStopped())}},{key:"getAdVolume",value:function(){return this._adsManager&&(this._volume=this._adsManager.getVolume()),this._volume}},{key:"setAdVolume",value:function(t){var e=t!==this._volume;this._adsManager?this._adsManager.setVolume(t):e&&this.onAdVolumeChange(),this._volume=t}},{key:"resumeAd",value:function(){this.isPaused_=!1,this._adsManager?this._adsManager.resume():this.onAdPlaying()}},{key:"pauseAd",value:function(){this.isPaused_=!0,this._adsManager?this._adsManager.pause():this.onAdPaused()}},{key:"resizeAd",value:function(t,n,i){var r=this._initParams.width!==t||this._initParams.height!==n||this._initParams.viewMode!==i;o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"resizeAd",this).call(this,t,n,i),this._adsManager?this._adsManager.resize(t,n,i):r&&this.onAdSizeChange()}},{key:"stopAd",value:function(){this._adsManager?this._adsManager.stop():(this._isStopAd=!0,this.onAdStopped())}}],[{key:"getMsg",value:function(t,e){return t+"_"+(e=e.getError()).getErrorCode()+"_"+e.getType()+"_"+e.getInnerError()}}]),e}(((n=n(108))&&n.__esModule?n:{default:n}).default),e.default=n},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=i(t=n(0));t=(t=n(39))&&t.__esModule?t:{default:t};var a=n(262),s=a&&a.__esModule?a:{default:a};i(n=n(1)),n=function(t){function e(t,n,i,r,o){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,"MediaDemandRequest",t,n,i,r,o),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t)._vpaidVideoWrapper=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"createVideoWrapper",value:function(){this._vpaidVideoWrapper=new s.default(this._cabinet,this._adVast)}},{key:"beginVideoWrapper",value:function(){var t=this;try{this.addSlotEventListener_(o.ELEMENT_EVENTS.click,{handleEvent:function(e){t._vpaidVideoWrapper.adClicked()}}),this.begin(this.getCreativeData(),this._vpaidVideoWrapper,this._initParams.environmentVars)}catch(t){try{this.stopAd()}catch(t){}this.demandError(o.VD_ERROR_CODES.VIDEO_WRAPPER_BEGIN_ERROR,!1,o.VAST_ERRORCODES.SS_VAST_ERRORCODE_1504)}}},{key:"load",value:function(){try{this.demandOpp()}catch(t){return void this.demandError(o.VD_ERROR_CODES.DEMAND_TAG_OPP_ERROR,!1,o.VAST_ERRORCODES.SS_VAST_ERRORCODE_1512)}try{this.createVideoWrapper(),this.beginVideoWrapper()}catch(t){this.demandError(o.VD_ERROR_CODES.UNCAUGHT_MEDIA_DEMAND_REQUEST_LOAD_ERROR+t.message,!1,o.VAST_ERRORCODES.SS_VEC_1529_UNCAUGHT_MEDIA_DEMAND_REQUEST_LOAD_ERROR)}}}]),e}(t.default),e.default=n},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0},a=i(n(0)),s=i(n(1)),u=i(n(109));n=function(t){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,"VpaidVideoWrapper",t,n),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t)._lastQuartileIndex=0,t._isPaused=!1,t._clickCounter=0,t._requiresMuted=!1,t._autoplayState=a.AUTOPLAY_STATES.INIT,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"initAd",value:function(t,n,i,r,u,_){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initAd",this).call(this,t,n,i,r,u,_);try{if(!this._cabinet.autoplayVideoElementManager.environmentVarsHasVideoSlot){if(null===this._cabinet.autoplayVideoElementManager.newVideoSlot)return void this.onAdError(a.VD_ERROR_CODES.CREATE_VIDEO_SLOT_LOGIC_ERROR);this._cabinet.autoplayVideoElementManager.appendVideoSlot()}}catch(t){this.onAdError(a.VD_ERROR_CODES.CREATE_VIDEO_SLOT_ERROR)}this._setSource=!1;try{for(t=0;t<this._adVast.media.length;t++){var l=this._adVast.media[t];if(s.canPlayVideo(this._initParams.environmentVars.videoSlot,l)){this._initParams.environmentVars.videoSlot.setAttribute(a.VIDEO_ATTRIBUTES.src,l.url),this._initParams.environmentVars.videoSlot.setAttribute(a.VIDEO_ATTRIBUTES.type,l.mimetype),this._setSource=!0;break}}}catch(t){return void this.onAdError(a.VD_ERROR_CODES.FOUND_SOURCE_ERROR)}if(this._setSource){try{this.setAdVolumeInternal(this._initParams.environmentVars.videoSlot.volume),this._volume!==this._previousVolume&&this.onAdVolumeChange()}catch(t){return void this.onAdError(a.VD_ERROR_CODES.GET_VOLUME_ERROR)}this.onAdLoaded()}else this.onAdError(a.VD_ERROR_CODES.NO_SOURCE)}},{key:"onAdError",value:function(t){this.removeAllListeners(),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdError",this).call(this,t)}},{key:"onAdStopped",value:function(){this.removeAllListeners(),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdStopped",this).call(this)}},{key:"onAdSkipped",value:function(){this.removeAllListeners(),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdSkipped",this).call(this)}},{key:"onAdStarted",value:function(){this.adVpaidState.isDead||o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdStarted",this).call(this)}},{key:"startAd",value:function(){var t=this;if(this.adVpaidState.isVpaidEvent(a.VPAID_EVENTS.AdLoaded)&&!this.adVpaidState.isDead){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"startAd",this).call(this);try{var n={handleEvent:function(){if(t._lastQuartileIndex>=a.QUARTILE_EVENTS.length)t.removeVideoSlotEventListener_(a.VIDEO_EVENTS.timeupdate,n);else if(t.onAdImpression(),t.getAdSkippableState()&&!t.skipButton&&(t.addSkipButton(),t.onAdSkippableStateChange()),null!==t.duration&&null!==t.currentTime)for(var e=100*t.currentTime/t.duration;e>=a.QUARTILE_EVENTS[t._lastQuartileIndex].value;){switch(a.QUARTILE_EVENTS[t._lastQuartileIndex].event){case a.VPAID_EVENTS.AdVideoStart:t.onAdVideoStart();break;case a.VPAID_EVENTS.AdVideoFirstQuartile:t.onAdVideoFirstQuartile();break;case a.VPAID_EVENTS.AdVideoMidpoint:t.onAdVideoMidpoint();break;case a.VPAID_EVENTS.AdVideoThirdQuartile:t.onAdVideoThirdQuartile()}if(t._lastQuartileIndex+=1,t._lastQuartileIndex>=a.QUARTILE_EVENTS.length){t.removeVideoSlotEventListener_(a.VIDEO_EVENTS.timeupdate,n);break}}}};this.addVideoSlotEventListener_(a.VIDEO_EVENTS.timeupdate,n),this.addVideoSlotEventListener_(a.VIDEO_EVENTS.ended,{handleEvent:function(){t.adVpaidState.isVpaidEvent(a.VPAID_EVENTS.AdImpression)&&t._lastQuartileIndex>=a.QUARTILE_EVENTS.length&&t.onAdVideoComplete(),t.onAdStopped()}}),this.addVideoSlotEventListener_(a.VIDEO_EVENTS.volumechange,{handleEvent:function(){t._autoplayState===a.AUTOPLAY_STATES.CHECKING&&t.onAdVolumeChange()}})}catch(t){return void this.onAdError(a.VD_ERROR_CODES.ADD_EVENT_LISTENERS_ERROR)}this.onAdStarted(),0===this._adVast.skipOffset&&(this.addSkipButton(),this.onAdSkippableStateChange()),setTimeout(this._doStartAd.bind(this),0)}}},{key:"_doStartAd",value:function(){var t=this,e=u.isMuted(this._initParams.environmentVars.videoSlot),n=this._initParams.environmentVars.videoSlot.play();this._autoplayState=a.AUTOPLAY_CHECK_STATES.CHECKING,void 0!==n?n.then(this._onAutoplayWithSoundSuccess.bind(this)).catch(function(n){t.adVpaidState.isContinue&&!e?t._checkMutedAutoplaySupport():t._onAutoplayFailed()}):this._onNoSoundPlayPromise()}},{key:"_onAutoplayWithSoundSuccess",value:function(){this._autoplayState=a.AUTOPLAY_STATES.RESOLVED,this.onAdImpression()}},{key:"_onNoSoundPlayPromise",value:function(){this._autoplayState=a.AUTOPLAY_STATES.RESOLVED,this.onAdImpression()}},{key:"_onAutoplayFailed",value:function(){this._autoplayState=a.AUTOPLAY_STATES.CLICK_TO_PLAY,this.showClickToPlay()}},{key:"_checkMutedAutoplaySupport",value:function(){this._initParams.environmentVars.videoSlot.volume=0,this._initParams.environmentVars.videoSlot.muted=!0;var t=this._initParams.environmentVars.videoSlot.play();void 0!==t?t.then(this._onMutedAutoplaySuccess.bind(this)).catch(this._onMutedAutoplayFail.bind(this)):this._onNoMutedPlayPromise()}},{key:"_onMutedAutoplaySuccess",value:function(){this._requiresMuted=!0,this._autoplayState=a.AUTOPLAY_STATES.RESOLVED,this.onAdImpression()}},{key:"_onMutedAutoplayFail",value:function(t){this._initParams.environmentVars.videoSlot.volume=this._volume,this._initParams.environmentVars.videoSlot.muted=!1,this._onAutoplayFailed()}},{key:"_onNoMutedPlayPromise",value:function(){this._autoplayState=a.AUTOPLAY_STATES.RESOLVED,this.onAdImpression()}},{key:"playAd",value:function(){this._initParams.environmentVars.videoSlot.play()}},{key:"onAdImpression",value:function(){var t=this;if(this.adVpaidState.isContinue&&this.hasPlayed){try{this.addVideoSlotEventListener_(a.VIDEO_EVENTS.click,{handleEvent:function(e){t.adClicked()}})}catch(t){return void this.onAdError(a.VD_ERROR_CODES.ADD_CLICK_LISTENER)}o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdImpression",this).call(this)}}},{key:"getAdRemainingTime",value:function(){return null!==this.duration?null!==this.currentTime?this.duration-Math.min(this.currentTime,this.duration):this.duration:a.VPAID_CONSTANTS.UNKNOWN}},{key:"getAdDuration",value:function(){return null!==this.duration?this.duration:null!==this._adVast.duration?this._adVast.duration:a.VPAID_CONSTANTS.UNKNOWN}},{key:"getAdCompanions",value:function(){return this._adVast.companions}},{key:"getAdIcons",value:function(){return this._adVast.icons}},{key:"getAdLinear",value:function(){return this._adVast.linear}},{key:"collapseAd",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"collapseAd",this).call(this),this.onAdExpandedChange()}},{key:"expandAd",value:function(){this._initParams.environmentVars.videoSlot.requestFullscreen?this._initParams.environmentVars.videoSlot.requestFullscreen():this._initParams.environmentVars.videoSlot.msRequestFullscreen?this._initParams.environmentVars.videoSlot.msRequestFullscreen():this._initParams.environmentVars.videoSlot.mozRequestFullScreen?this._initParams.environmentVars.videoSlot.mozRequestFullScreen():this._initParams.environmentVars.videoSlot.webkitRequestFullscreen&&this._initParams.environmentVars.videoSlot.webkitRequestFullscreen(),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"expandAd",this).call(this),this.onAdExpandedChange()}},{key:"getAdSkippableState",value:function(){return this._adVast.skipOffset!==a.VPAID_CONSTANTS.NOT_IMPLEMENTED&&this.currentTime>=this._adVast.skipOffset}},{key:"skipAd",value:function(){var t=this;o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"skipAd",this).call(this),this.getAdSkippableState()&&setTimeout(function(){t.onAdSkipped(),t.onAdStopped()},0)}},{key:"getAdVolume",value:function(){return this.adVpaidState.isVpaidEvent(a.VPAID_EVENTS.AdLoaded)&&this._autoplayState!==a.AUTOPLAY_STATES.CHECKING?this._initParams.environmentVars.videoSlot.volume:o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getAdVolume",this).call(this)}},{key:"setAdVolume",value:function(t){if(this._volume!==t&&(o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setAdVolume",this).call(this,t),null!==this._initParams.environmentVars.videoSlot&&this._autoplayState!==a.AUTOPLAY_STATES.CHECKING))try{this._initParams.environmentVars.videoSlot.volume=t,this.onAdVolumeChange()}catch(t){}}},{key:"resumeAd",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"resumeAd",this).call(this),this._isPaused=!1,this._initParams.environmentVars.videoSlot.play(),this.onAdPlaying()}},{key:"pauseAd",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"pauseAd",this).call(this),this._isPaused=!0,this._initParams.environmentVars.videoSlot.pause(),this.onAdPaused()}},{key:"resizeAd",value:function(t,n,i){var r=this._initParams.width!==t||this._initParams.height!==n||this._initParams.viewMode!==i;o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"resizeAd",this).call(this,t,n,i),r&&this.onAdSizeChange()}},{key:"_cleanup",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_cleanup",this).call(this);try{var t=this._initParams.environmentVars.videoSlot;this._autoplayState===a.AUTOPLAY_CHECK_STATES.CHECKING&&t.pause(),this._setSource&&(t.removeAttribute(a.VIDEO_ATTRIBUTES.src),t.removeAttribute(a.VIDEO_ATTRIBUTES.type))}catch(t){}this.removeSkipButton()}},{key:"stopAd",value:function(){var t=this;o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stopAd",this).call(this),setTimeout(function(){t.onAdStopped()},0)}},{key:"adClicked",value:function(){!this.adVpaidState.isSkipAd&&this._adVast.clickThrough&&(!1===this._isPaused?(this.pauseAd(),this.onAdClickThru(this._adVast.clickThrough,"adClickId-"+this._clickCounter++,!1),window.open(this._adVast.clickThrough,"_blank")):this.resumeAd())}},{key:"addSkipButton",value:function(){var t=s.getDocumentAndWindow(this._initParams.environmentVars.slot).document.createElement("BUTTON");t.id=this.skipAdId,s.styleButton(t),t.addEventListener("click",this.skipAd.bind(this),!1),this._initParams.environmentVars.slot.appendChild(t)}},{key:"removeSkipButton",value:function(){var t=s.getDocumentAndWindow(this._initParams.environmentVars.slot).document.getElementById(this.skipAdId);t&&this._initParams.environmentVars.slot.removeChild(t)}},{key:"autoplayState",get:function(){return this._autoplayState}},{key:"skipAdId",get:function(){return this.shortUuid+"skipAd"}},{key:"hasPlayed",get:function(){return null!==this.currentTime&&0<this.currentTime}},{key:"currentTime",get:function(){return null!==this._initParams.environmentVars.videoSlot?this._initParams.environmentVars.videoSlot.currentTime:null}},{key:"duration",get:function(){return null!==this._initParams.environmentVars.videoSlot&&0<this._initParams.environmentVars.videoSlot.duration?this._initParams.environmentVars.videoSlot.duration:null}},{key:"skipButton",get:function(){return s.getDocumentAndWindow(this._initParams.environmentVars.slot).document.getElementById(this.skipAdId)}}]),e}(((n=n(108))&&n.__esModule?n:{default:n}).default),e.default=n},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=i(t=n(0));t=(t=n(39))&&t.__esModule?t:{default:t};var a=n(264),s=a&&a.__esModule?a:{default:a},u=n(1);i(u),n=function(t){function e(t,n,i,r,o){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(t=(e.__proto__||Object.getPrototypeOf(e)).call(this,"VpaidDemandRequest",t,n,i,r,o),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(t=!t||"object"!=typeof t&&"function"!=typeof t?this:t)._iframe=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"demandError",value:function(t,n,i){(function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"demandError",this).call(this,t,n,i),this._iframe&&(this._iframe.parentNode.removeChild(this._iframe),this._iframe=null)}},{key:"loadIframeFunc",value:function(){var t=this;return function(e){try{if(!t.adVpaidState.isDead)if(e)if(e.contentWindow)if(e.contentWindow.getVPAIDAd)if("function"!=typeof e.contentWindow.getVPAIDAd)t.demandError(o.VD_ERROR_CODES.GET_VPAID_AD_NOT_FUNCTION,!1,o.VAST_ERRORCODES.SS_VAST_ERRORCODE_1509);else try{t.begin(t.getCreativeData(),e.contentWindow.getVPAIDAd(),t._initParams.environmentVars)}catch(e){try{t.stopAd()}catch(t){}t.demandError(o.VD_ERROR_CODES.JS_VPAID_BEGIN_ERROR,!1,o.VAST_ERRORCODES.SS_VAST_ERRORCODE_1509)}else t.demandError(o.VD_ERROR_CODES.NO_GET_VPAID_AD,!1,o.VAST_ERRORCODES.SS_VAST_ERRORCODE_1509);else t.demandError(o.VD_ERROR_CODES.NO_CONTENT_WINDOW,!1,o.VAST_ERRORCODES.SS_VAST_ERRORCODE_1509);else t.demandError(o.VD_ERROR_CODES.NO_IFRAME,!1,o.VAST_ERRORCODES.SS_VAST_ERRORCODE_1509)}catch(e){t.demandError(o.VD_ERROR_CODES.UNCAUGHT_LOAD_IFRAME_ERROR+e.message,!1,o.VAST_ERRORCODES.SS_VAST_ERRORCODE_1509)}}}},{key:"getErrorFunc",value:function(){var t=this;return function(){var e=o.VAST_ERRORCODES.SS_VAST_ERRORCODE_1509;t.cabinet.pageProtocol===u.SECURE_PROTOCOL&&t._adVast.jsVpaidUrl.substr(0,u.INSECURE_PROTOCOL.length)===u.INSECURE_PROTOCOL&&(e=o.VAST_ERRORCODES.SS_VEC_1311_MIXED_CONTENT),t.demandError(o.VD_ERROR_CODES.IFRAME_ON_ERROR,!1,e)}}},{key:"getTimeoutInfo",value:function(){return this._cabinet.timeoutManager.getDemandTagTimeoutInfo(this._demandTag.waterfallIdx,this._demandTag.broadcastIdx,[{timeout:this._cabinet.timeouts.VPAID_SCRIPT_TIMEOUT,reason:o.VD_ERROR_CODES.VPAID_TIMEOUT}])}},{key:"load",value:function(){var t=this;try{this.demandOpp()}catch(t){return void this.demandError(o.VD_ERROR_CODES.DEMAND_TAG_OPP_ERROR,!1,o.VAST_ERRORCODES.SS_VAST_ERRORCODE_1512)}var e=void 0;try{e=this.getTimeoutInfo()}catch(t){this.demandError(o.VD_ERROR_CODES.UNC_VPAID_DR_GET_TO+t.message,!1,o.VAST_ERRORCODES.SS_VEC_1530_UNCAUGHT_VPAID_DEMAND_REQUEST_LOAD_ERROR)}var n=void 0,i=void 0,r=void 0,a=void 0;try{n=this._cabinet.manifest.enableFlashIframe?null:o.ALLOW_SCRIPTS,i=function(){t.demandError(e.reason,!0,e.vec)},r=this.loadIframeFunc(),a=this.getErrorFunc()}catch(t){this.demandError(o.VD_ERROR_CODES.UNC_VPAID_DR_LOAD_ERR+t.message,!1,o.VAST_ERRORCODES.SS_VEC_1530_UNCAUGHT_VPAID_DEMAND_REQUEST_LOAD_ERROR)}try{this._iframe=s.default.createIframe(this._cabinet.uuid,document,n,this._adVast.jsVpaidUrl,e.timeout,i,r,a)}catch(t){this.demandError(t.message,!1,o.VAST_ERRORCODES.SS_VEC_1530_UNCAUGHT_VPAID_DEMAND_REQUEST_LOAD_ERROR)}}}]),e}(t.default),e.default=n},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=i(n(0));i(n=n(1)),n=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}return r(t,null,[{key:"createIframe",value:function(t,e,n,i,r,a,s,u){function _(t){return function(){l||(l=!0,u(d))}}var l=!1,d=void 0;try{d=e.createElement("iframe")}catch(t){throw Error(o.VD_ERROR_CODES.CREATE_IFRAME_ELEMENT_ERROR+t.message)}d.id="iframe-"+t,null!==n&&(d.sandbox=n);try{var c=d.frameElement||d;c.style.border="0px",c.style.width="100%",c.style.height="100%",c.style.position="relative",c.style.overflow="hidden",c.scrolling="no"}catch(t){throw Error(o.VD_ERROR_CODES.STYLE_IFRAME_ERROR+t.message)}d.src="javascript:false";try{e.body.appendChild(d)}catch(t){throw Error(o.VD_ERROR_CODES.APPEND_IFRAME_ERROR+t.message)}t=_(),e=_(),n=_(),c=void 0;try{c=d.contentWindow||d.contentDocument.parentWindow}catch(t){throw Error(o.VD_ERROR_CODES.IFRAME_CONTENT_WINDOW_ERROR+t.message)}var h=void 0;try{d.contentDocument?h=d.contentDocument:d.contentWindow&&(h=d.contentWindow.document)}catch(t){throw Error(o.VD_ERROR_CODES.IFRAME_WINDOW_DOCUMENT_ERROR+t.message)}try{h.open().write("<body onload=\"var js = document.createElement('script');js.src = '"+i+"';js.addEventListener('load', function() { window.onLoadFn(); });js.addEventListener('error', function() { window.onErrorFn(); });js.addEventListener('abort', function() { window.onAbortFn(); });js.addEventListener('beforeunload', function() { window.onBeforeunloadFn(); });document.body.appendChild(js);\">")}catch(t){throw Error(o.VD_ERROR_CODES.IFRAME_WRITE_ERROR+t.message)}try{c.onLoadFn=function(){l||(l=!0,s(d))},c.onErrorFn=t,c.onAbortFn=e,c.onBeforeunloadFn=n}catch(t){throw Error(o.VD_ERROR_CODES.IFRAME_SET_FUNCTION_ERROR+t.message)}try{h.close()}catch(t){throw Error(o.VD_ERROR_CODES.IFRAME_CLOSE_ERROR+t.message)}return setTimeout(function(){l||(l=!0,a(d))},r),d}}]),t}(),e.default=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.initMoatTracking=function(t,e,n,i,r){return function(t,e,n,i,r){var o=document.createElement("script"),a=[];e={adData:{ids:e,duration:n,url:r},dispatchEvent:function(t){this.sendEvent?(a&&(a.push(t),t=a,a=!1),this.sendEvent(t)):a.push(t)}},n="_moatApi"+Math.floor(1e8*Math.random());var s=r=void 0;try{s=(r=t.ownerDocument).defaultView||r.parentWindow}catch(t){r=document,s=window}return s[n]=e,o.type="text/javascript",t&&t.insertBefore(o,t.childNodes[0]||null),o.src="https://z.moatads.com/"+i+"/moatvideo.js#"+n,e}(t,e,n,i,r)}},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e,n,i,r,o,s){return e={ai:o,si:e.supplyTagId,sr:e.demandTagId,dm:n+"x"+i,di:t.domain,c1:r,ui:t.ssid,r1:s.toString(),ti:t.uuid,gt:t.country,dt:u.default.dt},t.hasOwnProperty("pimps")&&(t.pimps.hasOwnProperty("w_pv")&&""!==t.pimps.w_pv&&(e.pv=t.pimps.w_pv),t.pimps.hasOwnProperty("w_to")&&t.pimps.w_to>a.SSC_TO.UNKNOWN&&(e.to=t.pimps.w_to),t.passthru&&t.passthru.app_bundle&&(e.ap=t.passthru.app_bundle)),e}function o(t,e,n,i,o){for(var s=[],u=e.callChain.callChainLinks,l=0;l<u.length;l++){var d=u[l];if(_.shouldFireLink(t,d,a.POST_IMP_PROVIDER_ID_WHITEOPS)){var c=0===l?t.aid:d.getFirstOtherTagId(a.CALL_CHAIN_IDENTIFIERS.ACCOUNT);s.push(r(t,d,n,i,o,c,e.callChain))}}return s}Object.defineProperty(e,"__esModule",{value:!0}),e.getDatas=o,e.load=function(t,e,n,i,r,a,_){for(e=o(e,n,i,r,a),n=0;n<e.length;n++)s.addScript(t,s.makeUrl(_,u.default.url,e[n]));return e};var a=i(t=n(0)),s=i(t=n(1)),u=(t=n(267))&&t.__esModule?t:{default:t},_=i(n=n(40))},function(t){t.exports={url:"s.update.morgdog.springserve.com/2/465673/analytics.js",dt:"4656731475874383737000"}},function(t,e,n){var i=n(87),r=n(27),o=Math.max;t.exports=function(t,e,n){var a=null==t?0:t.length;return a?(0>(n=null==n?0:r(n))&&(n=o(a+n,0)),i(t,e,n)):-1}},function(t){t.exports={moatPartnerCode:"yellowhammerflashint188671193078"}},function(t,e,n){e.__IASVANS=function(t){var e={now:function(){return(new Date).getTime()},sendMonitoringPixel:function(t){try{this.sendUrlRequest(["//pixel.adsafeprotected.com/mon?anId=10173&campId=",encodeURIComponent(a.getPartnerId()),"&pubId=",encodeURIComponent("vans-js_"+t)].join(""))}catch(t){n.report("smp",t)}},sendMonitoringDebugPixel:function(){var t=["adstop"],i={};return function(r,o){var s=a.hasDebugEnabled(),u=-1<t.indexOf(r)&&i[r];if(s&&!u)try{var _=a.getAltMonDomain(),l=e.addProtocolToDomain("spixel.adsafeprotected.com")+"/mon?anId=10173&campId="+encodeURIComponent(a.getPartnerId())+"&pubId=",d=e.addProtocolToDomain(_)+"/mon?anId=925116&campId="+encodeURIComponent(a.getPartnerId())+"&pubId=",c=encodeURIComponent(r),h=o.replace(/=undefined&/g,"=&");this.sendUrlRequest([l,c,h].join("")),this.sendUrlRequest([d,c,h].join("")),i[r]=!0}catch(t){n.report("smp",t)}}}(),sendUrlRequest:function(t,e){if(t){var n=this.getWindow();try{var i=new n.XMLHttpRequest;e&&(i.onreadystatechange=e),i.open("GET",t),i.send()}catch(t){}}},stringify:function(t){if("AdImpression"!==t.messageType)return JSON.stringify(t);var e={};e.passthroughObj=a.getPassThroughObj();var i="";try{i=JSON.stringify(t)}catch(t){return void n.report("ser",t,e)}return i},addProtocolToDomain:function(t){return t.match(/^[a-zA-Z]+:\/\//)?t:"https://"+t},getWindow:function(){return s.getWin()},getDocument:function(){return s.getDoc()},generateUID:function(){var t,e="";try{for(t=0;8>t;t++)e=[e,Math.floor(65536*(1+Math.random())).toString(16).substring(1)].join("")}catch(t){}return e},noop:function(){}},n=function(){var t={};return{report:function(n,i,r){if(!t[n])try{t[n]=!0;var o="//pixel.adsafeprotected.com/jsdiagnostic?code:vans-js_"+encodeURIComponent(a.getPartnerId())+"_"+n+"&err:"+encodeURIComponent(i.message);r&&(o+="&config:"+encodeURIComponent(JSON.stringify(r))),e.sendUrlRequest(o)}catch(t){}}}}(),i=function(){var t,i=!1,r=function(t,n){return t==a()&&(i=!0,o.setImpressionCallback(n),e.sendMonitoringDebugPixel("hs",o.monitoringQS()),o.flushUnsentEvents()),i?"jv3":null},a=function(){return t||(t=e.generateUID()),t};return{getVideoId:a,setNodeInterface:function(t){var i=a();try{var o="IASid"+i,s="blockAd"+i,u="getIasVidBridgeVersion"+i;t.className+=" integral-vid-"+i,t[s]=e.noop,t[o]=r,t[u]=function(){return"2"},t.getVersion=function(){return"3.5.0"}}catch(t){n.report("sni",t)}},isEstablished:function(){return i},resetHandshake:function(){i=!1}}}(),r=function(){var t,r=function(){var t=function(t){return void 0!==t},e=function(){var e="u";try{t(window.opera)&&t(window.opera.buildNumber)?e="o":t(window.mozInnerScreenY)?e="g":t(window.chrome)&&t(window.chrome.csi)?e="c":t(window.msWriteProfilerMark)&&t(window.crypto)?e="e":t(window.attachEvent)||t(window.msCrypto)?e="i":t(window.WebKitPoint)&&(e="w")}catch(t){}return e}(),n=function(){var e=function(){var e={g:"",q:""};try{e.q=window.parent.parent.parent.parent.parent.parent.parent.parent.parent.parent.location.href}catch(o){var n,i=o.message;if(i=i.substring(i.lastIndexOf("<")+1,i.lastIndexOf(">")),(n=t(i))&&(n=!1,t(window.navigator)&&t(window.navigator.userAgent))){var r=window.navigator.userAgent.match(/Firefox\/([\.0-9]+)/);null!==r&&2==r.length&&(r=r[1].split("."),3==parseInt(r[0],10)&&6>=parseInt(r[1],10)&&(3==r.length?13>=parseInt(r[2],10)&&(n=!0):n=!0))}n&&(e.g=i)}return e},n={};try{n.a=encodeURIComponent(top.location.href)}catch(t){}try{n.b=encodeURIComponent(window.parent.location.href)}catch(t){}if(window!=top){try{n.c=encodeURIComponent(window.parent.document.referrer)}catch(t){}try{n.e=encodeURIComponent(window.document.referrer)}catch(t){}}try{n.d=encodeURIComponent(window.location.href)}catch(t){}try{var i=e();n.g=encodeURIComponent(i.g),n.q=encodeURIComponent(i.q)}catch(t){}for(var r in n=function(e){var n,i,r={};for(i in e)e.hasOwnProperty(i)&&(n=e[i],t(r[n])?r[n]+=i:r[n]=i);for(i in e={},r)r.hasOwnProperty(i)&&(e[n=r[i]]=i);return e}(n=function(e){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];""!==i&&"null"!==i&&"undefined"!==i&&null!==i&&t(i)||delete e[n]}return e}(n)),e=[],n)n.hasOwnProperty(r)&&e.push({key:r,val:n[r]});return e.sort(function(t,e){return t.val.length>e.val.length?1:t.val.length<e.val.length?-1:0}),e}();return{br:e,urls:n}},o=function(t,e,r){var o=["//pixel.adsafeprotected.com/db2/video/",e,"/",r,"/skeleton.js?videoId=",i.getVideoId()].join("");e=function(t){o=[o,"&adsafe_url=",t.val,"&adsafe_type=",t.key].join("")};try{t.urls.forEach(e),o=[o,"&adsafe_jsinfo=br:",t.br].join("")}catch(t){n.report("bvu",t)}return o},a=function(){if(4==this.readyState)if(200==this.status)try{t("failed"===JSON.parse(this.responseText).action?"block":"safe")}catch(t){n.report("ba",t)}else n.report("blk_url_req_err",{message:this.status})};return{init:function(n,i,s){var u=r();n=o(u,n,i),t=s,e.sendUrlRequest(n,a)}}}(),o=function(){var r,s=[],u=!1,_=function(t){var e="";return Object.keys(t).forEach(function(n){-1===["advEntityId","pubEntityId","partner","debug"].indexOf(n)&&(e+="&"+n+"="+t[n])}),e},l=function(a){var u;if(i.isEstablished())try{(u=e.stringify(a))&&("AdImpression"===a.messageType?e.getWindow()[r](u):e.getWindow().postMessage(u,"*"))}catch(t){n.report("dm",t)}else if(o.nodeProvided)try{s.push(a)}catch(t){n.report("cm",t)}else{u=t||"pixel.adsafeprotected.com";var l=o.config;try{e.stringify(a),"AdImpression"===a.messageType&&(o.isCmTag?e.sendUrlRequest(["//"+u,"/mon?",_(l)].join("")):o.isFwTag&&e.sendUrlRequest(["//"+u,"/rfw/st/",l.advEntityId+"/"+l.pubEntityId,"/skeleton.js"].join("")))}catch(t){n.report("dm",t)}}};return{sendEvent:function(t,r){if("AdImpression"===t){if(u)return;r&&(r.ext_passthrough=o.passThroughObj),u=!0,e.sendMonitoringDebugPixel("ai",o.monitoringQS())}else"AdStopped"===t||"AdVideoComplete"===t?e.sendMonitoringDebugPixel("adstop",o.monitoringQS()):"AdError"===t&&e.sendMonitoringDebugPixel("aderr",o.monitoringQS());try{l({messageType:t,id:i.getVideoId(),time:e.now(),partner:a.getPartnerId(),eventData:r})}catch(t){n.report("se",t)}},setImpressionCallback:function(t){r=t},flushUnsentEvents:function(){try{s.forEach(l)}catch(t){n.report("fue",t)}},passThroughObj:{},monitoringQS:function(){},clearSessionState:function(){u=!1,s.length=0}}}(),a=function(){var a,u,_,l={},d={},c="impId creativeId campId placementId advEntityId pubEntityId chanId".split(" "),h=function(e,r){var o=t||"pixel.adsafeprotected.com";try{var a=["//",o,e,"?videoId=",i.getVideoId(),function(t){var e="";return Object.keys(t).forEach(function(n){"advEntityId"!=n&&"pubEntityId"!=n&&"partner"!=n&&(e+="&"+n+"="+t[n])}),e}(r)].join("")}catch(t){n.report("bsurl",t)}return a},A=function(t,n,i){var r=e.getDocument();try{var o=r.createElement("script");o.src=h(t,n),o.addEventListener("load",function(t){e.sendMonitoringDebugPixel("fwjsload",E())}),o.addEventListener("error",function(t){e.sendMonitoringDebugPixel("fwjsload_err",E())}),function(t,n){var i,r=!1,o=function(){!r&&t.parentNode&&(t.parentNode.appendChild(n),clearInterval(i),r=!0,e.sendMonitoringDebugPixel("fwjsinj",E()))};o(),r||(i=setInterval(o,200))}(i,o)}catch(t){e.sendMonitoringPixel("inj_err")}},f=function(t,e,n){i.setNodeInterface(n);var r={};Object.getOwnPropertyNames(e).forEach(function(t){"debug"!==t&&(r[t]=e[t])}),A(t,r,n)},p=function(t){c.forEach(function(e){l[e]=t[e]}),_&&(l.monDomain=t.debug.monDomain)},E=function(){return"&chanId="+l.chanId+"&planId="+l.advEntityId+"&placementId="+l.pubEntityId+"&advId="+l.campId+"&pubOrder="+l.placementId+"&pubCreative="+l.creativeId+"&impId="+l.impId+"&ts="+Date.now()+"&custom=3.5.0&custom2=jv3&custom3="+u+"&adsafe_par"},R=function(t){var n=t&&t.ownerDocument,i=t&&t.parentNode,r=n&&(n.defaultView||n.parentWindow),o="adnode_type_"+(t?t.constructor.name||t.nodeName:"null");t||e.sendMonitoringDebugPixel("adnode_null",E()),t&&!i&&e.sendMonitoringDebugPixel("adnode_detached",E()),t&&!n&&e.sendMonitoringDebugPixel("adnode_nodoc",E()),n&&!r&&e.sendMonitoringDebugPixel("adnode_nowin",E()),e.sendMonitoringDebugPixel(o,E())},O=function(){d.vv="3.5.0",d.vanstag=u,d.xcamp=l.campId,d.xplac=l.placementId,d.xcreat=l.creativeId,d.ximp=l.impId},S=function(t){t.monitoringQS=E,t.passThroughObj=d,Object.keys(t).forEach(function(e){o[e]=t[e]})},y=function(t){var e=(t=t&&t.ownerDocument)&&t.parentWindow;return!!(t&&t.defaultView||e)};return{initCM:function(t,i){var r=y(i);if(!t||!t.partner)throw Error("Missing partnerId");s.setWin(i),a=t.partner,_=t.debug&&t.debug.enabled,u="cm";try{if(!t.anId)throw Error("Missing anId");p(t),O(),S({isFwTag:!1,isCmTag:!0,nodeProvided:r,config:t}),e.sendMonitoringDebugPixel("init",E()),R(i),r&&f("/jsvid",t,i)}catch(t){n.report("icm",t)}},initFW:function(t,i,o){var l,d=y(i);if(!t||!t.partner)throw Error("Missing partnerId");s.setWin(i),a=t.partner,_=t.debug&&t.debug.enabled,u="fw";try{if(!t.advEntityId||!t.pubEntityId)throw Error("Missing client id: advEntityId: "+t.advEntityId+" ,pubEntityId: "+t.pubEntityId);p(t),O(),S({isFwTag:!0,isCmTag:!1,nodeProvided:d,config:t}),e.sendMonitoringDebugPixel("init",E()),R(i),o&&r.init(t.advEntityId,t.pubEntityId,o),d&&(l="/fwjsvid/st/"+t.advEntityId+"/"+t.pubEntityId+"/skeleton.js",f(l,t,i))}catch(t){n.report("ifw",t)}},getPartnerId:function(){return a},getPassThroughObj:function(){return d},getAltMonDomain:function(){return l.monDomain},hasDebugEnabled:function(){return _}}}(),s=function(){var t=window;return{getWin:function(){return t},setWin:function(e){(e=e&&e.ownerDocument)&&e.defaultView?t=e.defaultView:e&&e.parentWindow?t=e.parentWindow:n.report("sc",{message:""})},getDoc:function(){return t.document}}}();return{initFW:a.initFW,initCM:a.initCM,sendEvent:o.sendEvent}}},function(t){t.exports={adNetworkId:"926608",partner:"springserve"}},function(t){t.exports={MAX_WRAPPERS:10,VAST_TIMEOUT:3e3,WRAPPER_CHAIN_TIMEOUT:5e3,CHILD_KILL_AD_TIMEOUT:1e3,VPAID_SCRIPT_TIMEOUT:5e3,VPAID_FINAL_EVENT_TIMEOUT:1e3,JSON_TIMEOUT:2e4,DEFAULT_DEMAND_TAG_TIMEOUT:2e4,SSC_TIMEOUT:2e4,BROADCAST_VAST_REQUEST_TIMEOUT:1e3,IMA_TIMEOUT:5e3,MAX_BROADCAST_TIMEOUT:5e3,MAX_PIXEL_FIRE_TIMEOUT:5e3,PIXEL_QUEUE_FLUSH_INTERVAL_MS:3e3,VIEWABILITY:150,MAX_PIXEL_TRIES:3,PIXEL_WAIT:200,HB_BID_REQUEST_TIMEOUT:1e3,AUTOPLAY_CHECK_TIMEOUT:1e3,AUTOPLAY_POLL_TIMEOUT:50,MAX_POLL_COUNT:2}},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=(t=n(2))&&t.__esModule?t:{default:t},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));n=function(){function t(e,n,i,r,o,a){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._cabinet=e,this._initParams=n,this._adVpaidState=i,this._adVidIoState=r,this._sendBeacon=o,this._pixelQueue=a,this._unloadFunctions={}}return r(t,[{key:"registerUnloads",value:function(){var t=this;(0,o.default)(this._cabinet.locationInfo.parents.slice(0,1),function(e,n){e.hasOwnProperty(a.PARENT_WIN)&&t.registerUnload(e[a.PARENT_WIN],n)})}},{key:"registerUnload",value:function(t,e){var n=this;try{if(t&&"function"==typeof t.addEventListener){var r,o=function(){if(!n._adVidIoState.isVidIoEvent(a.VID_IO_EVENTS.js_impression)&&!n._adVidIoState.isVidIoDead){var r,o=(i(r={},a.VID_IO_PARAMS.idx,e),i(r,a.VID_IO_PARAMS.adLoaded,n._adVpaidState.isVpaidEvent(a.VPAID_EVENTS.AdLoaded)?1:0),r);n._cabinet.timeoutManager&&(o[a.VID_IO_PARAMS.timeOnPage]=n._cabinet.timeoutManager.timeOnPage),n._pixelQueue.enqueue(n._cabinet.pixelEventFactory.build(a.VID_IO_EVENTS.js_unload,null,o))}r=t.navigator&&t.navigator.sendBeacon,n._sendBeacon||r?(r=n._pixelQueue.swapAndGetBatch(),n._pixelQueue.killFlusher(!1),r&&(o=r.getUrl({batch:"unload"}),n._sendBeacon?n._sendBeacon(o,JSON.stringify(r.toJson())):t.navigator.sendBeacon(o,JSON.stringify(r.toJson())))):n._pixelQueue.killFlusher()};t.addEventListener(a.WINDOW_EVENTS.unload,o,!1),this._unloadFunctions[e]=(i(r={},a.PARENT_WIN,t),i(r,"fn",o),r)}}catch(t){}}},{key:"unregisterUnload",value:function(t){var e=this._unloadFunctions[t];e&&(e.win&&"function"==typeof e.win.removeEventListener&&e.win.removeEventListener(a.WINDOW_EVENTS.unload,e.fn,!1),delete this._unloadFunctions[t])}}]),t}(),e.default=n},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=r(n(52)),s=r(n(110)),u=r(n(275)),_=r(n(276)),l=r(n(278)),d=i(n(1)),c=i(n(0)),h=r(n(279)),A=r(n=n(280));n=function(){function t(e,n,i,r,o,a,u){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._endpoint=e,this._pixelUrl=n,this._flashBridgeUrl=i,this._posterUrl=r,this._forceSecure=o,this._version=a,this._timeouts=u,this._historyManager=d.getHistoryManager(),this._locationInfo=new h.default(window,document),this._pixelEventFactory=new A.default(this._locationInfo,this._pixelUrl),this._pageProtocol=d.getPageProtocol(),this._timeoutManager=this._imaManager=this._autoplayVideoElementManager=this._manifest=this._environmentVars=null,this._wasReauctioned=!1,this._html5mimes=this._canPlayFlash=null,this._startTime=(0,s.default)()}return o(t,[{key:"initialize",value:function(t){this._environmentVars=t;try{this._timeoutManager=new u.default(this._timeouts,s.default,this.startTime),this._timeoutManager.setManifest(this.manifest)}catch(t){throw Error(c.VD_ERROR_CODES.TIMEOUT_MANAGER_INIT_ERROR)}try{this._autoplayVideoElementManager=new _.default(this.uuid,t,this._timeouts)}catch(t){throw Error(c.VD_ERROR_CODES.VIDEO_ELEMENT_MANAGER_INIT_ERROR)}try{this._imaManager=new l.default(this.uuid,this.pageProtocol,this.autoplayVideoElementManager,t)}catch(t){throw Error(c.VD_ERROR_CODES.IMA_MANAGER_CREATE_ERROR)}}},{key:"getSizeInfo",value:function(t){return d.getSizeInfo(this._manifest,t)}},{key:"isSizeMatch",value:function(t){return this.wasReauctioned||d.sizeMatch(this.manifest,t)}},{key:"replacePageProtocol",value:function(t){return d.promoteProtocol(t,this.pageProtocol)}},{key:"getPosterUrl",value:function(t,e){return d.getPoster(this._pageProtocol,this._posterUrl,d.getPosterFilename(t,e))}},{key:"supportedMimes",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this.autoplayVideoElementManager.videoSlot||this.autoplayVideoElementManager.createNewVideoSlot(),this._html5mimes||(this._html5mimes=(0,a.default)(c.HTML5_MIMES,function(e){return"application/javascript"===e||d.canPlayVideo(t.autoplayVideoElementManager.videoSlot,{mimetype:e,url:""})})),e?this._html5mimes.concat(c.FLASH_MIMES):this._html5mimes}},{key:"endpoint",get:function(){return this._endpoint}},{key:"pixelUrl",get:function(){return this._pixelUrl}},{key:"flashBridgeUrl",get:function(){return this._flashBridgeUrl}},{key:"posterUrl",get:function(){return this._posterUrl}},{key:"forceSecure",get:function(){return this._forceSecure}},{key:"version",get:function(){return this._version}},{key:"historyManager",get:function(){return this._historyManager}},{key:"pixelEventFactory",get:function(){return this._pixelEventFactory}},{key:"manifest",get:function(){return this._manifest},set:function(t){this._manifest=t,this._pixelEventFactory.manifest=t}},{key:"wasReauctioned",get:function(){return this._wasReauctioned},set:function(t){this._wasReauctioned=t}},{key:"startTime",get:function(){return this._startTime}},{key:"pageProtocol",get:function(){return this._pageProtocol}},{key:"imaManager",get:function(){return this._imaManager}},{key:"timeoutManager",get:function(){return this._timeoutManager}},{key:"autoplayVideoElementManager",get:function(){return this._autoplayVideoElementManager}},{key:"locationInfo",get:function(){return this._locationInfo}},{key:"timeouts",get:function(){return this._timeouts}},{key:"uuid",get:function(){return this.manifest?this.manifest.uuid:null}},{key:"shortUuid",get:function(){return this.uuid?d.getShortUuid(this.uuid):""}},{key:"isDomainMatch",get:function(){return this.wasReauctioned||d.domainMatch(this.manifest,this.locationInfo)}},{key:"canPlayFlash",get:function(){return!1}}]),t}(),e.default=n},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t){for(var e=null,n=0;n<t.length;n++){var i=t[n];(null===e||i.timeout<e.timeout)&&(e=i)}return e}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=i(n(18)),s=i(n(16)),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),_=i(n=n(20));n=function(){function t(e,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:n();if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._timeouts=e,this._now=n,this._startInit=i,this._start=n(),this._manifest=this._supplyTagTimeout=null,this._responseStarts={},this._vpaidStarts={},this._tierFirstVpaidStartTime=this._tierStartTime=this._imaLoadStartTime=this._dtoTime=null,this._currentTier=-1,this._updateVastRequestStartTime=this._updateVpaidStartTime=!1,this._numVastResponsesUsed=0,this._tierFirstVastRequestStartTime=null}return o(t,[{key:"setManifest",value:function(t){for(this._manifest=t,this._supplyTagTimeout=this._manifest.timeout,this._manifest.dto&&(this._dtoTime=(0,a.default)(this._manifest.dto,function(){return 0})),t=0;t<this._manifest.numWaterfalls;t++)this._vpaidStarts[t]={}}},{key:"getDtoTime",value:function(t){return this._dtoTime[t]}},{key:"startTier",value:function(t){t!==this._currentTier&&(this._tierStartTime=this.timeOnPage,this._updateVastRequestStartTime=this._updateVpaidStartTime=!0,this._currentTier=t,this._numVastResponsesUsed=0)}},{key:"startTierFirstVastRequest",value:function(){this._updateVastRequestStartTime&&(this._tierFirstVastRequestStartTime=this.timeOnPage,this._updateVastRequestStartTime=!1)}},{key:"startTierFirstVpaid",value:function(){this._updateVpaidStartTime&&(this._tierFirstVpaidStartTime=this.timeOnPage,this._updateVpaidStartTime=!1)}},{key:"startBroadcast",value:function(t,e){if(0<t&&null!==this._dtoTime)for(var n=t-1,i=0;i<this._manifest.dx[n].length;i++)for(var r=this.getDemandTagResponseTime(n,i),o=this.getDemandTagDtoKeys(n,i),a=0;a<o.length;a++)this._dtoTime[o[a]]+=r;this.startTier(e),this._responseStarts[t]=this._now()}},{key:"startVpaid",value:function(t,e,n){this._updateVpaidStartTime&&this.startTierFirstVpaid(),n===this._currentTier&&(this._numVastResponsesUsed+=1),this._vpaidStarts[t][e]=this._now()}},{key:"getRequestTime",value:function(t){return this.getResponseStart(t)-this._start}},{key:"getResponseTime",value:function(t){return this._now()-this.getResponseStart(t)}},{key:"getDemandTagResponseTime",value:function(t,e){return this._now()-this.getVpaidStart(t,e)}},{key:"getTimeoutInfo",value:function(t,e){var n=[];return n.push(new _.default(this.supplyTagRemaining,u.VD_ERROR_CODES.SUPPLY_TAG_TIMEOUT,u.VAST_ERRORCODES.SS_VEC_1516_SUPPLY_TAG_TIMEOUT),new _.default(this._timeouts.MAX_BROADCAST_TIMEOUT-this.getResponseTime(t),u.VD_ERROR_CODES.MAX_BROADCAST_TIMEOUT,u.VAST_ERRORCODES.SS_VEC_1316_MAX_BROADCAST_TIMEOUT)),r(null!==e?n.concat(e):n)}},{key:"getDemandTagTimeoutInfo",value:function(t,e,n){var i=[new _.default(this.supplyTagRemaining,u.VD_ERROR_CODES.SUPPLY_TAG_TIMEOUT,u.VAST_ERRORCODES.SS_VEC_1516_SUPPLY_TAG_TIMEOUT)],o=null;if(null!==this._dtoTime&&(o=this.getDemandTagDtoKeys(t,e)),null!==this._dtoTime&&0!==o.length||i.push(new _.default(this._timeouts.DEFAULT_DEMAND_TAG_TIMEOUT-this.getDemandTagResponseTime(t,e),u.VD_ERROR_CODES.DEMAND_PARTNER_TIMEOUT,u.VAST_ERRORCODES.SS_VEC_1520_DEMAND_PARTNER_TIMEOUT)),null!==this._dtoTime)for(var a=0;a<o.length;a++){var s=o[a];i.push(new _.default(this._manifest.dto[s]-this._dtoTime[s]-this.getDemandTagResponseTime(t,e),u.VD_ERROR_CODES.DTO_TIMEOUT,u.VAST_ERRORCODES.SS_VEC_1517_DEMAND_TAG_TIMEOUT))}return r(null!==n?i.concat(n):i)}},{key:"getResponseStart",value:function(t){return this._responseStarts[t]}},{key:"getVpaidStart",value:function(t,e){return this._vpaidStarts[t][e]}},{key:"getDemandTags",value:function(t){return this._manifest.dx[t]}},{key:"getDemandTag",value:function(t,e){return this.getDemandTags(t)[e]}},{key:"getDtids",value:function(t,e){var n={};for(t=this.getDemandTag(t,e).callChain.callChainLinks,e=0;e<t.length;e++){var i=t[e].demandTagId;0!==i&&(n[i]=!0)}return n}},{key:"getDtoKeyList",value:function(t){var e,n=[];for(e in this._dtoTime)this._dtoTime.hasOwnProperty(e)&&t.hasOwnProperty(e)&&n.push(e);return n}},{key:"getDtoKeys",value:function(t){for(var e={},n=0;n<this._manifest.dx[t].length;n++)(0,s.default)(e,this.getDtids(t,n));return this.getDtoKeyList(e)}},{key:"getDemandTagDtoKeys",value:function(t,e){return this.getDtoKeyList(this.getDtids(t,e))}},{key:"startImaLoad",value:function(){this._imaLoadStartTime=this._now()}},{key:"getImaLoadingTime",value:function(){return this._now()-this._imaLoadStartTime}},{key:"start",get:function(){return this._start}},{key:"supplyTagTimeout",get:function(){return this._supplyTagTimeout}},{key:"supplyTagRemaining",get:function(){return this._supplyTagTimeout-this.timeOnPage}},{key:"timeOnPage",get:function(){return this._now()-this._start}},{key:"initTime",get:function(){return this._now()-this._startInit}},{key:"tierStartTime",get:function(){return this._tierStartTime}},{key:"tierFirstVastRequestStartTime",get:function(){return this._tierFirstVastRequestStartTime}},{key:"tierFirstVpaidStartTime",get:function(){return this._tierFirstVpaidStartTime}},{key:"numVastResponsesUsed",get:function(){return this._numVastResponsesUsed}}]),t}(),e.default=n},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=(t=n(2))&&t.__esModule?t:{default:t};t=(t=n(277))&&t.__esModule?t:{default:t};var a=n(0),s=i(a);i(a=n(1));var u=i(n=n(109));n=function(t){function e(t,n,i){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r._timeouts=i,r._autoplayAllowed=s.DEFAULT_AUTOPLAY_ALLOWED,r._autoplayRequiresMuted=s.DEFAULT_REQUIRES_MUTED,r._timeoutId=0,r._listeners={},(0,o.default)(s.AUTOPLAY_CHECK_EVENTS,function(t){r._listeners[t]=[]}),r._state=s.AUTOPLAY_CHECK_STATES.INIT,r._addedBlankMp4=!1,r._pollTimeout=s.NO_TIMER,r._pollCount=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"addBlankMp4",value:function(){u.addBlankMp4(this.videoSlot)}},{key:"removeBlankMp4",value:function(){u.removeBlankMp4(this.videoSlot)}},{key:"onSetAdVolume",value:function(t){this.state===s.AUTOPLAY_CHECK_STATES.CHECKING&&(this._volume=t)}},{key:"finishVastRequest",value:function(t){t||(this._pollTimeout!==s.NO_TIMER&&(clearTimeout(this._pollTimeout),this._pollTimeout=s.NO_TIMER),this._state=s.AUTOPLAY_CHECK_STATES.DEAD)}},{key:"_playPoll",value:function(){var t=u.isPlaying(this.videoSlot);this.state===s.AUTOPLAY_CHECK_STATES.DEAD?this._onAutoplayChecksResolved():t?this._pollCount<this._timeouts.MAX_POLL_COUNT?(this._pollCount++,this._pollTimeout=setTimeout(this._playPoll.bind(this),this._timeouts.AUTOPLAY_POLL_TIMEOUT)):this._onAutoplayChecksResolved():this._checkAutoPlay()}},{key:"_checkAutoPlay",value:function(){var t=this;this._state=s.AUTOPLAY_CHECK_STATES.CHECKING,this._volume=this.videoSlot.volume,this._muted=this.videoSlot.muted,this.videoSlot.src||(this._addedBlankMp4=!0,this.addBlankMp4()),this.videoSlot.volume=1,this.videoSlot.muted=!1,this._timeoutId=setTimeout(function(){t.videoSlot.pause(),t._autoplayAllowed=!0,t._autoplayRequiresMuted=s.DEFAULT_REQUIRES_MUTED,t._onAutoplayChecksResolved()},this._timeouts.AUTOPLAY_CHECK_TIMEOUT);var e=this.videoSlot.play();e?e.then(this._onAutoplayWithSoundSuccess.bind(this)).catch(this._onAutoplayWithSoundFail.bind(this)):(this.videoSlot.pause(),this._autoplayAllowed=!0,this._autoplayRequiresMuted=s.DEFAULT_REQUIRES_MUTED,this._onAutoplayChecksResolved())}},{key:"checkAutoplaySupport",value:function(){this._playPoll()}},{key:"_onAutoplayWithSoundSuccess",value:function(){this._state===s.AUTOPLAY_CHECK_STATES.CHECKING&&(this.videoSlot.pause(),this.videoSlot.volume=this._volume,this.videoSlot.muted=this._muted,this._autoplayAllowed=!0,this._autoplayRequiresMuted=!1,this._onAutoplayChecksResolved())}},{key:"_onAutoplayWithSoundFail",value:function(){this._state===s.AUTOPLAY_CHECK_STATES.CHECKING&&this._checkMutedAutoplaySupport()}},{key:"_checkMutedAutoplaySupport",value:function(){var t=this;if(this._state===s.AUTOPLAY_CHECK_STATES.CHECKING){0<this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=setTimeout(function(){t.videoSlot.pause(),t._autoplayAllowed=!0,t._autoplayRequiresMuted=!0,t._onAutoplayChecksResolved()},this._timeouts.AUTOPLAY_CHECK_TIMEOUT),this.videoSlot.volume=0,this.videoSlot.muted=!0;var e=this.videoSlot.play();e?e.then(this._onMutedAutoplaySuccess.bind(this)).catch(this._onMutedAutoplayFail.bind(this)):this._onNoMutedPlayPromise()}}},{key:"_onMutedAutoplaySuccess",value:function(){this._state===s.AUTOPLAY_CHECK_STATES.CHECKING&&(this.videoSlot.pause(),this._autoplayRequiresMuted=this._autoplayAllowed=!0,this._onAutoplayChecksResolved())}},{key:"_onMutedAutoplayFail",value:function(){this._state===s.AUTOPLAY_CHECK_STATES.CHECKING&&(this.videoSlot.volume=this._volume,this.videoSlot.muted=this._muted,this._autoplayRequiresMuted=this._autoplayAllowed=!1,this._onAutoplayChecksResolved())}},{key:"_onNoMutedPlayPromise",value:function(){this._state===s.AUTOPLAY_CHECK_STATES.CHECKING&&(this.videoSlot.pause(),this.videoSlot.volume=this._volume,this.videoSlot.muted=this._muted,this._autoplayRequiresMuted=this._autoplayAllowed=!0,this._onAutoplayChecksResolved())}},{key:"subscribeAutoplayChecksResolved",value:function(t,e,n){s.AUTOPLAY_CHECK_EVENTS.hasOwnProperty(e)&&this._listeners[e].push(t.bind(n))}},{key:"unsubscribeAutoplayChecksResolved",value:function(t){s.AUTOPLAY_CHECK_EVENTS.hasOwnProperty(t)&&(this._listeners[t]=[])}},{key:"_onAutoplayChecksResolved",value:function(){this._addedBlankMp4&&(this._addedBlankMp4=!1,this.removeBlankMp4()),0<this._timeoutId&&clearTimeout(this._timeoutId),this.state!==s.AUTOPLAY_CHECK_STATES.DEAD&&(this._state=s.AUTOPLAY_CHECK_STATES.RESOLVED),(0,o.default)(this._listeners[s.AUTOPLAY_CHECK_EVENTS.RESOLVED],function(t){t.apply(t,[])})}},{key:"autoplayAllowed",get:function(){return this._autoplayAllowed}},{key:"autoplayRequiresMuted",get:function(){return this._autoplayRequiresMuted}},{key:"state",get:function(){return this._state}},{key:"autoplayChecksResolved",get:function(){return this._state===s.AUTOPLAY_CHECK_STATES.RESOLVED}}]),e}(t.default),e.default=n},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=i(n(1)),a=i(n=n(0));n=function(){function t(e,n){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._uuid=e,this._environmentVars=n,this._newVideoSlot=null}return r(t,[{key:"maybeCreateAndAppendVideoSlot",value:function(){this.environmentVarsHasVideoSlot||(null===this.newVideoSlot&&this.createNewVideoSlot(),this.appendVideoSlot())}},{key:"createNewVideoSlot",value:function(){this._newVideoSlot=o.getDocumentAndWindow(this._environmentVars.slot).document.createElement("video"),this._newVideoSlot.style.width="100%",this._newVideoSlot.style.height="100%",this._newVideoSlot.setAttribute(a.PLAYSINLINE,a.PLAYSINLINE)}},{key:"appendVideoSlot",value:function(){this._environmentVars.videoSlot=this.newVideoSlot,this._environmentVars.slot.appendChild(this.newVideoSlot)}},{key:"uuid",get:function(){return this._uuid}},{key:"shortUuid",get:function(){return o.getShortUuid(this.uuid)}},{key:"environmentVarsHasVideoSlot",get:function(){return this._environmentVars.hasOwnProperty("videoSlot")&&null!==this._environmentVars.videoSlot}},{key:"newVideoSlot",get:function(){return this._newVideoSlot}},{key:"videoSlot",get:function(){return this.environmentVarsHasVideoSlot?this._environmentVars.videoSlot:this.newVideoSlot}}]),t}(),e.default=n},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=(t=n(101))&&t.__esModule?t:{default:t},a=(t=n(54))&&t.__esModule?t:{default:t},s=i(t=n(0)),u=i(n=n(1));n=function(){function t(e,n,i,r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._uuid=e,this._pageProtocol=n,this._autoplayVideoElementManager=i,this._environmentVars=r,this._state=s.IMA_MANAGER_STATES.INIT,this._adsLoader=this._adDisplayContainer=null,this._imaManagerEventListeners={},this._adDisplayContainerInitialized=this._contentComplete=!1}return r(t,[{key:"loadIma",value:function(t){var e=this;this._state!==s.IMA_MANAGER_STATES.DEAD&&(this._state=s.IMA_MANAGER_STATES.REQUEST_SCRIPT,(0,a.default)(this._pageProtocol+this.imaUrl,function(){e._state!==s.IMA_MANAGER_STATES.DEAD&&(e._state=s.IMA_MANAGER_STATES.SCRIPT_LOADED,t())},!0))}},{key:"setUpIMA",value:function(){var t=this;if(this._state!==s.IMA_MANAGER_STATES.DEAD){try{this._autoplayVideoElementManager.maybeCreateAndAppendVideoSlot()}catch(t){return this._state=s.IMA_MANAGER_STATES.LOAD_ERROR,void this.callImaManagerEvent(s.IMA_MANAGER_EVENT_TYPES.LOAD_ERROR)}this._adDisplayContainer=new google.ima.AdDisplayContainer(this._environmentVars.slot,this._environmentVars.videoSlot),this._adsLoader=new google.ima.AdsLoader(this._adDisplayContainer),this._adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE),this._autoplayVideoElementManager.autoplayChecksResolved?(this._state=s.IMA_MANAGER_STATES.LOADED,this.callImaManagerEvent(s.IMA_MANAGER_EVENT_TYPES.LOADED)):(this._autoplayVideoElementManager.subscribeAutoplayChecksResolved(function(){t._state!==s.IMA_MANAGER_STATES.DEAD&&(t._state=s.IMA_MANAGER_STATES.LOADED,t.callImaManagerEvent(s.IMA_MANAGER_EVENT_TYPES.LOADED)),t._autoplayVideoElementManager.unsubscribeAutoplayChecksResolved(s.AUTOPLAY_CHECK_EVENTS.RESOLVED)},s.AUTOPLAY_CHECK_EVENTS.RESOLVED,this),this._autoplayVideoElementManager.state===s.AUTOPLAY_CHECK_STATES.INIT&&this._autoplayVideoElementManager.checkAutoplaySupport())}}},{key:"doContentComplete",value:function(){this._adsLoader&&!this._contentComplete&&(this._adsLoader.contentComplete(),this._contentComplete=!0)}},{key:"loadAndStartIma",value:function(){this.state!==s.IMA_MANAGER_STATES.DEAD&&this.loadIma(this.setUpIMA.bind(this))}},{key:"maybeInitializeAdDisplayContainer",value:function(){this._adDisplayContainerInitialized||(this._adDisplayContainer.initialize(),this._adDisplayContainerInitialized=!0)}},{key:"finishVastRequest",value:function(t){this._autoplayVideoElementManager.finishVastRequest(t),t||(this._state=s.IMA_MANAGER_STATES.DEAD)}},{key:"callImaManagerEvent",value:function(t){if(this._imaManagerEventListeners.hasOwnProperty(t)){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(e=0;e<this._imaManagerEventListeners[t].length;e++)this._imaManagerEventListeners[t][e].apply(this._imaManagerEventListeners[t][e],n)}}},{key:"subscribeImaManagerEvent",value:function(t,e,n){this._imaManagerEventListeners.hasOwnProperty(e)||(this._imaManagerEventListeners[e]=[]),this._imaManagerEventListeners[e].push(t.bind(n))}},{key:"unsubscribeImaManagerEvent",value:function(t,e){this._imaManagerEventListeners.hasOwnProperty(t)&&(0,o.default)(this._imaManagerEventListeners[t],function(t){return t===e})}},{key:"uuid",get:function(){return this._uuid}},{key:"shortUuid",get:function(){return u.getShortUuid(this.uuid)}},{key:"imaUrl",get:function(){return"//imasdk.googleapis.com/js/sdkloader/ima3.js"}},{key:"contentComplete",get:function(){return this._contentComplete},set:function(t){this._contentComplete=t}},{key:"adsLoader",get:function(){return this._adsLoader}},{key:"state",get:function(){return this._state}},{key:"adDisplayContainerInitialized",get:function(){return this._adDisplayContainerInitialized}}]),t}(),e.default=n},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));t=function(){function t(e,n){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._win=e,this._doc=n,this._topAncestorOriginHostname=this._topAncestorOrigin=this._window__location__ancestorOrigins__hostnames=this._window__location__ancestorOrigins=this._document__referrer__hostname=this._document__referrer=this._window__top__location__origin=this._window__location__origin=this._window__top__location__hostname=this._window__location__hostname=this._window__top__location__href=this._window__location__href=null,this._parents=[],this._parent_location_href=[],this._top_parent_location_href=null,this._parent_hostnames=[],this._domain_match_source=this._domain_match=this._url=this._top_parent_hostname=null,this._top_idx_domain=this._iframeHeight=-1,this._getVars(),this._url=this._getUrl(),e=this._getDomainMatchSource(),this._domain_match=e.domain_match,this._domain_match_source=e.domain_match_source}return r(t,[{key:"_getVars",value:function(){try{this._window__location__href=this._win.location.href}catch(t){}try{this._window__top__location__href=this._win.top.location.href}catch(t){}try{this._window__location__hostname=this._win.location.hostname}catch(t){}try{this._window__top__location__hostname=this._win.top.location.hostname}catch(t){}try{this._window__location__origin=this._win.location.origin}catch(t){}try{this._window__top__location__origin=this._win.top.location.origin}catch(t){}try{this._document__referrer=this._doc.referrer,this._document__referrer__hostname=t.getHostname(this._document__referrer)}catch(t){}try{this._window__location__ancestorOrigins=[],this._window__location__ancestorOrigins__hostnames=[];for(var e=0;e<this._win.location.ancestorOrigins.length;e++){var n=this._win.location.ancestorOrigins[e];this._window__location__ancestorOrigins.push(n);var r=t.getHostname(n);this._window__location__ancestorOrigins__hostnames.push(r)}}catch(t){}null!==this._window__location__ancestorOrigins&&0<this._window__location__ancestorOrigins.length&&(this._topAncestorOrigin=this._window__location__ancestorOrigins[this._window__location__ancestorOrigins.length-1]),null!==this._window__location__ancestorOrigins__hostnames&&0<this._window__location__ancestorOrigins__hostnames.length&&(this._topAncestorOriginHostname=this._window__location__ancestorOrigins__hostnames[this._window__location__ancestorOrigins__hostnames.length-1]);try{var a=this._win;this._iframeHeight=0;do{try{this._parents.push(i({},o.PARENT_WIN,a))}catch(t){this._parents.push({error:t})}try{this._parent_location_href.push({url:a.location.href}),this._top_parent_location_href=a.location.href}catch(t){this._parent_location_href.push({error:t})}try{this._parent_hostnames.push({url:a.location.hostname}),this._top_parent_hostname=a.location.hostname,this._top_idx_domain=this._iframeHeight+1}catch(t){this._parent_hostnames.push({error:t})}a=a.parent,this._iframeHeight++}while(a!==this._win.top&&a!==a.parent&&50>this._iframeHeight)}catch(t){}}},{key:"_getDomainMatchSource",value:function(){if(null!==this._topAncestorOriginHostname&&""!==this._topAncestorOriginHostname)return{domain_match:this._topAncestorOriginHostname,domain_match_source:o.DOMAIN_MATCH_SOURCES.WINDOW_LOCATION_ANCESTORORIGINS};if(null!==this._window__top__location__hostname&&""!==this._window__top__location__hostname)return{domain_match:this._window__top__location__hostname,domain_match_source:o.DOMAIN_MATCH_SOURCES.WINDOW_TOP_LOCATION};if(!(1>=this._iframeHeight)){if(!(2===this._iframeHeight||2>=this._top_idx_domain)&&null!==this._top_parent_hostname&&""!==this._top_parent_hostname)return{domain_match:this._top_parent_hostname,domain_match_source:o.DOMAIN_MATCH_SOURCES.TOP_PARENT+this._top_idx_domain};if(null!==this._document__referrer__hostname&&""!==this._document__referrer__hostname)return{domain_match:this._document__referrer__hostname,domain_match_source:o.DOMAIN_MATCH_SOURCES.DOCUMENT_REFERRER}}return null!==this._window__location__hostname&&""!==this._window__location__hostname?{domain_match:this._window__location__hostname,domain_match_source:o.DOMAIN_MATCH_SOURCES.WINDOW_LOCATION}:{domain_match:null,domain_match_source:null}}},{key:"_getUrl",value:function(){if(null!==this._window__top__location__href&&""!==this._window__top__location__href)return this._window__top__location__href;if(!(1>=this._iframeHeight)){if(!(2===this._iframeHeight||2>=this._top_idx_domain)&&null!==this._top_parent_location_href&&""!==this._top_parent_location_href)return this._top_parent_location_href;if(null!==this._document__referrer&&""!==this._document__referrer)return this._document__referrer}return null!==this._window__location__href&&""!==this._window__location__href?this._window__location__href:null!==this._topAncestorOrigin&&""!==this._topAncestorOrigin?this._topAncestorOrigin:null}},{key:"url",get:function(){return this._url}},{key:"domain_match",get:function(){return this._domain_match}},{key:"domain_match_source",get:function(){return this._domain_match_source}},{key:"parents",get:function(){return this._parents}}],[{key:"getHostname",value:function(t){try{return new URL(t).hostname}catch(n){try{var e=/(?:https?:\/\/)?(?:w+:\/)?[^:?#\/s]*?([^.s]+.(?:[a-z]{2,}|co.uk|org.uk|ac.uk|org.au|com.au))(?:[:?#\/]|$)/gi.exec(t);return e?e[1]:null}catch(t){return null}}}}]),t}(),e.default=t},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(1)),o=(t=n(281))&&t.__esModule?t:{default:t},a=(n=n(287))&&n.__esModule?n:{default:n};n=function(){function t(e,n){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._locationInfo=e,this._pixelUrl=n,this._initParams=this._manifest=null}return i(t,[{key:"setInitParams",value:function(t){this._initParams=t}},{key:"build",value:function(t){return new a.default(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,4<arguments.length&&void 0!==arguments[4]?arguments[4]:null).build()}},{key:"newBatch",value:function(){return new o.default(this._pixelUrl,this._manifest,this._locationInfo,this._initParams).build()}},{key:"shortUuid",get:function(){return this._manifest&&this._manifest.uuid?r.getShortUuid(this._manifest.uuid):""}},{key:"manifest",get:function(){return this._manifest},set:function(t){this._manifest=t}}]),t}(),e.default=n},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=r(n(0)),u=i(n(110)),_=i(n(282)),l=i(n(5)),d=i(n(12)),c=i(n(285)),h=r(n(1)),A=r(n(19));n=function(t){function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var o=(e.__proto__||Object.getPrototypeOf(e)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(o=!o||"object"!=typeof o&&"function"!=typeof o?this:o)._pixelUrl=t,o._manifest=n,o._locationInfo=i,o._initParams=r,o._batches=[],o._contains_imp=!1,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),a(e,[{key:"build",value:function(){this.pushParam(s.VID_IO_PARAMS.timestamp,(0,u.default)());try{this._manifest&&(this._addPassthroughs(),this._addManifestParams()),this._locationInfo&&this._addLocationInfoParams(),this._initParams&&this._addInitParams(),this._addViewability()}catch(t){this.pushParam(s.VID_IO_PARAMS.reason,t.message)}return function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"build",this).call(this)}},{key:"_addViewability",value:function(){var t=A.detector();t&&this.pushParam(s.VID_IO_PARAMS.inView,t.isInView)}},{key:"_addPassthroughs",value:function(){if(this._manifest.passthru)for(var t in this._manifest.passthru)this._manifest.passthru.hasOwnProperty(t)&&this.pushParam(t,this._manifest.passthru[t])}},{key:"_addManifestParams",value:function(){this.pushParam(s.VID_IO_PARAMS.d,this._manifest.domain),this.pushParam(s.VID_IO_PARAMS.w,this._manifest.width),this.pushParam(s.VID_IO_PARAMS.h,this._manifest.height),this.pushParam(s.VID_IO_PARAMS.cc,this._manifest.country),this.pushParam(s.VID_IO_PARAMS.v,this._manifest.v),this.pushParam(s.VID_IO_PARAMS.uuid,this._manifest.uuid),this.pushParam(s.VID_IO_PARAMS.dtnum,this._manifest.numWaterfalls),0<this._manifest.ol&&this.pushParam(s.VID_IO_PARAMS.ol,this._manifest.ol),0<this._manifest.ov&&this.pushParam(s.VID_IO_PARAMS.ov,this._manifest.ov),this.pushParam(s.VID_IO_PARAMS.parentSupplyTagId,this._manifest.supplyTagId),this.pushParam(s.VID_IO_PARAMS.auctionCallChain,s.CALL_CHAIN_IDENTIFIERS.SUPPLY+"."+this._manifest.supplyTagId)}},{key:"_addInitParams",value:function(){var t={width:this._initParams.width,height:this._initParams.height,source:s.DETECTED_SIZE_MATCH_SOURCE.vpaid};if(this._manifest)try{t=this._getSizeInfo()}catch(t){}this.pushParam(s.VID_IO_PARAMS.detected_size_width,(0,c.default)(t.width)),this.pushParam(s.VID_IO_PARAMS.detected_size_height,(0,c.default)(t.height)),this.pushParam(s.VID_IO_PARAMS.detected_size_match_source,t.source)}},{key:"_getSizeInfo",value:function(){return h.getSizeInfo(this._manifest,this._initParams)}},{key:"_addLocationInfoParams",value:function(){this.pushParam(s.VID_IO_PARAMS.domain_match,this._locationInfo.domain_match),this.pushParam(s.VID_IO_PARAMS.domain_match_source,this._locationInfo.domain_match_source)}},{key:"toJson",value:function(){var t=(0,d.default)(this._batches,function(t){return t.toJson()});return(0,l.default)({},o({},s.VID_IO_PARAMS.batches,t),this._params)}},{key:"addEvent",value:function(t){this._batches.push(t),t.eventType===s.VID_IO_EVENTS.js_impression&&(this._contains_imp=!0)}},{key:"batchSize",value:function(){return this._batches.length}},{key:"toUrlParams",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:s.MAX_URL_LENGTH;return(0,d.default)(this._batches,function(n){var i=0;return n=(0,l.default)({},n.toJson(),t._params),(0,_.default)(n,function(t,n){return(i+=n.length+encodeURIComponent(t).length+1)<=e})})}},{key:"toImageUrls",value:function(){var t=this,e=s.MAX_URL_LENGTH-this.getUrl().length;return e=this.toUrlParams(e),(0,d.default)(e,function(e){return t.getUrl((0,l.default)(e,{cb:h.getCb()}))})}},{key:"getUrl",value:function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return h.makeUrl(h.SECURE_PROTOCOL,this._pixelUrl,(0,l.default)((o(t={},s.VID_IO_PARAMS.short_uuid,this.shortUuid),o(t,s.VID_IO_PARAMS.parentSupplyTagId,this.supplyTagId),t),e))}},{key:"shortUuid",get:function(){return this._manifest&&this._manifest.uuid?h.getShortUuid(this._manifest.uuid):""}},{key:"supplyTagId",get:function(){return this._manifest?this._manifest.supplyTagId:-1}},{key:"containsImp",get:function(){return this._contains_imp}}]),e}(i(n=n(111)).default),e.default=n},function(t,e,n){var i=n(31),r=n(13),o=n(97),a=n(283);t.exports=function(t,e){if(null==t)return{};var n=i(a(t),function(t){return[t]});return e=r(e),o(t,n,function(t,n){return e(t,n[0])})}},function(t,e,n){var i=n(75),r=n(284),o=n(30);t.exports=function(t){return i(t,o,r)}},function(t,e,n){var i=n(46),r=n(86),o=n(76);e=n(78),t.exports=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)i(e,o(t)),t=r(t);return e}:e},function(t,e,n){e=n(286)("round"),t.exports=e},function(t,e,n){var i=n(27),r=n(28),o=n(82),a=Math.min;t.exports=function(t){var e=Math[t];return function(t,n){return t=r(t),(n=null==n?0:a(i(n),292))?(t=(o(t)+"e").split("e"),t=e(t[0]+"e"+(+t[1]+n)),+((t=(o(t)+"e").split("e"))[0]+"e"+(+t[1]-n))):e(t)}}},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=(t=n(2))&&t.__esModule?t:{default:t},a=i(t=n(0)),s=i(t=n(1));n=function(t){function e(t,n,i,r,o){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var a=(e.__proto__||Object.getPrototypeOf(e)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return(a=!a||"object"!=typeof a&&"function"!=typeof a?this:a)._demandTag=n,a._supplyTagId=r,a._supplyTagIds=o,a._options=i,a._eventType=t,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"build",value:function(){return this._eventType&&this.pushParam(a.VID_IO_PARAMS.event,this._eventType),this._addCallChain(),this._addOptions(),this._addOtherThings(),this._addPassthru(),function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r?"value"in r?r.value:void 0===(n=r.get)?void 0:n.call(i):null!==(e=Object.getPrototypeOf(e))?t(e,n,i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"build",this).call(this)}},{key:"_addOtherThings",value:function(){this._demandTag&&this._demandTag.hasOwnProperty("ol")&&0<this._demandTag.ol&&this.pushParam(a.VID_IO_PARAMS.ol,this._demandTag.ol)}},{key:"_addPassthru",value:function(){try{if(this._demandTag&&this._demandTag.hasOwnProperty("passthru"))for(var t in this._demandTag.passthru)this._demandTag.passthru.hasOwnProperty(t)&&this.pushParam(t,this._demandTag.passthru[t])}catch(t){}}},{key:"_addCallChain",value:function(){try{this._demandTag?(this.pushParam(a.VID_IO_PARAMS.auctionCallChain,this._demandTag.a_cc),this.pushParam(a.VID_IO_PARAMS.dtidx,this._demandTag.waterfallIdx+1)):this._supplyTagIds?this.pushParam(a.VID_IO_PARAMS.auctionCallChain,this._supplyTagIds):this._supplyTagId&&this.pushParam(a.VID_IO_PARAMS.auctionCallChain,a.CALL_CHAIN_IDENTIFIERS.SUPPLY+"."+this._supplyTagId)}catch(t){}}},{key:"_addOptions",value:function(){var t=this;try{this._options&&(0,o.default)(this._options,function(e,n){var i=e;"reason"===n&&(i=s.getReason(e)),t.pushParam(n,i)})}catch(t){}}},{key:"toJson",value:function(){return this._params}},{key:"eventType",get:function(){return this._eventType}}]),e}(((n=n(111))&&n.__esModule?n:{default:n}).default),e.default=n},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.constructForensiqJsPixel=function(t,e,n,i){var u=a.addsAppNameBundleToParams(e.manifest).appBundle;t={org:"aNXEbtGdhFkK5O3LJlhE",p:t.callChain.callChainLinks[0].supplyTagId,rt:"display",fmt:"video",s1:1,s:o.getCb(),cmp:t.callChain.callChainLinks[0].demandTagId,rd:e.manifest.domain,app:u,c1:e.manifest.aid,adw:n.width,adh:n.height,c2:i,c3:e.locationInfo.domain_match},e.manifest.hasOwnProperty("passthru")&&e.manifest.passthru&&e.manifest.passthru.hasOwnProperty("did")&&(t.gid=e.manifest.passthru.did,t.aid=e.manifest.passthru.did);var _=[];return(0,r.default)(t,function(t,e){_.push(e+"="+encodeURIComponent(t))}),s+_.join("&")};var r=(t=n(2))&&t.__esModule?t:{default:t},o=i(t=n(1)),a=i(n=n(40)),s="https://new.fqtag.com/implement.js?"},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.constructProtectedMediaJsPixel=function(t,e,n,i){n=s,n=e.manifest.hasOwnProperty("env")&&u.hasOwnProperty(e.manifest.env)?n.replace("ENV",u[e.manifest.env]):n.replace("ENV",u.desktop);var _=o.addsAppNameBundleToParams(e.manifest),l=_.appBundle;t={l1:t.callChain.callChainLinks[0].supplyTagId,l2:t.callChain.callChainLinks[0].demandTagId,l3:e.manifest.aid,l4:l||e.locationInfo.domain_match,l5:_.appName,l6:i,utid:e.uuid,ref:e.locationInfo.document__referrer,pub_app:l,pub_domain:e.locationInfo.domain_match,cb:r.getCb()},e.manifest.hasOwnProperty("passthru")&&e.manifest.passthru&&e.manifest.passthru.hasOwnProperty("did")&&(t.uid=e.manifest.passthru.did);var d=[];return(0,a.default)(t,function(t,e){d.push(e+"="+encodeURIComponent(t))}),n+d.join("&")};var r=i(n(1)),o=i(n(40)),a=(n=n(2))&&n.__esModule?n:{default:n},s="https://js.ad-score.com/score.min.js?pid=1000426#tid=SpringServe_JS_ENV&",u={desktop:"DT",in_app:"IA",mobile_web:"MW"}}]);